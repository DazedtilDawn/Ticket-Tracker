[DEBUG_HTML] WebSocket blocked - Call stack: Error
    at new value (https://32734c3e-d439-4087-ae79-1e0d888e5505-00-1bqv5wxyb7jt8.riker.replit.dev/wishlist:68:76)
    at setupWebSocket (https://32734c3e-d439-4087-ae79-1e0d888e5505-00-1bqv5wxyb7jt8.riker.replit.dev/@vite/client:536:19)
    at https://32734c3e-d439-4087-ae79-1e0d888e5505-00-1bqv5wxyb7jt8.riker.replit.dev/@vite/client:531:12
[DEBUG_HTML] Found WebSocket with token parameter
[DEBUG] Main.tsx: Relying on the HTML WebSocket override.
Connecting to WebSocket at: wss://32734c3e-d439-4087-ae79-1e0d888e5505-00-1bqv5wxyb7jt8.riker.replit.dev/ws
Using global WebSocket constructor (with HTML overrides)
Checking authentication status, auto-login: true
Setting up WebSocket listeners for wishlist goal updates
Connecting to WebSocket at: wss://32734c3e-d439-4087-ae79-1e0d888e5505-00-1bqv5wxyb7jt8.riker.replit.dev/ws
Using global WebSocket constructor (with HTML overrides)
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:earn
WebSocket connection established
WebSocket message received: 
Object {event: "server:welcome", data: {…}}
WebSocket message details - Event: server:welcome 
Object {timestamp: "2025-05-18T15:22:57.328Z", eventType: "server:welcome", fullData: {…}, rawMessage: "{"event":"server:welcome","data":{"message":"Welcome to the TicketTracker realtime…"}
WebSocket connection established
WebSocket message received: 
Object {event: "server:welcome", data: {…}}
WebSocket message details - Event: server:welcome 
Object {timestamp: "2025-05-18T15:22:57.556Z", eventType: "server:welcome", fullData: {…}, rawMessage: "{"event":"server:welcome","data":{"message":"Welcome to the TicketTracker realtime…"}
WebSocket message received: 
Object {event: "goal:new", data: {…}}
WebSocket message details - Event: goal:new 
Object {timestamp: "2025-05-18T15:23:03.081Z", eventType: "goal:new", fullData: {…}, rawMessage: "{"event":"goal:new","data":{"id":7,"user_id":1,"product_id":10,"tickets_saved":0,"is…"}
WebSocket message received: 
Object {event: "goal:new", data: {…}}
WebSocket message details - Event: goal:new 
Object {timestamp: "2025-05-18T15:23:03.084Z", eventType: "goal:new", fullData: {…}, rawMessage: "{"event":"goal:new","data":{"id":7,"user_id":1,"product_id":10,"tickets_saved":0,"is…"}
[WHEEL_DEBUG] Setting up WebSocket listeners for bonus spin events
Subscribing to WebSocket channel: bonus_spin:result
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: 
Attempting to load family users...
[Bonus] polling /unspun for id: 4
Setting up WebSocket listeners for transaction events
Subscribing to WebSocket channel: 
Subscribing to WebSocket channel: transaction:
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:deduct
Subscribing to WebSocket channel: transaction:reward
Subscribing to WebSocket channel: transaction:delete
Successfully loaded family users: 
(5) [{…}, {…}, {…}, {…}, {…}]
Error checking for unspun bonus: 
Error {}

Unexpected error checking for unspun bonus: 
Error {}

Setting up WebSocket listeners in TransactionsTable component
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:delete
Loaded dashboard stats: 
Object {balance: 14, activeGoal: {…}, chores: Array(3), daily_bonus: {…}}
Setting up WebSocket listeners in TransactionsTable component
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:delete
Setting up WebSocket listeners in TransactionsTable component
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:delete
[Bonus] polling /unspun for id: 5
Error checking for unspun bonus: 
Error {}

Unexpected error checking for unspun bonus: 
Error {}

Loaded dashboard stats: 
Object {balance: 0, activeGoal: {…}, chores: Array(3), daily_bonus: {…}}
Setting up WebSocket listeners in TransactionsTable component
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:delete
Setting up WebSocket listeners in TransactionsTable component
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:delete
[Bonus] polling /unspun for id: 4
Error checking for unspun bonus: 
Error {}

Unexpected error checking for unspun bonus: 
Error {}

Loaded dashboard stats: 
Object {balance: 14, activeGoal: {…}, chores: Array(3), daily_bonus: {…}}
WebSocket message received: 
Object {event: "goal:update", data: {…}}
WebSocket message details - Event: goal:update 
Object {timestamp: "2025-05-18T15:23:14.923Z", eventType: "goal:update", fullData: {…}, rawMessage: "{"event":"goal:update","data":{"id":6,"user_id":4,"product_id":11,"tickets_saved":0,…"}
Caught all-events subscriber for "goal:update"
[WHEEL_DEBUG] Received any WebSocket event: goal:update
Caught all-events subscriber for "goal:update"
WebSocket message received: 
Object {event: "goal:update", data: {…}}
WebSocket message details - Event: goal:update 
Object {timestamp: "2025-05-18T15:23:14.927Z", eventType: "goal:update", fullData: {…}, rawMessage: "{"event":"goal:update","data":{"id":6,"user_id":4,"product_id":11,"tickets_saved":0,…"}
Caught all-events subscriber for "goal:update"
[WHEEL_DEBUG] Received any WebSocket event: goal:update
Caught all-events subscriber for "goal:update"
Dashboard WebSocket subscriptions cleaned up
Setting up WebSocket listeners for wishlist goal updates
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:earn
WebSocket message received: 
Object {event: "goal:new", data: {…}}
WebSocket message details - Event: goal:new 
Object {timestamp: "2025-05-18T15:23:19.648Z", eventType: "goal:new", fullData: {…}, rawMessage: "{"event":"goal:new","data":{"id":8,"user_id":4,"product_id":11,"tickets_saved":0,"is…"}
WebSocket message received: 
Object {event: "goal:new", data: {…}}
WebSocket message details - Event: goal:new 
Object {timestamp: "2025-05-18T15:23:19.648Z", eventType: "goal:new", fullData: {…}, rawMessage: "{"event":"goal:new","data":{"id":8,"user_id":4,"product_id":11,"tickets_saved":0,"is…"}
WebSocket message received: 
Object {event: "goal:update", data: {…}}
WebSocket message details - Event: goal:update 
Object {timestamp: "2025-05-18T15:23:25.382Z", eventType: "goal:update", fullData: {…}, rawMessage: "{"event":"goal:update","data":{"id":6,"user_id":4,"product_id":11,"tickets_saved":0,…"}
WebSocket message received: 
Object {event: "goal:update", data: {…}}
WebSocket message details - Event: goal:update 
Object {timestamp: "2025-05-18T15:23:25.382Z", eventType: "goal:update", fullData: {…}, rawMessage: "{"event":"goal:update","data":{"id":6,"user_id":4,"product_id":11,"tickets_saved":0,…"}
[WHEEL_DEBUG] Setting up WebSocket listeners for bonus spin events
Subscribing to WebSocket channel: bonus_spin:result
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: 
Setting up WebSocket listeners in TransactionsTable component
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:delete
Attempting to load family users...
[Bonus] polling /unspun for id: 4
Loaded dashboard stats: 
Object {balance: 14, activeGoal: {…}, chores: Array(3), daily_bonus: {…}}
Setting up WebSocket listeners for transaction events
Subscribing to WebSocket channel: 
Subscribing to WebSocket channel: transaction:
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:deduct
Subscribing to WebSocket channel: transaction:reward
Subscribing to WebSocket channel: transaction:delete
Successfully loaded family users: 
(5) [{…}, {…}, {…}, {…}, {…}]
Error checking for unspun bonus: 
Error {}

Unexpected error checking for unspun bonus: 
Error {}

Setting up WebSocket listeners in TransactionsTable component
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:delete
Setting up WebSocket listeners in TransactionsTable component
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:delete
[Bonus] polling /unspun for id: 5
Error checking for unspun bonus: 
Error {}

Unexpected error checking for unspun bonus: 
Error {}

Loaded dashboard stats: 
Object {balance: 0, activeGoal: {…}, chores: Array(3), daily_bonus: {…}}
Setting up WebSocket listeners in TransactionsTable component
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:delete
Setting up WebSocket listeners in TransactionsTable component
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:delete
[Bonus] polling /unspun for id: 5
Error checking for unspun bonus: 
Error {}

Unexpected error checking for unspun bonus: 
Error {}

Setting up WebSocket listeners in TransactionsTable component
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:delete
Setting up WebSocket listeners in TransactionsTable component
Subscribing to WebSocket channel: transaction:earn
Subscribing to WebSocket channel: transaction:spend
Subscribing to WebSocket channel: transaction:delete
[Bonus] polling /unspun for id: 4
Error checking for unspun bonus: 
Error {}

Unexpected error checking for unspun bonus: 
Error {}

Loaded dashboard stats: 
Object {balance: 14, activeGoal: {…}, chores: Array(3), daily_bonus: {…}}
WebSocket message received: 
Object {event: "transaction:delete", data: {…}}
WebSocket message details - Event: transaction:delete 
Object {timestamp: "2025-05-18T15:23:45.763Z", eventType: "transaction:delete", fullData: {…}, rawMessage: "{"event":"transaction:delete","data":{"transaction_id":135,"user_id":4,"balance":12,"g…"}
Caught all-events subscriber for "transaction:delete"
[WHEEL_DEBUG] Received any WebSocket event: transaction:delete
Caught all-events subscriber for "transaction:delete"
Event match for "transaction:" - received "transaction:delete"
Received any transaction event - general handler: 
Object {event: "transaction:delete", data: {…}}
General transaction handler - Current user ID: 4, transaction for user ID: 4
Transaction is for current user, showing toast and updating UI
Updating balance directly in the cache: 12
Invalidating and refreshing ALL transaction and stats queries
Event match for "transaction:delete" - received "transaction:delete"
Received transaction:delete event: 
Object {event: "transaction:delete", data: {…}}
Transaction delete - Current user ID: 4, affected user ID: 4
Transaction delete is for current user, updating UI with new balance and goal data
Updating goal data in stats cache: 
Object {id: 6, user_id: 4, product_id: 11, tickets_saved: 12, is_active: true, …}
Transaction:delete event - forcing complete data refresh cycle
Event match for "transaction:delete" - received "transaction:delete"
TransactionsTable received delete event: 
Object {event: "transaction:delete", data: {…}}
TransactionsTable: transaction:delete event - forcing complete refresh
Loaded dashboard stats: 
Object {balance: 12, activeGoal: {…}, chores: Array(3), daily_bonus: {…}}
WebSocket message received: 
Object {event: "transaction:delete", data: {…}}
WebSocket message details - Event: transaction:delete 
Object {timestamp: "2025-05-18T15:23:45.773Z", eventType: "transaction:delete", fullData: {…}, rawMessage: "{"event":"transaction:delete","data":{"transaction_id":135,"user_id":4,"balance":12,"g…"}
Caught all-events subscriber for "transaction:delete"
[WHEEL_DEBUG] Received any WebSocket event: transaction:delete
Caught all-events subscriber for "transaction:delete"
Event match for "transaction:" - received "transaction:delete"
Received any transaction event - general handler: 
Object {event: "transaction:delete", data: {…}}
General transaction handler - Current user ID: 4, transaction for user ID: 4
Transaction is for current user, showing toast and updating UI
Updating balance directly in the cache: 12
Invalidating and refreshing ALL transaction and stats queries
Event match for "transaction:delete" - received "transaction:delete"
Received transaction:delete event: 
Object {event: "transaction:delete", data: {…}}
Transaction delete - Current user ID: 4, affected user ID: 4
Transaction delete is for current user, updating UI with new balance and goal data
Updating goal data in stats cache: 
Object {id: 6, user_id: 4, product_id: 11, tickets_saved: 12, is_active: true, …}
Transaction:delete event - forcing complete data refresh cycle
Event match for "transaction:delete" - received "transaction:delete"
TransactionsTable received delete event: 
Object {event: "transaction:delete", data: {…}}
TransactionsTable: transaction:delete event - forcing complete refresh
Forcing immediate refetch after transaction deletion
Executing delayed refetch for transaction:delete event
TransactionsTable: executing delayed refetch after transaction:delete
Executing delayed refetch for transaction:delete event
TransactionsTable: executing delayed refetch after transaction:delete
TransactionsTable: executing final delayed refetch after transaction:delete
WebSocket message received: 
Object {event: "transaction:delete", data: {…}}
WebSocket message details - Event: transaction:delete 
Object {timestamp: "2025-05-18T15:23:48.429Z", eventType: "transaction:delete", fullData: {…}, rawMessage: "{"event":"transaction:delete","data":{"transaction_id":134,"user_id":4,"balance":5,"go…"}
Caught all-events subscriber for "transaction:delete"
[WHEEL_DEBUG] Received any WebSocket event: transaction:delete
Caught all-events subscriber for "transaction:delete"
Event match for "transaction:" - received "transaction:delete"
Received any transaction event - general handler: 
Object {event: "transaction:delete", data: {…}}
General transaction handler - Current user ID: 4, transaction for user ID: 4
Transaction is for current user, showing toast and updating UI
Updating balance directly in the cache: 5
Invalidating and refreshing ALL transaction and stats queries
Event match for "transaction:delete" - received "transaction:delete"
Received transaction:delete event: 
Object {event: "transaction:delete", data: {…}}
Transaction delete - Current user ID: 4, affected user ID: 4
Transaction delete is for current user, updating UI with new balance and goal data
Updating goal data in stats cache: 
Object {id: 6, user_id: 4, product_id: 11, tickets_saved: 5, is_active: true, …}