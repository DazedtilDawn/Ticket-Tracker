/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e,t,r={135:(e,t,r)=>{var n=r(9023),o=r(2203).Stream,i=r(9366);function a(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}e.exports=a,n.inherits(a,o),a.create=function(e){var t=new this;for(var r in e=e||{})t[r]=e[r];return t},a.isStreamLike=function(e){return"function"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&!Buffer.isBuffer(e)},a.prototype.append=function(e){if(a.isStreamLike(e)){if(!(e instanceof i)){var t=i.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=t}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this},a.prototype.pipe=function(e,t){return o.prototype.pipe.call(this,e,t),this.resume(),e},a.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop)this._pendingNext=!0;else{this._insideLoop=!0;try{do{this._pendingNext=!1,this._realGetNext()}while(this._pendingNext)}finally{this._insideLoop=!1}}},a.prototype._realGetNext=function(){var e=this._streams.shift();void 0!==e?"function"==typeof e?e(function(e){a.isStreamLike(e)&&(e.on("data",this._checkDataSize.bind(this)),this._handleErrors(e)),this._pipeNext(e)}.bind(this)):this._pipeNext(e):this.end()},a.prototype._pipeNext=function(e){if(this._currentStream=e,a.isStreamLike(e))return e.on("end",this._getNext.bind(this)),void e.pipe(this,{end:!1});var t=e;this.write(t),this._getNext()},a.prototype._handleErrors=function(e){var t=this;e.on("error",(function(e){t._emitError(e)}))},a.prototype.write=function(e){this.emit("data",e)},a.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},a.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},a.prototype.end=function(){this._reset(),this.emit("end")},a.prototype.destroy=function(){this._reset(),this.emit("close")},a.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},a.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(e))}},a.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach((function(t){t.dataSize&&(e.dataSize+=t.dataSize)})),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},a.prototype._emitError=function(e){this._reset(),this.emit("error",e)}},181:e=>{"use strict";e.exports=require("buffer")},543:(e,t,r)=>{"use strict";const n=r(4434),o=r(8611),{Duplex:i}=r(2203),{createHash:a}=r(6982),s=r(3238),c=r(4242),u=r(3458),l=r(4827),{GUID:p,kWebSocket:h}=r(5841),f=/^[+/0-9A-Za-z]{22}==$/;function d(e){e._state=2,e.emit("close")}function m(){this.destroy()}function v(e,t,r,n){r=r||o.STATUS_CODES[t],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${o.STATUS_CODES[t]}\r\n`+Object.keys(n).map((e=>`${e}: ${n[e]}`)).join("\r\n")+"\r\n\r\n"+r)}function g(e,t,r,n,o){if(e.listenerCount("wsClientError")){const n=new Error(o);Error.captureStackTrace(n,g),e.emit("wsClientError",n,r,t)}else v(r,n,o)}e.exports=class extends n{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:l,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=o.createServer(((e,t)=>{const r=o.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(d,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(d,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{d(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",m);const o=e.headers["sec-websocket-key"],i=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if("GET"!==e.method)return void g(this,e,t,405,"Invalid HTTP method");if(void 0===i||"websocket"!==i.toLowerCase())return void g(this,e,t,400,"Invalid Upgrade header");if(void 0===o||!f.test(o))return void g(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");if(8!==a&&13!==a)return void g(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");if(!this.shouldHandle(e))return void v(t,400);const l=e.headers["sec-websocket-protocol"];let p=new Set;if(void 0!==l)try{p=u.parse(l)}catch(r){return void g(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const h=e.headers["sec-websocket-extensions"],d={};if(this.options.perMessageDeflate&&void 0!==h){const r=new c(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=s.parse(h);e[c.extensionName]&&(r.accept(e[c.extensionName]),d[c.extensionName]=r)}catch(r){return void g(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const i={origin:e.headers[8===a?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(i,((i,a,s,c)=>{if(!i)return v(t,a||401,s,c);this.completeUpgrade(d,o,p,e,t,r,n)}));if(!this.options.verifyClient(i))return v(t,401)}this.completeUpgrade(d,o,p,e,t,r,n)}completeUpgrade(e,t,r,n,o,i,u){if(!o.readable||!o.writable)return o.destroy();if(o[h])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return v(o,503);const l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${a("sha1").update(t+p).digest("base64")}`],f=new this.options.WebSocket(null,void 0,this.options);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,n):r.values().next().value;e&&(l.push(`Sec-WebSocket-Protocol: ${e}`),f._protocol=e)}if(e[c.extensionName]){const t=e[c.extensionName].params,r=s.format({[c.extensionName]:[t]});l.push(`Sec-WebSocket-Extensions: ${r}`),f._extensions=e}this.emit("headers",l,n),o.write(l.concat("\r\n").join("\r\n")),o.removeListener("error",m),f.setSocket(o,i,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(f),f.on("close",(()=>{this.clients.delete(f),this._shouldEmitClose&&!this.clients.size&&process.nextTick(d,this)}))),u(f,n)}}},740:e=>{"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},857:e=>{"use strict";e.exports=require("os")},910:e=>{"use strict";e.exports=(e,t=process.argv)=>{const r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),o=t.indexOf("--");return-1!==n&&(-1===o||n<o)}},1339:(e,t,r)=>{"use strict";const{Writable:n}=r(2203),o=r(4242),{BINARY_TYPES:i,EMPTY_BUFFER:a,kStatusCode:s,kWebSocket:c}=r(5841),{concat:u,toArrayBuffer:l,unmask:p}=r(6573),{isValidStatusCode:h,isValidUTF8:f}=r(8761),d=Buffer[Symbol.species];e.exports=class extends n{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||i[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=new d(t.buffer,t.byteOffset+e,t.length-e),new d(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],n=t.length-e;e>=r.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),n),this._buffers[0]=new d(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0);return t}startLoop(e){this._loop=!0;do{switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:return void(this._loop=!1)}}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2)return void(this._loop=!1);const t=this.consume(2);if(48&t[0])return void e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));const r=!(64&~t[0]);if(!r||this._extensions[o.extensionName]){if(this._fin=!(128&~t[0]),this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(r)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=r}else{if(!(this._opcode>7&&this._opcode<11))return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(r)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=!(128&~t[1]),this._isServer){if(!this._masked)return void e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}else e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}getPayloadLength16(e){this._bufferedBytes<2?this._loop=!1:(this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e))}getPayloadLength64(e){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),r=t.readUInt32BE(0);r>Math.pow(2,21)-1?e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=r*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e))}haveLength(e){this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)?e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")):this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=a;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&p(t,this._mask)}if(this._opcode>7)this.controlMessage(t,e);else{if(this._compressed)return this._state=5,void this.decompress(t,e);t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}}decompress(e,t){this._extensions[o.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0){const e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");return void t(e)}this._fragments.push(r)}this.dataMessage(t),0===this._state&&this.startLoop(t)}))}dataMessage(e){if(!this._fin)return void(this._state=0);const t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let n;n="nodebuffer"===this._binaryType?u(r,t):"arraybuffer"===this._binaryType?l(u(r,t)):"blob"===this._binaryType?new Blob(r):r,this._allowSynchronousEvents?(this.emit("message",n,!0),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",n,!0),this._state=0,this.startLoop(e)})))}else{const n=u(r,t);if(!this._skipUTF8Validation&&!f(n)){const t=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void e(t)}5===this._state||this._allowSynchronousEvents?(this.emit("message",n,!1),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",n,!1),this._state=0,this.startLoop(e)})))}}controlMessage(e,t){if(8!==this._opcode)this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate((()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)})));else{if(0===e.length)this._loop=!1,this.emit("conclude",1005,a),this.end();else{const r=e.readUInt16BE(0);if(!h(r)){const e=this.createError(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");return void t(e)}const n=new d(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!f(n)){const e=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void t(e)}this._loop=!1,this.emit("conclude",r,n),this.end()}this._state=0}}createError(e,t,r,n,o){this._loop=!1,this._errored=!0;const i=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,this.createError),i.code=o,i[s]=n,i}}},1407:(e,t,r)=>{var n=r(5276),o=r(4287),i=r(5965);function a(e,t){return e<t?-1:e>t?1:0}e.exports=function(e,t,r,a){var s=o(e,r);return n(e,t,s,(function r(o,i){o?a(o,i):(s.index++,s.index<(s.keyedList||e).length?n(e,t,s,r):a(null,s.results))})),i.bind(s,a)},e.exports.ascending=a,e.exports.descending=function(e,t){return-1*a(e,t)}},1569:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(7617):e.exports=r(7353)},2018:e=>{"use strict";e.exports=require("tty")},2087:e=>{"use strict";e.exports=JSON.parse('{"application/1d-interleaved-parityfec":{"source":"iana"},"application/3gpdash-qoe-report+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/3gpp-ims+xml":{"source":"iana","compressible":true},"application/3gpphal+json":{"source":"iana","compressible":true},"application/3gpphalforms+json":{"source":"iana","compressible":true},"application/a2l":{"source":"iana"},"application/ace+cbor":{"source":"iana"},"application/activemessage":{"source":"iana"},"application/activity+json":{"source":"iana","compressible":true},"application/alto-costmap+json":{"source":"iana","compressible":true},"application/alto-costmapfilter+json":{"source":"iana","compressible":true},"application/alto-directory+json":{"source":"iana","compressible":true},"application/alto-endpointcost+json":{"source":"iana","compressible":true},"application/alto-endpointcostparams+json":{"source":"iana","compressible":true},"application/alto-endpointprop+json":{"source":"iana","compressible":true},"application/alto-endpointpropparams+json":{"source":"iana","compressible":true},"application/alto-error+json":{"source":"iana","compressible":true},"application/alto-networkmap+json":{"source":"iana","compressible":true},"application/alto-networkmapfilter+json":{"source":"iana","compressible":true},"application/alto-updatestreamcontrol+json":{"source":"iana","compressible":true},"application/alto-updatestreamparams+json":{"source":"iana","compressible":true},"application/aml":{"source":"iana"},"application/andrew-inset":{"source":"iana","extensions":["ez"]},"application/applefile":{"source":"iana"},"application/applixware":{"source":"apache","extensions":["aw"]},"application/at+jwt":{"source":"iana"},"application/atf":{"source":"iana"},"application/atfx":{"source":"iana"},"application/atom+xml":{"source":"iana","compressible":true,"extensions":["atom"]},"application/atomcat+xml":{"source":"iana","compressible":true,"extensions":["atomcat"]},"application/atomdeleted+xml":{"source":"iana","compressible":true,"extensions":["atomdeleted"]},"application/atomicmail":{"source":"iana"},"application/atomsvc+xml":{"source":"iana","compressible":true,"extensions":["atomsvc"]},"application/atsc-dwd+xml":{"source":"iana","compressible":true,"extensions":["dwd"]},"application/atsc-dynamic-event-message":{"source":"iana"},"application/atsc-held+xml":{"source":"iana","compressible":true,"extensions":["held"]},"application/atsc-rdt+json":{"source":"iana","compressible":true},"application/atsc-rsat+xml":{"source":"iana","compressible":true,"extensions":["rsat"]},"application/atxml":{"source":"iana"},"application/auth-policy+xml":{"source":"iana","compressible":true},"application/bacnet-xdd+zip":{"source":"iana","compressible":false},"application/batch-smtp":{"source":"iana"},"application/bdoc":{"compressible":false,"extensions":["bdoc"]},"application/beep+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/calendar+json":{"source":"iana","compressible":true},"application/calendar+xml":{"source":"iana","compressible":true,"extensions":["xcs"]},"application/call-completion":{"source":"iana"},"application/cals-1840":{"source":"iana"},"application/captive+json":{"source":"iana","compressible":true},"application/cbor":{"source":"iana"},"application/cbor-seq":{"source":"iana"},"application/cccex":{"source":"iana"},"application/ccmp+xml":{"source":"iana","compressible":true},"application/ccxml+xml":{"source":"iana","compressible":true,"extensions":["ccxml"]},"application/cdfx+xml":{"source":"iana","compressible":true,"extensions":["cdfx"]},"application/cdmi-capability":{"source":"iana","extensions":["cdmia"]},"application/cdmi-container":{"source":"iana","extensions":["cdmic"]},"application/cdmi-domain":{"source":"iana","extensions":["cdmid"]},"application/cdmi-object":{"source":"iana","extensions":["cdmio"]},"application/cdmi-queue":{"source":"iana","extensions":["cdmiq"]},"application/cdni":{"source":"iana"},"application/cea":{"source":"iana"},"application/cea-2018+xml":{"source":"iana","compressible":true},"application/cellml+xml":{"source":"iana","compressible":true},"application/cfw":{"source":"iana"},"application/city+json":{"source":"iana","compressible":true},"application/clr":{"source":"iana"},"application/clue+xml":{"source":"iana","compressible":true},"application/clue_info+xml":{"source":"iana","compressible":true},"application/cms":{"source":"iana"},"application/cnrp+xml":{"source":"iana","compressible":true},"application/coap-group+json":{"source":"iana","compressible":true},"application/coap-payload":{"source":"iana"},"application/commonground":{"source":"iana"},"application/conference-info+xml":{"source":"iana","compressible":true},"application/cose":{"source":"iana"},"application/cose-key":{"source":"iana"},"application/cose-key-set":{"source":"iana"},"application/cpl+xml":{"source":"iana","compressible":true,"extensions":["cpl"]},"application/csrattrs":{"source":"iana"},"application/csta+xml":{"source":"iana","compressible":true},"application/cstadata+xml":{"source":"iana","compressible":true},"application/csvm+json":{"source":"iana","compressible":true},"application/cu-seeme":{"source":"apache","extensions":["cu"]},"application/cwt":{"source":"iana"},"application/cybercash":{"source":"iana"},"application/dart":{"compressible":true},"application/dash+xml":{"source":"iana","compressible":true,"extensions":["mpd"]},"application/dash-patch+xml":{"source":"iana","compressible":true,"extensions":["mpp"]},"application/dashdelta":{"source":"iana"},"application/davmount+xml":{"source":"iana","compressible":true,"extensions":["davmount"]},"application/dca-rft":{"source":"iana"},"application/dcd":{"source":"iana"},"application/dec-dx":{"source":"iana"},"application/dialog-info+xml":{"source":"iana","compressible":true},"application/dicom":{"source":"iana"},"application/dicom+json":{"source":"iana","compressible":true},"application/dicom+xml":{"source":"iana","compressible":true},"application/dii":{"source":"iana"},"application/dit":{"source":"iana"},"application/dns":{"source":"iana"},"application/dns+json":{"source":"iana","compressible":true},"application/dns-message":{"source":"iana"},"application/docbook+xml":{"source":"apache","compressible":true,"extensions":["dbk"]},"application/dots+cbor":{"source":"iana"},"application/dskpp+xml":{"source":"iana","compressible":true},"application/dssc+der":{"source":"iana","extensions":["dssc"]},"application/dssc+xml":{"source":"iana","compressible":true,"extensions":["xdssc"]},"application/dvcs":{"source":"iana"},"application/ecmascript":{"source":"iana","compressible":true,"extensions":["es","ecma"]},"application/edi-consent":{"source":"iana"},"application/edi-x12":{"source":"iana","compressible":false},"application/edifact":{"source":"iana","compressible":false},"application/efi":{"source":"iana"},"application/elm+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/elm+xml":{"source":"iana","compressible":true},"application/emergencycalldata.cap+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/emergencycalldata.comment+xml":{"source":"iana","compressible":true},"application/emergencycalldata.control+xml":{"source":"iana","compressible":true},"application/emergencycalldata.deviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.ecall.msd":{"source":"iana"},"application/emergencycalldata.providerinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.serviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.subscriberinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.veds+xml":{"source":"iana","compressible":true},"application/emma+xml":{"source":"iana","compressible":true,"extensions":["emma"]},"application/emotionml+xml":{"source":"iana","compressible":true,"extensions":["emotionml"]},"application/encaprtp":{"source":"iana"},"application/epp+xml":{"source":"iana","compressible":true},"application/epub+zip":{"source":"iana","compressible":false,"extensions":["epub"]},"application/eshop":{"source":"iana"},"application/exi":{"source":"iana","extensions":["exi"]},"application/expect-ct-report+json":{"source":"iana","compressible":true},"application/express":{"source":"iana","extensions":["exp"]},"application/fastinfoset":{"source":"iana"},"application/fastsoap":{"source":"iana"},"application/fdt+xml":{"source":"iana","compressible":true,"extensions":["fdt"]},"application/fhir+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/fhir+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/fido.trusted-apps+json":{"compressible":true},"application/fits":{"source":"iana"},"application/flexfec":{"source":"iana"},"application/font-sfnt":{"source":"iana"},"application/font-tdpfr":{"source":"iana","extensions":["pfr"]},"application/font-woff":{"source":"iana","compressible":false},"application/framework-attributes+xml":{"source":"iana","compressible":true},"application/geo+json":{"source":"iana","compressible":true,"extensions":["geojson"]},"application/geo+json-seq":{"source":"iana"},"application/geopackage+sqlite3":{"source":"iana"},"application/geoxacml+xml":{"source":"iana","compressible":true},"application/gltf-buffer":{"source":"iana"},"application/gml+xml":{"source":"iana","compressible":true,"extensions":["gml"]},"application/gpx+xml":{"source":"apache","compressible":true,"extensions":["gpx"]},"application/gxf":{"source":"apache","extensions":["gxf"]},"application/gzip":{"source":"iana","compressible":false,"extensions":["gz"]},"application/h224":{"source":"iana"},"application/held+xml":{"source":"iana","compressible":true},"application/hjson":{"extensions":["hjson"]},"application/http":{"source":"iana"},"application/hyperstudio":{"source":"iana","extensions":["stk"]},"application/ibe-key-request+xml":{"source":"iana","compressible":true},"application/ibe-pkg-reply+xml":{"source":"iana","compressible":true},"application/ibe-pp-data":{"source":"iana"},"application/iges":{"source":"iana"},"application/im-iscomposing+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/index":{"source":"iana"},"application/index.cmd":{"source":"iana"},"application/index.obj":{"source":"iana"},"application/index.response":{"source":"iana"},"application/index.vnd":{"source":"iana"},"application/inkml+xml":{"source":"iana","compressible":true,"extensions":["ink","inkml"]},"application/iotp":{"source":"iana"},"application/ipfix":{"source":"iana","extensions":["ipfix"]},"application/ipp":{"source":"iana"},"application/isup":{"source":"iana"},"application/its+xml":{"source":"iana","compressible":true,"extensions":["its"]},"application/java-archive":{"source":"apache","compressible":false,"extensions":["jar","war","ear"]},"application/java-serialized-object":{"source":"apache","compressible":false,"extensions":["ser"]},"application/java-vm":{"source":"apache","compressible":false,"extensions":["class"]},"application/javascript":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["js","mjs"]},"application/jf2feed+json":{"source":"iana","compressible":true},"application/jose":{"source":"iana"},"application/jose+json":{"source":"iana","compressible":true},"application/jrd+json":{"source":"iana","compressible":true},"application/jscalendar+json":{"source":"iana","compressible":true},"application/json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["json","map"]},"application/json-patch+json":{"source":"iana","compressible":true},"application/json-seq":{"source":"iana"},"application/json5":{"extensions":["json5"]},"application/jsonml+json":{"source":"apache","compressible":true,"extensions":["jsonml"]},"application/jwk+json":{"source":"iana","compressible":true},"application/jwk-set+json":{"source":"iana","compressible":true},"application/jwt":{"source":"iana"},"application/kpml-request+xml":{"source":"iana","compressible":true},"application/kpml-response+xml":{"source":"iana","compressible":true},"application/ld+json":{"source":"iana","compressible":true,"extensions":["jsonld"]},"application/lgr+xml":{"source":"iana","compressible":true,"extensions":["lgr"]},"application/link-format":{"source":"iana"},"application/load-control+xml":{"source":"iana","compressible":true},"application/lost+xml":{"source":"iana","compressible":true,"extensions":["lostxml"]},"application/lostsync+xml":{"source":"iana","compressible":true},"application/lpf+zip":{"source":"iana","compressible":false},"application/lxf":{"source":"iana"},"application/mac-binhex40":{"source":"iana","extensions":["hqx"]},"application/mac-compactpro":{"source":"apache","extensions":["cpt"]},"application/macwriteii":{"source":"iana"},"application/mads+xml":{"source":"iana","compressible":true,"extensions":["mads"]},"application/manifest+json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["webmanifest"]},"application/marc":{"source":"iana","extensions":["mrc"]},"application/marcxml+xml":{"source":"iana","compressible":true,"extensions":["mrcx"]},"application/mathematica":{"source":"iana","extensions":["ma","nb","mb"]},"application/mathml+xml":{"source":"iana","compressible":true,"extensions":["mathml"]},"application/mathml-content+xml":{"source":"iana","compressible":true},"application/mathml-presentation+xml":{"source":"iana","compressible":true},"application/mbms-associated-procedure-description+xml":{"source":"iana","compressible":true},"application/mbms-deregister+xml":{"source":"iana","compressible":true},"application/mbms-envelope+xml":{"source":"iana","compressible":true},"application/mbms-msk+xml":{"source":"iana","compressible":true},"application/mbms-msk-response+xml":{"source":"iana","compressible":true},"application/mbms-protection-description+xml":{"source":"iana","compressible":true},"application/mbms-reception-report+xml":{"source":"iana","compressible":true},"application/mbms-register+xml":{"source":"iana","compressible":true},"application/mbms-register-response+xml":{"source":"iana","compressible":true},"application/mbms-schedule+xml":{"source":"iana","compressible":true},"application/mbms-user-service-description+xml":{"source":"iana","compressible":true},"application/mbox":{"source":"iana","extensions":["mbox"]},"application/media-policy-dataset+xml":{"source":"iana","compressible":true,"extensions":["mpf"]},"application/media_control+xml":{"source":"iana","compressible":true},"application/mediaservercontrol+xml":{"source":"iana","compressible":true,"extensions":["mscml"]},"application/merge-patch+json":{"source":"iana","compressible":true},"application/metalink+xml":{"source":"apache","compressible":true,"extensions":["metalink"]},"application/metalink4+xml":{"source":"iana","compressible":true,"extensions":["meta4"]},"application/mets+xml":{"source":"iana","compressible":true,"extensions":["mets"]},"application/mf4":{"source":"iana"},"application/mikey":{"source":"iana"},"application/mipc":{"source":"iana"},"application/missing-blocks+cbor-seq":{"source":"iana"},"application/mmt-aei+xml":{"source":"iana","compressible":true,"extensions":["maei"]},"application/mmt-usd+xml":{"source":"iana","compressible":true,"extensions":["musd"]},"application/mods+xml":{"source":"iana","compressible":true,"extensions":["mods"]},"application/moss-keys":{"source":"iana"},"application/moss-signature":{"source":"iana"},"application/mosskey-data":{"source":"iana"},"application/mosskey-request":{"source":"iana"},"application/mp21":{"source":"iana","extensions":["m21","mp21"]},"application/mp4":{"source":"iana","extensions":["mp4s","m4p"]},"application/mpeg4-generic":{"source":"iana"},"application/mpeg4-iod":{"source":"iana"},"application/mpeg4-iod-xmt":{"source":"iana"},"application/mrb-consumer+xml":{"source":"iana","compressible":true},"application/mrb-publish+xml":{"source":"iana","compressible":true},"application/msc-ivr+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msc-mixer+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msword":{"source":"iana","compressible":false,"extensions":["doc","dot"]},"application/mud+json":{"source":"iana","compressible":true},"application/multipart-core":{"source":"iana"},"application/mxf":{"source":"iana","extensions":["mxf"]},"application/n-quads":{"source":"iana","extensions":["nq"]},"application/n-triples":{"source":"iana","extensions":["nt"]},"application/nasdata":{"source":"iana"},"application/news-checkgroups":{"source":"iana","charset":"US-ASCII"},"application/news-groupinfo":{"source":"iana","charset":"US-ASCII"},"application/news-transmission":{"source":"iana"},"application/nlsml+xml":{"source":"iana","compressible":true},"application/node":{"source":"iana","extensions":["cjs"]},"application/nss":{"source":"iana"},"application/oauth-authz-req+jwt":{"source":"iana"},"application/oblivious-dns-message":{"source":"iana"},"application/ocsp-request":{"source":"iana"},"application/ocsp-response":{"source":"iana"},"application/octet-stream":{"source":"iana","compressible":false,"extensions":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{"source":"iana","extensions":["oda"]},"application/odm+xml":{"source":"iana","compressible":true},"application/odx":{"source":"iana"},"application/oebps-package+xml":{"source":"iana","compressible":true,"extensions":["opf"]},"application/ogg":{"source":"iana","compressible":false,"extensions":["ogx"]},"application/omdoc+xml":{"source":"apache","compressible":true,"extensions":["omdoc"]},"application/onenote":{"source":"apache","extensions":["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{"source":"iana","compressible":true},"application/oscore":{"source":"iana"},"application/oxps":{"source":"iana","extensions":["oxps"]},"application/p21":{"source":"iana"},"application/p21+zip":{"source":"iana","compressible":false},"application/p2p-overlay+xml":{"source":"iana","compressible":true,"extensions":["relo"]},"application/parityfec":{"source":"iana"},"application/passport":{"source":"iana"},"application/patch-ops-error+xml":{"source":"iana","compressible":true,"extensions":["xer"]},"application/pdf":{"source":"iana","compressible":false,"extensions":["pdf"]},"application/pdx":{"source":"iana"},"application/pem-certificate-chain":{"source":"iana"},"application/pgp-encrypted":{"source":"iana","compressible":false,"extensions":["pgp"]},"application/pgp-keys":{"source":"iana","extensions":["asc"]},"application/pgp-signature":{"source":"iana","extensions":["asc","sig"]},"application/pics-rules":{"source":"apache","extensions":["prf"]},"application/pidf+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pidf-diff+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pkcs10":{"source":"iana","extensions":["p10"]},"application/pkcs12":{"source":"iana"},"application/pkcs7-mime":{"source":"iana","extensions":["p7m","p7c"]},"application/pkcs7-signature":{"source":"iana","extensions":["p7s"]},"application/pkcs8":{"source":"iana","extensions":["p8"]},"application/pkcs8-encrypted":{"source":"iana"},"application/pkix-attr-cert":{"source":"iana","extensions":["ac"]},"application/pkix-cert":{"source":"iana","extensions":["cer"]},"application/pkix-crl":{"source":"iana","extensions":["crl"]},"application/pkix-pkipath":{"source":"iana","extensions":["pkipath"]},"application/pkixcmp":{"source":"iana","extensions":["pki"]},"application/pls+xml":{"source":"iana","compressible":true,"extensions":["pls"]},"application/poc-settings+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/postscript":{"source":"iana","compressible":true,"extensions":["ai","eps","ps"]},"application/ppsp-tracker+json":{"source":"iana","compressible":true},"application/problem+json":{"source":"iana","compressible":true},"application/problem+xml":{"source":"iana","compressible":true},"application/provenance+xml":{"source":"iana","compressible":true,"extensions":["provx"]},"application/prs.alvestrand.titrax-sheet":{"source":"iana"},"application/prs.cww":{"source":"iana","extensions":["cww"]},"application/prs.cyn":{"source":"iana","charset":"7-BIT"},"application/prs.hpub+zip":{"source":"iana","compressible":false},"application/prs.nprend":{"source":"iana"},"application/prs.plucker":{"source":"iana"},"application/prs.rdf-xml-crypt":{"source":"iana"},"application/prs.xsf+xml":{"source":"iana","compressible":true},"application/pskc+xml":{"source":"iana","compressible":true,"extensions":["pskcxml"]},"application/pvd+json":{"source":"iana","compressible":true},"application/qsig":{"source":"iana"},"application/raml+yaml":{"compressible":true,"extensions":["raml"]},"application/raptorfec":{"source":"iana"},"application/rdap+json":{"source":"iana","compressible":true},"application/rdf+xml":{"source":"iana","compressible":true,"extensions":["rdf","owl"]},"application/reginfo+xml":{"source":"iana","compressible":true,"extensions":["rif"]},"application/relax-ng-compact-syntax":{"source":"iana","extensions":["rnc"]},"application/remote-printing":{"source":"iana"},"application/reputon+json":{"source":"iana","compressible":true},"application/resource-lists+xml":{"source":"iana","compressible":true,"extensions":["rl"]},"application/resource-lists-diff+xml":{"source":"iana","compressible":true,"extensions":["rld"]},"application/rfc+xml":{"source":"iana","compressible":true},"application/riscos":{"source":"iana"},"application/rlmi+xml":{"source":"iana","compressible":true},"application/rls-services+xml":{"source":"iana","compressible":true,"extensions":["rs"]},"application/route-apd+xml":{"source":"iana","compressible":true,"extensions":["rapd"]},"application/route-s-tsid+xml":{"source":"iana","compressible":true,"extensions":["sls"]},"application/route-usd+xml":{"source":"iana","compressible":true,"extensions":["rusd"]},"application/rpki-ghostbusters":{"source":"iana","extensions":["gbr"]},"application/rpki-manifest":{"source":"iana","extensions":["mft"]},"application/rpki-publication":{"source":"iana"},"application/rpki-roa":{"source":"iana","extensions":["roa"]},"application/rpki-updown":{"source":"iana"},"application/rsd+xml":{"source":"apache","compressible":true,"extensions":["rsd"]},"application/rss+xml":{"source":"apache","compressible":true,"extensions":["rss"]},"application/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"application/rtploopback":{"source":"iana"},"application/rtx":{"source":"iana"},"application/samlassertion+xml":{"source":"iana","compressible":true},"application/samlmetadata+xml":{"source":"iana","compressible":true},"application/sarif+json":{"source":"iana","compressible":true},"application/sarif-external-properties+json":{"source":"iana","compressible":true},"application/sbe":{"source":"iana"},"application/sbml+xml":{"source":"iana","compressible":true,"extensions":["sbml"]},"application/scaip+xml":{"source":"iana","compressible":true},"application/scim+json":{"source":"iana","compressible":true},"application/scvp-cv-request":{"source":"iana","extensions":["scq"]},"application/scvp-cv-response":{"source":"iana","extensions":["scs"]},"application/scvp-vp-request":{"source":"iana","extensions":["spq"]},"application/scvp-vp-response":{"source":"iana","extensions":["spp"]},"application/sdp":{"source":"iana","extensions":["sdp"]},"application/secevent+jwt":{"source":"iana"},"application/senml+cbor":{"source":"iana"},"application/senml+json":{"source":"iana","compressible":true},"application/senml+xml":{"source":"iana","compressible":true,"extensions":["senmlx"]},"application/senml-etch+cbor":{"source":"iana"},"application/senml-etch+json":{"source":"iana","compressible":true},"application/senml-exi":{"source":"iana"},"application/sensml+cbor":{"source":"iana"},"application/sensml+json":{"source":"iana","compressible":true},"application/sensml+xml":{"source":"iana","compressible":true,"extensions":["sensmlx"]},"application/sensml-exi":{"source":"iana"},"application/sep+xml":{"source":"iana","compressible":true},"application/sep-exi":{"source":"iana"},"application/session-info":{"source":"iana"},"application/set-payment":{"source":"iana"},"application/set-payment-initiation":{"source":"iana","extensions":["setpay"]},"application/set-registration":{"source":"iana"},"application/set-registration-initiation":{"source":"iana","extensions":["setreg"]},"application/sgml":{"source":"iana"},"application/sgml-open-catalog":{"source":"iana"},"application/shf+xml":{"source":"iana","compressible":true,"extensions":["shf"]},"application/sieve":{"source":"iana","extensions":["siv","sieve"]},"application/simple-filter+xml":{"source":"iana","compressible":true},"application/simple-message-summary":{"source":"iana"},"application/simplesymbolcontainer":{"source":"iana"},"application/sipc":{"source":"iana"},"application/slate":{"source":"iana"},"application/smil":{"source":"iana"},"application/smil+xml":{"source":"iana","compressible":true,"extensions":["smi","smil"]},"application/smpte336m":{"source":"iana"},"application/soap+fastinfoset":{"source":"iana"},"application/soap+xml":{"source":"iana","compressible":true},"application/sparql-query":{"source":"iana","extensions":["rq"]},"application/sparql-results+xml":{"source":"iana","compressible":true,"extensions":["srx"]},"application/spdx+json":{"source":"iana","compressible":true},"application/spirits-event+xml":{"source":"iana","compressible":true},"application/sql":{"source":"iana"},"application/srgs":{"source":"iana","extensions":["gram"]},"application/srgs+xml":{"source":"iana","compressible":true,"extensions":["grxml"]},"application/sru+xml":{"source":"iana","compressible":true,"extensions":["sru"]},"application/ssdl+xml":{"source":"apache","compressible":true,"extensions":["ssdl"]},"application/ssml+xml":{"source":"iana","compressible":true,"extensions":["ssml"]},"application/stix+json":{"source":"iana","compressible":true},"application/swid+xml":{"source":"iana","compressible":true,"extensions":["swidtag"]},"application/tamp-apex-update":{"source":"iana"},"application/tamp-apex-update-confirm":{"source":"iana"},"application/tamp-community-update":{"source":"iana"},"application/tamp-community-update-confirm":{"source":"iana"},"application/tamp-error":{"source":"iana"},"application/tamp-sequence-adjust":{"source":"iana"},"application/tamp-sequence-adjust-confirm":{"source":"iana"},"application/tamp-status-query":{"source":"iana"},"application/tamp-status-response":{"source":"iana"},"application/tamp-update":{"source":"iana"},"application/tamp-update-confirm":{"source":"iana"},"application/tar":{"compressible":true},"application/taxii+json":{"source":"iana","compressible":true},"application/td+json":{"source":"iana","compressible":true},"application/tei+xml":{"source":"iana","compressible":true,"extensions":["tei","teicorpus"]},"application/tetra_isi":{"source":"iana"},"application/thraud+xml":{"source":"iana","compressible":true,"extensions":["tfi"]},"application/timestamp-query":{"source":"iana"},"application/timestamp-reply":{"source":"iana"},"application/timestamped-data":{"source":"iana","extensions":["tsd"]},"application/tlsrpt+gzip":{"source":"iana"},"application/tlsrpt+json":{"source":"iana","compressible":true},"application/tnauthlist":{"source":"iana"},"application/token-introspection+jwt":{"source":"iana"},"application/toml":{"compressible":true,"extensions":["toml"]},"application/trickle-ice-sdpfrag":{"source":"iana"},"application/trig":{"source":"iana","extensions":["trig"]},"application/ttml+xml":{"source":"iana","compressible":true,"extensions":["ttml"]},"application/tve-trigger":{"source":"iana"},"application/tzif":{"source":"iana"},"application/tzif-leap":{"source":"iana"},"application/ubjson":{"compressible":false,"extensions":["ubj"]},"application/ulpfec":{"source":"iana"},"application/urc-grpsheet+xml":{"source":"iana","compressible":true},"application/urc-ressheet+xml":{"source":"iana","compressible":true,"extensions":["rsheet"]},"application/urc-targetdesc+xml":{"source":"iana","compressible":true,"extensions":["td"]},"application/urc-uisocketdesc+xml":{"source":"iana","compressible":true},"application/vcard+json":{"source":"iana","compressible":true},"application/vcard+xml":{"source":"iana","compressible":true},"application/vemmi":{"source":"iana"},"application/vividence.scriptfile":{"source":"apache"},"application/vnd.1000minds.decision-model+xml":{"source":"iana","compressible":true,"extensions":["1km"]},"application/vnd.3gpp-prose+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-prose-pc3ch+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-v2x-local-service-information":{"source":"iana"},"application/vnd.3gpp.5gnas":{"source":"iana"},"application/vnd.3gpp.access-transfer-events+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.bsf+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gmop+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gtpc":{"source":"iana"},"application/vnd.3gpp.interworking-data":{"source":"iana"},"application/vnd.3gpp.lpp":{"source":"iana"},"application/vnd.3gpp.mc-signalling-ear":{"source":"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-payload":{"source":"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-signalling":{"source":"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-floor-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-signed+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-init-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-transmission-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mid-call+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ngap":{"source":"iana"},"application/vnd.3gpp.pfcp":{"source":"iana"},"application/vnd.3gpp.pic-bw-large":{"source":"iana","extensions":["plb"]},"application/vnd.3gpp.pic-bw-small":{"source":"iana","extensions":["psb"]},"application/vnd.3gpp.pic-bw-var":{"source":"iana","extensions":["pvb"]},"application/vnd.3gpp.s1ap":{"source":"iana"},"application/vnd.3gpp.sms":{"source":"iana"},"application/vnd.3gpp.sms+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-ext+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.state-and-event-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ussd+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.bcmcsinfo+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.sms":{"source":"iana"},"application/vnd.3gpp2.tcap":{"source":"iana","extensions":["tcap"]},"application/vnd.3lightssoftware.imagescal":{"source":"iana"},"application/vnd.3m.post-it-notes":{"source":"iana","extensions":["pwn"]},"application/vnd.accpac.simply.aso":{"source":"iana","extensions":["aso"]},"application/vnd.accpac.simply.imp":{"source":"iana","extensions":["imp"]},"application/vnd.acucobol":{"source":"iana","extensions":["acu"]},"application/vnd.acucorp":{"source":"iana","extensions":["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{"source":"apache","compressible":false,"extensions":["air"]},"application/vnd.adobe.flash.movie":{"source":"iana"},"application/vnd.adobe.formscentral.fcdt":{"source":"iana","extensions":["fcdt"]},"application/vnd.adobe.fxp":{"source":"iana","extensions":["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{"source":"iana"},"application/vnd.adobe.xdp+xml":{"source":"iana","compressible":true,"extensions":["xdp"]},"application/vnd.adobe.xfdf":{"source":"iana","extensions":["xfdf"]},"application/vnd.aether.imp":{"source":"iana"},"application/vnd.afpc.afplinedata":{"source":"iana"},"application/vnd.afpc.afplinedata-pagedef":{"source":"iana"},"application/vnd.afpc.cmoca-cmresource":{"source":"iana"},"application/vnd.afpc.foca-charset":{"source":"iana"},"application/vnd.afpc.foca-codedfont":{"source":"iana"},"application/vnd.afpc.foca-codepage":{"source":"iana"},"application/vnd.afpc.modca":{"source":"iana"},"application/vnd.afpc.modca-cmtable":{"source":"iana"},"application/vnd.afpc.modca-formdef":{"source":"iana"},"application/vnd.afpc.modca-mediummap":{"source":"iana"},"application/vnd.afpc.modca-objectcontainer":{"source":"iana"},"application/vnd.afpc.modca-overlay":{"source":"iana"},"application/vnd.afpc.modca-pagesegment":{"source":"iana"},"application/vnd.age":{"source":"iana","extensions":["age"]},"application/vnd.ah-barcode":{"source":"iana"},"application/vnd.ahead.space":{"source":"iana","extensions":["ahead"]},"application/vnd.airzip.filesecure.azf":{"source":"iana","extensions":["azf"]},"application/vnd.airzip.filesecure.azs":{"source":"iana","extensions":["azs"]},"application/vnd.amadeus+json":{"source":"iana","compressible":true},"application/vnd.amazon.ebook":{"source":"apache","extensions":["azw"]},"application/vnd.amazon.mobi8-ebook":{"source":"iana"},"application/vnd.americandynamics.acc":{"source":"iana","extensions":["acc"]},"application/vnd.amiga.ami":{"source":"iana","extensions":["ami"]},"application/vnd.amundsen.maze+xml":{"source":"iana","compressible":true},"application/vnd.android.ota":{"source":"iana"},"application/vnd.android.package-archive":{"source":"apache","compressible":false,"extensions":["apk"]},"application/vnd.anki":{"source":"iana"},"application/vnd.anser-web-certificate-issue-initiation":{"source":"iana","extensions":["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{"source":"apache","extensions":["fti"]},"application/vnd.antix.game-component":{"source":"iana","extensions":["atx"]},"application/vnd.apache.arrow.file":{"source":"iana"},"application/vnd.apache.arrow.stream":{"source":"iana"},"application/vnd.apache.thrift.binary":{"source":"iana"},"application/vnd.apache.thrift.compact":{"source":"iana"},"application/vnd.apache.thrift.json":{"source":"iana"},"application/vnd.api+json":{"source":"iana","compressible":true},"application/vnd.aplextor.warrp+json":{"source":"iana","compressible":true},"application/vnd.apothekende.reservation+json":{"source":"iana","compressible":true},"application/vnd.apple.installer+xml":{"source":"iana","compressible":true,"extensions":["mpkg"]},"application/vnd.apple.keynote":{"source":"iana","extensions":["key"]},"application/vnd.apple.mpegurl":{"source":"iana","extensions":["m3u8"]},"application/vnd.apple.numbers":{"source":"iana","extensions":["numbers"]},"application/vnd.apple.pages":{"source":"iana","extensions":["pages"]},"application/vnd.apple.pkpass":{"compressible":false,"extensions":["pkpass"]},"application/vnd.arastra.swi":{"source":"iana"},"application/vnd.aristanetworks.swi":{"source":"iana","extensions":["swi"]},"application/vnd.artisan+json":{"source":"iana","compressible":true},"application/vnd.artsquare":{"source":"iana"},"application/vnd.astraea-software.iota":{"source":"iana","extensions":["iota"]},"application/vnd.audiograph":{"source":"iana","extensions":["aep"]},"application/vnd.autopackage":{"source":"iana"},"application/vnd.avalon+json":{"source":"iana","compressible":true},"application/vnd.avistar+xml":{"source":"iana","compressible":true},"application/vnd.balsamiq.bmml+xml":{"source":"iana","compressible":true,"extensions":["bmml"]},"application/vnd.balsamiq.bmpr":{"source":"iana"},"application/vnd.banana-accounting":{"source":"iana"},"application/vnd.bbf.usp.error":{"source":"iana"},"application/vnd.bbf.usp.msg":{"source":"iana"},"application/vnd.bbf.usp.msg+json":{"source":"iana","compressible":true},"application/vnd.bekitzur-stech+json":{"source":"iana","compressible":true},"application/vnd.bint.med-content":{"source":"iana"},"application/vnd.biopax.rdf+xml":{"source":"iana","compressible":true},"application/vnd.blink-idb-value-wrapper":{"source":"iana"},"application/vnd.blueice.multipass":{"source":"iana","extensions":["mpm"]},"application/vnd.bluetooth.ep.oob":{"source":"iana"},"application/vnd.bluetooth.le.oob":{"source":"iana"},"application/vnd.bmi":{"source":"iana","extensions":["bmi"]},"application/vnd.bpf":{"source":"iana"},"application/vnd.bpf3":{"source":"iana"},"application/vnd.businessobjects":{"source":"iana","extensions":["rep"]},"application/vnd.byu.uapi+json":{"source":"iana","compressible":true},"application/vnd.cab-jscript":{"source":"iana"},"application/vnd.canon-cpdl":{"source":"iana"},"application/vnd.canon-lips":{"source":"iana"},"application/vnd.capasystems-pg+json":{"source":"iana","compressible":true},"application/vnd.cendio.thinlinc.clientconf":{"source":"iana"},"application/vnd.century-systems.tcp_stream":{"source":"iana"},"application/vnd.chemdraw+xml":{"source":"iana","compressible":true,"extensions":["cdxml"]},"application/vnd.chess-pgn":{"source":"iana"},"application/vnd.chipnuts.karaoke-mmd":{"source":"iana","extensions":["mmd"]},"application/vnd.ciedi":{"source":"iana"},"application/vnd.cinderella":{"source":"iana","extensions":["cdy"]},"application/vnd.cirpack.isdn-ext":{"source":"iana"},"application/vnd.citationstyles.style+xml":{"source":"iana","compressible":true,"extensions":["csl"]},"application/vnd.claymore":{"source":"iana","extensions":["cla"]},"application/vnd.cloanto.rp9":{"source":"iana","extensions":["rp9"]},"application/vnd.clonk.c4group":{"source":"iana","extensions":["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{"source":"iana","extensions":["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{"source":"iana","extensions":["c11amz"]},"application/vnd.coffeescript":{"source":"iana"},"application/vnd.collabio.xodocuments.document":{"source":"iana"},"application/vnd.collabio.xodocuments.document-template":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation-template":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{"source":"iana"},"application/vnd.collection+json":{"source":"iana","compressible":true},"application/vnd.collection.doc+json":{"source":"iana","compressible":true},"application/vnd.collection.next+json":{"source":"iana","compressible":true},"application/vnd.comicbook+zip":{"source":"iana","compressible":false},"application/vnd.comicbook-rar":{"source":"iana"},"application/vnd.commerce-battelle":{"source":"iana"},"application/vnd.commonspace":{"source":"iana","extensions":["csp"]},"application/vnd.contact.cmsg":{"source":"iana","extensions":["cdbcmsg"]},"application/vnd.coreos.ignition+json":{"source":"iana","compressible":true},"application/vnd.cosmocaller":{"source":"iana","extensions":["cmc"]},"application/vnd.crick.clicker":{"source":"iana","extensions":["clkx"]},"application/vnd.crick.clicker.keyboard":{"source":"iana","extensions":["clkk"]},"application/vnd.crick.clicker.palette":{"source":"iana","extensions":["clkp"]},"application/vnd.crick.clicker.template":{"source":"iana","extensions":["clkt"]},"application/vnd.crick.clicker.wordbank":{"source":"iana","extensions":["clkw"]},"application/vnd.criticaltools.wbs+xml":{"source":"iana","compressible":true,"extensions":["wbs"]},"application/vnd.cryptii.pipe+json":{"source":"iana","compressible":true},"application/vnd.crypto-shade-file":{"source":"iana"},"application/vnd.cryptomator.encrypted":{"source":"iana"},"application/vnd.cryptomator.vault":{"source":"iana"},"application/vnd.ctc-posml":{"source":"iana","extensions":["pml"]},"application/vnd.ctct.ws+xml":{"source":"iana","compressible":true},"application/vnd.cups-pdf":{"source":"iana"},"application/vnd.cups-postscript":{"source":"iana"},"application/vnd.cups-ppd":{"source":"iana","extensions":["ppd"]},"application/vnd.cups-raster":{"source":"iana"},"application/vnd.cups-raw":{"source":"iana"},"application/vnd.curl":{"source":"iana"},"application/vnd.curl.car":{"source":"apache","extensions":["car"]},"application/vnd.curl.pcurl":{"source":"apache","extensions":["pcurl"]},"application/vnd.cyan.dean.root+xml":{"source":"iana","compressible":true},"application/vnd.cybank":{"source":"iana"},"application/vnd.cyclonedx+json":{"source":"iana","compressible":true},"application/vnd.cyclonedx+xml":{"source":"iana","compressible":true},"application/vnd.d2l.coursepackage1p0+zip":{"source":"iana","compressible":false},"application/vnd.d3m-dataset":{"source":"iana"},"application/vnd.d3m-problem":{"source":"iana"},"application/vnd.dart":{"source":"iana","compressible":true,"extensions":["dart"]},"application/vnd.data-vision.rdz":{"source":"iana","extensions":["rdz"]},"application/vnd.datapackage+json":{"source":"iana","compressible":true},"application/vnd.dataresource+json":{"source":"iana","compressible":true},"application/vnd.dbf":{"source":"iana","extensions":["dbf"]},"application/vnd.debian.binary-package":{"source":"iana"},"application/vnd.dece.data":{"source":"iana","extensions":["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{"source":"iana","compressible":true,"extensions":["uvt","uvvt"]},"application/vnd.dece.unspecified":{"source":"iana","extensions":["uvx","uvvx"]},"application/vnd.dece.zip":{"source":"iana","extensions":["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{"source":"iana","extensions":["fe_launch"]},"application/vnd.desmume.movie":{"source":"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{"source":"iana"},"application/vnd.dm.delegation+xml":{"source":"iana","compressible":true},"application/vnd.dna":{"source":"iana","extensions":["dna"]},"application/vnd.document+json":{"source":"iana","compressible":true},"application/vnd.dolby.mlp":{"source":"apache","extensions":["mlp"]},"application/vnd.dolby.mobile.1":{"source":"iana"},"application/vnd.dolby.mobile.2":{"source":"iana"},"application/vnd.doremir.scorecloud-binary-document":{"source":"iana"},"application/vnd.dpgraph":{"source":"iana","extensions":["dpg"]},"application/vnd.dreamfactory":{"source":"iana","extensions":["dfac"]},"application/vnd.drive+json":{"source":"iana","compressible":true},"application/vnd.ds-keypoint":{"source":"apache","extensions":["kpxx"]},"application/vnd.dtg.local":{"source":"iana"},"application/vnd.dtg.local.flash":{"source":"iana"},"application/vnd.dtg.local.html":{"source":"iana"},"application/vnd.dvb.ait":{"source":"iana","extensions":["ait"]},"application/vnd.dvb.dvbisl+xml":{"source":"iana","compressible":true},"application/vnd.dvb.dvbj":{"source":"iana"},"application/vnd.dvb.esgcontainer":{"source":"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess2":{"source":"iana"},"application/vnd.dvb.ipdcesgpdd":{"source":"iana"},"application/vnd.dvb.ipdcroaming":{"source":"iana"},"application/vnd.dvb.iptv.alfec-base":{"source":"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{"source":"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-container+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-generic+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-msglist+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-request+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-response+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-init+xml":{"source":"iana","compressible":true},"application/vnd.dvb.pfr":{"source":"iana"},"application/vnd.dvb.service":{"source":"iana","extensions":["svc"]},"application/vnd.dxr":{"source":"iana"},"application/vnd.dynageo":{"source":"iana","extensions":["geo"]},"application/vnd.dzr":{"source":"iana"},"application/vnd.easykaraoke.cdgdownload":{"source":"iana"},"application/vnd.ecdis-update":{"source":"iana"},"application/vnd.ecip.rlp":{"source":"iana"},"application/vnd.eclipse.ditto+json":{"source":"iana","compressible":true},"application/vnd.ecowin.chart":{"source":"iana","extensions":["mag"]},"application/vnd.ecowin.filerequest":{"source":"iana"},"application/vnd.ecowin.fileupdate":{"source":"iana"},"application/vnd.ecowin.series":{"source":"iana"},"application/vnd.ecowin.seriesrequest":{"source":"iana"},"application/vnd.ecowin.seriesupdate":{"source":"iana"},"application/vnd.efi.img":{"source":"iana"},"application/vnd.efi.iso":{"source":"iana"},"application/vnd.emclient.accessrequest+xml":{"source":"iana","compressible":true},"application/vnd.enliven":{"source":"iana","extensions":["nml"]},"application/vnd.enphase.envoy":{"source":"iana"},"application/vnd.eprints.data+xml":{"source":"iana","compressible":true},"application/vnd.epson.esf":{"source":"iana","extensions":["esf"]},"application/vnd.epson.msf":{"source":"iana","extensions":["msf"]},"application/vnd.epson.quickanime":{"source":"iana","extensions":["qam"]},"application/vnd.epson.salt":{"source":"iana","extensions":["slt"]},"application/vnd.epson.ssf":{"source":"iana","extensions":["ssf"]},"application/vnd.ericsson.quickcall":{"source":"iana"},"application/vnd.espass-espass+zip":{"source":"iana","compressible":false},"application/vnd.eszigno3+xml":{"source":"iana","compressible":true,"extensions":["es3","et3"]},"application/vnd.etsi.aoc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.asic-e+zip":{"source":"iana","compressible":false},"application/vnd.etsi.asic-s+zip":{"source":"iana","compressible":false},"application/vnd.etsi.cug+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvcommand+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-bc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-cod+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-npvr+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvservice+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsync+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvueprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mcid+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mheg5":{"source":"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{"source":"iana","compressible":true},"application/vnd.etsi.pstn+xml":{"source":"iana","compressible":true},"application/vnd.etsi.sci+xml":{"source":"iana","compressible":true},"application/vnd.etsi.simservs+xml":{"source":"iana","compressible":true},"application/vnd.etsi.timestamp-token":{"source":"iana"},"application/vnd.etsi.tsl+xml":{"source":"iana","compressible":true},"application/vnd.etsi.tsl.der":{"source":"iana"},"application/vnd.eu.kasparian.car+json":{"source":"iana","compressible":true},"application/vnd.eudora.data":{"source":"iana"},"application/vnd.evolv.ecig.profile":{"source":"iana"},"application/vnd.evolv.ecig.settings":{"source":"iana"},"application/vnd.evolv.ecig.theme":{"source":"iana"},"application/vnd.exstream-empower+zip":{"source":"iana","compressible":false},"application/vnd.exstream-package":{"source":"iana"},"application/vnd.ezpix-album":{"source":"iana","extensions":["ez2"]},"application/vnd.ezpix-package":{"source":"iana","extensions":["ez3"]},"application/vnd.f-secure.mobile":{"source":"iana"},"application/vnd.familysearch.gedcom+zip":{"source":"iana","compressible":false},"application/vnd.fastcopy-disk-image":{"source":"iana"},"application/vnd.fdf":{"source":"iana","extensions":["fdf"]},"application/vnd.fdsn.mseed":{"source":"iana","extensions":["mseed"]},"application/vnd.fdsn.seed":{"source":"iana","extensions":["seed","dataless"]},"application/vnd.ffsns":{"source":"iana"},"application/vnd.ficlab.flb+zip":{"source":"iana","compressible":false},"application/vnd.filmit.zfc":{"source":"iana"},"application/vnd.fints":{"source":"iana"},"application/vnd.firemonkeys.cloudcell":{"source":"iana"},"application/vnd.flographit":{"source":"iana","extensions":["gph"]},"application/vnd.fluxtime.clip":{"source":"iana","extensions":["ftc"]},"application/vnd.font-fontforge-sfd":{"source":"iana"},"application/vnd.framemaker":{"source":"iana","extensions":["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{"source":"iana","extensions":["fnc"]},"application/vnd.frogans.ltf":{"source":"iana","extensions":["ltf"]},"application/vnd.fsc.weblaunch":{"source":"iana","extensions":["fsc"]},"application/vnd.fujifilm.fb.docuworks":{"source":"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{"source":"iana"},"application/vnd.fujifilm.fb.docuworks.container":{"source":"iana"},"application/vnd.fujifilm.fb.jfi+xml":{"source":"iana","compressible":true},"application/vnd.fujitsu.oasys":{"source":"iana","extensions":["oas"]},"application/vnd.fujitsu.oasys2":{"source":"iana","extensions":["oa2"]},"application/vnd.fujitsu.oasys3":{"source":"iana","extensions":["oa3"]},"application/vnd.fujitsu.oasysgp":{"source":"iana","extensions":["fg5"]},"application/vnd.fujitsu.oasysprs":{"source":"iana","extensions":["bh2"]},"application/vnd.fujixerox.art-ex":{"source":"iana"},"application/vnd.fujixerox.art4":{"source":"iana"},"application/vnd.fujixerox.ddd":{"source":"iana","extensions":["ddd"]},"application/vnd.fujixerox.docuworks":{"source":"iana","extensions":["xdw"]},"application/vnd.fujixerox.docuworks.binder":{"source":"iana","extensions":["xbd"]},"application/vnd.fujixerox.docuworks.container":{"source":"iana"},"application/vnd.fujixerox.hbpl":{"source":"iana"},"application/vnd.fut-misnet":{"source":"iana"},"application/vnd.futoin+cbor":{"source":"iana"},"application/vnd.futoin+json":{"source":"iana","compressible":true},"application/vnd.fuzzysheet":{"source":"iana","extensions":["fzs"]},"application/vnd.genomatix.tuxedo":{"source":"iana","extensions":["txd"]},"application/vnd.gentics.grd+json":{"source":"iana","compressible":true},"application/vnd.geo+json":{"source":"iana","compressible":true},"application/vnd.geocube+xml":{"source":"iana","compressible":true},"application/vnd.geogebra.file":{"source":"iana","extensions":["ggb"]},"application/vnd.geogebra.slides":{"source":"iana"},"application/vnd.geogebra.tool":{"source":"iana","extensions":["ggt"]},"application/vnd.geometry-explorer":{"source":"iana","extensions":["gex","gre"]},"application/vnd.geonext":{"source":"iana","extensions":["gxt"]},"application/vnd.geoplan":{"source":"iana","extensions":["g2w"]},"application/vnd.geospace":{"source":"iana","extensions":["g3w"]},"application/vnd.gerber":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt-response":{"source":"iana"},"application/vnd.gmx":{"source":"iana","extensions":["gmx"]},"application/vnd.google-apps.document":{"compressible":false,"extensions":["gdoc"]},"application/vnd.google-apps.presentation":{"compressible":false,"extensions":["gslides"]},"application/vnd.google-apps.spreadsheet":{"compressible":false,"extensions":["gsheet"]},"application/vnd.google-earth.kml+xml":{"source":"iana","compressible":true,"extensions":["kml"]},"application/vnd.google-earth.kmz":{"source":"iana","compressible":false,"extensions":["kmz"]},"application/vnd.gov.sk.e-form+xml":{"source":"iana","compressible":true},"application/vnd.gov.sk.e-form+zip":{"source":"iana","compressible":false},"application/vnd.gov.sk.xmldatacontainer+xml":{"source":"iana","compressible":true},"application/vnd.grafeq":{"source":"iana","extensions":["gqf","gqs"]},"application/vnd.gridmp":{"source":"iana"},"application/vnd.groove-account":{"source":"iana","extensions":["gac"]},"application/vnd.groove-help":{"source":"iana","extensions":["ghf"]},"application/vnd.groove-identity-message":{"source":"iana","extensions":["gim"]},"application/vnd.groove-injector":{"source":"iana","extensions":["grv"]},"application/vnd.groove-tool-message":{"source":"iana","extensions":["gtm"]},"application/vnd.groove-tool-template":{"source":"iana","extensions":["tpl"]},"application/vnd.groove-vcard":{"source":"iana","extensions":["vcg"]},"application/vnd.hal+json":{"source":"iana","compressible":true},"application/vnd.hal+xml":{"source":"iana","compressible":true,"extensions":["hal"]},"application/vnd.handheld-entertainment+xml":{"source":"iana","compressible":true,"extensions":["zmm"]},"application/vnd.hbci":{"source":"iana","extensions":["hbci"]},"application/vnd.hc+json":{"source":"iana","compressible":true},"application/vnd.hcl-bireports":{"source":"iana"},"application/vnd.hdt":{"source":"iana"},"application/vnd.heroku+json":{"source":"iana","compressible":true},"application/vnd.hhe.lesson-player":{"source":"iana","extensions":["les"]},"application/vnd.hl7cda+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.hl7v2+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.hp-hpgl":{"source":"iana","extensions":["hpgl"]},"application/vnd.hp-hpid":{"source":"iana","extensions":["hpid"]},"application/vnd.hp-hps":{"source":"iana","extensions":["hps"]},"application/vnd.hp-jlyt":{"source":"iana","extensions":["jlt"]},"application/vnd.hp-pcl":{"source":"iana","extensions":["pcl"]},"application/vnd.hp-pclxl":{"source":"iana","extensions":["pclxl"]},"application/vnd.httphone":{"source":"iana"},"application/vnd.hydrostatix.sof-data":{"source":"iana","extensions":["sfd-hdstx"]},"application/vnd.hyper+json":{"source":"iana","compressible":true},"application/vnd.hyper-item+json":{"source":"iana","compressible":true},"application/vnd.hyperdrive+json":{"source":"iana","compressible":true},"application/vnd.hzn-3d-crossword":{"source":"iana"},"application/vnd.ibm.afplinedata":{"source":"iana"},"application/vnd.ibm.electronic-media":{"source":"iana"},"application/vnd.ibm.minipay":{"source":"iana","extensions":["mpy"]},"application/vnd.ibm.modcap":{"source":"iana","extensions":["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{"source":"iana","extensions":["irm"]},"application/vnd.ibm.secure-container":{"source":"iana","extensions":["sc"]},"application/vnd.iccprofile":{"source":"iana","extensions":["icc","icm"]},"application/vnd.ieee.1905":{"source":"iana"},"application/vnd.igloader":{"source":"iana","extensions":["igl"]},"application/vnd.imagemeter.folder+zip":{"source":"iana","compressible":false},"application/vnd.imagemeter.image+zip":{"source":"iana","compressible":false},"application/vnd.immervision-ivp":{"source":"iana","extensions":["ivp"]},"application/vnd.immervision-ivu":{"source":"iana","extensions":["ivu"]},"application/vnd.ims.imsccv1p1":{"source":"iana"},"application/vnd.ims.imsccv1p2":{"source":"iana"},"application/vnd.ims.imsccv1p3":{"source":"iana"},"application/vnd.ims.lis.v2.result+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy.id+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings.simple+json":{"source":"iana","compressible":true},"application/vnd.informedcontrol.rms+xml":{"source":"iana","compressible":true},"application/vnd.informix-visionary":{"source":"iana"},"application/vnd.infotech.project":{"source":"iana"},"application/vnd.infotech.project+xml":{"source":"iana","compressible":true},"application/vnd.innopath.wamp.notification":{"source":"iana"},"application/vnd.insors.igm":{"source":"iana","extensions":["igm"]},"application/vnd.intercon.formnet":{"source":"iana","extensions":["xpw","xpx"]},"application/vnd.intergeo":{"source":"iana","extensions":["i2g"]},"application/vnd.intertrust.digibox":{"source":"iana"},"application/vnd.intertrust.nncp":{"source":"iana"},"application/vnd.intu.qbo":{"source":"iana","extensions":["qbo"]},"application/vnd.intu.qfx":{"source":"iana","extensions":["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.conceptitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.knowledgeitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsmessage+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.packageitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.planningitem+xml":{"source":"iana","compressible":true},"application/vnd.ipunplugged.rcprofile":{"source":"iana","extensions":["rcprofile"]},"application/vnd.irepository.package+xml":{"source":"iana","compressible":true,"extensions":["irp"]},"application/vnd.is-xpr":{"source":"iana","extensions":["xpr"]},"application/vnd.isac.fcs":{"source":"iana","extensions":["fcs"]},"application/vnd.iso11783-10+zip":{"source":"iana","compressible":false},"application/vnd.jam":{"source":"iana","extensions":["jam"]},"application/vnd.japannet-directory-service":{"source":"iana"},"application/vnd.japannet-jpnstore-wakeup":{"source":"iana"},"application/vnd.japannet-payment-wakeup":{"source":"iana"},"application/vnd.japannet-registration":{"source":"iana"},"application/vnd.japannet-registration-wakeup":{"source":"iana"},"application/vnd.japannet-setstore-wakeup":{"source":"iana"},"application/vnd.japannet-verification":{"source":"iana"},"application/vnd.japannet-verification-wakeup":{"source":"iana"},"application/vnd.jcp.javame.midlet-rms":{"source":"iana","extensions":["rms"]},"application/vnd.jisp":{"source":"iana","extensions":["jisp"]},"application/vnd.joost.joda-archive":{"source":"iana","extensions":["joda"]},"application/vnd.jsk.isdn-ngn":{"source":"iana"},"application/vnd.kahootz":{"source":"iana","extensions":["ktz","ktr"]},"application/vnd.kde.karbon":{"source":"iana","extensions":["karbon"]},"application/vnd.kde.kchart":{"source":"iana","extensions":["chrt"]},"application/vnd.kde.kformula":{"source":"iana","extensions":["kfo"]},"application/vnd.kde.kivio":{"source":"iana","extensions":["flw"]},"application/vnd.kde.kontour":{"source":"iana","extensions":["kon"]},"application/vnd.kde.kpresenter":{"source":"iana","extensions":["kpr","kpt"]},"application/vnd.kde.kspread":{"source":"iana","extensions":["ksp"]},"application/vnd.kde.kword":{"source":"iana","extensions":["kwd","kwt"]},"application/vnd.kenameaapp":{"source":"iana","extensions":["htke"]},"application/vnd.kidspiration":{"source":"iana","extensions":["kia"]},"application/vnd.kinar":{"source":"iana","extensions":["kne","knp"]},"application/vnd.koan":{"source":"iana","extensions":["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{"source":"iana","extensions":["sse"]},"application/vnd.las":{"source":"iana"},"application/vnd.las.las+json":{"source":"iana","compressible":true},"application/vnd.las.las+xml":{"source":"iana","compressible":true,"extensions":["lasxml"]},"application/vnd.laszip":{"source":"iana"},"application/vnd.leap+json":{"source":"iana","compressible":true},"application/vnd.liberty-request+xml":{"source":"iana","compressible":true},"application/vnd.llamagraphics.life-balance.desktop":{"source":"iana","extensions":["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{"source":"iana","compressible":true,"extensions":["lbe"]},"application/vnd.logipipe.circuit+zip":{"source":"iana","compressible":false},"application/vnd.loom":{"source":"iana"},"application/vnd.lotus-1-2-3":{"source":"iana","extensions":["123"]},"application/vnd.lotus-approach":{"source":"iana","extensions":["apr"]},"application/vnd.lotus-freelance":{"source":"iana","extensions":["pre"]},"application/vnd.lotus-notes":{"source":"iana","extensions":["nsf"]},"application/vnd.lotus-organizer":{"source":"iana","extensions":["org"]},"application/vnd.lotus-screencam":{"source":"iana","extensions":["scm"]},"application/vnd.lotus-wordpro":{"source":"iana","extensions":["lwp"]},"application/vnd.macports.portpkg":{"source":"iana","extensions":["portpkg"]},"application/vnd.mapbox-vector-tile":{"source":"iana","extensions":["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.conftoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.license+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.mdcf":{"source":"iana"},"application/vnd.mason+json":{"source":"iana","compressible":true},"application/vnd.maxar.archive.3tz+zip":{"source":"iana","compressible":false},"application/vnd.maxmind.maxmind-db":{"source":"iana"},"application/vnd.mcd":{"source":"iana","extensions":["mcd"]},"application/vnd.medcalcdata":{"source":"iana","extensions":["mc1"]},"application/vnd.mediastation.cdkey":{"source":"iana","extensions":["cdkey"]},"application/vnd.meridian-slingshot":{"source":"iana"},"application/vnd.mfer":{"source":"iana","extensions":["mwf"]},"application/vnd.mfmp":{"source":"iana","extensions":["mfm"]},"application/vnd.micro+json":{"source":"iana","compressible":true},"application/vnd.micrografx.flo":{"source":"iana","extensions":["flo"]},"application/vnd.micrografx.igx":{"source":"iana","extensions":["igx"]},"application/vnd.microsoft.portable-executable":{"source":"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{"source":"iana"},"application/vnd.miele+json":{"source":"iana","compressible":true},"application/vnd.mif":{"source":"iana","extensions":["mif"]},"application/vnd.minisoft-hp3000-save":{"source":"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{"source":"iana"},"application/vnd.mobius.daf":{"source":"iana","extensions":["daf"]},"application/vnd.mobius.dis":{"source":"iana","extensions":["dis"]},"application/vnd.mobius.mbk":{"source":"iana","extensions":["mbk"]},"application/vnd.mobius.mqy":{"source":"iana","extensions":["mqy"]},"application/vnd.mobius.msl":{"source":"iana","extensions":["msl"]},"application/vnd.mobius.plc":{"source":"iana","extensions":["plc"]},"application/vnd.mobius.txf":{"source":"iana","extensions":["txf"]},"application/vnd.mophun.application":{"source":"iana","extensions":["mpn"]},"application/vnd.mophun.certificate":{"source":"iana","extensions":["mpc"]},"application/vnd.motorola.flexsuite":{"source":"iana"},"application/vnd.motorola.flexsuite.adsi":{"source":"iana"},"application/vnd.motorola.flexsuite.fis":{"source":"iana"},"application/vnd.motorola.flexsuite.gotap":{"source":"iana"},"application/vnd.motorola.flexsuite.kmr":{"source":"iana"},"application/vnd.motorola.flexsuite.ttc":{"source":"iana"},"application/vnd.motorola.flexsuite.wem":{"source":"iana"},"application/vnd.motorola.iprm":{"source":"iana"},"application/vnd.mozilla.xul+xml":{"source":"iana","compressible":true,"extensions":["xul"]},"application/vnd.ms-3mfdocument":{"source":"iana"},"application/vnd.ms-artgalry":{"source":"iana","extensions":["cil"]},"application/vnd.ms-asf":{"source":"iana"},"application/vnd.ms-cab-compressed":{"source":"iana","extensions":["cab"]},"application/vnd.ms-color.iccprofile":{"source":"apache"},"application/vnd.ms-excel":{"source":"iana","compressible":false,"extensions":["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{"source":"iana","extensions":["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{"source":"iana","extensions":["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{"source":"iana","extensions":["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{"source":"iana","extensions":["xltm"]},"application/vnd.ms-fontobject":{"source":"iana","compressible":true,"extensions":["eot"]},"application/vnd.ms-htmlhelp":{"source":"iana","extensions":["chm"]},"application/vnd.ms-ims":{"source":"iana","extensions":["ims"]},"application/vnd.ms-lrm":{"source":"iana","extensions":["lrm"]},"application/vnd.ms-office.activex+xml":{"source":"iana","compressible":true},"application/vnd.ms-officetheme":{"source":"iana","extensions":["thmx"]},"application/vnd.ms-opentype":{"source":"apache","compressible":true},"application/vnd.ms-outlook":{"compressible":false,"extensions":["msg"]},"application/vnd.ms-package.obfuscated-opentype":{"source":"apache"},"application/vnd.ms-pki.seccat":{"source":"apache","extensions":["cat"]},"application/vnd.ms-pki.stl":{"source":"apache","extensions":["stl"]},"application/vnd.ms-playready.initiator+xml":{"source":"iana","compressible":true},"application/vnd.ms-powerpoint":{"source":"iana","compressible":false,"extensions":["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{"source":"iana","extensions":["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{"source":"iana","extensions":["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{"source":"iana","extensions":["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{"source":"iana","extensions":["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{"source":"iana","extensions":["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{"source":"iana","compressible":true},"application/vnd.ms-printing.printticket+xml":{"source":"apache","compressible":true},"application/vnd.ms-printschematicket+xml":{"source":"iana","compressible":true},"application/vnd.ms-project":{"source":"iana","extensions":["mpp","mpt"]},"application/vnd.ms-tnef":{"source":"iana"},"application/vnd.ms-windows.devicepairing":{"source":"iana"},"application/vnd.ms-windows.nwprinting.oob":{"source":"iana"},"application/vnd.ms-windows.printerpairing":{"source":"iana"},"application/vnd.ms-windows.wsd.oob":{"source":"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.lic-resp":{"source":"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.meter-resp":{"source":"iana"},"application/vnd.ms-word.document.macroenabled.12":{"source":"iana","extensions":["docm"]},"application/vnd.ms-word.template.macroenabled.12":{"source":"iana","extensions":["dotm"]},"application/vnd.ms-works":{"source":"iana","extensions":["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{"source":"iana","extensions":["wpl"]},"application/vnd.ms-xpsdocument":{"source":"iana","compressible":false,"extensions":["xps"]},"application/vnd.msa-disk-image":{"source":"iana"},"application/vnd.mseq":{"source":"iana","extensions":["mseq"]},"application/vnd.msign":{"source":"iana"},"application/vnd.multiad.creator":{"source":"iana"},"application/vnd.multiad.creator.cif":{"source":"iana"},"application/vnd.music-niff":{"source":"iana"},"application/vnd.musician":{"source":"iana","extensions":["mus"]},"application/vnd.muvee.style":{"source":"iana","extensions":["msty"]},"application/vnd.mynfc":{"source":"iana","extensions":["taglet"]},"application/vnd.nacamar.ybrid+json":{"source":"iana","compressible":true},"application/vnd.ncd.control":{"source":"iana"},"application/vnd.ncd.reference":{"source":"iana"},"application/vnd.nearst.inv+json":{"source":"iana","compressible":true},"application/vnd.nebumind.line":{"source":"iana"},"application/vnd.nervana":{"source":"iana"},"application/vnd.netfpx":{"source":"iana"},"application/vnd.neurolanguage.nlu":{"source":"iana","extensions":["nlu"]},"application/vnd.nimn":{"source":"iana"},"application/vnd.nintendo.nitro.rom":{"source":"iana"},"application/vnd.nintendo.snes.rom":{"source":"iana"},"application/vnd.nitf":{"source":"iana","extensions":["ntf","nitf"]},"application/vnd.noblenet-directory":{"source":"iana","extensions":["nnd"]},"application/vnd.noblenet-sealer":{"source":"iana","extensions":["nns"]},"application/vnd.noblenet-web":{"source":"iana","extensions":["nnw"]},"application/vnd.nokia.catalogs":{"source":"iana"},"application/vnd.nokia.conml+wbxml":{"source":"iana"},"application/vnd.nokia.conml+xml":{"source":"iana","compressible":true},"application/vnd.nokia.iptv.config+xml":{"source":"iana","compressible":true},"application/vnd.nokia.isds-radio-presets":{"source":"iana"},"application/vnd.nokia.landmark+wbxml":{"source":"iana"},"application/vnd.nokia.landmark+xml":{"source":"iana","compressible":true},"application/vnd.nokia.landmarkcollection+xml":{"source":"iana","compressible":true},"application/vnd.nokia.n-gage.ac+xml":{"source":"iana","compressible":true,"extensions":["ac"]},"application/vnd.nokia.n-gage.data":{"source":"iana","extensions":["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{"source":"iana","extensions":["n-gage"]},"application/vnd.nokia.ncd":{"source":"iana"},"application/vnd.nokia.pcd+wbxml":{"source":"iana"},"application/vnd.nokia.pcd+xml":{"source":"iana","compressible":true},"application/vnd.nokia.radio-preset":{"source":"iana","extensions":["rpst"]},"application/vnd.nokia.radio-presets":{"source":"iana","extensions":["rpss"]},"application/vnd.novadigm.edm":{"source":"iana","extensions":["edm"]},"application/vnd.novadigm.edx":{"source":"iana","extensions":["edx"]},"application/vnd.novadigm.ext":{"source":"iana","extensions":["ext"]},"application/vnd.ntt-local.content-share":{"source":"iana"},"application/vnd.ntt-local.file-transfer":{"source":"iana"},"application/vnd.ntt-local.ogw_remote-access":{"source":"iana"},"application/vnd.ntt-local.sip-ta_remote":{"source":"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{"source":"iana"},"application/vnd.oasis.opendocument.chart":{"source":"iana","extensions":["odc"]},"application/vnd.oasis.opendocument.chart-template":{"source":"iana","extensions":["otc"]},"application/vnd.oasis.opendocument.database":{"source":"iana","extensions":["odb"]},"application/vnd.oasis.opendocument.formula":{"source":"iana","extensions":["odf"]},"application/vnd.oasis.opendocument.formula-template":{"source":"iana","extensions":["odft"]},"application/vnd.oasis.opendocument.graphics":{"source":"iana","compressible":false,"extensions":["odg"]},"application/vnd.oasis.opendocument.graphics-template":{"source":"iana","extensions":["otg"]},"application/vnd.oasis.opendocument.image":{"source":"iana","extensions":["odi"]},"application/vnd.oasis.opendocument.image-template":{"source":"iana","extensions":["oti"]},"application/vnd.oasis.opendocument.presentation":{"source":"iana","compressible":false,"extensions":["odp"]},"application/vnd.oasis.opendocument.presentation-template":{"source":"iana","extensions":["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{"source":"iana","compressible":false,"extensions":["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{"source":"iana","extensions":["ots"]},"application/vnd.oasis.opendocument.text":{"source":"iana","compressible":false,"extensions":["odt"]},"application/vnd.oasis.opendocument.text-master":{"source":"iana","extensions":["odm"]},"application/vnd.oasis.opendocument.text-template":{"source":"iana","extensions":["ott"]},"application/vnd.oasis.opendocument.text-web":{"source":"iana","extensions":["oth"]},"application/vnd.obn":{"source":"iana"},"application/vnd.ocf+cbor":{"source":"iana"},"application/vnd.oci.image.manifest.v1+json":{"source":"iana","compressible":true},"application/vnd.oftn.l10n+json":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessdownload+xml":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessstreaming+xml":{"source":"iana","compressible":true},"application/vnd.oipf.cspg-hexbinary":{"source":"iana"},"application/vnd.oipf.dae.svg+xml":{"source":"iana","compressible":true},"application/vnd.oipf.dae.xhtml+xml":{"source":"iana","compressible":true},"application/vnd.oipf.mippvcontrolmessage+xml":{"source":"iana","compressible":true},"application/vnd.oipf.pae.gem":{"source":"iana"},"application/vnd.oipf.spdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.oipf.spdlist+xml":{"source":"iana","compressible":true},"application/vnd.oipf.ueprofile+xml":{"source":"iana","compressible":true},"application/vnd.oipf.userprofile+xml":{"source":"iana","compressible":true},"application/vnd.olpc-sugar":{"source":"iana","extensions":["xo"]},"application/vnd.oma-scws-config":{"source":"iana"},"application/vnd.oma-scws-http-request":{"source":"iana"},"application/vnd.oma-scws-http-response":{"source":"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.drm-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.imd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.ltkm":{"source":"iana"},"application/vnd.oma.bcast.notification+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.provisioningtrigger":{"source":"iana"},"application/vnd.oma.bcast.sgboot":{"source":"iana"},"application/vnd.oma.bcast.sgdd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sgdu":{"source":"iana"},"application/vnd.oma.bcast.simple-symbol-container":{"source":"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sprov+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.stkm":{"source":"iana"},"application/vnd.oma.cab-address-book+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-feature-handler+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-pcc+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-subs-invite+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-user-prefs+xml":{"source":"iana","compressible":true},"application/vnd.oma.dcd":{"source":"iana"},"application/vnd.oma.dcdc":{"source":"iana"},"application/vnd.oma.dd2+xml":{"source":"iana","compressible":true,"extensions":["dd2"]},"application/vnd.oma.drm.risd+xml":{"source":"iana","compressible":true},"application/vnd.oma.group-usage-list+xml":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+cbor":{"source":"iana"},"application/vnd.oma.lwm2m+json":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+tlv":{"source":"iana"},"application/vnd.oma.pal+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.detailed-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.final-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.groups+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.invocation-descriptor+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.optimized-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.push":{"source":"iana"},"application/vnd.oma.scidm.messages+xml":{"source":"iana","compressible":true},"application/vnd.oma.xcap-directory+xml":{"source":"iana","compressible":true},"application/vnd.omads-email+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-file+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-folder+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omaloc-supl-init":{"source":"iana"},"application/vnd.onepager":{"source":"iana"},"application/vnd.onepagertamp":{"source":"iana"},"application/vnd.onepagertamx":{"source":"iana"},"application/vnd.onepagertat":{"source":"iana"},"application/vnd.onepagertatp":{"source":"iana"},"application/vnd.onepagertatx":{"source":"iana"},"application/vnd.openblox.game+xml":{"source":"iana","compressible":true,"extensions":["obgx"]},"application/vnd.openblox.game-binary":{"source":"iana"},"application/vnd.openeye.oeb":{"source":"iana"},"application/vnd.openofficeorg.extension":{"source":"apache","extensions":["oxt"]},"application/vnd.openstreetmap.data+xml":{"source":"iana","compressible":true,"extensions":["osm"]},"application/vnd.opentimestamps.ots":{"source":"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawing+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{"source":"iana","compressible":false,"extensions":["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slide":{"source":"iana","extensions":["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{"source":"iana","extensions":["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.template":{"source":"iana","extensions":["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"source":"iana","compressible":false,"extensions":["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{"source":"iana","extensions":["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.theme+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.vmldrawing":{"source":"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"source":"iana","compressible":false,"extensions":["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{"source":"iana","extensions":["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.core-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.relationships+xml":{"source":"iana","compressible":true},"application/vnd.oracle.resource+json":{"source":"iana","compressible":true},"application/vnd.orange.indata":{"source":"iana"},"application/vnd.osa.netdeploy":{"source":"iana"},"application/vnd.osgeo.mapguide.package":{"source":"iana","extensions":["mgp"]},"application/vnd.osgi.bundle":{"source":"iana"},"application/vnd.osgi.dp":{"source":"iana","extensions":["dp"]},"application/vnd.osgi.subsystem":{"source":"iana","extensions":["esa"]},"application/vnd.otps.ct-kip+xml":{"source":"iana","compressible":true},"application/vnd.oxli.countgraph":{"source":"iana"},"application/vnd.pagerduty+json":{"source":"iana","compressible":true},"application/vnd.palm":{"source":"iana","extensions":["pdb","pqa","oprc"]},"application/vnd.panoply":{"source":"iana"},"application/vnd.paos.xml":{"source":"iana"},"application/vnd.patentdive":{"source":"iana"},"application/vnd.patientecommsdoc":{"source":"iana"},"application/vnd.pawaafile":{"source":"iana","extensions":["paw"]},"application/vnd.pcos":{"source":"iana"},"application/vnd.pg.format":{"source":"iana","extensions":["str"]},"application/vnd.pg.osasli":{"source":"iana","extensions":["ei6"]},"application/vnd.piaccess.application-licence":{"source":"iana"},"application/vnd.picsel":{"source":"iana","extensions":["efif"]},"application/vnd.pmi.widget":{"source":"iana","extensions":["wg"]},"application/vnd.poc.group-advertisement+xml":{"source":"iana","compressible":true},"application/vnd.pocketlearn":{"source":"iana","extensions":["plf"]},"application/vnd.powerbuilder6":{"source":"iana","extensions":["pbd"]},"application/vnd.powerbuilder6-s":{"source":"iana"},"application/vnd.powerbuilder7":{"source":"iana"},"application/vnd.powerbuilder7-s":{"source":"iana"},"application/vnd.powerbuilder75":{"source":"iana"},"application/vnd.powerbuilder75-s":{"source":"iana"},"application/vnd.preminet":{"source":"iana"},"application/vnd.previewsystems.box":{"source":"iana","extensions":["box"]},"application/vnd.proteus.magazine":{"source":"iana","extensions":["mgz"]},"application/vnd.psfs":{"source":"iana"},"application/vnd.publishare-delta-tree":{"source":"iana","extensions":["qps"]},"application/vnd.pvi.ptid1":{"source":"iana","extensions":["ptid"]},"application/vnd.pwg-multiplexed":{"source":"iana"},"application/vnd.pwg-xhtml-print+xml":{"source":"iana","compressible":true},"application/vnd.qualcomm.brew-app-res":{"source":"iana"},"application/vnd.quarantainenet":{"source":"iana"},"application/vnd.quark.quarkxpress":{"source":"iana","extensions":["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{"source":"iana"},"application/vnd.radisys.moml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conn+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-stream+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-base+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-detect+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-group+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-speech+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-transform+xml":{"source":"iana","compressible":true},"application/vnd.rainstor.data":{"source":"iana"},"application/vnd.rapid":{"source":"iana"},"application/vnd.rar":{"source":"iana","extensions":["rar"]},"application/vnd.realvnc.bed":{"source":"iana","extensions":["bed"]},"application/vnd.recordare.musicxml":{"source":"iana","extensions":["mxl"]},"application/vnd.recordare.musicxml+xml":{"source":"iana","compressible":true,"extensions":["musicxml"]},"application/vnd.renlearn.rlprint":{"source":"iana"},"application/vnd.resilient.logic":{"source":"iana"},"application/vnd.restful+json":{"source":"iana","compressible":true},"application/vnd.rig.cryptonote":{"source":"iana","extensions":["cryptonote"]},"application/vnd.rim.cod":{"source":"apache","extensions":["cod"]},"application/vnd.rn-realmedia":{"source":"apache","extensions":["rm"]},"application/vnd.rn-realmedia-vbr":{"source":"apache","extensions":["rmvb"]},"application/vnd.route66.link66+xml":{"source":"iana","compressible":true,"extensions":["link66"]},"application/vnd.rs-274x":{"source":"iana"},"application/vnd.ruckus.download":{"source":"iana"},"application/vnd.s3sms":{"source":"iana"},"application/vnd.sailingtracker.track":{"source":"iana","extensions":["st"]},"application/vnd.sar":{"source":"iana"},"application/vnd.sbm.cid":{"source":"iana"},"application/vnd.sbm.mid2":{"source":"iana"},"application/vnd.scribus":{"source":"iana"},"application/vnd.sealed.3df":{"source":"iana"},"application/vnd.sealed.csf":{"source":"iana"},"application/vnd.sealed.doc":{"source":"iana"},"application/vnd.sealed.eml":{"source":"iana"},"application/vnd.sealed.mht":{"source":"iana"},"application/vnd.sealed.net":{"source":"iana"},"application/vnd.sealed.ppt":{"source":"iana"},"application/vnd.sealed.tiff":{"source":"iana"},"application/vnd.sealed.xls":{"source":"iana"},"application/vnd.sealedmedia.softseal.html":{"source":"iana"},"application/vnd.sealedmedia.softseal.pdf":{"source":"iana"},"application/vnd.seemail":{"source":"iana","extensions":["see"]},"application/vnd.seis+json":{"source":"iana","compressible":true},"application/vnd.sema":{"source":"iana","extensions":["sema"]},"application/vnd.semd":{"source":"iana","extensions":["semd"]},"application/vnd.semf":{"source":"iana","extensions":["semf"]},"application/vnd.shade-save-file":{"source":"iana"},"application/vnd.shana.informed.formdata":{"source":"iana","extensions":["ifm"]},"application/vnd.shana.informed.formtemplate":{"source":"iana","extensions":["itp"]},"application/vnd.shana.informed.interchange":{"source":"iana","extensions":["iif"]},"application/vnd.shana.informed.package":{"source":"iana","extensions":["ipk"]},"application/vnd.shootproof+json":{"source":"iana","compressible":true},"application/vnd.shopkick+json":{"source":"iana","compressible":true},"application/vnd.shp":{"source":"iana"},"application/vnd.shx":{"source":"iana"},"application/vnd.sigrok.session":{"source":"iana"},"application/vnd.simtech-mindmapper":{"source":"iana","extensions":["twd","twds"]},"application/vnd.siren+json":{"source":"iana","compressible":true},"application/vnd.smaf":{"source":"iana","extensions":["mmf"]},"application/vnd.smart.notebook":{"source":"iana"},"application/vnd.smart.teacher":{"source":"iana","extensions":["teacher"]},"application/vnd.snesdev-page-table":{"source":"iana"},"application/vnd.software602.filler.form+xml":{"source":"iana","compressible":true,"extensions":["fo"]},"application/vnd.software602.filler.form-xml-zip":{"source":"iana"},"application/vnd.solent.sdkm+xml":{"source":"iana","compressible":true,"extensions":["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{"source":"iana","extensions":["dxp"]},"application/vnd.spotfire.sfs":{"source":"iana","extensions":["sfs"]},"application/vnd.sqlite3":{"source":"iana"},"application/vnd.sss-cod":{"source":"iana"},"application/vnd.sss-dtf":{"source":"iana"},"application/vnd.sss-ntf":{"source":"iana"},"application/vnd.stardivision.calc":{"source":"apache","extensions":["sdc"]},"application/vnd.stardivision.draw":{"source":"apache","extensions":["sda"]},"application/vnd.stardivision.impress":{"source":"apache","extensions":["sdd"]},"application/vnd.stardivision.math":{"source":"apache","extensions":["smf"]},"application/vnd.stardivision.writer":{"source":"apache","extensions":["sdw","vor"]},"application/vnd.stardivision.writer-global":{"source":"apache","extensions":["sgl"]},"application/vnd.stepmania.package":{"source":"iana","extensions":["smzip"]},"application/vnd.stepmania.stepchart":{"source":"iana","extensions":["sm"]},"application/vnd.street-stream":{"source":"iana"},"application/vnd.sun.wadl+xml":{"source":"iana","compressible":true,"extensions":["wadl"]},"application/vnd.sun.xml.calc":{"source":"apache","extensions":["sxc"]},"application/vnd.sun.xml.calc.template":{"source":"apache","extensions":["stc"]},"application/vnd.sun.xml.draw":{"source":"apache","extensions":["sxd"]},"application/vnd.sun.xml.draw.template":{"source":"apache","extensions":["std"]},"application/vnd.sun.xml.impress":{"source":"apache","extensions":["sxi"]},"application/vnd.sun.xml.impress.template":{"source":"apache","extensions":["sti"]},"application/vnd.sun.xml.math":{"source":"apache","extensions":["sxm"]},"application/vnd.sun.xml.writer":{"source":"apache","extensions":["sxw"]},"application/vnd.sun.xml.writer.global":{"source":"apache","extensions":["sxg"]},"application/vnd.sun.xml.writer.template":{"source":"apache","extensions":["stw"]},"application/vnd.sus-calendar":{"source":"iana","extensions":["sus","susp"]},"application/vnd.svd":{"source":"iana","extensions":["svd"]},"application/vnd.swiftview-ics":{"source":"iana"},"application/vnd.sycle+xml":{"source":"iana","compressible":true},"application/vnd.syft+json":{"source":"iana","compressible":true},"application/vnd.symbian.install":{"source":"apache","extensions":["sis","sisx"]},"application/vnd.syncml+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xsm"]},"application/vnd.syncml.dm+wbxml":{"source":"iana","charset":"UTF-8","extensions":["bdm"]},"application/vnd.syncml.dm+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xdm"]},"application/vnd.syncml.dm.notification":{"source":"iana"},"application/vnd.syncml.dmddf+wbxml":{"source":"iana"},"application/vnd.syncml.dmddf+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{"source":"iana"},"application/vnd.syncml.dmtnds+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.syncml.ds.notification":{"source":"iana"},"application/vnd.tableschema+json":{"source":"iana","compressible":true},"application/vnd.tao.intent-module-archive":{"source":"iana","extensions":["tao"]},"application/vnd.tcpdump.pcap":{"source":"iana","extensions":["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{"source":"iana","compressible":true},"application/vnd.tmd.mediaflex.api+xml":{"source":"iana","compressible":true},"application/vnd.tml":{"source":"iana"},"application/vnd.tmobile-livetv":{"source":"iana","extensions":["tmo"]},"application/vnd.tri.onesource":{"source":"iana"},"application/vnd.trid.tpt":{"source":"iana","extensions":["tpt"]},"application/vnd.triscape.mxs":{"source":"iana","extensions":["mxs"]},"application/vnd.trueapp":{"source":"iana","extensions":["tra"]},"application/vnd.truedoc":{"source":"iana"},"application/vnd.ubisoft.webplayer":{"source":"iana"},"application/vnd.ufdl":{"source":"iana","extensions":["ufd","ufdl"]},"application/vnd.uiq.theme":{"source":"iana","extensions":["utz"]},"application/vnd.umajin":{"source":"iana","extensions":["umj"]},"application/vnd.unity":{"source":"iana","extensions":["unityweb"]},"application/vnd.uoml+xml":{"source":"iana","compressible":true,"extensions":["uoml"]},"application/vnd.uplanet.alert":{"source":"iana"},"application/vnd.uplanet.alert-wbxml":{"source":"iana"},"application/vnd.uplanet.bearer-choice":{"source":"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{"source":"iana"},"application/vnd.uplanet.cacheop":{"source":"iana"},"application/vnd.uplanet.cacheop-wbxml":{"source":"iana"},"application/vnd.uplanet.channel":{"source":"iana"},"application/vnd.uplanet.channel-wbxml":{"source":"iana"},"application/vnd.uplanet.list":{"source":"iana"},"application/vnd.uplanet.list-wbxml":{"source":"iana"},"application/vnd.uplanet.listcmd":{"source":"iana"},"application/vnd.uplanet.listcmd-wbxml":{"source":"iana"},"application/vnd.uplanet.signal":{"source":"iana"},"application/vnd.uri-map":{"source":"iana"},"application/vnd.valve.source.material":{"source":"iana"},"application/vnd.vcx":{"source":"iana","extensions":["vcx"]},"application/vnd.vd-study":{"source":"iana"},"application/vnd.vectorworks":{"source":"iana"},"application/vnd.vel+json":{"source":"iana","compressible":true},"application/vnd.verimatrix.vcas":{"source":"iana"},"application/vnd.veritone.aion+json":{"source":"iana","compressible":true},"application/vnd.veryant.thin":{"source":"iana"},"application/vnd.ves.encrypted":{"source":"iana"},"application/vnd.vidsoft.vidconference":{"source":"iana"},"application/vnd.visio":{"source":"iana","extensions":["vsd","vst","vss","vsw"]},"application/vnd.visionary":{"source":"iana","extensions":["vis"]},"application/vnd.vividence.scriptfile":{"source":"iana"},"application/vnd.vsf":{"source":"iana","extensions":["vsf"]},"application/vnd.wap.sic":{"source":"iana"},"application/vnd.wap.slc":{"source":"iana"},"application/vnd.wap.wbxml":{"source":"iana","charset":"UTF-8","extensions":["wbxml"]},"application/vnd.wap.wmlc":{"source":"iana","extensions":["wmlc"]},"application/vnd.wap.wmlscriptc":{"source":"iana","extensions":["wmlsc"]},"application/vnd.webturbo":{"source":"iana","extensions":["wtb"]},"application/vnd.wfa.dpp":{"source":"iana"},"application/vnd.wfa.p2p":{"source":"iana"},"application/vnd.wfa.wsc":{"source":"iana"},"application/vnd.windows.devicepairing":{"source":"iana"},"application/vnd.wmc":{"source":"iana"},"application/vnd.wmf.bootstrap":{"source":"iana"},"application/vnd.wolfram.mathematica":{"source":"iana"},"application/vnd.wolfram.mathematica.package":{"source":"iana"},"application/vnd.wolfram.player":{"source":"iana","extensions":["nbp"]},"application/vnd.wordperfect":{"source":"iana","extensions":["wpd"]},"application/vnd.wqd":{"source":"iana","extensions":["wqd"]},"application/vnd.wrq-hp3000-labelled":{"source":"iana"},"application/vnd.wt.stf":{"source":"iana","extensions":["stf"]},"application/vnd.wv.csp+wbxml":{"source":"iana"},"application/vnd.wv.csp+xml":{"source":"iana","compressible":true},"application/vnd.wv.ssp+xml":{"source":"iana","compressible":true},"application/vnd.xacml+json":{"source":"iana","compressible":true},"application/vnd.xara":{"source":"iana","extensions":["xar"]},"application/vnd.xfdl":{"source":"iana","extensions":["xfdl"]},"application/vnd.xfdl.webform":{"source":"iana"},"application/vnd.xmi+xml":{"source":"iana","compressible":true},"application/vnd.xmpie.cpkg":{"source":"iana"},"application/vnd.xmpie.dpkg":{"source":"iana"},"application/vnd.xmpie.plan":{"source":"iana"},"application/vnd.xmpie.ppkg":{"source":"iana"},"application/vnd.xmpie.xlim":{"source":"iana"},"application/vnd.yamaha.hv-dic":{"source":"iana","extensions":["hvd"]},"application/vnd.yamaha.hv-script":{"source":"iana","extensions":["hvs"]},"application/vnd.yamaha.hv-voice":{"source":"iana","extensions":["hvp"]},"application/vnd.yamaha.openscoreformat":{"source":"iana","extensions":["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{"source":"iana","compressible":true,"extensions":["osfpvg"]},"application/vnd.yamaha.remote-setup":{"source":"iana"},"application/vnd.yamaha.smaf-audio":{"source":"iana","extensions":["saf"]},"application/vnd.yamaha.smaf-phrase":{"source":"iana","extensions":["spf"]},"application/vnd.yamaha.through-ngn":{"source":"iana"},"application/vnd.yamaha.tunnel-udpencap":{"source":"iana"},"application/vnd.yaoweme":{"source":"iana"},"application/vnd.yellowriver-custom-menu":{"source":"iana","extensions":["cmp"]},"application/vnd.youtube.yt":{"source":"iana"},"application/vnd.zul":{"source":"iana","extensions":["zir","zirz"]},"application/vnd.zzazz.deck+xml":{"source":"iana","compressible":true,"extensions":["zaz"]},"application/voicexml+xml":{"source":"iana","compressible":true,"extensions":["vxml"]},"application/voucher-cms+json":{"source":"iana","compressible":true},"application/vq-rtcpxr":{"source":"iana"},"application/wasm":{"source":"iana","compressible":true,"extensions":["wasm"]},"application/watcherinfo+xml":{"source":"iana","compressible":true,"extensions":["wif"]},"application/webpush-options+json":{"source":"iana","compressible":true},"application/whoispp-query":{"source":"iana"},"application/whoispp-response":{"source":"iana"},"application/widget":{"source":"iana","extensions":["wgt"]},"application/winhlp":{"source":"apache","extensions":["hlp"]},"application/wita":{"source":"iana"},"application/wordperfect5.1":{"source":"iana"},"application/wsdl+xml":{"source":"iana","compressible":true,"extensions":["wsdl"]},"application/wspolicy+xml":{"source":"iana","compressible":true,"extensions":["wspolicy"]},"application/x-7z-compressed":{"source":"apache","compressible":false,"extensions":["7z"]},"application/x-abiword":{"source":"apache","extensions":["abw"]},"application/x-ace-compressed":{"source":"apache","extensions":["ace"]},"application/x-amf":{"source":"apache"},"application/x-apple-diskimage":{"source":"apache","extensions":["dmg"]},"application/x-arj":{"compressible":false,"extensions":["arj"]},"application/x-authorware-bin":{"source":"apache","extensions":["aab","x32","u32","vox"]},"application/x-authorware-map":{"source":"apache","extensions":["aam"]},"application/x-authorware-seg":{"source":"apache","extensions":["aas"]},"application/x-bcpio":{"source":"apache","extensions":["bcpio"]},"application/x-bdoc":{"compressible":false,"extensions":["bdoc"]},"application/x-bittorrent":{"source":"apache","extensions":["torrent"]},"application/x-blorb":{"source":"apache","extensions":["blb","blorb"]},"application/x-bzip":{"source":"apache","compressible":false,"extensions":["bz"]},"application/x-bzip2":{"source":"apache","compressible":false,"extensions":["bz2","boz"]},"application/x-cbr":{"source":"apache","extensions":["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{"source":"apache","extensions":["vcd"]},"application/x-cfs-compressed":{"source":"apache","extensions":["cfs"]},"application/x-chat":{"source":"apache","extensions":["chat"]},"application/x-chess-pgn":{"source":"apache","extensions":["pgn"]},"application/x-chrome-extension":{"extensions":["crx"]},"application/x-cocoa":{"source":"nginx","extensions":["cco"]},"application/x-compress":{"source":"apache"},"application/x-conference":{"source":"apache","extensions":["nsc"]},"application/x-cpio":{"source":"apache","extensions":["cpio"]},"application/x-csh":{"source":"apache","extensions":["csh"]},"application/x-deb":{"compressible":false},"application/x-debian-package":{"source":"apache","extensions":["deb","udeb"]},"application/x-dgc-compressed":{"source":"apache","extensions":["dgc"]},"application/x-director":{"source":"apache","extensions":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{"source":"apache","extensions":["wad"]},"application/x-dtbncx+xml":{"source":"apache","compressible":true,"extensions":["ncx"]},"application/x-dtbook+xml":{"source":"apache","compressible":true,"extensions":["dtb"]},"application/x-dtbresource+xml":{"source":"apache","compressible":true,"extensions":["res"]},"application/x-dvi":{"source":"apache","compressible":false,"extensions":["dvi"]},"application/x-envoy":{"source":"apache","extensions":["evy"]},"application/x-eva":{"source":"apache","extensions":["eva"]},"application/x-font-bdf":{"source":"apache","extensions":["bdf"]},"application/x-font-dos":{"source":"apache"},"application/x-font-framemaker":{"source":"apache"},"application/x-font-ghostscript":{"source":"apache","extensions":["gsf"]},"application/x-font-libgrx":{"source":"apache"},"application/x-font-linux-psf":{"source":"apache","extensions":["psf"]},"application/x-font-pcf":{"source":"apache","extensions":["pcf"]},"application/x-font-snf":{"source":"apache","extensions":["snf"]},"application/x-font-speedo":{"source":"apache"},"application/x-font-sunos-news":{"source":"apache"},"application/x-font-type1":{"source":"apache","extensions":["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{"source":"apache"},"application/x-freearc":{"source":"apache","extensions":["arc"]},"application/x-futuresplash":{"source":"apache","extensions":["spl"]},"application/x-gca-compressed":{"source":"apache","extensions":["gca"]},"application/x-glulx":{"source":"apache","extensions":["ulx"]},"application/x-gnumeric":{"source":"apache","extensions":["gnumeric"]},"application/x-gramps-xml":{"source":"apache","extensions":["gramps"]},"application/x-gtar":{"source":"apache","extensions":["gtar"]},"application/x-gzip":{"source":"apache"},"application/x-hdf":{"source":"apache","extensions":["hdf"]},"application/x-httpd-php":{"compressible":true,"extensions":["php"]},"application/x-install-instructions":{"source":"apache","extensions":["install"]},"application/x-iso9660-image":{"source":"apache","extensions":["iso"]},"application/x-iwork-keynote-sffkey":{"extensions":["key"]},"application/x-iwork-numbers-sffnumbers":{"extensions":["numbers"]},"application/x-iwork-pages-sffpages":{"extensions":["pages"]},"application/x-java-archive-diff":{"source":"nginx","extensions":["jardiff"]},"application/x-java-jnlp-file":{"source":"apache","compressible":false,"extensions":["jnlp"]},"application/x-javascript":{"compressible":true},"application/x-keepass2":{"extensions":["kdbx"]},"application/x-latex":{"source":"apache","compressible":false,"extensions":["latex"]},"application/x-lua-bytecode":{"extensions":["luac"]},"application/x-lzh-compressed":{"source":"apache","extensions":["lzh","lha"]},"application/x-makeself":{"source":"nginx","extensions":["run"]},"application/x-mie":{"source":"apache","extensions":["mie"]},"application/x-mobipocket-ebook":{"source":"apache","extensions":["prc","mobi"]},"application/x-mpegurl":{"compressible":false},"application/x-ms-application":{"source":"apache","extensions":["application"]},"application/x-ms-shortcut":{"source":"apache","extensions":["lnk"]},"application/x-ms-wmd":{"source":"apache","extensions":["wmd"]},"application/x-ms-wmz":{"source":"apache","extensions":["wmz"]},"application/x-ms-xbap":{"source":"apache","extensions":["xbap"]},"application/x-msaccess":{"source":"apache","extensions":["mdb"]},"application/x-msbinder":{"source":"apache","extensions":["obd"]},"application/x-mscardfile":{"source":"apache","extensions":["crd"]},"application/x-msclip":{"source":"apache","extensions":["clp"]},"application/x-msdos-program":{"extensions":["exe"]},"application/x-msdownload":{"source":"apache","extensions":["exe","dll","com","bat","msi"]},"application/x-msmediaview":{"source":"apache","extensions":["mvb","m13","m14"]},"application/x-msmetafile":{"source":"apache","extensions":["wmf","wmz","emf","emz"]},"application/x-msmoney":{"source":"apache","extensions":["mny"]},"application/x-mspublisher":{"source":"apache","extensions":["pub"]},"application/x-msschedule":{"source":"apache","extensions":["scd"]},"application/x-msterminal":{"source":"apache","extensions":["trm"]},"application/x-mswrite":{"source":"apache","extensions":["wri"]},"application/x-netcdf":{"source":"apache","extensions":["nc","cdf"]},"application/x-ns-proxy-autoconfig":{"compressible":true,"extensions":["pac"]},"application/x-nzb":{"source":"apache","extensions":["nzb"]},"application/x-perl":{"source":"nginx","extensions":["pl","pm"]},"application/x-pilot":{"source":"nginx","extensions":["prc","pdb"]},"application/x-pkcs12":{"source":"apache","compressible":false,"extensions":["p12","pfx"]},"application/x-pkcs7-certificates":{"source":"apache","extensions":["p7b","spc"]},"application/x-pkcs7-certreqresp":{"source":"apache","extensions":["p7r"]},"application/x-pki-message":{"source":"iana"},"application/x-rar-compressed":{"source":"apache","compressible":false,"extensions":["rar"]},"application/x-redhat-package-manager":{"source":"nginx","extensions":["rpm"]},"application/x-research-info-systems":{"source":"apache","extensions":["ris"]},"application/x-sea":{"source":"nginx","extensions":["sea"]},"application/x-sh":{"source":"apache","compressible":true,"extensions":["sh"]},"application/x-shar":{"source":"apache","extensions":["shar"]},"application/x-shockwave-flash":{"source":"apache","compressible":false,"extensions":["swf"]},"application/x-silverlight-app":{"source":"apache","extensions":["xap"]},"application/x-sql":{"source":"apache","extensions":["sql"]},"application/x-stuffit":{"source":"apache","compressible":false,"extensions":["sit"]},"application/x-stuffitx":{"source":"apache","extensions":["sitx"]},"application/x-subrip":{"source":"apache","extensions":["srt"]},"application/x-sv4cpio":{"source":"apache","extensions":["sv4cpio"]},"application/x-sv4crc":{"source":"apache","extensions":["sv4crc"]},"application/x-t3vm-image":{"source":"apache","extensions":["t3"]},"application/x-tads":{"source":"apache","extensions":["gam"]},"application/x-tar":{"source":"apache","compressible":true,"extensions":["tar"]},"application/x-tcl":{"source":"apache","extensions":["tcl","tk"]},"application/x-tex":{"source":"apache","extensions":["tex"]},"application/x-tex-tfm":{"source":"apache","extensions":["tfm"]},"application/x-texinfo":{"source":"apache","extensions":["texinfo","texi"]},"application/x-tgif":{"source":"apache","extensions":["obj"]},"application/x-ustar":{"source":"apache","extensions":["ustar"]},"application/x-virtualbox-hdd":{"compressible":true,"extensions":["hdd"]},"application/x-virtualbox-ova":{"compressible":true,"extensions":["ova"]},"application/x-virtualbox-ovf":{"compressible":true,"extensions":["ovf"]},"application/x-virtualbox-vbox":{"compressible":true,"extensions":["vbox"]},"application/x-virtualbox-vbox-extpack":{"compressible":false,"extensions":["vbox-extpack"]},"application/x-virtualbox-vdi":{"compressible":true,"extensions":["vdi"]},"application/x-virtualbox-vhd":{"compressible":true,"extensions":["vhd"]},"application/x-virtualbox-vmdk":{"compressible":true,"extensions":["vmdk"]},"application/x-wais-source":{"source":"apache","extensions":["src"]},"application/x-web-app-manifest+json":{"compressible":true,"extensions":["webapp"]},"application/x-www-form-urlencoded":{"source":"iana","compressible":true},"application/x-x509-ca-cert":{"source":"iana","extensions":["der","crt","pem"]},"application/x-x509-ca-ra-cert":{"source":"iana"},"application/x-x509-next-ca-cert":{"source":"iana"},"application/x-xfig":{"source":"apache","extensions":["fig"]},"application/x-xliff+xml":{"source":"apache","compressible":true,"extensions":["xlf"]},"application/x-xpinstall":{"source":"apache","compressible":false,"extensions":["xpi"]},"application/x-xz":{"source":"apache","extensions":["xz"]},"application/x-zmachine":{"source":"apache","extensions":["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{"source":"iana"},"application/xacml+xml":{"source":"iana","compressible":true},"application/xaml+xml":{"source":"apache","compressible":true,"extensions":["xaml"]},"application/xcap-att+xml":{"source":"iana","compressible":true,"extensions":["xav"]},"application/xcap-caps+xml":{"source":"iana","compressible":true,"extensions":["xca"]},"application/xcap-diff+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/xcap-el+xml":{"source":"iana","compressible":true,"extensions":["xel"]},"application/xcap-error+xml":{"source":"iana","compressible":true},"application/xcap-ns+xml":{"source":"iana","compressible":true,"extensions":["xns"]},"application/xcon-conference-info+xml":{"source":"iana","compressible":true},"application/xcon-conference-info-diff+xml":{"source":"iana","compressible":true},"application/xenc+xml":{"source":"iana","compressible":true,"extensions":["xenc"]},"application/xhtml+xml":{"source":"iana","compressible":true,"extensions":["xhtml","xht"]},"application/xhtml-voice+xml":{"source":"apache","compressible":true},"application/xliff+xml":{"source":"iana","compressible":true,"extensions":["xlf"]},"application/xml":{"source":"iana","compressible":true,"extensions":["xml","xsl","xsd","rng"]},"application/xml-dtd":{"source":"iana","compressible":true,"extensions":["dtd"]},"application/xml-external-parsed-entity":{"source":"iana"},"application/xml-patch+xml":{"source":"iana","compressible":true},"application/xmpp+xml":{"source":"iana","compressible":true},"application/xop+xml":{"source":"iana","compressible":true,"extensions":["xop"]},"application/xproc+xml":{"source":"apache","compressible":true,"extensions":["xpl"]},"application/xslt+xml":{"source":"iana","compressible":true,"extensions":["xsl","xslt"]},"application/xspf+xml":{"source":"apache","compressible":true,"extensions":["xspf"]},"application/xv+xml":{"source":"iana","compressible":true,"extensions":["mxml","xhvml","xvml","xvm"]},"application/yang":{"source":"iana","extensions":["yang"]},"application/yang-data+json":{"source":"iana","compressible":true},"application/yang-data+xml":{"source":"iana","compressible":true},"application/yang-patch+json":{"source":"iana","compressible":true},"application/yang-patch+xml":{"source":"iana","compressible":true},"application/yin+xml":{"source":"iana","compressible":true,"extensions":["yin"]},"application/zip":{"source":"iana","compressible":false,"extensions":["zip"]},"application/zlib":{"source":"iana"},"application/zstd":{"source":"iana"},"audio/1d-interleaved-parityfec":{"source":"iana"},"audio/32kadpcm":{"source":"iana"},"audio/3gpp":{"source":"iana","compressible":false,"extensions":["3gpp"]},"audio/3gpp2":{"source":"iana"},"audio/aac":{"source":"iana"},"audio/ac3":{"source":"iana"},"audio/adpcm":{"source":"apache","extensions":["adp"]},"audio/amr":{"source":"iana","extensions":["amr"]},"audio/amr-wb":{"source":"iana"},"audio/amr-wb+":{"source":"iana"},"audio/aptx":{"source":"iana"},"audio/asc":{"source":"iana"},"audio/atrac-advanced-lossless":{"source":"iana"},"audio/atrac-x":{"source":"iana"},"audio/atrac3":{"source":"iana"},"audio/basic":{"source":"iana","compressible":false,"extensions":["au","snd"]},"audio/bv16":{"source":"iana"},"audio/bv32":{"source":"iana"},"audio/clearmode":{"source":"iana"},"audio/cn":{"source":"iana"},"audio/dat12":{"source":"iana"},"audio/dls":{"source":"iana"},"audio/dsr-es201108":{"source":"iana"},"audio/dsr-es202050":{"source":"iana"},"audio/dsr-es202211":{"source":"iana"},"audio/dsr-es202212":{"source":"iana"},"audio/dv":{"source":"iana"},"audio/dvi4":{"source":"iana"},"audio/eac3":{"source":"iana"},"audio/encaprtp":{"source":"iana"},"audio/evrc":{"source":"iana"},"audio/evrc-qcp":{"source":"iana"},"audio/evrc0":{"source":"iana"},"audio/evrc1":{"source":"iana"},"audio/evrcb":{"source":"iana"},"audio/evrcb0":{"source":"iana"},"audio/evrcb1":{"source":"iana"},"audio/evrcnw":{"source":"iana"},"audio/evrcnw0":{"source":"iana"},"audio/evrcnw1":{"source":"iana"},"audio/evrcwb":{"source":"iana"},"audio/evrcwb0":{"source":"iana"},"audio/evrcwb1":{"source":"iana"},"audio/evs":{"source":"iana"},"audio/flexfec":{"source":"iana"},"audio/fwdred":{"source":"iana"},"audio/g711-0":{"source":"iana"},"audio/g719":{"source":"iana"},"audio/g722":{"source":"iana"},"audio/g7221":{"source":"iana"},"audio/g723":{"source":"iana"},"audio/g726-16":{"source":"iana"},"audio/g726-24":{"source":"iana"},"audio/g726-32":{"source":"iana"},"audio/g726-40":{"source":"iana"},"audio/g728":{"source":"iana"},"audio/g729":{"source":"iana"},"audio/g7291":{"source":"iana"},"audio/g729d":{"source":"iana"},"audio/g729e":{"source":"iana"},"audio/gsm":{"source":"iana"},"audio/gsm-efr":{"source":"iana"},"audio/gsm-hr-08":{"source":"iana"},"audio/ilbc":{"source":"iana"},"audio/ip-mr_v2.5":{"source":"iana"},"audio/isac":{"source":"apache"},"audio/l16":{"source":"iana"},"audio/l20":{"source":"iana"},"audio/l24":{"source":"iana","compressible":false},"audio/l8":{"source":"iana"},"audio/lpc":{"source":"iana"},"audio/melp":{"source":"iana"},"audio/melp1200":{"source":"iana"},"audio/melp2400":{"source":"iana"},"audio/melp600":{"source":"iana"},"audio/mhas":{"source":"iana"},"audio/midi":{"source":"apache","extensions":["mid","midi","kar","rmi"]},"audio/mobile-xmf":{"source":"iana","extensions":["mxmf"]},"audio/mp3":{"compressible":false,"extensions":["mp3"]},"audio/mp4":{"source":"iana","compressible":false,"extensions":["m4a","mp4a"]},"audio/mp4a-latm":{"source":"iana"},"audio/mpa":{"source":"iana"},"audio/mpa-robust":{"source":"iana"},"audio/mpeg":{"source":"iana","compressible":false,"extensions":["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{"source":"iana"},"audio/musepack":{"source":"apache"},"audio/ogg":{"source":"iana","compressible":false,"extensions":["oga","ogg","spx","opus"]},"audio/opus":{"source":"iana"},"audio/parityfec":{"source":"iana"},"audio/pcma":{"source":"iana"},"audio/pcma-wb":{"source":"iana"},"audio/pcmu":{"source":"iana"},"audio/pcmu-wb":{"source":"iana"},"audio/prs.sid":{"source":"iana"},"audio/qcelp":{"source":"iana"},"audio/raptorfec":{"source":"iana"},"audio/red":{"source":"iana"},"audio/rtp-enc-aescm128":{"source":"iana"},"audio/rtp-midi":{"source":"iana"},"audio/rtploopback":{"source":"iana"},"audio/rtx":{"source":"iana"},"audio/s3m":{"source":"apache","extensions":["s3m"]},"audio/scip":{"source":"iana"},"audio/silk":{"source":"apache","extensions":["sil"]},"audio/smv":{"source":"iana"},"audio/smv-qcp":{"source":"iana"},"audio/smv0":{"source":"iana"},"audio/sofa":{"source":"iana"},"audio/sp-midi":{"source":"iana"},"audio/speex":{"source":"iana"},"audio/t140c":{"source":"iana"},"audio/t38":{"source":"iana"},"audio/telephone-event":{"source":"iana"},"audio/tetra_acelp":{"source":"iana"},"audio/tetra_acelp_bb":{"source":"iana"},"audio/tone":{"source":"iana"},"audio/tsvcis":{"source":"iana"},"audio/uemclip":{"source":"iana"},"audio/ulpfec":{"source":"iana"},"audio/usac":{"source":"iana"},"audio/vdvi":{"source":"iana"},"audio/vmr-wb":{"source":"iana"},"audio/vnd.3gpp.iufp":{"source":"iana"},"audio/vnd.4sb":{"source":"iana"},"audio/vnd.audiokoz":{"source":"iana"},"audio/vnd.celp":{"source":"iana"},"audio/vnd.cisco.nse":{"source":"iana"},"audio/vnd.cmles.radio-events":{"source":"iana"},"audio/vnd.cns.anp1":{"source":"iana"},"audio/vnd.cns.inf1":{"source":"iana"},"audio/vnd.dece.audio":{"source":"iana","extensions":["uva","uvva"]},"audio/vnd.digital-winds":{"source":"iana","extensions":["eol"]},"audio/vnd.dlna.adts":{"source":"iana"},"audio/vnd.dolby.heaac.1":{"source":"iana"},"audio/vnd.dolby.heaac.2":{"source":"iana"},"audio/vnd.dolby.mlp":{"source":"iana"},"audio/vnd.dolby.mps":{"source":"iana"},"audio/vnd.dolby.pl2":{"source":"iana"},"audio/vnd.dolby.pl2x":{"source":"iana"},"audio/vnd.dolby.pl2z":{"source":"iana"},"audio/vnd.dolby.pulse.1":{"source":"iana"},"audio/vnd.dra":{"source":"iana","extensions":["dra"]},"audio/vnd.dts":{"source":"iana","extensions":["dts"]},"audio/vnd.dts.hd":{"source":"iana","extensions":["dtshd"]},"audio/vnd.dts.uhd":{"source":"iana"},"audio/vnd.dvb.file":{"source":"iana"},"audio/vnd.everad.plj":{"source":"iana"},"audio/vnd.hns.audio":{"source":"iana"},"audio/vnd.lucent.voice":{"source":"iana","extensions":["lvp"]},"audio/vnd.ms-playready.media.pya":{"source":"iana","extensions":["pya"]},"audio/vnd.nokia.mobile-xmf":{"source":"iana"},"audio/vnd.nortel.vbk":{"source":"iana"},"audio/vnd.nuera.ecelp4800":{"source":"iana","extensions":["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{"source":"iana","extensions":["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{"source":"iana","extensions":["ecelp9600"]},"audio/vnd.octel.sbc":{"source":"iana"},"audio/vnd.presonus.multitrack":{"source":"iana"},"audio/vnd.qcelp":{"source":"iana"},"audio/vnd.rhetorex.32kadpcm":{"source":"iana"},"audio/vnd.rip":{"source":"iana","extensions":["rip"]},"audio/vnd.rn-realaudio":{"compressible":false},"audio/vnd.sealedmedia.softseal.mpeg":{"source":"iana"},"audio/vnd.vmx.cvsd":{"source":"iana"},"audio/vnd.wave":{"compressible":false},"audio/vorbis":{"source":"iana","compressible":false},"audio/vorbis-config":{"source":"iana"},"audio/wav":{"compressible":false,"extensions":["wav"]},"audio/wave":{"compressible":false,"extensions":["wav"]},"audio/webm":{"source":"apache","compressible":false,"extensions":["weba"]},"audio/x-aac":{"source":"apache","compressible":false,"extensions":["aac"]},"audio/x-aiff":{"source":"apache","extensions":["aif","aiff","aifc"]},"audio/x-caf":{"source":"apache","compressible":false,"extensions":["caf"]},"audio/x-flac":{"source":"apache","extensions":["flac"]},"audio/x-m4a":{"source":"nginx","extensions":["m4a"]},"audio/x-matroska":{"source":"apache","extensions":["mka"]},"audio/x-mpegurl":{"source":"apache","extensions":["m3u"]},"audio/x-ms-wax":{"source":"apache","extensions":["wax"]},"audio/x-ms-wma":{"source":"apache","extensions":["wma"]},"audio/x-pn-realaudio":{"source":"apache","extensions":["ram","ra"]},"audio/x-pn-realaudio-plugin":{"source":"apache","extensions":["rmp"]},"audio/x-realaudio":{"source":"nginx","extensions":["ra"]},"audio/x-tta":{"source":"apache"},"audio/x-wav":{"source":"apache","extensions":["wav"]},"audio/xm":{"source":"apache","extensions":["xm"]},"chemical/x-cdx":{"source":"apache","extensions":["cdx"]},"chemical/x-cif":{"source":"apache","extensions":["cif"]},"chemical/x-cmdf":{"source":"apache","extensions":["cmdf"]},"chemical/x-cml":{"source":"apache","extensions":["cml"]},"chemical/x-csml":{"source":"apache","extensions":["csml"]},"chemical/x-pdb":{"source":"apache"},"chemical/x-xyz":{"source":"apache","extensions":["xyz"]},"font/collection":{"source":"iana","extensions":["ttc"]},"font/otf":{"source":"iana","compressible":true,"extensions":["otf"]},"font/sfnt":{"source":"iana"},"font/ttf":{"source":"iana","compressible":true,"extensions":["ttf"]},"font/woff":{"source":"iana","extensions":["woff"]},"font/woff2":{"source":"iana","extensions":["woff2"]},"image/aces":{"source":"iana","extensions":["exr"]},"image/apng":{"compressible":false,"extensions":["apng"]},"image/avci":{"source":"iana","extensions":["avci"]},"image/avcs":{"source":"iana","extensions":["avcs"]},"image/avif":{"source":"iana","compressible":false,"extensions":["avif"]},"image/bmp":{"source":"iana","compressible":true,"extensions":["bmp"]},"image/cgm":{"source":"iana","extensions":["cgm"]},"image/dicom-rle":{"source":"iana","extensions":["drle"]},"image/emf":{"source":"iana","extensions":["emf"]},"image/fits":{"source":"iana","extensions":["fits"]},"image/g3fax":{"source":"iana","extensions":["g3"]},"image/gif":{"source":"iana","compressible":false,"extensions":["gif"]},"image/heic":{"source":"iana","extensions":["heic"]},"image/heic-sequence":{"source":"iana","extensions":["heics"]},"image/heif":{"source":"iana","extensions":["heif"]},"image/heif-sequence":{"source":"iana","extensions":["heifs"]},"image/hej2k":{"source":"iana","extensions":["hej2"]},"image/hsj2":{"source":"iana","extensions":["hsj2"]},"image/ief":{"source":"iana","extensions":["ief"]},"image/jls":{"source":"iana","extensions":["jls"]},"image/jp2":{"source":"iana","compressible":false,"extensions":["jp2","jpg2"]},"image/jpeg":{"source":"iana","compressible":false,"extensions":["jpeg","jpg","jpe"]},"image/jph":{"source":"iana","extensions":["jph"]},"image/jphc":{"source":"iana","extensions":["jhc"]},"image/jpm":{"source":"iana","compressible":false,"extensions":["jpm"]},"image/jpx":{"source":"iana","compressible":false,"extensions":["jpx","jpf"]},"image/jxr":{"source":"iana","extensions":["jxr"]},"image/jxra":{"source":"iana","extensions":["jxra"]},"image/jxrs":{"source":"iana","extensions":["jxrs"]},"image/jxs":{"source":"iana","extensions":["jxs"]},"image/jxsc":{"source":"iana","extensions":["jxsc"]},"image/jxsi":{"source":"iana","extensions":["jxsi"]},"image/jxss":{"source":"iana","extensions":["jxss"]},"image/ktx":{"source":"iana","extensions":["ktx"]},"image/ktx2":{"source":"iana","extensions":["ktx2"]},"image/naplps":{"source":"iana"},"image/pjpeg":{"compressible":false},"image/png":{"source":"iana","compressible":false,"extensions":["png"]},"image/prs.btif":{"source":"iana","extensions":["btif"]},"image/prs.pti":{"source":"iana","extensions":["pti"]},"image/pwg-raster":{"source":"iana"},"image/sgi":{"source":"apache","extensions":["sgi"]},"image/svg+xml":{"source":"iana","compressible":true,"extensions":["svg","svgz"]},"image/t38":{"source":"iana","extensions":["t38"]},"image/tiff":{"source":"iana","compressible":false,"extensions":["tif","tiff"]},"image/tiff-fx":{"source":"iana","extensions":["tfx"]},"image/vnd.adobe.photoshop":{"source":"iana","compressible":true,"extensions":["psd"]},"image/vnd.airzip.accelerator.azv":{"source":"iana","extensions":["azv"]},"image/vnd.cns.inf2":{"source":"iana"},"image/vnd.dece.graphic":{"source":"iana","extensions":["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{"source":"iana","extensions":["djvu","djv"]},"image/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"image/vnd.dwg":{"source":"iana","extensions":["dwg"]},"image/vnd.dxf":{"source":"iana","extensions":["dxf"]},"image/vnd.fastbidsheet":{"source":"iana","extensions":["fbs"]},"image/vnd.fpx":{"source":"iana","extensions":["fpx"]},"image/vnd.fst":{"source":"iana","extensions":["fst"]},"image/vnd.fujixerox.edmics-mmr":{"source":"iana","extensions":["mmr"]},"image/vnd.fujixerox.edmics-rlc":{"source":"iana","extensions":["rlc"]},"image/vnd.globalgraphics.pgb":{"source":"iana"},"image/vnd.microsoft.icon":{"source":"iana","compressible":true,"extensions":["ico"]},"image/vnd.mix":{"source":"iana"},"image/vnd.mozilla.apng":{"source":"iana"},"image/vnd.ms-dds":{"compressible":true,"extensions":["dds"]},"image/vnd.ms-modi":{"source":"iana","extensions":["mdi"]},"image/vnd.ms-photo":{"source":"apache","extensions":["wdp"]},"image/vnd.net-fpx":{"source":"iana","extensions":["npx"]},"image/vnd.pco.b16":{"source":"iana","extensions":["b16"]},"image/vnd.radiance":{"source":"iana"},"image/vnd.sealed.png":{"source":"iana"},"image/vnd.sealedmedia.softseal.gif":{"source":"iana"},"image/vnd.sealedmedia.softseal.jpg":{"source":"iana"},"image/vnd.svf":{"source":"iana"},"image/vnd.tencent.tap":{"source":"iana","extensions":["tap"]},"image/vnd.valve.source.texture":{"source":"iana","extensions":["vtf"]},"image/vnd.wap.wbmp":{"source":"iana","extensions":["wbmp"]},"image/vnd.xiff":{"source":"iana","extensions":["xif"]},"image/vnd.zbrush.pcx":{"source":"iana","extensions":["pcx"]},"image/webp":{"source":"apache","extensions":["webp"]},"image/wmf":{"source":"iana","extensions":["wmf"]},"image/x-3ds":{"source":"apache","extensions":["3ds"]},"image/x-cmu-raster":{"source":"apache","extensions":["ras"]},"image/x-cmx":{"source":"apache","extensions":["cmx"]},"image/x-freehand":{"source":"apache","extensions":["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{"source":"apache","compressible":true,"extensions":["ico"]},"image/x-jng":{"source":"nginx","extensions":["jng"]},"image/x-mrsid-image":{"source":"apache","extensions":["sid"]},"image/x-ms-bmp":{"source":"nginx","compressible":true,"extensions":["bmp"]},"image/x-pcx":{"source":"apache","extensions":["pcx"]},"image/x-pict":{"source":"apache","extensions":["pic","pct"]},"image/x-portable-anymap":{"source":"apache","extensions":["pnm"]},"image/x-portable-bitmap":{"source":"apache","extensions":["pbm"]},"image/x-portable-graymap":{"source":"apache","extensions":["pgm"]},"image/x-portable-pixmap":{"source":"apache","extensions":["ppm"]},"image/x-rgb":{"source":"apache","extensions":["rgb"]},"image/x-tga":{"source":"apache","extensions":["tga"]},"image/x-xbitmap":{"source":"apache","extensions":["xbm"]},"image/x-xcf":{"compressible":false},"image/x-xpixmap":{"source":"apache","extensions":["xpm"]},"image/x-xwindowdump":{"source":"apache","extensions":["xwd"]},"message/cpim":{"source":"iana"},"message/delivery-status":{"source":"iana"},"message/disposition-notification":{"source":"iana","extensions":["disposition-notification"]},"message/external-body":{"source":"iana"},"message/feedback-report":{"source":"iana"},"message/global":{"source":"iana","extensions":["u8msg"]},"message/global-delivery-status":{"source":"iana","extensions":["u8dsn"]},"message/global-disposition-notification":{"source":"iana","extensions":["u8mdn"]},"message/global-headers":{"source":"iana","extensions":["u8hdr"]},"message/http":{"source":"iana","compressible":false},"message/imdn+xml":{"source":"iana","compressible":true},"message/news":{"source":"iana"},"message/partial":{"source":"iana","compressible":false},"message/rfc822":{"source":"iana","compressible":true,"extensions":["eml","mime"]},"message/s-http":{"source":"iana"},"message/sip":{"source":"iana"},"message/sipfrag":{"source":"iana"},"message/tracking-status":{"source":"iana"},"message/vnd.si.simp":{"source":"iana"},"message/vnd.wfa.wsc":{"source":"iana","extensions":["wsc"]},"model/3mf":{"source":"iana","extensions":["3mf"]},"model/e57":{"source":"iana"},"model/gltf+json":{"source":"iana","compressible":true,"extensions":["gltf"]},"model/gltf-binary":{"source":"iana","compressible":true,"extensions":["glb"]},"model/iges":{"source":"iana","compressible":false,"extensions":["igs","iges"]},"model/mesh":{"source":"iana","compressible":false,"extensions":["msh","mesh","silo"]},"model/mtl":{"source":"iana","extensions":["mtl"]},"model/obj":{"source":"iana","extensions":["obj"]},"model/step":{"source":"iana"},"model/step+xml":{"source":"iana","compressible":true,"extensions":["stpx"]},"model/step+zip":{"source":"iana","compressible":false,"extensions":["stpz"]},"model/step-xml+zip":{"source":"iana","compressible":false,"extensions":["stpxz"]},"model/stl":{"source":"iana","extensions":["stl"]},"model/vnd.collada+xml":{"source":"iana","compressible":true,"extensions":["dae"]},"model/vnd.dwf":{"source":"iana","extensions":["dwf"]},"model/vnd.flatland.3dml":{"source":"iana"},"model/vnd.gdl":{"source":"iana","extensions":["gdl"]},"model/vnd.gs-gdl":{"source":"apache"},"model/vnd.gs.gdl":{"source":"iana"},"model/vnd.gtw":{"source":"iana","extensions":["gtw"]},"model/vnd.moml+xml":{"source":"iana","compressible":true},"model/vnd.mts":{"source":"iana","extensions":["mts"]},"model/vnd.opengex":{"source":"iana","extensions":["ogex"]},"model/vnd.parasolid.transmit.binary":{"source":"iana","extensions":["x_b"]},"model/vnd.parasolid.transmit.text":{"source":"iana","extensions":["x_t"]},"model/vnd.pytha.pyox":{"source":"iana"},"model/vnd.rosette.annotated-data-model":{"source":"iana"},"model/vnd.sap.vds":{"source":"iana","extensions":["vds"]},"model/vnd.usdz+zip":{"source":"iana","compressible":false,"extensions":["usdz"]},"model/vnd.valve.source.compiled-map":{"source":"iana","extensions":["bsp"]},"model/vnd.vtu":{"source":"iana","extensions":["vtu"]},"model/vrml":{"source":"iana","compressible":false,"extensions":["wrl","vrml"]},"model/x3d+binary":{"source":"apache","compressible":false,"extensions":["x3db","x3dbz"]},"model/x3d+fastinfoset":{"source":"iana","extensions":["x3db"]},"model/x3d+vrml":{"source":"apache","compressible":false,"extensions":["x3dv","x3dvz"]},"model/x3d+xml":{"source":"iana","compressible":true,"extensions":["x3d","x3dz"]},"model/x3d-vrml":{"source":"iana","extensions":["x3dv"]},"multipart/alternative":{"source":"iana","compressible":false},"multipart/appledouble":{"source":"iana"},"multipart/byteranges":{"source":"iana"},"multipart/digest":{"source":"iana"},"multipart/encrypted":{"source":"iana","compressible":false},"multipart/form-data":{"source":"iana","compressible":false},"multipart/header-set":{"source":"iana"},"multipart/mixed":{"source":"iana"},"multipart/multilingual":{"source":"iana"},"multipart/parallel":{"source":"iana"},"multipart/related":{"source":"iana","compressible":false},"multipart/report":{"source":"iana"},"multipart/signed":{"source":"iana","compressible":false},"multipart/vnd.bint.med-plus":{"source":"iana"},"multipart/voice-message":{"source":"iana"},"multipart/x-mixed-replace":{"source":"iana"},"text/1d-interleaved-parityfec":{"source":"iana"},"text/cache-manifest":{"source":"iana","compressible":true,"extensions":["appcache","manifest"]},"text/calendar":{"source":"iana","extensions":["ics","ifb"]},"text/calender":{"compressible":true},"text/cmd":{"compressible":true},"text/coffeescript":{"extensions":["coffee","litcoffee"]},"text/cql":{"source":"iana"},"text/cql-expression":{"source":"iana"},"text/cql-identifier":{"source":"iana"},"text/css":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["css"]},"text/csv":{"source":"iana","compressible":true,"extensions":["csv"]},"text/csv-schema":{"source":"iana"},"text/directory":{"source":"iana"},"text/dns":{"source":"iana"},"text/ecmascript":{"source":"iana"},"text/encaprtp":{"source":"iana"},"text/enriched":{"source":"iana"},"text/fhirpath":{"source":"iana"},"text/flexfec":{"source":"iana"},"text/fwdred":{"source":"iana"},"text/gff3":{"source":"iana"},"text/grammar-ref-list":{"source":"iana"},"text/html":{"source":"iana","compressible":true,"extensions":["html","htm","shtml"]},"text/jade":{"extensions":["jade"]},"text/javascript":{"source":"iana","compressible":true},"text/jcr-cnd":{"source":"iana"},"text/jsx":{"compressible":true,"extensions":["jsx"]},"text/less":{"compressible":true,"extensions":["less"]},"text/markdown":{"source":"iana","compressible":true,"extensions":["markdown","md"]},"text/mathml":{"source":"nginx","extensions":["mml"]},"text/mdx":{"compressible":true,"extensions":["mdx"]},"text/mizar":{"source":"iana"},"text/n3":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["n3"]},"text/parameters":{"source":"iana","charset":"UTF-8"},"text/parityfec":{"source":"iana"},"text/plain":{"source":"iana","compressible":true,"extensions":["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{"source":"iana","charset":"UTF-8"},"text/prs.fallenstein.rst":{"source":"iana"},"text/prs.lines.tag":{"source":"iana","extensions":["dsc"]},"text/prs.prop.logic":{"source":"iana"},"text/raptorfec":{"source":"iana"},"text/red":{"source":"iana"},"text/rfc822-headers":{"source":"iana"},"text/richtext":{"source":"iana","compressible":true,"extensions":["rtx"]},"text/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"text/rtp-enc-aescm128":{"source":"iana"},"text/rtploopback":{"source":"iana"},"text/rtx":{"source":"iana"},"text/sgml":{"source":"iana","extensions":["sgml","sgm"]},"text/shaclc":{"source":"iana"},"text/shex":{"source":"iana","extensions":["shex"]},"text/slim":{"extensions":["slim","slm"]},"text/spdx":{"source":"iana","extensions":["spdx"]},"text/strings":{"source":"iana"},"text/stylus":{"extensions":["stylus","styl"]},"text/t140":{"source":"iana"},"text/tab-separated-values":{"source":"iana","compressible":true,"extensions":["tsv"]},"text/troff":{"source":"iana","extensions":["t","tr","roff","man","me","ms"]},"text/turtle":{"source":"iana","charset":"UTF-8","extensions":["ttl"]},"text/ulpfec":{"source":"iana"},"text/uri-list":{"source":"iana","compressible":true,"extensions":["uri","uris","urls"]},"text/vcard":{"source":"iana","compressible":true,"extensions":["vcard"]},"text/vnd.a":{"source":"iana"},"text/vnd.abc":{"source":"iana"},"text/vnd.ascii-art":{"source":"iana"},"text/vnd.curl":{"source":"iana","extensions":["curl"]},"text/vnd.curl.dcurl":{"source":"apache","extensions":["dcurl"]},"text/vnd.curl.mcurl":{"source":"apache","extensions":["mcurl"]},"text/vnd.curl.scurl":{"source":"apache","extensions":["scurl"]},"text/vnd.debian.copyright":{"source":"iana","charset":"UTF-8"},"text/vnd.dmclientscript":{"source":"iana"},"text/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"text/vnd.esmertec.theme-descriptor":{"source":"iana","charset":"UTF-8"},"text/vnd.familysearch.gedcom":{"source":"iana","extensions":["ged"]},"text/vnd.ficlab.flt":{"source":"iana"},"text/vnd.fly":{"source":"iana","extensions":["fly"]},"text/vnd.fmi.flexstor":{"source":"iana","extensions":["flx"]},"text/vnd.gml":{"source":"iana"},"text/vnd.graphviz":{"source":"iana","extensions":["gv"]},"text/vnd.hans":{"source":"iana"},"text/vnd.hgl":{"source":"iana"},"text/vnd.in3d.3dml":{"source":"iana","extensions":["3dml"]},"text/vnd.in3d.spot":{"source":"iana","extensions":["spot"]},"text/vnd.iptc.newsml":{"source":"iana"},"text/vnd.iptc.nitf":{"source":"iana"},"text/vnd.latex-z":{"source":"iana"},"text/vnd.motorola.reflex":{"source":"iana"},"text/vnd.ms-mediapackage":{"source":"iana"},"text/vnd.net2phone.commcenter.command":{"source":"iana"},"text/vnd.radisys.msml-basic-layout":{"source":"iana"},"text/vnd.senx.warpscript":{"source":"iana"},"text/vnd.si.uricatalogue":{"source":"iana"},"text/vnd.sosi":{"source":"iana"},"text/vnd.sun.j2me.app-descriptor":{"source":"iana","charset":"UTF-8","extensions":["jad"]},"text/vnd.trolltech.linguist":{"source":"iana","charset":"UTF-8"},"text/vnd.wap.si":{"source":"iana"},"text/vnd.wap.sl":{"source":"iana"},"text/vnd.wap.wml":{"source":"iana","extensions":["wml"]},"text/vnd.wap.wmlscript":{"source":"iana","extensions":["wmls"]},"text/vtt":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["vtt"]},"text/x-asm":{"source":"apache","extensions":["s","asm"]},"text/x-c":{"source":"apache","extensions":["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{"source":"nginx","extensions":["htc"]},"text/x-fortran":{"source":"apache","extensions":["f","for","f77","f90"]},"text/x-gwt-rpc":{"compressible":true},"text/x-handlebars-template":{"extensions":["hbs"]},"text/x-java-source":{"source":"apache","extensions":["java"]},"text/x-jquery-tmpl":{"compressible":true},"text/x-lua":{"extensions":["lua"]},"text/x-markdown":{"compressible":true,"extensions":["mkd"]},"text/x-nfo":{"source":"apache","extensions":["nfo"]},"text/x-opml":{"source":"apache","extensions":["opml"]},"text/x-org":{"compressible":true,"extensions":["org"]},"text/x-pascal":{"source":"apache","extensions":["p","pas"]},"text/x-processing":{"compressible":true,"extensions":["pde"]},"text/x-sass":{"extensions":["sass"]},"text/x-scss":{"extensions":["scss"]},"text/x-setext":{"source":"apache","extensions":["etx"]},"text/x-sfv":{"source":"apache","extensions":["sfv"]},"text/x-suse-ymp":{"compressible":true,"extensions":["ymp"]},"text/x-uuencode":{"source":"apache","extensions":["uu"]},"text/x-vcalendar":{"source":"apache","extensions":["vcs"]},"text/x-vcard":{"source":"apache","extensions":["vcf"]},"text/xml":{"source":"iana","compressible":true,"extensions":["xml"]},"text/xml-external-parsed-entity":{"source":"iana"},"text/yaml":{"compressible":true,"extensions":["yaml","yml"]},"video/1d-interleaved-parityfec":{"source":"iana"},"video/3gpp":{"source":"iana","extensions":["3gp","3gpp"]},"video/3gpp-tt":{"source":"iana"},"video/3gpp2":{"source":"iana","extensions":["3g2"]},"video/av1":{"source":"iana"},"video/bmpeg":{"source":"iana"},"video/bt656":{"source":"iana"},"video/celb":{"source":"iana"},"video/dv":{"source":"iana"},"video/encaprtp":{"source":"iana"},"video/ffv1":{"source":"iana"},"video/flexfec":{"source":"iana"},"video/h261":{"source":"iana","extensions":["h261"]},"video/h263":{"source":"iana","extensions":["h263"]},"video/h263-1998":{"source":"iana"},"video/h263-2000":{"source":"iana"},"video/h264":{"source":"iana","extensions":["h264"]},"video/h264-rcdo":{"source":"iana"},"video/h264-svc":{"source":"iana"},"video/h265":{"source":"iana"},"video/iso.segment":{"source":"iana","extensions":["m4s"]},"video/jpeg":{"source":"iana","extensions":["jpgv"]},"video/jpeg2000":{"source":"iana"},"video/jpm":{"source":"apache","extensions":["jpm","jpgm"]},"video/jxsv":{"source":"iana"},"video/mj2":{"source":"iana","extensions":["mj2","mjp2"]},"video/mp1s":{"source":"iana"},"video/mp2p":{"source":"iana"},"video/mp2t":{"source":"iana","extensions":["ts"]},"video/mp4":{"source":"iana","compressible":false,"extensions":["mp4","mp4v","mpg4"]},"video/mp4v-es":{"source":"iana"},"video/mpeg":{"source":"iana","compressible":false,"extensions":["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{"source":"iana"},"video/mpv":{"source":"iana"},"video/nv":{"source":"iana"},"video/ogg":{"source":"iana","compressible":false,"extensions":["ogv"]},"video/parityfec":{"source":"iana"},"video/pointer":{"source":"iana"},"video/quicktime":{"source":"iana","compressible":false,"extensions":["qt","mov"]},"video/raptorfec":{"source":"iana"},"video/raw":{"source":"iana"},"video/rtp-enc-aescm128":{"source":"iana"},"video/rtploopback":{"source":"iana"},"video/rtx":{"source":"iana"},"video/scip":{"source":"iana"},"video/smpte291":{"source":"iana"},"video/smpte292m":{"source":"iana"},"video/ulpfec":{"source":"iana"},"video/vc1":{"source":"iana"},"video/vc2":{"source":"iana"},"video/vnd.cctv":{"source":"iana"},"video/vnd.dece.hd":{"source":"iana","extensions":["uvh","uvvh"]},"video/vnd.dece.mobile":{"source":"iana","extensions":["uvm","uvvm"]},"video/vnd.dece.mp4":{"source":"iana"},"video/vnd.dece.pd":{"source":"iana","extensions":["uvp","uvvp"]},"video/vnd.dece.sd":{"source":"iana","extensions":["uvs","uvvs"]},"video/vnd.dece.video":{"source":"iana","extensions":["uvv","uvvv"]},"video/vnd.directv.mpeg":{"source":"iana"},"video/vnd.directv.mpeg-tts":{"source":"iana"},"video/vnd.dlna.mpeg-tts":{"source":"iana"},"video/vnd.dvb.file":{"source":"iana","extensions":["dvb"]},"video/vnd.fvt":{"source":"iana","extensions":["fvt"]},"video/vnd.hns.video":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.ttsavc":{"source":"iana"},"video/vnd.iptvforum.ttsmpeg2":{"source":"iana"},"video/vnd.motorola.video":{"source":"iana"},"video/vnd.motorola.videop":{"source":"iana"},"video/vnd.mpegurl":{"source":"iana","extensions":["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{"source":"iana","extensions":["pyv"]},"video/vnd.nokia.interleaved-multimedia":{"source":"iana"},"video/vnd.nokia.mp4vr":{"source":"iana"},"video/vnd.nokia.videovoip":{"source":"iana"},"video/vnd.objectvideo":{"source":"iana"},"video/vnd.radgamettools.bink":{"source":"iana"},"video/vnd.radgamettools.smacker":{"source":"iana"},"video/vnd.sealed.mpeg1":{"source":"iana"},"video/vnd.sealed.mpeg4":{"source":"iana"},"video/vnd.sealed.swf":{"source":"iana"},"video/vnd.sealedmedia.softseal.mov":{"source":"iana"},"video/vnd.uvvu.mp4":{"source":"iana","extensions":["uvu","uvvu"]},"video/vnd.vivo":{"source":"iana","extensions":["viv"]},"video/vnd.youtube.yt":{"source":"iana"},"video/vp8":{"source":"iana"},"video/vp9":{"source":"iana"},"video/webm":{"source":"apache","compressible":false,"extensions":["webm"]},"video/x-f4v":{"source":"apache","extensions":["f4v"]},"video/x-fli":{"source":"apache","extensions":["fli"]},"video/x-flv":{"source":"apache","compressible":false,"extensions":["flv"]},"video/x-m4v":{"source":"apache","extensions":["m4v"]},"video/x-matroska":{"source":"apache","compressible":false,"extensions":["mkv","mk3d","mks"]},"video/x-mng":{"source":"apache","extensions":["mng"]},"video/x-ms-asf":{"source":"apache","extensions":["asf","asx"]},"video/x-ms-vob":{"source":"apache","extensions":["vob"]},"video/x-ms-wm":{"source":"apache","extensions":["wm"]},"video/x-ms-wmv":{"source":"apache","compressible":false,"extensions":["wmv"]},"video/x-ms-wmx":{"source":"apache","extensions":["wmx"]},"video/x-ms-wvx":{"source":"apache","extensions":["wvx"]},"video/x-msvideo":{"source":"apache","extensions":["avi"]},"video/x-sgi-movie":{"source":"apache","extensions":["movie"]},"video/x-smv":{"source":"apache","extensions":["smv"]},"x-conference/x-cooltalk":{"source":"apache","extensions":["ice"]},"x-shader/x-fragment":{"compressible":true},"x-shader/x-vertex":{"compressible":true}}')},2203:e=>{"use strict";e.exports=require("stream")},2613:e=>{"use strict";e.exports=require("assert")},2664:function(e,t,r){var n;e=r.nmd(e),function(){var o=(e&&e.exports,"object"==typeof global&&global);o.global!==o&&o.window;var i=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[\x01-\x7F]/g,s=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,c=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,u={"­":"shy","‌":"zwnj","‍":"zwj","‎":"lrm","⁣":"ic","⁢":"it","⁡":"af","‏":"rlm","​":"ZeroWidthSpace","⁠":"NoBreak","̑":"DownBreve","⃛":"tdot","⃜":"DotDot","\t":"Tab","\n":"NewLine"," ":"puncsp"," ":"MediumSpace"," ":"thinsp"," ":"hairsp"," ":"emsp13"," ":"ensp"," ":"emsp14"," ":"emsp"," ":"numsp"," ":"nbsp","  ":"ThickSpace","‾":"oline",_:"lowbar","‐":"dash","–":"ndash","—":"mdash","―":"horbar",",":"comma",";":"semi","⁏":"bsemi",":":"colon","⩴":"Colone","!":"excl","¡":"iexcl","?":"quest","¿":"iquest",".":"period","‥":"nldr","…":"mldr","·":"middot","'":"apos","‘":"lsquo","’":"rsquo","‚":"sbquo","‹":"lsaquo","›":"rsaquo",'"':"quot","“":"ldquo","”":"rdquo","„":"bdquo","«":"laquo","»":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","⌈":"lceil","⌉":"rceil","⌊":"lfloor","⌋":"rfloor","⦅":"lopar","⦆":"ropar","⦋":"lbrke","⦌":"rbrke","⦍":"lbrkslu","⦎":"rbrksld","⦏":"lbrksld","⦐":"rbrkslu","⦑":"langd","⦒":"rangd","⦓":"lparlt","⦔":"rpargt","⦕":"gtlPar","⦖":"ltrPar","⟦":"lobrk","⟧":"robrk","⟨":"lang","⟩":"rang","⟪":"Lang","⟫":"Rang","⟬":"loang","⟭":"roang","❲":"lbbrk","❳":"rbbrk","‖":"Vert","§":"sect","¶":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","‰":"permil","‱":"pertenk","†":"dagger","‡":"Dagger","•":"bull","⁃":"hybull","′":"prime","″":"Prime","‴":"tprime","⁗":"qprime","‵":"bprime","⁁":"caret","`":"grave","´":"acute","˜":"tilde","^":"Hat","¯":"macr","˘":"breve","˙":"dot","¨":"die","˚":"ring","˝":"dblac","¸":"cedil","˛":"ogon",ˆ:"circ",ˇ:"caron","°":"deg","©":"copy","®":"reg","℗":"copysr",℘:"wp","℞":"rx","℧":"mho","℩":"iiota","←":"larr","↚":"nlarr","→":"rarr","↛":"nrarr","↑":"uarr","↓":"darr","↔":"harr","↮":"nharr","↕":"varr","↖":"nwarr","↗":"nearr","↘":"searr","↙":"swarr","↝":"rarrw","↝̸":"nrarrw","↞":"Larr","↟":"Uarr","↠":"Rarr","↡":"Darr","↢":"larrtl","↣":"rarrtl","↤":"mapstoleft","↥":"mapstoup","↦":"map","↧":"mapstodown","↩":"larrhk","↪":"rarrhk","↫":"larrlp","↬":"rarrlp","↭":"harrw","↰":"lsh","↱":"rsh","↲":"ldsh","↳":"rdsh","↵":"crarr","↶":"cularr","↷":"curarr","↺":"olarr","↻":"orarr","↼":"lharu","↽":"lhard","↾":"uharr","↿":"uharl","⇀":"rharu","⇁":"rhard","⇂":"dharr","⇃":"dharl","⇄":"rlarr","⇅":"udarr","⇆":"lrarr","⇇":"llarr","⇈":"uuarr","⇉":"rrarr","⇊":"ddarr","⇋":"lrhar","⇌":"rlhar","⇐":"lArr","⇍":"nlArr","⇑":"uArr","⇒":"rArr","⇏":"nrArr","⇓":"dArr","⇔":"iff","⇎":"nhArr","⇕":"vArr","⇖":"nwArr","⇗":"neArr","⇘":"seArr","⇙":"swArr","⇚":"lAarr","⇛":"rAarr","⇝":"zigrarr","⇤":"larrb","⇥":"rarrb","⇵":"duarr","⇽":"loarr","⇾":"roarr","⇿":"hoarr","∀":"forall","∁":"comp","∂":"part","∂̸":"npart","∃":"exist","∄":"nexist","∅":"empty","∇":"Del","∈":"in","∉":"notin","∋":"ni","∌":"notni","϶":"bepsi","∏":"prod","∐":"coprod","∑":"sum","+":"plus","±":"pm","÷":"div","×":"times","<":"lt","≮":"nlt","<⃒":"nvlt","=":"equals","≠":"ne","=⃥":"bne","⩵":"Equal",">":"gt","≯":"ngt",">⃒":"nvgt","¬":"not","|":"vert","¦":"brvbar","−":"minus","∓":"mp","∔":"plusdo","⁄":"frasl","∖":"setmn","∗":"lowast","∘":"compfn","√":"Sqrt","∝":"prop","∞":"infin","∟":"angrt","∠":"ang","∠⃒":"nang","∡":"angmsd","∢":"angsph","∣":"mid","∤":"nmid","∥":"par","∦":"npar","∧":"and","∨":"or","∩":"cap","∩︀":"caps","∪":"cup","∪︀":"cups","∫":"int","∬":"Int","∭":"tint","⨌":"qint","∮":"oint","∯":"Conint","∰":"Cconint","∱":"cwint","∲":"cwconint","∳":"awconint","∴":"there4","∵":"becaus","∶":"ratio","∷":"Colon","∸":"minusd","∺":"mDDot","∻":"homtht","∼":"sim","≁":"nsim","∼⃒":"nvsim","∽":"bsim","∽̱":"race","∾":"ac","∾̳":"acE","∿":"acd","≀":"wr","≂":"esim","≂̸":"nesim","≃":"sime","≄":"nsime","≅":"cong","≇":"ncong","≆":"simne","≈":"ap","≉":"nap","≊":"ape","≋":"apid","≋̸":"napid","≌":"bcong","≍":"CupCap","≭":"NotCupCap","≍⃒":"nvap","≎":"bump","≎̸":"nbump","≏":"bumpe","≏̸":"nbumpe","≐":"doteq","≐̸":"nedot","≑":"eDot","≒":"efDot","≓":"erDot","≔":"colone","≕":"ecolon","≖":"ecir","≗":"cire","≙":"wedgeq","≚":"veeeq","≜":"trie","≟":"equest","≡":"equiv","≢":"nequiv","≡⃥":"bnequiv","≤":"le","≰":"nle","≤⃒":"nvle","≥":"ge","≱":"nge","≥⃒":"nvge","≦":"lE","≦̸":"nlE","≧":"gE","≧̸":"ngE","≨︀":"lvnE","≨":"lnE","≩":"gnE","≩︀":"gvnE","≪":"ll","≪̸":"nLtv","≪⃒":"nLt","≫":"gg","≫̸":"nGtv","≫⃒":"nGt","≬":"twixt","≲":"lsim","≴":"nlsim","≳":"gsim","≵":"ngsim","≶":"lg","≸":"ntlg","≷":"gl","≹":"ntgl","≺":"pr","⊀":"npr","≻":"sc","⊁":"nsc","≼":"prcue","⋠":"nprcue","≽":"sccue","⋡":"nsccue","≾":"prsim","≿":"scsim","≿̸":"NotSucceedsTilde","⊂":"sub","⊄":"nsub","⊂⃒":"vnsub","⊃":"sup","⊅":"nsup","⊃⃒":"vnsup","⊆":"sube","⊈":"nsube","⊇":"supe","⊉":"nsupe","⊊︀":"vsubne","⊊":"subne","⊋︀":"vsupne","⊋":"supne","⊍":"cupdot","⊎":"uplus","⊏":"sqsub","⊏̸":"NotSquareSubset","⊐":"sqsup","⊐̸":"NotSquareSuperset","⊑":"sqsube","⋢":"nsqsube","⊒":"sqsupe","⋣":"nsqsupe","⊓":"sqcap","⊓︀":"sqcaps","⊔":"sqcup","⊔︀":"sqcups","⊕":"oplus","⊖":"ominus","⊗":"otimes","⊘":"osol","⊙":"odot","⊚":"ocir","⊛":"oast","⊝":"odash","⊞":"plusb","⊟":"minusb","⊠":"timesb","⊡":"sdotb","⊢":"vdash","⊬":"nvdash","⊣":"dashv","⊤":"top","⊥":"bot","⊧":"models","⊨":"vDash","⊭":"nvDash","⊩":"Vdash","⊮":"nVdash","⊪":"Vvdash","⊫":"VDash","⊯":"nVDash","⊰":"prurel","⊲":"vltri","⋪":"nltri","⊳":"vrtri","⋫":"nrtri","⊴":"ltrie","⋬":"nltrie","⊴⃒":"nvltrie","⊵":"rtrie","⋭":"nrtrie","⊵⃒":"nvrtrie","⊶":"origof","⊷":"imof","⊸":"mumap","⊹":"hercon","⊺":"intcal","⊻":"veebar","⊽":"barvee","⊾":"angrtvb","⊿":"lrtri","⋀":"Wedge","⋁":"Vee","⋂":"xcap","⋃":"xcup","⋄":"diam","⋅":"sdot","⋆":"Star","⋇":"divonx","⋈":"bowtie","⋉":"ltimes","⋊":"rtimes","⋋":"lthree","⋌":"rthree","⋍":"bsime","⋎":"cuvee","⋏":"cuwed","⋐":"Sub","⋑":"Sup","⋒":"Cap","⋓":"Cup","⋔":"fork","⋕":"epar","⋖":"ltdot","⋗":"gtdot","⋘":"Ll","⋘̸":"nLl","⋙":"Gg","⋙̸":"nGg","⋚︀":"lesg","⋚":"leg","⋛":"gel","⋛︀":"gesl","⋞":"cuepr","⋟":"cuesc","⋦":"lnsim","⋧":"gnsim","⋨":"prnsim","⋩":"scnsim","⋮":"vellip","⋯":"ctdot","⋰":"utdot","⋱":"dtdot","⋲":"disin","⋳":"isinsv","⋴":"isins","⋵":"isindot","⋵̸":"notindot","⋶":"notinvc","⋷":"notinvb","⋹":"isinE","⋹̸":"notinE","⋺":"nisd","⋻":"xnis","⋼":"nis","⋽":"notnivc","⋾":"notnivb","⌅":"barwed","⌆":"Barwed","⌌":"drcrop","⌍":"dlcrop","⌎":"urcrop","⌏":"ulcrop","⌐":"bnot","⌒":"profline","⌓":"profsurf","⌕":"telrec","⌖":"target","⌜":"ulcorn","⌝":"urcorn","⌞":"dlcorn","⌟":"drcorn","⌢":"frown","⌣":"smile","⌭":"cylcty","⌮":"profalar","⌶":"topbot","⌽":"ovbar","⌿":"solbar","⍼":"angzarr","⎰":"lmoust","⎱":"rmoust","⎴":"tbrk","⎵":"bbrk","⎶":"bbrktbrk","⏜":"OverParenthesis","⏝":"UnderParenthesis","⏞":"OverBrace","⏟":"UnderBrace","⏢":"trpezium","⏧":"elinters","␣":"blank","─":"boxh","│":"boxv","┌":"boxdr","┐":"boxdl","└":"boxur","┘":"boxul","├":"boxvr","┤":"boxvl","┬":"boxhd","┴":"boxhu","┼":"boxvh","═":"boxH","║":"boxV","╒":"boxdR","╓":"boxDr","╔":"boxDR","╕":"boxdL","╖":"boxDl","╗":"boxDL","╘":"boxuR","╙":"boxUr","╚":"boxUR","╛":"boxuL","╜":"boxUl","╝":"boxUL","╞":"boxvR","╟":"boxVr","╠":"boxVR","╡":"boxvL","╢":"boxVl","╣":"boxVL","╤":"boxHd","╥":"boxhD","╦":"boxHD","╧":"boxHu","╨":"boxhU","╩":"boxHU","╪":"boxvH","╫":"boxVh","╬":"boxVH","▀":"uhblk","▄":"lhblk","█":"block","░":"blk14","▒":"blk12","▓":"blk34","□":"squ","▪":"squf","▫":"EmptyVerySmallSquare","▭":"rect","▮":"marker","▱":"fltns","△":"xutri","▴":"utrif","▵":"utri","▸":"rtrif","▹":"rtri","▽":"xdtri","▾":"dtrif","▿":"dtri","◂":"ltrif","◃":"ltri","◊":"loz","○":"cir","◬":"tridot","◯":"xcirc","◸":"ultri","◹":"urtri","◺":"lltri","◻":"EmptySmallSquare","◼":"FilledSmallSquare","★":"starf","☆":"star","☎":"phone","♀":"female","♂":"male","♠":"spades","♣":"clubs","♥":"hearts","♦":"diams","♪":"sung","✓":"check","✗":"cross","✠":"malt","✶":"sext","❘":"VerticalSeparator","⟈":"bsolhsub","⟉":"suphsol","⟵":"xlarr","⟶":"xrarr","⟷":"xharr","⟸":"xlArr","⟹":"xrArr","⟺":"xhArr","⟼":"xmap","⟿":"dzigrarr","⤂":"nvlArr","⤃":"nvrArr","⤄":"nvHarr","⤅":"Map","⤌":"lbarr","⤍":"rbarr","⤎":"lBarr","⤏":"rBarr","⤐":"RBarr","⤑":"DDotrahd","⤒":"UpArrowBar","⤓":"DownArrowBar","⤖":"Rarrtl","⤙":"latail","⤚":"ratail","⤛":"lAtail","⤜":"rAtail","⤝":"larrfs","⤞":"rarrfs","⤟":"larrbfs","⤠":"rarrbfs","⤣":"nwarhk","⤤":"nearhk","⤥":"searhk","⤦":"swarhk","⤧":"nwnear","⤨":"toea","⤩":"tosa","⤪":"swnwar","⤳":"rarrc","⤳̸":"nrarrc","⤵":"cudarrr","⤶":"ldca","⤷":"rdca","⤸":"cudarrl","⤹":"larrpl","⤼":"curarrm","⤽":"cularrp","⥅":"rarrpl","⥈":"harrcir","⥉":"Uarrocir","⥊":"lurdshar","⥋":"ldrushar","⥎":"LeftRightVector","⥏":"RightUpDownVector","⥐":"DownLeftRightVector","⥑":"LeftUpDownVector","⥒":"LeftVectorBar","⥓":"RightVectorBar","⥔":"RightUpVectorBar","⥕":"RightDownVectorBar","⥖":"DownLeftVectorBar","⥗":"DownRightVectorBar","⥘":"LeftUpVectorBar","⥙":"LeftDownVectorBar","⥚":"LeftTeeVector","⥛":"RightTeeVector","⥜":"RightUpTeeVector","⥝":"RightDownTeeVector","⥞":"DownLeftTeeVector","⥟":"DownRightTeeVector","⥠":"LeftUpTeeVector","⥡":"LeftDownTeeVector","⥢":"lHar","⥣":"uHar","⥤":"rHar","⥥":"dHar","⥦":"luruhar","⥧":"ldrdhar","⥨":"ruluhar","⥩":"rdldhar","⥪":"lharul","⥫":"llhard","⥬":"rharul","⥭":"lrhard","⥮":"udhar","⥯":"duhar","⥰":"RoundImplies","⥱":"erarr","⥲":"simrarr","⥳":"larrsim","⥴":"rarrsim","⥵":"rarrap","⥶":"ltlarr","⥸":"gtrarr","⥹":"subrarr","⥻":"suplarr","⥼":"lfisht","⥽":"rfisht","⥾":"ufisht","⥿":"dfisht","⦚":"vzigzag","⦜":"vangrt","⦝":"angrtvbd","⦤":"ange","⦥":"range","⦦":"dwangle","⦧":"uwangle","⦨":"angmsdaa","⦩":"angmsdab","⦪":"angmsdac","⦫":"angmsdad","⦬":"angmsdae","⦭":"angmsdaf","⦮":"angmsdag","⦯":"angmsdah","⦰":"bemptyv","⦱":"demptyv","⦲":"cemptyv","⦳":"raemptyv","⦴":"laemptyv","⦵":"ohbar","⦶":"omid","⦷":"opar","⦹":"operp","⦻":"olcross","⦼":"odsold","⦾":"olcir","⦿":"ofcir","⧀":"olt","⧁":"ogt","⧂":"cirscir","⧃":"cirE","⧄":"solb","⧅":"bsolb","⧉":"boxbox","⧍":"trisb","⧎":"rtriltri","⧏":"LeftTriangleBar","⧏̸":"NotLeftTriangleBar","⧐":"RightTriangleBar","⧐̸":"NotRightTriangleBar","⧜":"iinfin","⧝":"infintie","⧞":"nvinfin","⧣":"eparsl","⧤":"smeparsl","⧥":"eqvparsl","⧫":"lozf","⧴":"RuleDelayed","⧶":"dsol","⨀":"xodot","⨁":"xoplus","⨂":"xotime","⨄":"xuplus","⨆":"xsqcup","⨍":"fpartint","⨐":"cirfnint","⨑":"awint","⨒":"rppolint","⨓":"scpolint","⨔":"npolint","⨕":"pointint","⨖":"quatint","⨗":"intlarhk","⨢":"pluscir","⨣":"plusacir","⨤":"simplus","⨥":"plusdu","⨦":"plussim","⨧":"plustwo","⨩":"mcomma","⨪":"minusdu","⨭":"loplus","⨮":"roplus","⨯":"Cross","⨰":"timesd","⨱":"timesbar","⨳":"smashp","⨴":"lotimes","⨵":"rotimes","⨶":"otimesas","⨷":"Otimes","⨸":"odiv","⨹":"triplus","⨺":"triminus","⨻":"tritime","⨼":"iprod","⨿":"amalg","⩀":"capdot","⩂":"ncup","⩃":"ncap","⩄":"capand","⩅":"cupor","⩆":"cupcap","⩇":"capcup","⩈":"cupbrcap","⩉":"capbrcup","⩊":"cupcup","⩋":"capcap","⩌":"ccups","⩍":"ccaps","⩐":"ccupssm","⩓":"And","⩔":"Or","⩕":"andand","⩖":"oror","⩗":"orslope","⩘":"andslope","⩚":"andv","⩛":"orv","⩜":"andd","⩝":"ord","⩟":"wedbar","⩦":"sdote","⩪":"simdot","⩭":"congdot","⩭̸":"ncongdot","⩮":"easter","⩯":"apacir","⩰":"apE","⩰̸":"napE","⩱":"eplus","⩲":"pluse","⩳":"Esim","⩷":"eDDot","⩸":"equivDD","⩹":"ltcir","⩺":"gtcir","⩻":"ltquest","⩼":"gtquest","⩽":"les","⩽̸":"nles","⩾":"ges","⩾̸":"nges","⩿":"lesdot","⪀":"gesdot","⪁":"lesdoto","⪂":"gesdoto","⪃":"lesdotor","⪄":"gesdotol","⪅":"lap","⪆":"gap","⪇":"lne","⪈":"gne","⪉":"lnap","⪊":"gnap","⪋":"lEg","⪌":"gEl","⪍":"lsime","⪎":"gsime","⪏":"lsimg","⪐":"gsiml","⪑":"lgE","⪒":"glE","⪓":"lesges","⪔":"gesles","⪕":"els","⪖":"egs","⪗":"elsdot","⪘":"egsdot","⪙":"el","⪚":"eg","⪝":"siml","⪞":"simg","⪟":"simlE","⪠":"simgE","⪡":"LessLess","⪡̸":"NotNestedLessLess","⪢":"GreaterGreater","⪢̸":"NotNestedGreaterGreater","⪤":"glj","⪥":"gla","⪦":"ltcc","⪧":"gtcc","⪨":"lescc","⪩":"gescc","⪪":"smt","⪫":"lat","⪬":"smte","⪬︀":"smtes","⪭":"late","⪭︀":"lates","⪮":"bumpE","⪯":"pre","⪯̸":"npre","⪰":"sce","⪰̸":"nsce","⪳":"prE","⪴":"scE","⪵":"prnE","⪶":"scnE","⪷":"prap","⪸":"scap","⪹":"prnap","⪺":"scnap","⪻":"Pr","⪼":"Sc","⪽":"subdot","⪾":"supdot","⪿":"subplus","⫀":"supplus","⫁":"submult","⫂":"supmult","⫃":"subedot","⫄":"supedot","⫅":"subE","⫅̸":"nsubE","⫆":"supE","⫆̸":"nsupE","⫇":"subsim","⫈":"supsim","⫋︀":"vsubnE","⫋":"subnE","⫌︀":"vsupnE","⫌":"supnE","⫏":"csub","⫐":"csup","⫑":"csube","⫒":"csupe","⫓":"subsup","⫔":"supsub","⫕":"subsub","⫖":"supsup","⫗":"suphsub","⫘":"supdsub","⫙":"forkv","⫚":"topfork","⫛":"mlcp","⫤":"Dashv","⫦":"Vdashl","⫧":"Barv","⫨":"vBar","⫩":"vBarv","⫫":"Vbar","⫬":"Not","⫭":"bNot","⫮":"rnmid","⫯":"cirmid","⫰":"midcir","⫱":"topcir","⫲":"nhpar","⫳":"parsim","⫽":"parsl","⫽⃥":"nparsl","♭":"flat","♮":"natur","♯":"sharp","¤":"curren","¢":"cent",$:"dollar","£":"pound","¥":"yen","€":"euro","¹":"sup1","½":"half","⅓":"frac13","¼":"frac14","⅕":"frac15","⅙":"frac16","⅛":"frac18","²":"sup2","⅔":"frac23","⅖":"frac25","³":"sup3","¾":"frac34","⅗":"frac35","⅜":"frac38","⅘":"frac45","⅚":"frac56","⅝":"frac58","⅞":"frac78",𝒶:"ascr",𝕒:"aopf",𝔞:"afr",𝔸:"Aopf",𝔄:"Afr",𝒜:"Ascr",ª:"ordf",á:"aacute",Á:"Aacute",à:"agrave",À:"Agrave",ă:"abreve",Ă:"Abreve",â:"acirc",Â:"Acirc",å:"aring",Å:"angst",ä:"auml",Ä:"Auml",ã:"atilde",Ã:"Atilde",ą:"aogon",Ą:"Aogon",ā:"amacr",Ā:"Amacr",æ:"aelig",Æ:"AElig",𝒷:"bscr",𝕓:"bopf",𝔟:"bfr",𝔹:"Bopf",ℬ:"Bscr",𝔅:"Bfr",𝔠:"cfr",𝒸:"cscr",𝕔:"copf",ℭ:"Cfr",𝒞:"Cscr",ℂ:"Copf",ć:"cacute",Ć:"Cacute",ĉ:"ccirc",Ĉ:"Ccirc",č:"ccaron",Č:"Ccaron",ċ:"cdot",Ċ:"Cdot",ç:"ccedil",Ç:"Ccedil","℅":"incare",𝔡:"dfr",ⅆ:"dd",𝕕:"dopf",𝒹:"dscr",𝒟:"Dscr",𝔇:"Dfr",ⅅ:"DD",𝔻:"Dopf",ď:"dcaron",Ď:"Dcaron",đ:"dstrok",Đ:"Dstrok",ð:"eth",Ð:"ETH",ⅇ:"ee",ℯ:"escr",𝔢:"efr",𝕖:"eopf",ℰ:"Escr",𝔈:"Efr",𝔼:"Eopf",é:"eacute",É:"Eacute",è:"egrave",È:"Egrave",ê:"ecirc",Ê:"Ecirc",ě:"ecaron",Ě:"Ecaron",ë:"euml",Ë:"Euml",ė:"edot",Ė:"Edot",ę:"eogon",Ę:"Eogon",ē:"emacr",Ē:"Emacr",𝔣:"ffr",𝕗:"fopf",𝒻:"fscr",𝔉:"Ffr",𝔽:"Fopf",ℱ:"Fscr",ﬀ:"fflig",ﬃ:"ffilig",ﬄ:"ffllig",ﬁ:"filig",fj:"fjlig",ﬂ:"fllig",ƒ:"fnof",ℊ:"gscr",𝕘:"gopf",𝔤:"gfr",𝒢:"Gscr",𝔾:"Gopf",𝔊:"Gfr",ǵ:"gacute",ğ:"gbreve",Ğ:"Gbreve",ĝ:"gcirc",Ĝ:"Gcirc",ġ:"gdot",Ġ:"Gdot",Ģ:"Gcedil",𝔥:"hfr",ℎ:"planckh",𝒽:"hscr",𝕙:"hopf",ℋ:"Hscr",ℌ:"Hfr",ℍ:"Hopf",ĥ:"hcirc",Ĥ:"Hcirc",ℏ:"hbar",ħ:"hstrok",Ħ:"Hstrok",𝕚:"iopf",𝔦:"ifr",𝒾:"iscr",ⅈ:"ii",𝕀:"Iopf",ℐ:"Iscr",ℑ:"Im",í:"iacute",Í:"Iacute",ì:"igrave",Ì:"Igrave",î:"icirc",Î:"Icirc",ï:"iuml",Ï:"Iuml",ĩ:"itilde",Ĩ:"Itilde",İ:"Idot",į:"iogon",Į:"Iogon",ī:"imacr",Ī:"Imacr",ĳ:"ijlig",Ĳ:"IJlig",ı:"imath",𝒿:"jscr",𝕛:"jopf",𝔧:"jfr",𝒥:"Jscr",𝔍:"Jfr",𝕁:"Jopf",ĵ:"jcirc",Ĵ:"Jcirc",ȷ:"jmath",𝕜:"kopf",𝓀:"kscr",𝔨:"kfr",𝒦:"Kscr",𝕂:"Kopf",𝔎:"Kfr",ķ:"kcedil",Ķ:"Kcedil",𝔩:"lfr",𝓁:"lscr",ℓ:"ell",𝕝:"lopf",ℒ:"Lscr",𝔏:"Lfr",𝕃:"Lopf",ĺ:"lacute",Ĺ:"Lacute",ľ:"lcaron",Ľ:"Lcaron",ļ:"lcedil",Ļ:"Lcedil",ł:"lstrok",Ł:"Lstrok",ŀ:"lmidot",Ŀ:"Lmidot",𝔪:"mfr",𝕞:"mopf",𝓂:"mscr",𝔐:"Mfr",𝕄:"Mopf",ℳ:"Mscr",𝔫:"nfr",𝕟:"nopf",𝓃:"nscr",ℕ:"Nopf",𝒩:"Nscr",𝔑:"Nfr",ń:"nacute",Ń:"Nacute",ň:"ncaron",Ň:"Ncaron",ñ:"ntilde",Ñ:"Ntilde",ņ:"ncedil",Ņ:"Ncedil","№":"numero",ŋ:"eng",Ŋ:"ENG",𝕠:"oopf",𝔬:"ofr",ℴ:"oscr",𝒪:"Oscr",𝔒:"Ofr",𝕆:"Oopf",º:"ordm",ó:"oacute",Ó:"Oacute",ò:"ograve",Ò:"Ograve",ô:"ocirc",Ô:"Ocirc",ö:"ouml",Ö:"Ouml",ő:"odblac",Ő:"Odblac",õ:"otilde",Õ:"Otilde",ø:"oslash",Ø:"Oslash",ō:"omacr",Ō:"Omacr",œ:"oelig",Œ:"OElig",𝔭:"pfr",𝓅:"pscr",𝕡:"popf",ℙ:"Popf",𝔓:"Pfr",𝒫:"Pscr",𝕢:"qopf",𝔮:"qfr",𝓆:"qscr",𝒬:"Qscr",𝔔:"Qfr",ℚ:"Qopf",ĸ:"kgreen",𝔯:"rfr",𝕣:"ropf",𝓇:"rscr",ℛ:"Rscr",ℜ:"Re",ℝ:"Ropf",ŕ:"racute",Ŕ:"Racute",ř:"rcaron",Ř:"Rcaron",ŗ:"rcedil",Ŗ:"Rcedil",𝕤:"sopf",𝓈:"sscr",𝔰:"sfr",𝕊:"Sopf",𝔖:"Sfr",𝒮:"Sscr","Ⓢ":"oS",ś:"sacute",Ś:"Sacute",ŝ:"scirc",Ŝ:"Scirc",š:"scaron",Š:"Scaron",ş:"scedil",Ş:"Scedil",ß:"szlig",𝔱:"tfr",𝓉:"tscr",𝕥:"topf",𝒯:"Tscr",𝔗:"Tfr",𝕋:"Topf",ť:"tcaron",Ť:"Tcaron",ţ:"tcedil",Ţ:"Tcedil","™":"trade",ŧ:"tstrok",Ŧ:"Tstrok",𝓊:"uscr",𝕦:"uopf",𝔲:"ufr",𝕌:"Uopf",𝔘:"Ufr",𝒰:"Uscr",ú:"uacute",Ú:"Uacute",ù:"ugrave",Ù:"Ugrave",ŭ:"ubreve",Ŭ:"Ubreve",û:"ucirc",Û:"Ucirc",ů:"uring",Ů:"Uring",ü:"uuml",Ü:"Uuml",ű:"udblac",Ű:"Udblac",ũ:"utilde",Ũ:"Utilde",ų:"uogon",Ų:"Uogon",ū:"umacr",Ū:"Umacr",𝔳:"vfr",𝕧:"vopf",𝓋:"vscr",𝔙:"Vfr",𝕍:"Vopf",𝒱:"Vscr",𝕨:"wopf",𝓌:"wscr",𝔴:"wfr",𝒲:"Wscr",𝕎:"Wopf",𝔚:"Wfr",ŵ:"wcirc",Ŵ:"Wcirc",𝔵:"xfr",𝓍:"xscr",𝕩:"xopf",𝕏:"Xopf",𝔛:"Xfr",𝒳:"Xscr",𝔶:"yfr",𝓎:"yscr",𝕪:"yopf",𝒴:"Yscr",𝔜:"Yfr",𝕐:"Yopf",ý:"yacute",Ý:"Yacute",ŷ:"ycirc",Ŷ:"Ycirc",ÿ:"yuml",Ÿ:"Yuml",𝓏:"zscr",𝔷:"zfr",𝕫:"zopf",ℨ:"Zfr",ℤ:"Zopf",𝒵:"Zscr",ź:"zacute",Ź:"Zacute",ž:"zcaron",Ž:"Zcaron",ż:"zdot",Ż:"Zdot",Ƶ:"imped",þ:"thorn",Þ:"THORN",ŉ:"napos",α:"alpha",Α:"Alpha",β:"beta",Β:"Beta",γ:"gamma",Γ:"Gamma",δ:"delta",Δ:"Delta",ε:"epsi",ϵ:"epsiv",Ε:"Epsilon",ϝ:"gammad",Ϝ:"Gammad",ζ:"zeta",Ζ:"Zeta",η:"eta",Η:"Eta",θ:"theta",ϑ:"thetav",Θ:"Theta",ι:"iota",Ι:"Iota",κ:"kappa",ϰ:"kappav",Κ:"Kappa",λ:"lambda",Λ:"Lambda",μ:"mu",µ:"micro",Μ:"Mu",ν:"nu",Ν:"Nu",ξ:"xi",Ξ:"Xi",ο:"omicron",Ο:"Omicron",π:"pi",ϖ:"piv",Π:"Pi",ρ:"rho",ϱ:"rhov",Ρ:"Rho",σ:"sigma",Σ:"Sigma",ς:"sigmaf",τ:"tau",Τ:"Tau",υ:"upsi",Υ:"Upsilon",ϒ:"Upsi",φ:"phi",ϕ:"phiv",Φ:"Phi",χ:"chi",Χ:"Chi",ψ:"psi",Ψ:"Psi",ω:"omega",Ω:"ohm",а:"acy",А:"Acy",б:"bcy",Б:"Bcy",в:"vcy",В:"Vcy",г:"gcy",Г:"Gcy",ѓ:"gjcy",Ѓ:"GJcy",д:"dcy",Д:"Dcy",ђ:"djcy",Ђ:"DJcy",е:"iecy",Е:"IEcy",ё:"iocy",Ё:"IOcy",є:"jukcy",Є:"Jukcy",ж:"zhcy",Ж:"ZHcy",з:"zcy",З:"Zcy",ѕ:"dscy",Ѕ:"DScy",и:"icy",И:"Icy",і:"iukcy",І:"Iukcy",ї:"yicy",Ї:"YIcy",й:"jcy",Й:"Jcy",ј:"jsercy",Ј:"Jsercy",к:"kcy",К:"Kcy",ќ:"kjcy",Ќ:"KJcy",л:"lcy",Л:"Lcy",љ:"ljcy",Љ:"LJcy",м:"mcy",М:"Mcy",н:"ncy",Н:"Ncy",њ:"njcy",Њ:"NJcy",о:"ocy",О:"Ocy",п:"pcy",П:"Pcy",р:"rcy",Р:"Rcy",с:"scy",С:"Scy",т:"tcy",Т:"Tcy",ћ:"tshcy",Ћ:"TSHcy",у:"ucy",У:"Ucy",ў:"ubrcy",Ў:"Ubrcy",ф:"fcy",Ф:"Fcy",х:"khcy",Х:"KHcy",ц:"tscy",Ц:"TScy",ч:"chcy",Ч:"CHcy",џ:"dzcy",Џ:"DZcy",ш:"shcy",Ш:"SHcy",щ:"shchcy",Щ:"SHCHcy",ъ:"hardcy",Ъ:"HARDcy",ы:"ycy",Ы:"Ycy",ь:"softcy",Ь:"SOFTcy",э:"ecy",Э:"Ecy",ю:"yucy",Ю:"YUcy",я:"yacy",Я:"YAcy",ℵ:"aleph",ℶ:"beth",ℷ:"gimel",ℸ:"daleth"},l=/["&'<>`]/g,p={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},h=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,f=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,d=/&(CounterClockwiseContourIntegral|DoubleLongLeftRightArrow|ClockwiseContourIntegral|NotNestedGreaterGreater|NotSquareSupersetEqual|DiacriticalDoubleAcute|NotRightTriangleEqual|NotSucceedsSlantEqual|NotPrecedesSlantEqual|CloseCurlyDoubleQuote|NegativeVeryThinSpace|DoubleContourIntegral|FilledVerySmallSquare|CapitalDifferentialD|OpenCurlyDoubleQuote|EmptyVerySmallSquare|NestedGreaterGreater|DoubleLongRightArrow|NotLeftTriangleEqual|NotGreaterSlantEqual|ReverseUpEquilibrium|DoubleLeftRightArrow|NotSquareSubsetEqual|NotDoubleVerticalBar|RightArrowLeftArrow|NotGreaterFullEqual|NotRightTriangleBar|SquareSupersetEqual|DownLeftRightVector|DoubleLongLeftArrow|leftrightsquigarrow|LeftArrowRightArrow|NegativeMediumSpace|blacktriangleright|RightDownVectorBar|PrecedesSlantEqual|RightDoubleBracket|SucceedsSlantEqual|NotLeftTriangleBar|RightTriangleEqual|SquareIntersection|RightDownTeeVector|ReverseEquilibrium|NegativeThickSpace|longleftrightarrow|Longleftrightarrow|LongLeftRightArrow|DownRightTeeVector|DownRightVectorBar|GreaterSlantEqual|SquareSubsetEqual|LeftDownVectorBar|LeftDoubleBracket|VerticalSeparator|rightleftharpoons|NotGreaterGreater|NotSquareSuperset|blacktriangleleft|blacktriangledown|NegativeThinSpace|LeftDownTeeVector|NotLessSlantEqual|leftrightharpoons|DoubleUpDownArrow|DoubleVerticalBar|LeftTriangleEqual|FilledSmallSquare|twoheadrightarrow|NotNestedLessLess|DownLeftTeeVector|DownLeftVectorBar|RightAngleBracket|NotTildeFullEqual|NotReverseElement|RightUpDownVector|DiacriticalTilde|NotSucceedsTilde|circlearrowright|NotPrecedesEqual|rightharpoondown|DoubleRightArrow|NotSucceedsEqual|NonBreakingSpace|NotRightTriangle|LessEqualGreater|RightUpTeeVector|LeftAngleBracket|GreaterFullEqual|DownArrowUpArrow|RightUpVectorBar|twoheadleftarrow|GreaterEqualLess|downharpoonright|RightTriangleBar|ntrianglerighteq|NotSupersetEqual|LeftUpDownVector|DiacriticalAcute|rightrightarrows|vartriangleright|UpArrowDownArrow|DiacriticalGrave|UnderParenthesis|EmptySmallSquare|LeftUpVectorBar|leftrightarrows|DownRightVector|downharpoonleft|trianglerighteq|ShortRightArrow|OverParenthesis|DoubleLeftArrow|DoubleDownArrow|NotSquareSubset|bigtriangledown|ntrianglelefteq|UpperRightArrow|curvearrowright|vartriangleleft|NotLeftTriangle|nleftrightarrow|LowerRightArrow|NotHumpDownHump|NotGreaterTilde|rightthreetimes|LeftUpTeeVector|NotGreaterEqual|straightepsilon|LeftTriangleBar|rightsquigarrow|ContourIntegral|rightleftarrows|CloseCurlyQuote|RightDownVector|LeftRightVector|nLeftrightarrow|leftharpoondown|circlearrowleft|SquareSuperset|OpenCurlyQuote|hookrightarrow|HorizontalLine|DiacriticalDot|NotLessGreater|ntriangleright|DoubleRightTee|InvisibleComma|InvisibleTimes|LowerLeftArrow|DownLeftVector|NotSubsetEqual|curvearrowleft|trianglelefteq|NotVerticalBar|TildeFullEqual|downdownarrows|NotGreaterLess|RightTeeVector|ZeroWidthSpace|looparrowright|LongRightArrow|doublebarwedge|ShortLeftArrow|ShortDownArrow|RightVectorBar|GreaterGreater|ReverseElement|rightharpoonup|LessSlantEqual|leftthreetimes|upharpoonright|rightarrowtail|LeftDownVector|Longrightarrow|NestedLessLess|UpperLeftArrow|nshortparallel|leftleftarrows|leftrightarrow|Leftrightarrow|LeftRightArrow|longrightarrow|upharpoonleft|RightArrowBar|ApplyFunction|LeftTeeVector|leftarrowtail|NotEqualTilde|varsubsetneqq|varsupsetneqq|RightTeeArrow|SucceedsEqual|SucceedsTilde|LeftVectorBar|SupersetEqual|hookleftarrow|DifferentialD|VerticalTilde|VeryThinSpace|blacktriangle|bigtriangleup|LessFullEqual|divideontimes|leftharpoonup|UpEquilibrium|ntriangleleft|RightTriangle|measuredangle|shortparallel|longleftarrow|Longleftarrow|LongLeftArrow|DoubleLeftTee|Poincareplane|PrecedesEqual|triangleright|DoubleUpArrow|RightUpVector|fallingdotseq|looparrowleft|PrecedesTilde|NotTildeEqual|NotTildeTilde|smallsetminus|Proportional|triangleleft|triangledown|UnderBracket|NotHumpEqual|exponentiale|ExponentialE|NotLessTilde|HilbertSpace|RightCeiling|blacklozenge|varsupsetneq|HumpDownHump|GreaterEqual|VerticalLine|LeftTeeArrow|NotLessEqual|DownTeeArrow|LeftTriangle|varsubsetneq|Intersection|NotCongruent|DownArrowBar|LeftUpVector|LeftArrowBar|risingdotseq|GreaterTilde|RoundImplies|SquareSubset|ShortUpArrow|NotSuperset|quaternions|precnapprox|backepsilon|preccurlyeq|OverBracket|blacksquare|MediumSpace|VerticalBar|circledcirc|circleddash|CircleMinus|CircleTimes|LessGreater|curlyeqprec|curlyeqsucc|diamondsuit|UpDownArrow|Updownarrow|RuleDelayed|Rrightarrow|updownarrow|RightVector|nRightarrow|nrightarrow|eqslantless|LeftCeiling|Equilibrium|SmallCircle|expectation|NotSucceeds|thickapprox|GreaterLess|SquareUnion|NotPrecedes|NotLessLess|straightphi|succnapprox|succcurlyeq|SubsetEqual|sqsupseteq|Proportion|Laplacetrf|ImaginaryI|supsetneqq|NotGreater|gtreqqless|NotElement|ThickSpace|TildeEqual|TildeTilde|Fouriertrf|rmoustache|EqualTilde|eqslantgtr|UnderBrace|LeftVector|UpArrowBar|nLeftarrow|nsubseteqq|subsetneqq|nsupseteqq|nleftarrow|succapprox|lessapprox|UpTeeArrow|upuparrows|curlywedge|lesseqqgtr|varepsilon|varnothing|RightFloor|complement|CirclePlus|sqsubseteq|Lleftarrow|circledast|RightArrow|Rightarrow|rightarrow|lmoustache|Bernoullis|precapprox|mapstoleft|mapstodown|longmapsto|dotsquare|downarrow|DoubleDot|nsubseteq|supsetneq|leftarrow|nsupseteq|subsetneq|ThinSpace|ngeqslant|subseteqq|HumpEqual|NotSubset|triangleq|NotCupCap|lesseqgtr|heartsuit|TripleDot|Leftarrow|Coproduct|Congruent|varpropto|complexes|gvertneqq|LeftArrow|LessTilde|supseteqq|MinusPlus|CircleDot|nleqslant|NotExists|gtreqless|nparallel|UnionPlus|LeftFloor|checkmark|CenterDot|centerdot|Mellintrf|gtrapprox|bigotimes|OverBrace|spadesuit|therefore|pitchfork|rationals|PlusMinus|Backslash|Therefore|DownBreve|backsimeq|backprime|DownArrow|nshortmid|Downarrow|lvertneqq|eqvparsl|imagline|imagpart|infintie|integers|Integral|intercal|LessLess|Uarrocir|intlarhk|sqsupset|angmsdaf|sqsubset|llcorner|vartheta|cupbrcap|lnapprox|Superset|SuchThat|succnsim|succneqq|angmsdag|biguplus|curlyvee|trpezium|Succeeds|NotTilde|bigwedge|angmsdah|angrtvbd|triminus|cwconint|fpartint|lrcorner|smeparsl|subseteq|urcorner|lurdshar|laemptyv|DDotrahd|approxeq|ldrushar|awconint|mapstoup|backcong|shortmid|triangle|geqslant|gesdotol|timesbar|circledR|circledS|setminus|multimap|naturals|scpolint|ncongdot|RightTee|boxminus|gnapprox|boxtimes|andslope|thicksim|angmsdaa|varsigma|cirfnint|rtriltri|angmsdab|rppolint|angmsdac|barwedge|drbkarow|clubsuit|thetasym|bsolhsub|capbrcup|dzigrarr|doteqdot|DotEqual|dotminus|UnderBar|NotEqual|realpart|otimesas|ulcorner|hksearow|hkswarow|parallel|PartialD|elinters|emptyset|plusacir|bbrktbrk|angmsdad|pointint|bigoplus|angmsdae|Precedes|bigsqcup|varkappa|notindot|supseteq|precneqq|precnsim|profalar|profline|profsurf|leqslant|lesdotor|raemptyv|subplus|notnivb|notnivc|subrarr|zigrarr|vzigzag|submult|subedot|Element|between|cirscir|larrbfs|larrsim|lotimes|lbrksld|lbrkslu|lozenge|ldrdhar|dbkarow|bigcirc|epsilon|simrarr|simplus|ltquest|Epsilon|luruhar|gtquest|maltese|npolint|eqcolon|npreceq|bigodot|ddagger|gtrless|bnequiv|harrcir|ddotseq|equivDD|backsim|demptyv|nsqsube|nsqsupe|Upsilon|nsubset|upsilon|minusdu|nsucceq|swarrow|nsupset|coloneq|searrow|boxplus|napprox|natural|asympeq|alefsym|congdot|nearrow|bigstar|diamond|supplus|tritime|LeftTee|nvinfin|triplus|NewLine|nvltrie|nvrtrie|nwarrow|nexists|Diamond|ruluhar|Implies|supmult|angzarr|suplarr|suphsub|questeq|because|digamma|Because|olcross|bemptyv|omicron|Omicron|rotimes|NoBreak|intprod|angrtvb|orderof|uwangle|suphsol|lesdoto|orslope|DownTee|realine|cudarrl|rdldhar|OverBar|supedot|lessdot|supdsub|topfork|succsim|rbrkslu|rbrksld|pertenk|cudarrr|isindot|planckh|lessgtr|pluscir|gesdoto|plussim|plustwo|lesssim|cularrp|rarrsim|Cayleys|notinva|notinvb|notinvc|UpArrow|Uparrow|uparrow|NotLess|dwangle|precsim|Product|curarrm|Cconint|dotplus|rarrbfs|ccupssm|Cedilla|cemptyv|notniva|quatint|frac35|frac38|frac45|frac56|frac58|frac78|tridot|xoplus|gacute|gammad|Gammad|lfisht|lfloor|bigcup|sqsupe|gbreve|Gbreve|lharul|sqsube|sqcups|Gcedil|apacir|llhard|lmidot|Lmidot|lmoust|andand|sqcaps|approx|Abreve|spades|circeq|tprime|divide|topcir|Assign|topbot|gesdot|divonx|xuplus|timesd|gesles|atilde|solbar|SOFTcy|loplus|timesb|lowast|lowbar|dlcorn|dlcrop|softcy|dollar|lparlt|thksim|lrhard|Atilde|lsaquo|smashp|bigvee|thinsp|wreath|bkarow|lsquor|lstrok|Lstrok|lthree|ltimes|ltlarr|DotDot|simdot|ltrPar|weierp|xsqcup|angmsd|sigmav|sigmaf|zeetrf|Zcaron|zcaron|mapsto|vsupne|thetav|cirmid|marker|mcomma|Zacute|vsubnE|there4|gtlPar|vsubne|bottom|gtrarr|SHCHcy|shchcy|midast|midcir|middot|minusb|minusd|gtrdot|bowtie|sfrown|mnplus|models|colone|seswar|Colone|mstpos|searhk|gtrsim|nacute|Nacute|boxbox|telrec|hairsp|Tcedil|nbumpe|scnsim|ncaron|Ncaron|ncedil|Ncedil|hamilt|Scedil|nearhk|hardcy|HARDcy|tcedil|Tcaron|commat|nequiv|nesear|tcaron|target|hearts|nexist|varrho|scedil|Scaron|scaron|hellip|Sacute|sacute|hercon|swnwar|compfn|rtimes|rthree|rsquor|rsaquo|zacute|wedgeq|homtht|barvee|barwed|Barwed|rpargt|horbar|conint|swarhk|roplus|nltrie|hslash|hstrok|Hstrok|rmoust|Conint|bprime|hybull|hyphen|iacute|Iacute|supsup|supsub|supsim|varphi|coprod|brvbar|agrave|Supset|supset|igrave|Igrave|notinE|Agrave|iiiint|iinfin|copysr|wedbar|Verbar|vangrt|becaus|incare|verbar|inodot|bullet|drcorn|intcal|drcrop|cularr|vellip|Utilde|bumpeq|cupcap|dstrok|Dstrok|CupCap|cupcup|cupdot|eacute|Eacute|supdot|iquest|easter|ecaron|Ecaron|ecolon|isinsv|utilde|itilde|Itilde|curarr|succeq|Bumpeq|cacute|ulcrop|nparsl|Cacute|nprcue|egrave|Egrave|nrarrc|nrarrw|subsup|subsub|nrtrie|jsercy|nsccue|Jsercy|kappav|kcedil|Kcedil|subsim|ulcorn|nsimeq|egsdot|veebar|kgreen|capand|elsdot|Subset|subset|curren|aacute|lacute|Lacute|emptyv|ntilde|Ntilde|lagran|lambda|Lambda|capcap|Ugrave|langle|subdot|emsp13|numero|emsp14|nvdash|nvDash|nVdash|nVDash|ugrave|ufisht|nvHarr|larrfs|nvlArr|larrhk|larrlp|larrpl|nvrArr|Udblac|nwarhk|larrtl|nwnear|oacute|Oacute|latail|lAtail|sstarf|lbrace|odblac|Odblac|lbrack|udblac|odsold|eparsl|lcaron|Lcaron|ograve|Ograve|lcedil|Lcedil|Aacute|ssmile|ssetmn|squarf|ldquor|capcup|ominus|cylcty|rharul|eqcirc|dagger|rfloor|rfisht|Dagger|daleth|equals|origof|capdot|equest|dcaron|Dcaron|rdquor|oslash|Oslash|otilde|Otilde|otimes|Otimes|urcrop|Ubreve|ubreve|Yacute|Uacute|uacute|Rcedil|rcedil|urcorn|parsim|Rcaron|Vdashl|rcaron|Tstrok|percnt|period|permil|Exists|yacute|rbrack|rbrace|phmmat|ccaron|Ccaron|planck|ccedil|plankv|tstrok|female|plusdo|plusdu|ffilig|plusmn|ffllig|Ccedil|rAtail|dfisht|bernou|ratail|Rarrtl|rarrtl|angsph|rarrpl|rarrlp|rarrhk|xwedge|xotime|forall|ForAll|Vvdash|vsupnE|preceq|bigcap|frac12|frac13|frac14|primes|rarrfs|prnsim|frac15|Square|frac16|square|lesdot|frac18|frac23|propto|prurel|rarrap|rangle|puncsp|frac25|Racute|qprime|racute|lesges|frac34|abreve|AElig|eqsim|utdot|setmn|urtri|Equal|Uring|seArr|uring|searr|dashv|Dashv|mumap|nabla|iogon|Iogon|sdote|sdotb|scsim|napid|napos|equiv|natur|Acirc|dblac|erarr|nbump|iprod|erDot|ucirc|awint|esdot|angrt|ncong|isinE|scnap|Scirc|scirc|ndash|isins|Ubrcy|nearr|neArr|isinv|nedot|ubrcy|acute|Ycirc|iukcy|Iukcy|xutri|nesim|caret|jcirc|Jcirc|caron|twixt|ddarr|sccue|exist|jmath|sbquo|ngeqq|angst|ccaps|lceil|ngsim|UpTee|delta|Delta|rtrif|nharr|nhArr|nhpar|rtrie|jukcy|Jukcy|kappa|rsquo|Kappa|nlarr|nlArr|TSHcy|rrarr|aogon|Aogon|fflig|xrarr|tshcy|ccirc|nleqq|filig|upsih|nless|dharl|nlsim|fjlig|ropar|nltri|dharr|robrk|roarr|fllig|fltns|roang|rnmid|subnE|subne|lAarr|trisb|Ccirc|acirc|ccups|blank|VDash|forkv|Vdash|langd|cedil|blk12|blk14|laquo|strns|diams|notin|vDash|larrb|blk34|block|disin|uplus|vdash|vBarv|aelig|starf|Wedge|check|xrArr|lates|lbarr|lBarr|notni|lbbrk|bcong|frasl|lbrke|frown|vrtri|vprop|vnsup|gamma|Gamma|wedge|xodot|bdquo|srarr|doteq|ldquo|boxdl|boxdL|gcirc|Gcirc|boxDl|boxDL|boxdr|boxdR|boxDr|TRADE|trade|rlhar|boxDR|vnsub|npart|vltri|rlarr|boxhd|boxhD|nprec|gescc|nrarr|nrArr|boxHd|boxHD|boxhu|boxhU|nrtri|boxHu|clubs|boxHU|times|colon|Colon|gimel|xlArr|Tilde|nsime|tilde|nsmid|nspar|THORN|thorn|xlarr|nsube|nsubE|thkap|xhArr|comma|nsucc|boxul|boxuL|nsupe|nsupE|gneqq|gnsim|boxUl|boxUL|grave|boxur|boxuR|boxUr|boxUR|lescc|angle|bepsi|boxvh|varpi|boxvH|numsp|Theta|gsime|gsiml|theta|boxVh|boxVH|boxvl|gtcir|gtdot|boxvL|boxVl|boxVL|crarr|cross|Cross|nvsim|boxvr|nwarr|nwArr|sqsup|dtdot|Uogon|lhard|lharu|dtrif|ocirc|Ocirc|lhblk|duarr|odash|sqsub|Hacek|sqcup|llarr|duhar|oelig|OElig|ofcir|boxvR|uogon|lltri|boxVr|csube|uuarr|ohbar|csupe|ctdot|olarr|olcir|harrw|oline|sqcap|omacr|Omacr|omega|Omega|boxVR|aleph|lneqq|lnsim|loang|loarr|rharu|lobrk|hcirc|operp|oplus|rhard|Hcirc|orarr|Union|order|ecirc|Ecirc|cuepr|szlig|cuesc|breve|reals|eDDot|Breve|hoarr|lopar|utrif|rdquo|Umacr|umacr|efDot|swArr|ultri|alpha|rceil|ovbar|swarr|Wcirc|wcirc|smtes|smile|bsemi|lrarr|aring|parsl|lrhar|bsime|uhblk|lrtri|cupor|Aring|uharr|uharl|slarr|rbrke|bsolb|lsime|rbbrk|RBarr|lsimg|phone|rBarr|rbarr|icirc|lsquo|Icirc|emacr|Emacr|ratio|simne|plusb|simlE|simgE|simeq|pluse|ltcir|ltdot|empty|xharr|xdtri|iexcl|Alpha|ltrie|rarrw|pound|ltrif|xcirc|bumpe|prcue|bumpE|asymp|amacr|cuvee|Sigma|sigma|iiint|udhar|iiota|ijlig|IJlig|supnE|imacr|Imacr|prime|Prime|image|prnap|eogon|Eogon|rarrc|mdash|mDDot|cuwed|imath|supne|imped|Amacr|udarr|prsim|micro|rarrb|cwint|raquo|infin|eplus|range|rangd|Ucirc|radic|minus|amalg|veeeq|rAarr|epsiv|ycirc|quest|sharp|quot|zwnj|Qscr|race|qscr|Qopf|qopf|qint|rang|Rang|Zscr|zscr|Zopf|zopf|rarr|rArr|Rarr|Pscr|pscr|prop|prod|prnE|prec|ZHcy|zhcy|prap|Zeta|zeta|Popf|popf|Zdot|plus|zdot|Yuml|yuml|phiv|YUcy|yucy|Yscr|yscr|perp|Yopf|yopf|part|para|YIcy|Ouml|rcub|yicy|YAcy|rdca|ouml|osol|Oscr|rdsh|yacy|real|oscr|xvee|andd|rect|andv|Xscr|oror|ordm|ordf|xscr|ange|aopf|Aopf|rHar|Xopf|opar|Oopf|xopf|xnis|rhov|oopf|omid|xmap|oint|apid|apos|ogon|ascr|Ascr|odot|odiv|xcup|xcap|ocir|oast|nvlt|nvle|nvgt|nvge|nvap|Wscr|wscr|auml|ntlg|ntgl|nsup|nsub|nsim|Nscr|nscr|nsce|Wopf|ring|npre|wopf|npar|Auml|Barv|bbrk|Nopf|nopf|nmid|nLtv|beta|ropf|Ropf|Beta|beth|nles|rpar|nleq|bnot|bNot|nldr|NJcy|rscr|Rscr|Vscr|vscr|rsqb|njcy|bopf|nisd|Bopf|rtri|Vopf|nGtv|ngtr|vopf|boxh|boxH|boxv|nges|ngeq|boxV|bscr|scap|Bscr|bsim|Vert|vert|bsol|bull|bump|caps|cdot|ncup|scnE|ncap|nbsp|napE|Cdot|cent|sdot|Vbar|nang|vBar|chcy|Mscr|mscr|sect|semi|CHcy|Mopf|mopf|sext|circ|cire|mldr|mlcp|cirE|comp|shcy|SHcy|vArr|varr|cong|copf|Copf|copy|COPY|malt|male|macr|lvnE|cscr|ltri|sime|ltcc|simg|Cscr|siml|csub|Uuml|lsqb|lsim|uuml|csup|Lscr|lscr|utri|smid|lpar|cups|smte|lozf|darr|Lopf|Uscr|solb|lopf|sopf|Sopf|lneq|uscr|spar|dArr|lnap|Darr|dash|Sqrt|LJcy|ljcy|lHar|dHar|Upsi|upsi|diam|lesg|djcy|DJcy|leqq|dopf|Dopf|dscr|Dscr|dscy|ldsh|ldca|squf|DScy|sscr|Sscr|dsol|lcub|late|star|Star|Uopf|Larr|lArr|larr|uopf|dtri|dzcy|sube|subE|Lang|lang|Kscr|kscr|Kopf|kopf|KJcy|kjcy|KHcy|khcy|DZcy|ecir|edot|eDot|Jscr|jscr|succ|Jopf|jopf|Edot|uHar|emsp|ensp|Iuml|iuml|eopf|isin|Iscr|iscr|Eopf|epar|sung|epsi|escr|sup1|sup2|sup3|Iota|iota|supe|supE|Iopf|iopf|IOcy|iocy|Escr|esim|Esim|imof|Uarr|QUOT|uArr|uarr|euml|IEcy|iecy|Idot|Euml|euro|excl|Hscr|hscr|Hopf|hopf|TScy|tscy|Tscr|hbar|tscr|flat|tbrk|fnof|hArr|harr|half|fopf|Fopf|tdot|gvnE|fork|trie|gtcc|fscr|Fscr|gdot|gsim|Gscr|gscr|Gopf|gopf|gneq|Gdot|tosa|gnap|Topf|topf|geqq|toea|GJcy|gjcy|tint|gesl|mid|Sfr|ggg|top|ges|gla|glE|glj|geq|gne|gEl|gel|gnE|Gcy|gcy|gap|Tfr|tfr|Tcy|tcy|Hat|Tau|Ffr|tau|Tab|hfr|Hfr|ffr|Fcy|fcy|icy|Icy|iff|ETH|eth|ifr|Ifr|Eta|eta|int|Int|Sup|sup|ucy|Ucy|Sum|sum|jcy|ENG|ufr|Ufr|eng|Jcy|jfr|els|ell|egs|Efr|efr|Jfr|uml|kcy|Kcy|Ecy|ecy|kfr|Kfr|lap|Sub|sub|lat|lcy|Lcy|leg|Dot|dot|lEg|leq|les|squ|div|die|lfr|Lfr|lgE|Dfr|dfr|Del|deg|Dcy|dcy|lne|lnE|sol|loz|smt|Cup|lrm|cup|lsh|Lsh|sim|shy|map|Map|mcy|Mcy|mfr|Mfr|mho|gfr|Gfr|sfr|cir|Chi|chi|nap|Cfr|vcy|Vcy|cfr|Scy|scy|ncy|Ncy|vee|Vee|Cap|cap|nfr|scE|sce|Nfr|nge|ngE|nGg|vfr|Vfr|ngt|bot|nGt|nis|niv|Rsh|rsh|nle|nlE|bne|Bfr|bfr|nLl|nlt|nLt|Bcy|bcy|not|Not|rlm|wfr|Wfr|npr|nsc|num|ocy|ast|Ocy|ofr|xfr|Xfr|Ofr|ogt|ohm|apE|olt|Rho|ape|rho|Rfr|rfr|ord|REG|ang|reg|orv|And|and|AMP|Rcy|amp|Afr|ycy|Ycy|yen|yfr|Yfr|rcy|par|pcy|Pcy|pfr|Pfr|phi|Phi|afr|Acy|acy|zcy|Zcy|piv|acE|acd|zfr|Zfr|pre|prE|psi|Psi|qfr|Qfr|zwj|Or|ge|Gg|gt|gg|el|oS|lt|Lt|LT|Re|lg|gl|eg|ne|Im|it|le|DD|wp|wr|nu|Nu|dd|lE|Sc|sc|pi|Pi|ee|af|ll|Ll|rx|gE|xi|pm|Xi|ic|pr|Pr|in|ni|mp|mu|ac|Mu|or|ap|Gt|GT|ii);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)(?!;)([=a-zA-Z0-9]?)|&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+)/g,m={aacute:"á",Aacute:"Á",abreve:"ă",Abreve:"Ă",ac:"∾",acd:"∿",acE:"∾̳",acirc:"â",Acirc:"Â",acute:"´",acy:"а",Acy:"А",aelig:"æ",AElig:"Æ",af:"⁡",afr:"𝔞",Afr:"𝔄",agrave:"à",Agrave:"À",alefsym:"ℵ",aleph:"ℵ",alpha:"α",Alpha:"Α",amacr:"ā",Amacr:"Ā",amalg:"⨿",amp:"&",AMP:"&",and:"∧",And:"⩓",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",aogon:"ą",Aogon:"Ą",aopf:"𝕒",Aopf:"𝔸",ap:"≈",apacir:"⩯",ape:"≊",apE:"⩰",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",aring:"å",Aring:"Å",ascr:"𝒶",Ascr:"𝒜",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",bcy:"б",Bcy:"Б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",beta:"β",Beta:"Β",beth:"ℶ",between:"≬",bfr:"𝔟",Bfr:"𝔅",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bnot:"⌐",bNot:"⫭",bopf:"𝕓",Bopf:"𝔹",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxhD:"╥",boxHd:"╤",boxHD:"╦",boxhu:"┴",boxhU:"╨",boxHu:"╧",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpe:"≏",bumpE:"⪮",bumpeq:"≏",Bumpeq:"≎",cacute:"ć",Cacute:"Ć",cap:"∩",Cap:"⋒",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",ccaron:"č",Ccaron:"Č",ccedil:"ç",Ccedil:"Ç",ccirc:"ĉ",Ccirc:"Ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",cdot:"ċ",Cdot:"Ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",chcy:"ч",CHcy:"Ч",check:"✓",checkmark:"✓",chi:"χ",Chi:"Χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cire:"≗",cirE:"⧃",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",colone:"≔",Colone:"⩴",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",cscr:"𝒸",Cscr:"𝒞",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cup:"∪",Cup:"⋓",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",dArr:"⇓",Darr:"↡",dash:"‐",dashv:"⊣",Dashv:"⫤",dbkarow:"⤏",dblac:"˝",dcaron:"ď",Dcaron:"Ď",dcy:"д",Dcy:"Д",dd:"ⅆ",DD:"ⅅ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",delta:"δ",Delta:"Δ",demptyv:"⦱",dfisht:"⥿",dfr:"𝔡",Dfr:"𝔇",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",djcy:"ђ",DJcy:"Ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",dopf:"𝕕",Dopf:"𝔻",dot:"˙",Dot:"¨",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",downarrow:"↓",Downarrow:"⇓",DownArrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",dscr:"𝒹",Dscr:"𝒟",dscy:"ѕ",DScy:"Ѕ",dsol:"⧶",dstrok:"đ",Dstrok:"Đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",dzcy:"џ",DZcy:"Џ",dzigrarr:"⟿",eacute:"é",Eacute:"É",easter:"⩮",ecaron:"ě",Ecaron:"Ě",ecir:"≖",ecirc:"ê",Ecirc:"Ê",ecolon:"≕",ecy:"э",Ecy:"Э",eDDot:"⩷",edot:"ė",eDot:"≑",Edot:"Ė",ee:"ⅇ",efDot:"≒",efr:"𝔢",Efr:"𝔈",eg:"⪚",egrave:"è",Egrave:"È",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",emacr:"ē",Emacr:"Ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",eng:"ŋ",ENG:"Ŋ",ensp:" ",eogon:"ę",Eogon:"Ę",eopf:"𝕖",Eopf:"𝔼",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",epsilon:"ε",Epsilon:"Ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",esim:"≂",Esim:"⩳",eta:"η",Eta:"Η",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",fcy:"ф",Fcy:"Ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",ffr:"𝔣",Ffr:"𝔉",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",fopf:"𝕗",Fopf:"𝔽",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",gamma:"γ",Gamma:"Γ",gammad:"ϝ",Gammad:"Ϝ",gap:"⪆",gbreve:"ğ",Gbreve:"Ğ",Gcedil:"Ģ",gcirc:"ĝ",Gcirc:"Ĝ",gcy:"г",Gcy:"Г",gdot:"ġ",Gdot:"Ġ",ge:"≥",gE:"≧",gel:"⋛",gEl:"⪌",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",gfr:"𝔤",Gfr:"𝔊",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",gjcy:"ѓ",GJcy:"Ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",gopf:"𝕘",Gopf:"𝔾",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",gscr:"ℊ",Gscr:"𝒢",gsim:"≳",gsime:"⪎",gsiml:"⪐",gt:">",Gt:"≫",GT:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",hardcy:"ъ",HARDcy:"Ъ",harr:"↔",hArr:"⇔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",hcirc:"ĥ",Hcirc:"Ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",hstrok:"ħ",Hstrok:"Ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",iacute:"í",Iacute:"Í",ic:"⁣",icirc:"î",Icirc:"Î",icy:"и",Icy:"И",Idot:"İ",iecy:"е",IEcy:"Е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",igrave:"ì",Igrave:"Ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",ijlig:"ĳ",IJlig:"Ĳ",Im:"ℑ",imacr:"ī",Imacr:"Ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",int:"∫",Int:"∬",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",iocy:"ё",IOcy:"Ё",iogon:"į",Iogon:"Į",iopf:"𝕚",Iopf:"𝕀",iota:"ι",Iota:"Ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",itilde:"ĩ",Itilde:"Ĩ",iukcy:"і",Iukcy:"І",iuml:"ï",Iuml:"Ï",jcirc:"ĵ",Jcirc:"Ĵ",jcy:"й",Jcy:"Й",jfr:"𝔧",Jfr:"𝔍",jmath:"ȷ",jopf:"𝕛",Jopf:"𝕁",jscr:"𝒿",Jscr:"𝒥",jsercy:"ј",Jsercy:"Ј",jukcy:"є",Jukcy:"Є",kappa:"κ",Kappa:"Κ",kappav:"ϰ",kcedil:"ķ",Kcedil:"Ķ",kcy:"к",Kcy:"К",kfr:"𝔨",Kfr:"𝔎",kgreen:"ĸ",khcy:"х",KHcy:"Х",kjcy:"ќ",KJcy:"Ќ",kopf:"𝕜",Kopf:"𝕂",kscr:"𝓀",Kscr:"𝒦",lAarr:"⇚",lacute:"ĺ",Lacute:"Ĺ",laemptyv:"⦴",lagran:"ℒ",lambda:"λ",Lambda:"Λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larr:"←",lArr:"⇐",Larr:"↞",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",latail:"⤙",lAtail:"⤛",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",lcaron:"ľ",Lcaron:"Ľ",lcedil:"ļ",Lcedil:"Ļ",lceil:"⌈",lcub:"{",lcy:"л",Lcy:"Л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",leftarrow:"←",Leftarrow:"⇐",LeftArrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",Leftrightarrow:"⇔",LeftRightArrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",leg:"⋚",lEg:"⪋",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",lfr:"𝔩",Lfr:"𝔏",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",ljcy:"љ",LJcy:"Љ",ll:"≪",Ll:"⋘",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",lmidot:"ŀ",Lmidot:"Ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",Longleftarrow:"⟸",LongLeftArrow:"⟵",longleftrightarrow:"⟷",Longleftrightarrow:"⟺",LongLeftRightArrow:"⟷",longmapsto:"⟼",longrightarrow:"⟶",Longrightarrow:"⟹",LongRightArrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",lopf:"𝕝",Lopf:"𝕃",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",lstrok:"ł",Lstrok:"Ł",lt:"<",Lt:"≪",LT:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",map:"↦",Map:"⤅",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",mcy:"м",Mcy:"М",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",mfr:"𝔪",Mfr:"𝔐",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",mopf:"𝕞",Mopf:"𝕄",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",mu:"μ",Mu:"Μ",multimap:"⊸",mumap:"⊸",nabla:"∇",nacute:"ń",Nacute:"Ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",ncaron:"ň",Ncaron:"Ň",ncedil:"ņ",Ncedil:"Ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",ncy:"н",Ncy:"Н",ndash:"–",ne:"≠",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",nfr:"𝔫",Nfr:"𝔑",nge:"≱",ngE:"≧̸",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",ngt:"≯",nGt:"≫⃒",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",njcy:"њ",NJcy:"Њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nle:"≰",nlE:"≦̸",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nlt:"≮",nLt:"≪⃒",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",not:"¬",Not:"⫬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrarr:"↛",nrArr:"⇏",nrarrc:"⤳̸",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",nscr:"𝓃",Nscr:"𝒩",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsube:"⊈",nsubE:"⫅̸",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupe:"⊉",nsupE:"⫆̸",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",ntilde:"ñ",Ntilde:"Ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",nu:"ν",Nu:"Ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",oacute:"ó",Oacute:"Ó",oast:"⊛",ocir:"⊚",ocirc:"ô",Ocirc:"Ô",ocy:"о",Ocy:"О",odash:"⊝",odblac:"ő",Odblac:"Ő",odiv:"⨸",odot:"⊙",odsold:"⦼",oelig:"œ",OElig:"Œ",ofcir:"⦿",ofr:"𝔬",Ofr:"𝔒",ogon:"˛",ograve:"ò",Ograve:"Ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",omacr:"ō",Omacr:"Ō",omega:"ω",Omega:"Ω",omicron:"ο",Omicron:"Ο",omid:"⦶",ominus:"⊖",oopf:"𝕠",Oopf:"𝕆",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",or:"∨",Or:"⩔",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",oscr:"ℴ",Oscr:"𝒪",oslash:"ø",Oslash:"Ø",osol:"⊘",otilde:"õ",Otilde:"Õ",otimes:"⊗",Otimes:"⨷",otimesas:"⨶",ouml:"ö",Ouml:"Ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",pcy:"п",Pcy:"П",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",pfr:"𝔭",Pfr:"𝔓",phi:"φ",Phi:"Φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",pi:"π",Pi:"Π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",pr:"≺",Pr:"⪻",prap:"⪷",prcue:"≼",pre:"⪯",prE:"⪳",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",pscr:"𝓅",Pscr:"𝒫",psi:"ψ",Psi:"Ψ",puncsp:" ",qfr:"𝔮",Qfr:"𝔔",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",qscr:"𝓆",Qscr:"𝒬",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",racute:"ŕ",Racute:"Ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarr:"→",rArr:"⇒",Rarr:"↠",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",rarrtl:"↣",Rarrtl:"⤖",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",rcaron:"ř",Rcaron:"Ř",rcedil:"ŗ",Rcedil:"Ŗ",rceil:"⌉",rcub:"}",rcy:"р",Rcy:"Р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",rho:"ρ",Rho:"Ρ",rhov:"ϱ",RightAngleBracket:"⟩",rightarrow:"→",Rightarrow:"⇒",RightArrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",sacute:"ś",Sacute:"Ś",sbquo:"‚",sc:"≻",Sc:"⪼",scap:"⪸",scaron:"š",Scaron:"Š",sccue:"≽",sce:"⪰",scE:"⪴",scedil:"ş",Scedil:"Ş",scirc:"ŝ",Scirc:"Ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",scy:"с",Scy:"С",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",sfr:"𝔰",Sfr:"𝔖",sfrown:"⌢",sharp:"♯",shchcy:"щ",SHCHcy:"Щ",shcy:"ш",SHcy:"Ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",sigma:"σ",Sigma:"Σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",softcy:"ь",SOFTcy:"Ь",sol:"/",solb:"⧄",solbar:"⌿",sopf:"𝕤",Sopf:"𝕊",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",sscr:"𝓈",Sscr:"𝒮",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",star:"☆",Star:"⋆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",sube:"⊆",subE:"⫅",subedot:"⫃",submult:"⫁",subne:"⊊",subnE:"⫋",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup:"⊃",Sup:"⋑",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supe:"⊇",supE:"⫆",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supne:"⊋",supnE:"⫌",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",tau:"τ",Tau:"Τ",tbrk:"⎴",tcaron:"ť",Tcaron:"Ť",tcedil:"ţ",Tcedil:"Ţ",tcy:"т",Tcy:"Т",tdot:"⃛",telrec:"⌕",tfr:"𝔱",Tfr:"𝔗",there4:"∴",therefore:"∴",Therefore:"∴",theta:"θ",Theta:"Θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",thorn:"þ",THORN:"Þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",topf:"𝕥",Topf:"𝕋",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",tscr:"𝓉",Tscr:"𝒯",tscy:"ц",TScy:"Ц",tshcy:"ћ",TSHcy:"Ћ",tstrok:"ŧ",Tstrok:"Ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",uacute:"ú",Uacute:"Ú",uarr:"↑",uArr:"⇑",Uarr:"↟",Uarrocir:"⥉",ubrcy:"ў",Ubrcy:"Ў",ubreve:"ŭ",Ubreve:"Ŭ",ucirc:"û",Ucirc:"Û",ucy:"у",Ucy:"У",udarr:"⇅",udblac:"ű",Udblac:"Ű",udhar:"⥮",ufisht:"⥾",ufr:"𝔲",Ufr:"𝔘",ugrave:"ù",Ugrave:"Ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",umacr:"ū",Umacr:"Ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",uogon:"ų",Uogon:"Ų",uopf:"𝕦",Uopf:"𝕌",uparrow:"↑",Uparrow:"⇑",UpArrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",updownarrow:"↕",Updownarrow:"⇕",UpDownArrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",upsilon:"υ",Upsilon:"Υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",uring:"ů",Uring:"Ů",urtri:"◹",uscr:"𝓊",Uscr:"𝒰",utdot:"⋰",utilde:"ũ",Utilde:"Ũ",utri:"▵",utrif:"▴",uuarr:"⇈",uuml:"ü",Uuml:"Ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",vcy:"в",Vcy:"В",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",vee:"∨",Vee:"⋁",veebar:"⊻",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",vfr:"𝔳",Vfr:"𝔙",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",vopf:"𝕧",Vopf:"𝕍",vprop:"∝",vrtri:"⊳",vscr:"𝓋",Vscr:"𝒱",vsubne:"⊊︀",vsubnE:"⫋︀",vsupne:"⊋︀",vsupnE:"⫌︀",Vvdash:"⊪",vzigzag:"⦚",wcirc:"ŵ",Wcirc:"Ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",wfr:"𝔴",Wfr:"𝔚",wopf:"𝕨",Wopf:"𝕎",wp:"℘",wr:"≀",wreath:"≀",wscr:"𝓌",Wscr:"𝒲",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",xfr:"𝔵",Xfr:"𝔛",xharr:"⟷",xhArr:"⟺",xi:"ξ",Xi:"Ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",xopf:"𝕩",Xopf:"𝕏",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",xscr:"𝓍",Xscr:"𝒳",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",yacute:"ý",Yacute:"Ý",yacy:"я",YAcy:"Я",ycirc:"ŷ",Ycirc:"Ŷ",ycy:"ы",Ycy:"Ы",yen:"¥",yfr:"𝔶",Yfr:"𝔜",yicy:"ї",YIcy:"Ї",yopf:"𝕪",Yopf:"𝕐",yscr:"𝓎",Yscr:"𝒴",yucy:"ю",YUcy:"Ю",yuml:"ÿ",Yuml:"Ÿ",zacute:"ź",Zacute:"Ź",zcaron:"ž",Zcaron:"Ž",zcy:"з",Zcy:"З",zdot:"ż",Zdot:"Ż",zeetrf:"ℨ",ZeroWidthSpace:"​",zeta:"ζ",Zeta:"Ζ",zfr:"𝔷",Zfr:"ℨ",zhcy:"ж",ZHcy:"Ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",zscr:"𝓏",Zscr:"𝒵",zwj:"‍",zwnj:"‌"},v={aacute:"á",Aacute:"Á",acirc:"â",Acirc:"Â",acute:"´",aelig:"æ",AElig:"Æ",agrave:"à",Agrave:"À",amp:"&",AMP:"&",aring:"å",Aring:"Å",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",brvbar:"¦",ccedil:"ç",Ccedil:"Ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",eacute:"é",Eacute:"É",ecirc:"ê",Ecirc:"Ê",egrave:"è",Egrave:"È",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",iacute:"í",Iacute:"Í",icirc:"î",Icirc:"Î",iexcl:"¡",igrave:"ì",Igrave:"Ì",iquest:"¿",iuml:"ï",Iuml:"Ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",ntilde:"ñ",Ntilde:"Ñ",oacute:"ó",Oacute:"Ó",ocirc:"ô",Ocirc:"Ô",ograve:"ò",Ograve:"Ò",ordf:"ª",ordm:"º",oslash:"ø",Oslash:"Ø",otilde:"õ",Otilde:"Õ",ouml:"ö",Ouml:"Ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",thorn:"þ",THORN:"Þ",times:"×",uacute:"ú",Uacute:"Ú",ucirc:"û",Ucirc:"Û",ugrave:"ù",Ugrave:"Ù",uml:"¨",uuml:"ü",Uuml:"Ü",yacute:"ý",Yacute:"Ý",yen:"¥",yuml:"ÿ"},g={0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},y=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],b=String.fromCharCode,w={}.hasOwnProperty,x=function(e,t){return w.call(e,t)},_=function(e,t){if(!e)return t;var r,n={};for(r in t)n[r]=x(e,r)?e[r]:t[r];return n},k=function(e,t){var r="";return e>=55296&&e<=57343||e>1114111?(t&&O("character reference outside the permissible Unicode range"),"�"):x(g,e)?(t&&O("disallowed character reference"),g[e]):(t&&function(e,t){for(var r=-1,n=e.length;++r<n;)if(e[r]==t)return!0;return!1}(y,e)&&O("disallowed character reference"),e>65535&&(r+=b((e-=65536)>>>10&1023|55296),e=56320|1023&e),r+=b(e))},E=function(e){return"&#x"+e.toString(16).toUpperCase()+";"},S=function(e){return"&#"+e+";"},O=function(e){throw Error("Parse error: "+e)},T=function(e,t){(t=_(t,T.options)).strict&&f.test(e)&&O("forbidden code point");var r=t.encodeEverything,n=t.useNamedReferences,o=t.allowUnsafeSymbols,p=t.decimal?S:E,h=function(e){return p(e.charCodeAt(0))};return r?(e=e.replace(a,(function(e){return n&&x(u,e)?"&"+u[e]+";":h(e)})),n&&(e=e.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),n&&(e=e.replace(c,(function(e){return"&"+u[e]+";"})))):n?(o||(e=e.replace(l,(function(e){return"&"+u[e]+";"}))),e=(e=e.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;")).replace(c,(function(e){return"&"+u[e]+";"}))):o||(e=e.replace(l,h)),e.replace(i,(function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return p(1024*(t-55296)+r-56320+65536)})).replace(s,h)};T.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var j=function(e,t){var r=(t=_(t,j.options)).strict;return r&&h.test(e)&&O("malformed character reference"),e.replace(d,(function(e,n,o,i,a,s,c,u,l){var p,h,f,d,g,y;return n?m[g=n]:o?(g=o,(y=i)&&t.isAttributeValue?(r&&"="==y&&O("`&` did not start a character reference"),e):(r&&O("named character reference was not terminated by a semicolon"),v[g]+(y||""))):a?(f=a,h=s,r&&!h&&O("character reference was not terminated by a semicolon"),p=parseInt(f,10),k(p,r)):c?(d=c,h=u,r&&!h&&O("character reference was not terminated by a semicolon"),p=parseInt(d,16),k(p,r)):(r&&O("named character reference was not terminated by a semicolon"),e)}))};j.options={isAttributeValue:!1,strict:!1};var C={version:"1.2.0",encode:T,decode:j,escape:function(e){return e.replace(l,(function(e){return p[e]}))},unescape:j};void 0===(n=function(){return C}.call(t,r,t,e))||(e.exports=n)}()},2790:(e,t,r)=>{const n=require;"function"==typeof n.addon?e.exports=n.addon.bind(n):e.exports=r(4632)},2829:(e,t,r)=>{"use strict";var n,o,i,a=r(7004),s=r(6928).extname,c=/^\s*([^;\s]*)(?:;|\s|$)/,u=/^text\//i;function l(e){if(!e||"string"!=typeof e)return!1;var t=c.exec(e),r=t&&a[t[1].toLowerCase()];return r&&r.charset?r.charset:!(!t||!u.test(t[1]))&&"UTF-8"}t.charset=l,t.charsets={lookup:l},t.contentType=function(e){if(!e||"string"!=typeof e)return!1;var r=-1===e.indexOf("/")?t.lookup(e):e;if(!r)return!1;if(-1===r.indexOf("charset")){var n=t.charset(r);n&&(r+="; charset="+n.toLowerCase())}return r},t.extension=function(e){if(!e||"string"!=typeof e)return!1;var r=c.exec(e),n=r&&t.extensions[r[1].toLowerCase()];return!(!n||!n.length)&&n[0]},t.extensions=Object.create(null),t.lookup=function(e){if(!e||"string"!=typeof e)return!1;var r=s("x."+e).toLowerCase().substr(1);return r&&t.types[r]||!1},t.types=Object.create(null),n=t.extensions,o=t.types,i=["nginx","apache",void 0,"iana"],Object.keys(a).forEach((function(e){var t=a[e],r=t.extensions;if(r&&r.length){n[e]=r;for(var s=0;s<r.length;s++){var c=r[s];if(o[c]){var u=i.indexOf(a[o[c]].source),l=i.indexOf(t.source);if("application/octet-stream"!==o[c]&&(u>l||u===l&&"application/"===o[c].substr(0,12)))continue}o[c]=e}}}))},3090:(e,t,r)=>{var n=r(135),o=r(9023),i=r(6928),a=r(8611),s=r(5692),c=r(7016).parse,u=r(9896),l=r(2203).Stream,p=r(2829),h=r(8146),f=r(4695);function d(e){if(!(this instanceof d))return new d(e);for(var t in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],n.call(this),e=e||{})this[t]=e[t]}e.exports=d,o.inherits(d,n),d.LINE_BREAK="\r\n",d.DEFAULT_CONTENT_TYPE="application/octet-stream",d.prototype.append=function(e,t,r){"string"==typeof(r=r||{})&&(r={filename:r});var o=n.prototype.append.bind(this);if("number"==typeof t&&(t=""+t),Array.isArray(t))this._error(new Error("Arrays are not supported."));else{var i=this._multiPartHeader(e,t,r),a=this._multiPartFooter();o(i),o(t),o(a),this._trackLength(i,t,r)}},d.prototype._trackLength=function(e,t,r){var n=0;null!=r.knownLength?n+=+r.knownLength:Buffer.isBuffer(t)?n=t.length:"string"==typeof t&&(n=Buffer.byteLength(t)),this._valueLength+=n,this._overheadLength+=Buffer.byteLength(e)+d.LINE_BREAK.length,t&&(t.path||t.readable&&t.hasOwnProperty("httpVersion")||t instanceof l)&&(r.knownLength||this._valuesToMeasure.push(t))},d.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?null!=e.end&&e.end!=1/0&&null!=e.start?t(null,e.end+1-(e.start?e.start:0)):u.stat(e.path,(function(r,n){var o;r?t(r):(o=n.size-(e.start?e.start:0),t(null,o))})):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",(function(r){e.pause(),t(null,+r.headers["content-length"])})),e.resume()):t("Unknown stream")},d.prototype._multiPartHeader=function(e,t,r){if("string"==typeof r.header)return r.header;var n,o=this._getContentDisposition(t,r),i=this._getContentType(t,r),a="",s={"Content-Disposition":["form-data",'name="'+e+'"'].concat(o||[]),"Content-Type":[].concat(i||[])};for(var c in"object"==typeof r.header&&f(s,r.header),s)s.hasOwnProperty(c)&&null!=(n=s[c])&&(Array.isArray(n)||(n=[n]),n.length&&(a+=c+": "+n.join("; ")+d.LINE_BREAK));return"--"+this.getBoundary()+d.LINE_BREAK+a+d.LINE_BREAK},d.prototype._getContentDisposition=function(e,t){var r,n;return"string"==typeof t.filepath?r=i.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?r=i.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(r=i.basename(e.client._httpMessage.path||"")),r&&(n='filename="'+r+'"'),n},d.prototype._getContentType=function(e,t){var r=t.contentType;return!r&&e.name&&(r=p.lookup(e.name)),!r&&e.path&&(r=p.lookup(e.path)),!r&&e.readable&&e.hasOwnProperty("httpVersion")&&(r=e.headers["content-type"]),r||!t.filepath&&!t.filename||(r=p.lookup(t.filepath||t.filename)),r||"object"!=typeof e||(r=d.DEFAULT_CONTENT_TYPE),r},d.prototype._multiPartFooter=function(){return function(e){var t=d.LINE_BREAK;0===this._streams.length&&(t+=this._lastBoundary()),e(t)}.bind(this)},d.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+d.LINE_BREAK},d.prototype.getHeaders=function(e){var t,r={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(r[t.toLowerCase()]=e[t]);return r},d.prototype.setBoundary=function(e){this._boundary=e},d.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},d.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),r=0,n=this._streams.length;r<n;r++)"function"!=typeof this._streams[r]&&(e=Buffer.isBuffer(this._streams[r])?Buffer.concat([e,this._streams[r]]):Buffer.concat([e,Buffer.from(this._streams[r])]),"string"==typeof this._streams[r]&&this._streams[r].substring(2,t.length+2)===t||(e=Buffer.concat([e,Buffer.from(d.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])},d.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);this._boundary=e},d.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e},d.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},d.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;this._streams.length&&(t+=this._lastBoundary().length),this._valuesToMeasure.length?h.parallel(this._valuesToMeasure,this._lengthRetriever,(function(r,n){r?e(r):(n.forEach((function(e){t+=e})),e(null,t))})):process.nextTick(e.bind(this,null,t))},d.prototype.submit=function(e,t){var r,n,o={method:"post"};return"string"==typeof e?(e=c(e),n=f({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},o)):(n=f(e,o)).port||(n.port="https:"==n.protocol?443:80),n.headers=this.getHeaders(e.headers),r="https:"==n.protocol?s.request(n):a.request(n),this.getLength(function(e,n){if(e&&"Unknown stream"!==e)this._error(e);else if(n&&r.setHeader("Content-Length",n),this.pipe(r),t){var o,i=function(e,n){return r.removeListener("error",i),r.removeListener("response",o),t.call(this,e,n)};o=i.bind(this,null),r.on("error",i),r.on("response",o)}}.bind(this)),r},d.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},d.prototype.toString=function(){return"[object FormData]"}},3106:e=>{"use strict";e.exports=require("zlib")},3238:(e,t,r)=>{"use strict";const{tokenChars:n}=r(8761);function o(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const t=Object.create(null);let r,i,a=Object.create(null),s=!1,c=!1,u=!1,l=-1,p=-1,h=-1,f=0;for(;f<e.length;f++)if(p=e.charCodeAt(f),void 0===r)if(-1===h&&1===n[p])-1===l&&(l=f);else if(0===f||32!==p&&9!==p){if(59!==p&&44!==p)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${f}`);-1===h&&(h=f);const n=e.slice(l,h);44===p?(o(t,n,a),a=Object.create(null)):r=n,l=h=-1}}else-1===h&&-1!==l&&(h=f);else if(void 0===i)if(-1===h&&1===n[p])-1===l&&(l=f);else if(32===p||9===p)-1===h&&-1!==l&&(h=f);else if(59===p||44===p){if(-1===l)throw new SyntaxError(`Unexpected character at index ${f}`);-1===h&&(h=f),o(a,e.slice(l,h),!0),44===p&&(o(t,r,a),a=Object.create(null),r=void 0),l=h=-1}else{if(61!==p||-1===l||-1!==h)throw new SyntaxError(`Unexpected character at index ${f}`);i=e.slice(l,f),l=h=-1}else if(c){if(1!==n[p])throw new SyntaxError(`Unexpected character at index ${f}`);-1===l?l=f:s||(s=!0),c=!1}else if(u)if(1===n[p])-1===l&&(l=f);else if(34===p&&-1!==l)u=!1,h=f;else{if(92!==p)throw new SyntaxError(`Unexpected character at index ${f}`);c=!0}else if(34===p&&61===e.charCodeAt(f-1))u=!0;else if(-1===h&&1===n[p])-1===l&&(l=f);else if(-1===l||32!==p&&9!==p){if(59!==p&&44!==p)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${f}`);-1===h&&(h=f);let n=e.slice(l,h);s&&(n=n.replace(/\\/g,""),s=!1),o(a,i,n),44===p&&(o(t,r,a),a=Object.create(null),r=void 0),i=void 0,l=h=-1}}else-1===h&&(h=f);if(-1===l||u||32===p||9===p)throw new SyntaxError("Unexpected end of input");-1===h&&(h=f);const d=e.slice(l,h);return void 0===r?o(t,d,a):(void 0===i?o(a,d,!0):o(a,i,s?d.replace(/\\/g,""):d),o(t,r,a)),t}}},3426:(e,t,r)=>{"use strict";r(4827);const{Duplex:n}=r(2203);function o(e){e.emit("close")}function i(){!this.destroyed&&this._writableState.finished&&this.destroy()}function a(e){this.removeListener("error",a),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0;const s=new n({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t,r){const n=!r&&s._readableState.objectMode?t.toString():t;s.push(n)||e.pause()})),e.once("error",(function(e){s.destroyed||(r=!1,s.destroy(e))})),e.once("close",(function(){s.destroyed||s.push(null)})),s._destroy=function(t,n){if(e.readyState===e.CLOSED)return n(t),void process.nextTick(o,s);let i=!1;e.once("error",(function(e){i=!0,n(e)})),e.once("close",(function(){i||n(t),process.nextTick(o,s)})),r&&e.terminate()},s._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),s._readableState.endEmitted&&s.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){s._final(t)}))},s._read=function(){e.isPaused&&e.resume()},s._write=function(t,r,n){e.readyState!==e.CONNECTING?e.send(t,n):e.once("open",(function(){s._write(t,r,n)}))},s.on("end",i),s.on("error",a),s}},3458:(e,t,r)=>{"use strict";const{tokenChars:n}=r(8761);e.exports={parse:function(e){const t=new Set;let r=-1,o=-1,i=0;for(;i<e.length;i++){const a=e.charCodeAt(i);if(-1===o&&1===n[a])-1===r&&(r=i);else if(0===i||32!==a&&9!==a){if(44!==a)throw new SyntaxError(`Unexpected character at index ${i}`);{if(-1===r)throw new SyntaxError(`Unexpected character at index ${i}`);-1===o&&(o=i);const n=e.slice(r,o);if(t.has(n))throw new SyntaxError(`The "${n}" subprotocol is duplicated`);t.add(n),r=o=-1}}else-1===o&&-1!==r&&(o=i)}if(-1===r||-1!==o)throw new SyntaxError("Unexpected end of input");const a=e.slice(r,i);if(t.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);return t.add(a),t}}},3866:e=>{var t=1e3,r=60*t,n=60*r,o=24*n,i=7*o;function a(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,s){s=s||{};var c,u,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(a){var s=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return s*i;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===l&&isFinite(e))return s.long?(c=e,(u=Math.abs(c))>=o?a(c,u,o,"day"):u>=n?a(c,u,n,"hour"):u>=r?a(c,u,r,"minute"):u>=t?a(c,u,t,"second"):c+" ms"):function(e){var i=Math.abs(e);return i>=o?Math.round(e/o)+"d":i>=n?Math.round(e/n)+"h":i>=r?Math.round(e/r)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},4242:(e,t,r)=>{"use strict";const n=r(3106),o=r(6573),i=r(740),{kStatusCode:a}=r(5841),s=Buffer[Symbol.species],c=Buffer.from([0,0,255,255]),u=Symbol("permessage-deflate"),l=Symbol("total-length"),p=Symbol("callback"),h=Symbol("buffers"),f=Symbol("error");let d;function m(e){this[h].push(e),this[l]+=e.length}function v(e){this[l]+=e.length,this[u]._maxPayload<1||this[l]<=this[u]._maxPayload?this[h].push(e):(this[f]=new RangeError("Max payload size exceeded"),this[f].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[f][a]=1009,this.removeListener("data",v),this.reset())}function g(e){this[u]._inflate=null,this[f]?this[p](this[f]):(e[a]=1007,this[p](e))}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!d){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;d=new i(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[p];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){d.add((n=>{this._decompress(e,t,((e,t)=>{n(),r(e,t)}))}))}compress(e,t,r){d.add((n=>{this._compress(e,t,((e,t)=>{n(),r(e,t)}))}))}_decompress(e,t,r){const i=this._isServer?"client":"server";if(!this._inflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[u]=this,this._inflate[l]=0,this._inflate[h]=[],this._inflate.on("error",g),this._inflate.on("data",v)}this._inflate[p]=r,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush((()=>{const e=this._inflate[f];if(e)return this._inflate.close(),this._inflate=null,void r(e);const n=o.concat(this._inflate[h],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[h]=[],t&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),r(null,n)}))}_compress(e,t,r){const i=this._isServer?"server":"client";if(!this._deflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[l]=0,this._deflate[h]=[],this._deflate.on("data",m)}this._deflate[p]=r,this._deflate.write(e),this._deflate.flush(n.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=o.concat(this._deflate[h],this._deflate[l]);t&&(e=new s(e.buffer,e.byteOffset,e.length-4)),this._deflate[p]=null,this._deflate[l]=0,this._deflate[h]=[],t&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),r(null,e)}))}}},4287:e=>{e.exports=function(e,t){var r=!Array.isArray(e),n={index:0,keyedList:r||t?Object.keys(e):null,jobs:{},results:r?{}:[],size:r?Object.keys(e).length:e.length};return t&&n.keyedList.sort(r?t:function(r,n){return t(e[r],e[n])}),n}},4323:e=>{"use strict";function t(e,t,o){e instanceof RegExp&&(e=r(e,o)),t instanceof RegExp&&(t=r(t,o));var i=n(e,t,o);return i&&{start:i[0],end:i[1],pre:o.slice(0,i[0]),body:o.slice(i[0]+e.length,i[1]),post:o.slice(i[1]+t.length)}}function r(e,t){var r=t.match(e);return r?r[0]:null}function n(e,t,r){var n,o,i,a,s,c=r.indexOf(e),u=r.indexOf(t,c+1),l=c;if(c>=0&&u>0){if(e===t)return[c,u];for(n=[],i=r.length;l>=0&&!s;)l==c?(n.push(l),c=r.indexOf(e,l+1)):1==n.length?s=[n.pop(),u]:((o=n.pop())<i&&(i=o,a=u),u=r.indexOf(t,l+1)),l=c<u&&c>=0?c:u;n.length&&(s=[i,a])}return s}e.exports=t,t.range=n},4434:e=>{"use strict";e.exports=require("events")},4541:(e,t,r)=>{"use strict";try{e.exports=r(2790)(__dirname)}catch(t){e.exports=r(7979)}},4632:(e,t,r)=>{var n=r(9896),o=r(6928),i=r(857),a=require,s=process.config&&process.config.variables||{},c=!!process.env.PREBUILDS_ONLY,u=process.versions.modules,l=process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":process.versions&&process.versions.nw?"node-webkit":"node",p=process.env.npm_config_arch||i.arch(),h=process.env.npm_config_platform||i.platform(),f=process.env.LIBC||(function(e){return"linux"===e&&n.existsSync("/etc/alpine-release")}(h)?"musl":"glibc"),d=process.env.ARM_VERSION||("arm64"===p?"8":s.arm_version)||"",m=(process.versions.uv||"").split(".")[0];function v(e){return a(v.resolve(e))}function g(e){try{return n.readdirSync(e)}catch(e){return[]}}function y(e,t){var r=g(e).filter(t);return r[0]&&o.join(e,r[0])}function b(e){return/\.node$/.test(e)}function w(e){var t=e.split("-");if(2===t.length){var r=t[0],n=t[1].split("+");if(r&&n.length&&n.every(Boolean))return{name:e,platform:r,architectures:n}}}function x(e,t){return function(r){return null!=r&&r.platform===e&&r.architectures.includes(t)}}function _(e,t){return e.architectures.length-t.architectures.length}function k(e){var t=e.split("."),r={file:e,specificity:0};if("node"===t.pop()){for(var n=0;n<t.length;n++){var o=t[n];if("node"===o||"electron"===o||"node-webkit"===o)r.runtime=o;else if("napi"===o)r.napi=!0;else if("abi"===o.slice(0,3))r.abi=o.slice(3);else if("uv"===o.slice(0,2))r.uv=o.slice(2);else if("armv"===o.slice(0,4))r.armv=o.slice(4);else{if("glibc"!==o&&"musl"!==o)continue;r.libc=o}r.specificity++}return r}}function E(e,t){return function(r){return!(null==r||r.runtime&&r.runtime!==e&&!function(e){return"node"===e.runtime&&e.napi}(r)||r.abi&&r.abi!==t&&!r.napi||r.uv&&r.uv!==m||r.armv&&r.armv!==d||r.libc&&r.libc!==f)}}function S(e){return function(t,r){return t.runtime!==r.runtime?t.runtime===e?-1:1:t.abi!==r.abi?t.abi?-1:1:t.specificity!==r.specificity?t.specificity>r.specificity?-1:1:0}}e.exports=v,v.resolve=v.path=function(e){e=o.resolve(e||".");try{var t=a(o.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}if(!c){var r=y(o.join(e,"build/Release"),b);if(r)return r;var n=y(o.join(e,"build/Debug"),b);if(n)return n}var i=O(e);if(i)return i;var s=O(o.dirname(process.execPath));if(s)return s;var v=["platform="+h,"arch="+p,"runtime="+l,"abi="+u,"uv="+m,d?"armv="+d:"","libc="+f,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ");throw new Error("No native build was found for "+v+"\n    loaded from: "+e+"\n");function O(e){var t=g(o.join(e,"prebuilds")).map(w).filter(x(h,p)).sort(_)[0];if(t){var r=o.join(e,"prebuilds",t.name),n=g(r).map(k).filter(E(l,u)).sort(S(l))[0];return n?o.join(r,n.file):void 0}}},v.parseTags=k,v.matchTags=E,v.compareTags=S,v.parseTuple=w,v.matchTuple=x,v.compareTuples=_},4691:(e,t,r)=>{var n=r(5276),o=r(4287),i=r(5965);e.exports=function(e,t,r){for(var a=o(e);a.index<(a.keyedList||e).length;)n(e,t,a,(function(e,t){e?r(e,t):0!==Object.keys(a.jobs).length||r(null,a.results)})),a.index++;return i.bind(a,r)}},4695:e=>{e.exports=function(e,t){return Object.keys(t).forEach((function(r){e[r]=e[r]||t[r]})),e}},4728:(e,t,r)=>{e.exports=function(e){function t(e){let r,o,i,a=null;function s(...e){if(!s.enabled)return;const n=s,o=Number(new Date),i=o-(r||o);n.diff=i,n.prev=r,n.curr=o,r=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";a++;const i=t.formatters[o];if("function"==typeof i){const t=e[a];r=i.call(n,t),e.splice(a,1),a--}return r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function o(e,t){let r=0,n=0,o=-1,i=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(o=n,i=r,n++):(r++,n++);else{if(-1===o)return!1;n=o+1,i++,r=i}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(const e of r)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(const r of t.skips)if(o(e,r))return!1;for(const r of t.names)if(o(e,r))return!0;return!1},t.humanize=r(3866),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},4756:e=>{"use strict";e.exports=require("tls")},4807:(e,t,r)=>{var n=r(4323);e.exports=function(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),v(function(e){return e.split("\\\\").join(o).split("\\{").join(i).split("\\}").join(a).split("\\,").join(s).split("\\.").join(c)}(e),!0).map(l)):[]};var o="\0SLASH"+Math.random()+"\0",i="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",s="\0COMMA"+Math.random()+"\0",c="\0PERIOD"+Math.random()+"\0";function u(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function l(e){return e.split(o).join("\\").split(i).join("{").split(a).join("}").split(s).join(",").split(c).join(".")}function p(e){if(!e)return[""];var t=[],r=n("{","}",e);if(!r)return e.split(",");var o=r.pre,i=r.body,a=r.post,s=o.split(",");s[s.length-1]+="{"+i+"}";var c=p(a);return a.length&&(s[s.length-1]+=c.shift(),s.push.apply(s,c)),t.push.apply(t,s),t}function h(e){return"{"+e+"}"}function f(e){return/^-?0\d/.test(e)}function d(e,t){return e<=t}function m(e,t){return e>=t}function v(e,t){var r=[],o=n("{","}",e);if(!o)return[e];var i=o.pre,s=o.post.length?v(o.post,!1):[""];if(/\$$/.test(o.pre))for(var c=0;c<s.length;c++){var l=i+"{"+o.body+"}"+s[c];r.push(l)}else{var g,y,b=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body),w=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body),x=b||w,_=o.body.indexOf(",")>=0;if(!x&&!_)return o.post.match(/,.*\}/)?v(e=o.pre+"{"+o.body+a+o.post):[e];if(x)g=o.body.split(/\.\./);else if(1===(g=p(o.body)).length&&1===(g=v(g[0],!1).map(h)).length)return s.map((function(e){return o.pre+g[0]+e}));if(x){var k=u(g[0]),E=u(g[1]),S=Math.max(g[0].length,g[1].length),O=3==g.length?Math.abs(u(g[2])):1,T=d;E<k&&(O*=-1,T=m);var j=g.some(f);y=[];for(var C=k;T(C,E);C+=O){var P;if(w)"\\"===(P=String.fromCharCode(C))&&(P="");else if(P=String(C),j){var A=S-P.length;if(A>0){var I=new Array(A+1).join("0");P=C<0?"-"+I+P.slice(1):I+P}}y.push(P)}}else{y=[];for(var N=0;N<g.length;N++)y.push.apply(y,v(g[N],!1))}for(N=0;N<y.length;N++)for(c=0;c<s.length;c++)l=i+y[N]+s[c],(!t||x||l)&&r.push(l)}return r}},4827:(e,t,r)=>{"use strict";const n=r(4434),o=r(5692),i=r(8611),a=r(9278),s=r(4756),{randomBytes:c,createHash:u}=r(6982),{Duplex:l,Readable:p}=r(2203),{URL:h}=r(7016),f=r(4242),d=r(1339),m=r(8407),{isBlob:v}=r(8761),{BINARY_TYPES:g,EMPTY_BUFFER:y,GUID:b,kForOnEventAttribute:w,kListener:x,kStatusCode:_,kWebSocket:k,NOOP:E}=r(5841),{EventTarget:{addEventListener:S,removeEventListener:O}}=r(6528),{format:T,parse:j}=r(3238),{toBuffer:C}=r(6573),P=Symbol("kAborted"),A=[8,13],I=["CONNECTING","OPEN","CLOSING","CLOSED"],N=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class F extends n{constructor(e,t,r){super(),this._binaryType=g[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=y,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=F.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),D(this,e,t,r)):(this._autoPong=r.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){g.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const n=new d({allowSynchronousEvents:r.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation}),o=new m(e,this._extensions,r.generateMask);this._receiver=n,this._sender=o,this._socket=e,n[k]=this,o[k]=this,e[k]=this,n.on("conclude",U),n.on("drain",B),n.on("error",z),n.on("message",$),n.on("ping",V),n.on("pong",H),o.onerror=J,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",Q),e.on("data",Z),e.on("end",X),e.on("error",ee),this._readyState=F.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=F.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[f.extensionName]&&this._extensions[f.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=F.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==F.CLOSED)if(this.readyState!==F.CONNECTING)this.readyState!==F.CLOSING?(this._readyState=F.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),K(this)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();else{const e="WebSocket was closed before the connection was established";q(this,this._req,e)}}pause(){this.readyState!==F.CONNECTING&&this.readyState!==F.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===F.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===F.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||y,t,r)):M(this,e,r)}pong(e,t,r){if(this.readyState===F.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===F.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||y,t,r)):M(this,e,r)}resume(){this.readyState!==F.CONNECTING&&this.readyState!==F.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===F.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==F.OPEN)return void M(this,e,r);const n={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[f.extensionName]||(n.compress=!1),this._sender.send(e||y,n,r)}terminate(){if(this.readyState!==F.CLOSED)if(this.readyState!==F.CONNECTING)this._socket&&(this._readyState=F.CLOSING,this._socket.destroy());else{const e="WebSocket was closed before the connection was established";q(this,this._req,e)}}}function D(e,t,r,n){const a={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:A[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=a.autoPong,!A.includes(a.protocolVersion))throw new RangeError(`Unsupported protocol version: ${a.protocolVersion} (supported versions: ${A.join(", ")})`);let s;if(t instanceof h)s=t;else try{s=new h(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}"http:"===s.protocol?s.protocol="ws:":"https:"===s.protocol&&(s.protocol="wss:"),e._url=s.href;const l="wss:"===s.protocol,p="ws+unix:"===s.protocol;let d;if("ws:"===s.protocol||l||p?p&&!s.pathname?d="The URL's pathname is empty":s.hash&&(d="The URL contains a fragment identifier"):d='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',d){const t=new SyntaxError(d);if(0===e._redirects)throw t;return void R(e,t)}const m=l?443:80,v=c(16).toString("base64"),g=l?o.request:i.request,y=new Set;let w,x;if(a.createConnection=a.createConnection||(l?G:L),a.defaultPort=a.defaultPort||m,a.port=s.port||m,a.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,a.headers={...a.headers,"Sec-WebSocket-Version":a.protocolVersion,"Sec-WebSocket-Key":v,Connection:"Upgrade",Upgrade:"websocket"},a.path=s.pathname+s.search,a.timeout=a.handshakeTimeout,a.perMessageDeflate&&(w=new f(!0!==a.perMessageDeflate?a.perMessageDeflate:{},!1,a.maxPayload),a.headers["Sec-WebSocket-Extensions"]=T({[f.extensionName]:w.offer()})),r.length){for(const e of r){if("string"!=typeof e||!N.test(e)||y.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");y.add(e)}a.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(a.origin&&(a.protocolVersion<13?a.headers["Sec-WebSocket-Origin"]=a.origin:a.headers.Origin=a.origin),(s.username||s.password)&&(a.auth=`${s.username}:${s.password}`),p){const e=a.path.split(":");a.socketPath=e[0],a.path=e[1]}if(a.followRedirects){if(0===e._redirects){e._originalIpc=p,e._originalSecure=l,e._originalHostOrSocketPath=p?a.socketPath:s.host;const t=n&&n.headers;if(n={...n,headers:{}},t)for(const[e,r]of Object.entries(t))n.headers[e.toLowerCase()]=r}else if(0===e.listenerCount("redirect")){const t=p?!!e._originalIpc&&a.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&s.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!l)&&(delete a.headers.authorization,delete a.headers.cookie,t||delete a.headers.host,a.auth=void 0)}a.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(a.auth).toString("base64")),x=e._req=g(a),e._redirects&&e.emit("redirect",e.url,x)}else x=e._req=g(a);a.timeout&&x.on("timeout",(()=>{q(e,x,"Opening handshake has timed out")})),x.on("error",(t=>{null===x||x[P]||(x=e._req=null,R(e,t))})),x.on("response",(o=>{const i=o.headers.location,s=o.statusCode;if(i&&a.followRedirects&&s>=300&&s<400){if(++e._redirects>a.maxRedirects)return void q(e,x,"Maximum redirects exceeded");let o;x.abort();try{o=new h(i,t)}catch(t){const r=new SyntaxError(`Invalid URL: ${i}`);return void R(e,r)}D(e,o,r,n)}else e.emit("unexpected-response",x,o)||q(e,x,`Unexpected server response: ${o.statusCode}`)})),x.on("upgrade",((t,r,n)=>{if(e.emit("upgrade",t),e.readyState!==F.CONNECTING)return;x=e._req=null;const o=t.headers.upgrade;if(void 0===o||"websocket"!==o.toLowerCase())return void q(e,r,"Invalid Upgrade header");const i=u("sha1").update(v+b).digest("base64");if(t.headers["sec-websocket-accept"]!==i)return void q(e,r,"Invalid Sec-WebSocket-Accept header");const s=t.headers["sec-websocket-protocol"];let c;if(void 0!==s?y.size?y.has(s)||(c="Server sent an invalid subprotocol"):c="Server sent a subprotocol but none was requested":y.size&&(c="Server sent no subprotocol"),c)return void q(e,r,c);s&&(e._protocol=s);const l=t.headers["sec-websocket-extensions"];if(void 0!==l){if(!w)return void q(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=j(l)}catch(t){return void q(e,r,"Invalid Sec-WebSocket-Extensions header")}const n=Object.keys(t);if(1!==n.length||n[0]!==f.extensionName)return void q(e,r,"Server indicated an extension that was not requested");try{w.accept(t[f.extensionName])}catch(t){return void q(e,r,"Invalid Sec-WebSocket-Extensions header")}e._extensions[f.extensionName]=w}e.setSocket(r,n,{allowSynchronousEvents:a.allowSynchronousEvents,generateMask:a.generateMask,maxPayload:a.maxPayload,skipUTF8Validation:a.skipUTF8Validation})})),a.finishRequest?a.finishRequest(x,e):x.end()}function R(e,t){e._readyState=F.CLOSING,e._errorEmitted=!0,e.emit("error",t),e.emitClose()}function L(e){return e.path=e.socketPath,a.connect(e)}function G(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=a.isIP(e.host)?"":e.host),s.connect(e)}function q(e,t,r){e._readyState=F.CLOSING;const n=new Error(r);Error.captureStackTrace(n,q),t.setHeader?(t[P]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(R,e,n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function M(e,t,r){if(t){const r=v(t)?t.size:C(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){const t=new Error(`WebSocket is not open: readyState ${e.readyState} (${I[e.readyState]})`);process.nextTick(r,t)}}function U(e,t){const r=this[k];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[k]&&(r._socket.removeListener("data",Z),process.nextTick(Y,r._socket),1005===e?r.close():r.close(e,t))}function B(){const e=this[k];e.isPaused||e._socket.resume()}function z(e){const t=this[k];void 0!==t._socket[k]&&(t._socket.removeListener("data",Z),process.nextTick(Y,t._socket),t.close(e[_])),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e))}function W(){this[k].emitClose()}function $(e,t){this[k].emit("message",e,t)}function V(e){const t=this[k];t._autoPong&&t.pong(e,!this._isServer,E),t.emit("ping",e)}function H(e){this[k].emit("pong",e)}function Y(e){e.resume()}function J(e){const t=this[k];t.readyState!==F.CLOSED&&(t.readyState===F.OPEN&&(t._readyState=F.CLOSING,K(t)),this._socket.end(),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e)))}function K(e){e._closeTimer=setTimeout(e._socket.destroy.bind(e._socket),3e4)}function Q(){const e=this[k];let t;this.removeListener("close",Q),this.removeListener("data",Z),this.removeListener("end",X),e._readyState=F.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[k]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",W),e._receiver.on("finish",W))}function Z(e){this[k]._receiver.write(e)||this.pause()}function X(){const e=this[k];e._readyState=F.CLOSING,e._receiver.end(),this.end()}function ee(){const e=this[k];this.removeListener("error",ee),this.on("error",E),e&&(e._readyState=F.CLOSING,this.destroy())}Object.defineProperty(F,"CONNECTING",{enumerable:!0,value:I.indexOf("CONNECTING")}),Object.defineProperty(F.prototype,"CONNECTING",{enumerable:!0,value:I.indexOf("CONNECTING")}),Object.defineProperty(F,"OPEN",{enumerable:!0,value:I.indexOf("OPEN")}),Object.defineProperty(F.prototype,"OPEN",{enumerable:!0,value:I.indexOf("OPEN")}),Object.defineProperty(F,"CLOSING",{enumerable:!0,value:I.indexOf("CLOSING")}),Object.defineProperty(F.prototype,"CLOSING",{enumerable:!0,value:I.indexOf("CLOSING")}),Object.defineProperty(F,"CLOSED",{enumerable:!0,value:I.indexOf("CLOSED")}),Object.defineProperty(F.prototype,"CLOSED",{enumerable:!0,value:I.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((e=>{Object.defineProperty(F.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(F.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[w])return t[x];return null},set(t){for(const t of this.listeners(e))if(t[w]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[w]:!0})}})})),F.prototype.addEventListener=S,F.prototype.removeEventListener=O,e.exports=F},5276:(e,t,r)=>{var n=r(7578),o=r(7440);e.exports=function(e,t,r,i){var a=r.keyedList?r.keyedList[r.index]:r.index;r.jobs[a]=function(e,t,r,o){return 2==e.length?e(r,n(o)):e(r,t,n(o))}(t,a,e[a],(function(e,t){a in r.jobs&&(delete r.jobs[a],e?o(r):r.results[a]=t,i(e,r.results))}))}},5332:(e,t,r)=>{var n=r(1407);e.exports=function(e,t,r){return n(e,t,null,r)}},5692:e=>{"use strict";e.exports=require("https")},5761:e=>{"use strict";e.exports=function(e){const t=e.length;let r=0;for(;r<t;)if(128&e[r])if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}else r++;return!0}},5841:e=>{"use strict";const t=["nodebuffer","arraybuffer","fragments"],r="undefined"!=typeof Blob;r&&t.push("blob"),e.exports={BINARY_TYPES:t,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:r,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},5965:(e,t,r)=>{var n=r(7440),o=r(7578);e.exports=function(e){Object.keys(this.jobs).length&&(this.index=this.size,n(this),o(e)(null,this.results))}},6350:(e,t,r)=>{"use strict";var n=r(7016).parse,o={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},i=String.prototype.endsWith||function(e){return e.length<=this.length&&-1!==this.indexOf(e,this.length-e.length)};function a(e){return process.env[e.toLowerCase()]||process.env[e.toUpperCase()]||""}t.getProxyForUrl=function(e){var t="string"==typeof e?n(e):e||{},r=t.protocol,s=t.host,c=t.port;if("string"!=typeof s||!s||"string"!=typeof r)return"";if(r=r.split(":",1)[0],!function(e,t){var r=(a("npm_config_no_proxy")||a("no_proxy")).toLowerCase();return!r||"*"!==r&&r.split(/[,\s]/).every((function(r){if(!r)return!0;var n=r.match(/^(.+):(\d+)$/),o=n?n[1]:r,a=n?parseInt(n[2]):0;return!(!a||a===t)||(/^[.*]/.test(o)?("*"===o.charAt(0)&&(o=o.slice(1)),!i.call(e,o)):e!==o)}))}(s=s.replace(/:\d*$/,""),c=parseInt(c)||o[r]||0))return"";var u=a("npm_config_"+r+"_proxy")||a(r+"_proxy")||a("npm_config_proxy")||a("all_proxy");return u&&-1===u.indexOf("://")&&(u=r+"://"+u),u}},6528:(e,t,r)=>{"use strict";const{kForOnEventAttribute:n,kListener:o}=r(5841),i=Symbol("kCode"),a=Symbol("kData"),s=Symbol("kError"),c=Symbol("kMessage"),u=Symbol("kReason"),l=Symbol("kTarget"),p=Symbol("kType"),h=Symbol("kWasClean");class f{constructor(e){this[l]=null,this[p]=e}get target(){return this[l]}get type(){return this[p]}}Object.defineProperty(f.prototype,"target",{enumerable:!0}),Object.defineProperty(f.prototype,"type",{enumerable:!0});class d extends f{constructor(e,t={}){super(e),this[i]=void 0===t.code?0:t.code,this[u]=void 0===t.reason?"":t.reason,this[h]=void 0!==t.wasClean&&t.wasClean}get code(){return this[i]}get reason(){return this[u]}get wasClean(){return this[h]}}Object.defineProperty(d.prototype,"code",{enumerable:!0}),Object.defineProperty(d.prototype,"reason",{enumerable:!0}),Object.defineProperty(d.prototype,"wasClean",{enumerable:!0});class m extends f{constructor(e,t={}){super(e),this[s]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[s]}get message(){return this[c]}}Object.defineProperty(m.prototype,"error",{enumerable:!0}),Object.defineProperty(m.prototype,"message",{enumerable:!0});class v extends f{constructor(e,t={}){super(e),this[a]=void 0===t.data?null:t.data}get data(){return this[a]}}Object.defineProperty(v.prototype,"data",{enumerable:!0});const g={addEventListener(e,t,r={}){for(const i of this.listeners(e))if(!r[n]&&i[o]===t&&!i[n])return;let i;if("message"===e)i=function(e,r){const n=new v("message",{data:r?e:e.toString()});n[l]=this,y(t,this,n)};else if("close"===e)i=function(e,r){const n=new d("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});n[l]=this,y(t,this,n)};else if("error"===e)i=function(e){const r=new m("error",{error:e,message:e.message});r[l]=this,y(t,this,r)};else{if("open"!==e)return;i=function(){const e=new f("open");e[l]=this,y(t,this,e)}}i[n]=!!r[n],i[o]=t,r.once?this.once(e,i):this.on(e,i)},removeEventListener(e,t){for(const r of this.listeners(e))if(r[o]===t&&!r[n]){this.removeListener(e,r);break}}};function y(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}e.exports={CloseEvent:d,ErrorEvent:m,Event:f,EventTarget:g,MessageEvent:v}},6573:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:n}=r(5841),o=Buffer[Symbol.species];function i(e,t,r,n,o){for(let i=0;i<o;i++)r[n+i]=e[i]^t[3&i]}function a(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}if(e.exports={concat:function(e,t){if(0===e.length)return n;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let i=0;for(let t=0;t<e.length;t++){const n=e[t];r.set(n,i),i+=n.length}return i<t?new o(r.buffer,r.byteOffset,i):r},mask:i,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(t){if(e.readOnly=!0,Buffer.isBuffer(t))return t;let r;return t instanceof ArrayBuffer?r=new o(t):ArrayBuffer.isView(t)?r=new o(t.buffer,t.byteOffset,t.byteLength):(r=Buffer.from(t),e.readOnly=!1),r},unmask:a},!process.env.WS_NO_BUFFER_UTIL)try{const t=r(4541);e.exports.mask=function(e,r,n,o,a){a<48?i(e,r,n,o,a):t.mask(e,r,n,o,a)},e.exports.unmask=function(e,r){e.length<32?a(e,r):t.unmask(e,r)}}catch(e){}},6928:e=>{"use strict";e.exports=require("path")},6982:e=>{"use strict";e.exports=require("crypto")},7004:(e,t,r)=>{e.exports=r(2087)},7016:e=>{"use strict";e.exports=require("url")},7124:(e,t,r)=>{var n,o,i,a=r(7016),s=a.URL,c=r(8611),u=r(5692),l=r(2203).Writable,p=r(2613),h=r(7131);n="undefined"!=typeof process,o="undefined"!=typeof window&&"undefined"!=typeof document,i=N(Error.captureStackTrace),n||!o&&i||console.warn("The follow-redirects package should be excluded from browser builds.");var f=!1;try{p(new s(""))}catch(e){f="ERR_INVALID_URL"===e.code}var d=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],m=["abort","aborted","connect","error","socket","timeout"],v=Object.create(null);m.forEach((function(e){v[e]=function(t,r,n){this._redirectable.emit(e,t,r,n)}}));var g=P("ERR_INVALID_URL","Invalid URL",TypeError),y=P("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),b=P("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",y),w=P("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),x=P("ERR_STREAM_WRITE_AFTER_END","write after end"),_=l.prototype.destroy||S;function k(e,t){l.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(e){try{r._processResponse(e)}catch(e){r.emit("error",e instanceof y?e:new y({cause:e}))}},this._performRequest()}function E(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach((function(n){var o=n+":",i=r[o]=e[n],a=t[n]=Object.create(i);Object.defineProperties(a,{request:{value:function(e,n,i){return s&&e instanceof s?e=j(e):I(e)?e=j(O(e)):(i=n,n=T(e),e={protocol:o}),N(n)&&(i=n,n=null),(n=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,n)).nativeProtocols=r,I(n.host)||I(n.hostname)||(n.hostname="::1"),p.equal(n.protocol,o,"protocol mismatch"),h("options",n),new k(n,i)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,r){var n=a.request(e,t,r);return n.end(),n},configurable:!0,enumerable:!0,writable:!0}})})),t}function S(){}function O(e){var t;if(f)t=new s(e);else if(!I((t=T(a.parse(e))).protocol))throw new g({input:e});return t}function T(e){if(/^\[/.test(e.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(e.hostname))throw new g({input:e.href||e});if(/^\[/.test(e.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(e.host))throw new g({input:e.href||e});return e}function j(e,t){var r=t||{};for(var n of d)r[n]=e[n];return r.hostname.startsWith("[")&&(r.hostname=r.hostname.slice(1,-1)),""!==r.port&&(r.port=Number(r.port)),r.path=r.search?r.pathname+r.search:r.pathname,r}function C(e,t){var r;for(var n in t)e.test(n)&&(r=t[n],delete t[n]);return null==r?void 0:String(r).trim()}function P(e,t,r){function n(r){N(Error.captureStackTrace)&&Error.captureStackTrace(this,this.constructor),Object.assign(this,r||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return n.prototype=new(r||Error),Object.defineProperties(n.prototype,{constructor:{value:n,enumerable:!1},name:{value:"Error ["+e+"]",enumerable:!1}}),n}function A(e,t){for(var r of m)e.removeListener(r,v[r]);e.on("error",S),e.destroy(t)}function I(e){return"string"==typeof e||e instanceof String}function N(e){return"function"==typeof e}k.prototype=Object.create(l.prototype),k.prototype.abort=function(){A(this._currentRequest),this._currentRequest.abort(),this.emit("abort")},k.prototype.destroy=function(e){return A(this._currentRequest,e),_.call(this,e),this},k.prototype.write=function(e,t,r){if(this._ending)throw new x;if(!(I(e)||"object"==typeof(n=e)&&"length"in n))throw new TypeError("data should be a string, Buffer or Uint8Array");var n;N(t)&&(r=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new w),this.abort()):r&&r()},k.prototype.end=function(e,t,r){if(N(e)?(r=e,e=t=null):N(t)&&(r=t,t=null),e){var n=this,o=this._currentRequest;this.write(e,t,(function(){n._ended=!0,o.end(null,null,r)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,r)},k.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},k.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},k.prototype.setTimeout=function(e,t){var r=this;function n(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function o(t){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout((function(){r.emit("timeout"),i()}),e),n(t)}function i(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",i),r.removeListener("error",i),r.removeListener("response",i),r.removeListener("close",i),t&&r.removeListener("timeout",t),r.socket||r._currentRequest.removeListener("socket",o)}return t&&this.on("timeout",t),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",n),this.on("abort",i),this.on("error",i),this.on("response",i),this.on("close",i),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){k.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(k.prototype,e,{get:function(){return this._currentRequest[e]}})})),k.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},k.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t)throw new TypeError("Unsupported protocol "+e);if(this._options.agents){var r=e.slice(0,-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var o of(n._redirectable=this,m))n.on(o,v[o]);if(this._currentUrl=/^\//.test(this._options.path)?a.format(this._options):this._options.path,this._isRedirect){var i=0,s=this,c=this._requestBodyBuffers;!function e(t){if(n===s._currentRequest)if(t)s.emit("error",t);else if(i<c.length){var r=c[i++];n.finished||n.write(r.data,r.encoding,e)}else s._ended&&n.end()}()}},k.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r,n=e.headers.location;if(!n||!1===this._options.followRedirects||t<300||t>=400)return e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),void(this._requestBodyBuffers=[]);if(A(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)throw new b;var o=this._options.beforeRedirect;o&&(r=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var i=this._options.method;((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],C(/^content-/i,this._options.headers));var c,u,l=C(/^host$/i,this._options.headers),d=O(this._currentUrl),m=l||d.host,v=/^\w+:/.test(n)?this._currentUrl:a.format(Object.assign(d,{host:m})),g=(c=n,u=v,f?new s(c,u):O(a.resolve(u,c)));if(h("redirecting to",g.href),this._isRedirect=!0,j(g,this._options),(g.protocol!==d.protocol&&"https:"!==g.protocol||g.host!==m&&!function(e,t){p(I(e)&&I(t));var r=e.length-t.length-1;return r>0&&"."===e[r]&&e.endsWith(t)}(g.host,m))&&C(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),N(o)){var y={headers:e.headers,statusCode:t},w={url:v,method:i,headers:r};o(this._options,y,w),this._sanitizeOptions(this._options)}this._performRequest()},e.exports=E({http:c,https:u}),e.exports.wrap=E},7131:(e,t,r)=>{var n;e.exports=function(){if(!n){try{n=r(1569)("follow-redirects")}catch(e){}"function"!=typeof n&&(n=function(){})}n.apply(null,arguments)}},7290:(e,t,r)=>{"use strict";const n=r(857),o=r(2018),i=r(910),{env:a}=process;let s;function c(e,t={}){return 0!==(r=function(e,{streamIsTTY:t,sniffFlags:r=!0}={}){const o=function(){if("FORCE_COLOR"in a)return"true"===a.FORCE_COLOR?1:"false"===a.FORCE_COLOR?0:0===a.FORCE_COLOR.length?1:Math.min(Number.parseInt(a.FORCE_COLOR,10),3)}();void 0!==o&&(s=o);const c=r?s:o;if(0===c)return 0;if(r){if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2}if(e&&!t&&void 0===c)return 0;const u=c||0;if("dumb"===a.TERM)return u;if("win32"===process.platform){const e=n.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in a)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some((e=>e in a))||"codeship"===a.CI_NAME?1:u;if("TEAMCITY_VERSION"in a)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(a.TEAMCITY_VERSION)?1:0;if("truecolor"===a.COLORTERM)return 3;if("TERM_PROGRAM"in a){const e=Number.parseInt((a.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(a.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(a.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(a.TERM)||"COLORTERM"in a?1:u}(e,{streamIsTTY:e&&e.isTTY,...t}))&&{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3};var r}i("no-color")||i("no-colors")||i("color=false")||i("color=never")?s=0:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(s=1),e.exports={supportsColor:c,stdout:c({isTTY:o.isatty(1)}),stderr:c({isTTY:o.isatty(2)})}},7353:(e,t,r)=>{const n=r(2018),o=r(9023);t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(o.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:o}=this;if(o){const t=this.color,o="[3"+(t<8?t:"8;5;"+t),i=`  ${o};1m${n} [0m`;r[0]=i+r[0].split("\n").join("\n"+i),r.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.destroy=o.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=r(7290);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e}),{}),e.exports=r(4728)(t);const{formatters:i}=e.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts)}},7440:e=>{function t(e){"function"==typeof this.jobs[e]&&this.jobs[e]()}e.exports=function(e){Object.keys(e.jobs).forEach(t.bind(e)),e.jobs={}}},7474:e=>{function t(e){return Array.isArray(e)?e:[e]}const r=/^\s+$/,n=/(?:[^\\]|^)\\$/,o=/^\\!/,i=/^\\#/,a=/\r?\n/g,s=/^\.*\/|^\.+$/;let c="node-ignore";"undefined"!=typeof Symbol&&(c=Symbol.for("node-ignore"));const u=c,l=/([0-z])-([0-z])/g,p=()=>!1,h=[[/^\uFEFF/,()=>""],[/((?:\\\\)*?)(\\?\s+)$/,(e,t,r)=>t+(0===r.indexOf("\\")?" ":"")],[/(\\+?)\s/g,(e,t)=>{const{length:r}=t;return t.slice(0,r-r%2)+" "}],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,r)=>t+r.replace(/\\\*/g,"[^\\/]*")],[/\\\\\\(?=[$.|*+(){^])/g,()=>"\\"],[/\\\\/g,()=>"\\"],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,o)=>"\\"===t?`\\[${r}${(e=>{const{length:t}=e;return e.slice(0,t-t%2)})(n)}${o}`:"]"===o&&n.length%2==0?`[${(e=>e.replace(l,((e,t,r)=>t.charCodeAt(0)<=r.charCodeAt(0)?e:"")))(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>(t?`${t}[^/]+`:"[^/]*")+"(?=$|\\/$)"]],f=Object.create(null),d=e=>"string"==typeof e;class m{constructor(e,t,r,n){this.origin=e,this.pattern=t,this.negative=r,this.regex=n}}const v=(e,t)=>{throw new t(e)},g=(e,t,r)=>d(e)?e?!g.isNotRelative(e)||r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),y=e=>s.test(e);g.isNotRelative=y,g.convert=e=>e;class b{constructor({ignorecase:e=!0,ignoreCase:t=e,allowRelativePaths:r=!1}={}){var n;n=u,Object.defineProperty(this,n,{value:true}),this._rules=[],this._ignoreCase=t,this._allowRelativePaths=r,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[u])return this._rules=this._rules.concat(e._rules),void(this._added=!0);if((e=>e&&d(e)&&!r.test(e)&&!n.test(e)&&0!==e.indexOf("#"))(e)){const t=((e,t)=>{const r=e;let n=!1;0===e.indexOf("!")&&(n=!0,e=e.substr(1));const a=((e,t)=>{let r=f[e];return r||(r=h.reduce(((t,[r,n])=>t.replace(r,n.bind(e))),e),f[e]=r),t?new RegExp(r,"i"):new RegExp(r)})(e=e.replace(o,"!").replace(i,"#"),t);return new m(r,e,n,a)})(e,this._ignoreCase);this._added=!0,this._rules.push(t)}}add(e){return this._added=!1,t(d(e)?(e=>e.split(a))(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,t){let r=!1,n=!1;return this._rules.forEach((o=>{const{negative:i}=o;n===i&&r!==n||i&&!r&&!n&&!t||o.regex.test(e)&&(r=!i,n=i)})),{ignored:r,unignored:n}}_test(e,t,r,n){const o=e&&g.convert(e);return g(o,e,this._allowRelativePaths?p:v),this._t(o,t,r,n)}_t(e,t,r,n){if(e in t)return t[e];if(n||(n=e.split("/")),n.pop(),!n.length)return t[e]=this._testOne(e,r);const o=this._t(n.join("/")+"/",t,r,n);return t[e]=o.ignored?o:this._testOne(e,r)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return t(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}}const w=e=>new b(e);if(w.isPathValid=e=>g(e&&g.convert(e),e,p),w.default=w,e.exports=w,"undefined"!=typeof process&&(process.env&&process.env.IGNORE_TEST_WIN32||"win32"===process.platform)){const e=e=>/^\\\\\?\\/.test(e)||/["<>|\u0000-\u001F]+/u.test(e)?e:e.replace(/\\/g,"/");g.convert=e;const t=/^[a-z]:\//i;g.isNotRelative=e=>t.test(e)||y(e)}},7578:(e,t,r)=>{var n=r(7962);e.exports=function(e){var t=!1;return n((function(){t=!0})),function(r,o){t?e(r,o):n((function(){e(r,o)}))}}},7617:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(4728)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},7962:e=>{e.exports=function(e){var t="function"==typeof setImmediate?setImmediate:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:null;t?t(e):setTimeout(e,0)}},7979:e=>{"use strict";e.exports={mask:(e,t,r,n,o)=>{for(var i=0;i<o;i++)r[n+i]=e[i]^t[3&i]},unmask:(e,t)=>{const r=e.length;for(var n=0;n<r;n++)e[n]^=t[3&n]}}},8146:(e,t,r)=>{e.exports={parallel:r(4691),serial:r(5332),serialOrdered:r(1407)}},8407:(e,t,r)=>{"use strict";const{Duplex:n}=r(2203),{randomFillSync:o}=r(6982),i=r(4242),{EMPTY_BUFFER:a,kWebSocket:s,NOOP:c}=r(5841),{isBlob:u,isValidStatusCode:l}=r(8761),{mask:p,toBuffer:h}=r(6573),f=Symbol("kByteLength"),d=Buffer.alloc(4),m=8192;let v,g=m;class y{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=c,this[s]=void 0}static frame(e,t){let r,n,i=!1,a=2,s=!1;t.mask&&(r=t.maskBuffer||d,t.generateMask?t.generateMask(r):(g===m&&(void 0===v&&(v=Buffer.alloc(m)),o(v,0,m),g=0),r[0]=v[g++],r[1]=v[g++],r[2]=v[g++],r[3]=v[g++]),s=!(r[0]|r[1]|r[2]|r[3]),a=6),"string"==typeof e?n=t.mask&&!s||void 0===t[f]?(e=Buffer.from(e)).length:t[f]:(n=e.length,i=t.mask&&t.readOnly&&!s);let c=n;n>=65536?(a+=8,c=127):n>125&&(a+=2,c=126);const u=Buffer.allocUnsafe(i?n+a:a);return u[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(u[0]|=64),u[1]=c,126===c?u.writeUInt16BE(n,2):127===c&&(u[2]=u[3]=0,u.writeUIntBE(n,4,6)),t.mask?(u[1]|=128,u[a-4]=r[0],u[a-3]=r[1],u[a-2]=r[2],u[a-1]=r[3],s?[u,e]:i?(p(e,r,u,a,n),[u]):(p(e,r,e,0,n),[u,e])):[u,e]}close(e,t,r,n){let o;if(void 0===e)o=a;else{if("number"!=typeof e||!l(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+r),o.writeUInt16BE(e,0),"string"==typeof t?o.write(t,2):o.set(t,2)}else o=Buffer.allocUnsafe(2),o.writeUInt16BE(e,0)}const i={[f]:o.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,o,!1,i,n]):this.sendFrame(y.frame(o,i),n)}ping(e,t,r){let n,o;if("string"==typeof e?(n=Buffer.byteLength(e),o=!1):u(e)?(n=e.size,o=!1):(n=(e=h(e)).length,o=h.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");const i={[f]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:o,rsv1:!1};u(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,i,r]):this.getBlobData(e,!1,i,r):0!==this._state?this.enqueue([this.dispatch,e,!1,i,r]):this.sendFrame(y.frame(e,i),r)}pong(e,t,r){let n,o;if("string"==typeof e?(n=Buffer.byteLength(e),o=!1):u(e)?(n=e.size,o=!1):(n=(e=h(e)).length,o=h.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");const i={[f]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:o,rsv1:!1};u(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,i,r]):this.getBlobData(e,!1,i,r):0!==this._state?this.enqueue([this.dispatch,e,!1,i,r]):this.sendFrame(y.frame(e,i),r)}send(e,t,r){const n=this._extensions[i.extensionName];let o,a,s=t.binary?2:1,c=t.compress;"string"==typeof e?(o=Buffer.byteLength(e),a=!1):u(e)?(o=e.size,a=!1):(o=(e=h(e)).length,a=h.readOnly),this._firstFragment?(this._firstFragment=!1,c&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(c=o>=n._threshold),this._compress=c):(c=!1,s=0),t.fin&&(this._firstFragment=!0);const l={[f]:o,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:a,rsv1:c};u(e)?0!==this._state?this.enqueue([this.getBlobData,e,this._compress,l,r]):this.getBlobData(e,this._compress,l,r):0!==this._state?this.enqueue([this.dispatch,e,this._compress,l,r]):this.dispatch(e,this._compress,l,r)}getBlobData(e,t,r,n){this._bufferedBytes+=r[f],this._state=2,e.arrayBuffer().then((e=>{if(this._socket.destroyed){const e=new Error("The socket was closed while the blob was being read");return void process.nextTick(b,this,e,n)}this._bufferedBytes-=r[f];const o=h(e);t?this.dispatch(o,t,r,n):(this._state=0,this.sendFrame(y.frame(o,r),n),this.dequeue())})).catch((e=>{process.nextTick(w,this,e,n)}))}dispatch(e,t,r,n){if(!t)return void this.sendFrame(y.frame(e,r),n);const o=this._extensions[i.extensionName];this._bufferedBytes+=r[f],this._state=1,o.compress(e,r.fin,((e,t)=>{this._socket.destroyed?b(this,new Error("The socket was closed while data was being compressed"),n):(this._bufferedBytes-=r[f],this._state=0,r.readOnly=!1,this.sendFrame(y.frame(t,r),n),this.dequeue())}))}dequeue(){for(;0===this._state&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][f],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][f],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}function b(e,t,r){"function"==typeof r&&r(t);for(let r=0;r<e._queue.length;r++){const n=e._queue[r],o=n[n.length-1];"function"==typeof o&&o(t)}}function w(e,t,r){b(e,t,r),e.onerror(t)}e.exports=y},8611:e=>{"use strict";e.exports=require("http")},8761:(e,t,r)=>{"use strict";const{isUtf8:n}=r(181),{hasBlob:o}=r(5841);function i(e){const t=e.length;let r=0;for(;r<t;)if(128&e[r])if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}else r++;return!0}if(e.exports={isBlob:function(e){return o&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&("Blob"===e[Symbol.toStringTag]||"File"===e[Symbol.toStringTag])},isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:i,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},n)e.exports.isValidUTF8=function(e){return e.length<24?i(e):n(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{const t=r(9547);e.exports.isValidUTF8=function(e){return e.length<32?i(e):t(e)}}catch(e){}},9023:e=>{"use strict";e.exports=require("util")},9278:e=>{"use strict";e.exports=require("net")},9366:(e,t,r)=>{var n=r(2203).Stream,o=r(9023);function i(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}e.exports=i,o.inherits(i,n),i.create=function(e,t){var r=new this;for(var n in t=t||{})r[n]=t[n];r.source=e;var o=e.emit;return e.emit=function(){return r._handleEmit(arguments),o.apply(e,arguments)},e.on("error",(function(){})),r.pauseStream&&e.pause(),r},Object.defineProperty(i.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),i.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},i.prototype.resume=function(){this._released||this.release(),this.source.resume()},i.prototype.pause=function(){this.source.pause()},i.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]},i.prototype.pipe=function(){var e=n.prototype.pipe.apply(this,arguments);return this.resume(),e},i.prototype._handleEmit=function(e){this._released?this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e))},i.prototype._checkIfMaxDataSizeExceeded=function(){if(!(this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}}},9547:(e,t,r)=>{"use strict";try{e.exports=r(2790)(__dirname)}catch(t){e.exports=r(5761)}},9896:e=>{"use strict";e.exports=require("fs")}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return r[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var i=Object.create(null);o.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,o.d(i,a),i},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i={};(()=>{"use strict";o.r(i),o.d(i,{activate:()=>xg});var e={};o.r(e),o.d(e,{hasBrowserEnv:()=>zc,hasStandardBrowserEnv:()=>$c,hasStandardBrowserWebWorkerEnv:()=>Vc,navigator:()=>Wc,origin:()=>Hc});const t=require("vscode");var r=o(9896),n=o(6928),a=o(7474),s=o.n(a),c=new Set(["png","jpg","jpeg","gif","bmp","ico","webp","tiff","psd","mp4","webm","avi","mov","wmv","flv","mkv","mp3","wav","ogg","m4a","aac","flac","zip","rar","7z","tar","gz","bz2","ttf","otf","woff","woff2","eot","pdf","exe","dll","so","dylib"]);function u(e,t){var r=function(e){var t=(e.split(/[\\/]/).pop()||"").split(".");if(t.length<=1)return[];t.shift();for(var r=[],n="",o=t.length-1;o>=0;o--)n=t[o]+(n?"."+n:""),r.push(n);return r}(e);return r.some((function(e){return t.has(e)}))}var l,p,h,f=function(e,t){var r=/(\d+|\D+)/g,n=[],o=[];e.replace(r,(function(e,t){return n.push(t),""})),t.replace(r,(function(e,t){return o.push(t),""}));for(var i=0;i<Math.max(n.length,o.length);i++){var a=n[i]||"",s=o[i]||"";if(a!==s){var c=parseInt(a,10),u=parseInt(s,10);return isNaN(c)||isNaN(u)?a.localeCompare(s):c-u}}return 0};function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function y(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(){b=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=k(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new O(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function m(){}var v={};c(v,i,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(T([])));y&&y!==r&&n.call(y,i)&&(v=y);var w=m.prototype=h.prototype=Object.create(v);function x(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==d(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function k(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function E(e){this.tryEntries.push(e)}function S(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function O(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function T(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(d(t)+" is not iterable")}return f.prototype=m,c(w,"constructor",m),c(m,"constructor",f),f.displayName=c(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},x(_.prototype),c(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(w),c(w,s,"Generator"),c(w,i,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),S(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:T(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){x(i,n,o,a,s,"next",e)}function s(e){x(i,n,o,a,s,"throw",e)}a(void 0)}))}}function k(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=E(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function E(e,t){if(e){if("string"==typeof e)return S(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P(n.key),n)}}function j(e,t,r){return t&&T(e.prototype,t),r&&T(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function C(e,t,r){return(t=P(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){var t=function(e){if("object"!=d(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}p=l||(l={}),h="[CWC]",p.log=function(e){var t=e.function_name?"[".concat(e.function_name,"] "):"";console.log("".concat(h).concat(t).concat(e.message),e.data?e.data:void 0)},p.warn=function(e){var t=e.function_name?"[".concat(e.function_name,"] "):"";console.warn("".concat(h).concat(t).concat(e.message),e.data)},p.error=function(e){var t=e.function_name?"[".concat(e.function_name,"] "):"";console.error("".concat(h).concat(t).concat(e.message),e.data)};var A=function(){return j((function e(r){var n=this;O(this,e),C(this,"_on_did_change_tree_data",new t.EventEmitter),C(this,"onDidChangeTreeData",this._on_did_change_tree_data.event),C(this,"workspace_roots",[]),C(this,"workspace_names",[]),C(this,"checked_items",new Map),C(this,"combined_gitignore",s()()),C(this,"ignored_extensions",new Set),C(this,"file_token_counts",new Map),C(this,"directory_token_counts",new Map),C(this,"_on_did_change_checked_files",new t.EventEmitter),C(this,"onDidChangeCheckedFiles",this._on_did_change_checked_files.event),C(this,"opened_from_workspace_view",new Set),C(this,"preview_tabs",new Map),C(this,"partially_checked_dirs",new Set),C(this,"file_workspace_map",new Map),this.workspace_roots=r.map((function(e){return e.uri.fsPath})),this.workspace_names=r.map((function(e){return e.name})),this.load_all_gitignore_files(),this.load_ignored_extensions(),this.update_file_workspace_mapping(),this.watcher=t.workspace.createFileSystemWatcher("**/*"),this.watcher.onDidCreate((function(e){return n.handle_file_create(e.fsPath)})),this.watcher.onDidChange((function(e){return n.on_file_system_changed(e.fsPath)})),this.watcher.onDidDelete((function(e){return n.on_file_system_changed(e.fsPath)})),this.gitignore_watcher=t.workspace.createFileSystemWatcher("**/.gitignore"),this.gitignore_watcher.onDidCreate((function(){return n.load_all_gitignore_files()})),this.gitignore_watcher.onDidChange((function(){return n.load_all_gitignore_files()})),this.gitignore_watcher.onDidDelete((function(){return n.load_all_gitignore_files()})),this.config_change_handler=t.workspace.onDidChangeConfiguration((function(e){if(e.affectsConfiguration("codeWebChat.ignoredExtensions")){var t=new Set(n.ignored_extensions);n.load_ignored_extensions(),n.uncheck_ignored_files(t),n.refresh()}})),this.update_preview_tabs_state(),this.tab_change_handler=t.window.tabGroups.onDidChangeTabs((function(e){n.handle_tab_changes(e)}))}),[{key:"update_file_workspace_mapping",value:function(){this.file_workspace_map.clear();var e,t=k(this.workspace_roots);try{for(t.s();!(e=t.n()).done;){var r=e.value;try{var n,o=k(this.find_all_files(r));try{for(o.s();!(n=o.n()).done;){var i=n.value;this.file_workspace_map.set(i,r)}}catch(e){o.e(e)}finally{o.f()}}catch(e){l.error({function_name:"update_file_workspace_mapping",message:"Error mapping files for workspace ".concat(r),data:e})}}}catch(e){t.e(e)}finally{t.f()}}},{key:"find_all_files",value:function(e){var t=[];try{var o,i=k(r.readdirSync(e,{withFileTypes:!0}));try{for(i.s();!(o=i.n()).done;){var a=o.value,s=n.join(e,a.name),c=n.relative(this.get_workspace_root_for_file(s)||e,s);this.is_excluded(c)||(a.isDirectory()?t=t.concat(this.find_all_files(s)):a.isFile()&&t.push(s))}}catch(e){i.e(e)}finally{i.f()}}catch(t){l.error({function_name:"find_all_files",message:"Error finding files in ".concat(e),data:t})}return t}},{key:"get_workspace_root_for_file",value:function(e){if(this.file_workspace_map.has(e))return this.file_workspace_map.get(e);var t,r,n=k(this.workspace_roots);try{for(n.s();!(r=n.n()).done;){var o=r.value;e.startsWith(o)&&(!t||o.length>t.length)&&(t=o)}}catch(e){n.e(e)}finally{n.f()}return t&&this.file_workspace_map.set(e,t),t}},{key:"uncheck_ignored_files",value:function(e){var r,o=this,i=this.get_checked_files().filter((function(t){return e?!u(t,e)&&u(t,o.ignored_extensions):u(t,o.ignored_extensions)})),a=k(i);try{for(a.s();!(r=a.n()).done;){var s=r.value;this.checked_items.set(s,t.TreeItemCheckboxState.Unchecked);for(var c=n.dirname(s),l=this.get_workspace_root_for_file(s);l&&c.startsWith(l);)this.update_parent_state(c),c=n.dirname(c)}}catch(e){a.e(e)}finally{a.f()}i.length>0&&this._on_did_change_checked_files.fire()}},{key:"dispose",value:function(){this.watcher.dispose(),this.gitignore_watcher.dispose(),this.config_change_handler.dispose(),this._on_did_change_checked_files.dispose(),this.tab_change_handler&&this.tab_change_handler.dispose()}},{key:"update_preview_tabs_state",value:function(){var e=this;this.preview_tabs.clear(),t.window.tabGroups.all.forEach((function(r){r.tabs.forEach((function(r){if(r.input instanceof t.TabInputText){var n=r.input.uri;e.preview_tabs.set(n.fsPath,!!r.isPreview)}}))}))}},{key:"handle_tab_changes",value:function(e){var r,n=k(e.changed);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.input instanceof t.TabInputText){var i=o.input.uri.fsPath,a=this.preview_tabs.get(i),s=!!o.isPreview;a&&!s&&this.handle_file_out_preview(i),this.preview_tabs.set(i,s)}}}catch(e){n.e(e)}finally{n.f()}var c,u=k(e.opened);try{for(u.s();!(c=u.n()).done;){var l=c.value;l.input instanceof t.TabInputText&&this.preview_tabs.set(l.input.uri.fsPath,!!l.isPreview)}}catch(e){u.e(e)}finally{u.f()}}},{key:"handle_file_out_preview",value:function(e){var r=this.get_workspace_root_for_file(e);if(r){var o=n.relative(r,e);this.is_excluded(o)||u(e,this.ignored_extensions)||this.checked_items.get(e)!==t.TreeItemCheckboxState.Checked&&this.opened_from_workspace_view.has(e)&&this.opened_from_workspace_view.delete(e)}}},{key:"mark_opened_from_workspace_view",value:function(e){this.opened_from_workspace_view.add(e)}},{key:"get_open_editors",value:function(){var e=[];return t.window.tabGroups.all.forEach((function(r){r.tabs.forEach((function(r){r.input instanceof t.TabInputText&&e.push(r.input.uri)}))})),e}},{key:"getWorkspaceRoots",value:function(){return this.workspace_roots}},{key:"getWorkspaceRoot",value:function(){return this.workspace_roots.length>0?this.workspace_roots[0]:""}},{key:"getWorkspaceName",value:function(e){var t=this.workspace_roots.indexOf(e);return-1!==t?this.workspace_names[t]:n.basename(e)}},{key:"on_file_system_changed",value:function(e){if(e){this.file_token_counts.delete(e);for(var t=n.dirname(e),r=this.get_workspace_root_for_file(e);r&&t.startsWith(r);)this.directory_token_counts.delete(t),t=n.dirname(t)}else this.file_token_counts.clear(),this.directory_token_counts.clear();this.refresh()}},{key:"handle_file_create",value:(S=_(b().mark((function e(o){var i,a,s,c,u,l,p,h,f,d,m,v,g,y,x,_,E,S,O,T;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o)for(this.file_token_counts.delete(o),i=n.dirname(o),a=this.get_workspace_root_for_file(o);a&&i.startsWith(a);)this.directory_token_counts.delete(i),i=n.dirname(i);else this.file_token_counts.clear(),this.directory_token_counts.clear();return this.update_file_workspace_mapping(),e.next=4,this.refresh();case 4:s=!1,c=new Map(this.checked_items.entries()),u=k(c),e.prev=7,u.s();case 9:if((l=u.n()).done){e.next=24;break}if(p=w(l.value,2),h=p[0],p[1]!==t.TreeItemCheckboxState.Checked){e.next=22;break}f=!1;try{r.existsSync(h)&&r.lstatSync(h).isDirectory()&&(o?o.startsWith(h+n.sep)&&(f=!0):f=!0)}catch(e){}if(!f){e.next=22;break}if(d=this.get_workspace_root_for_file(h)){e.next=18;break}return e.abrupt("continue",22);case 18:return m=n.relative(d,h),v=this.is_excluded(m),e.next=22,this.update_directory_check_state(h,t.TreeItemCheckboxState.Checked,v);case 22:e.next=9;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(7),u.e(e.t0);case 29:return e.prev=29,u.f(),e.finish(29);case 32:if(this.checked_items.size===c.size){e.next=36;break}s=!0,e.next=73;break;case 36:g=k(this.checked_items),e.prev=37,g.s();case 39:if((y=g.n()).done){e.next=46;break}if(x=w(y.value,2),_=x[0],E=x[1],c.get(_)===E){e.next=44;break}return s=!0,e.abrupt("break",46);case 44:e.next=39;break;case 46:e.next=51;break;case 48:e.prev=48,e.t1=e.catch(37),g.e(e.t1);case 51:return e.prev=51,g.f(),e.finish(51);case 54:if(s){e.next=73;break}S=k(c.keys()),e.prev=56,S.s();case 58:if((O=S.n()).done){e.next=65;break}if(T=O.value,this.checked_items.has(T)){e.next=63;break}return s=!0,e.abrupt("break",65);case 63:e.next=58;break;case 65:e.next=70;break;case 67:e.prev=67,e.t2=e.catch(56),S.e(e.t2);case 70:return e.prev=70,S.f(),e.finish(70);case 73:if(!s){e.next=77;break}return this._on_did_change_checked_files.fire(),e.next=77,this.refresh();case 77:case"end":return e.stop()}}),e,this,[[7,26,29,32],[37,48,51,54],[56,67,70,73]])}))),function(e){return S.apply(this,arguments)})},{key:"refresh",value:(E=_(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._on_did_change_tree_data.fire();case 1:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"clear_checks",value:function(){var e,r=new Set(this.get_open_editors().map((function(e){return e.fsPath}))),o=Array.from(this.checked_items.entries()).filter((function(e){var n=w(e,2),o=n[0],i=n[1];return r.has(o)&&i==t.TreeItemCheckboxState.Checked})).map((function(e){return w(e,1)[0]})),i=new Map,a=k(this.checked_items.entries());try{for(a.s();!(e=a.n()).done;){var s=w(e.value,2),c=s[0],u=s[1];r.has(c)&&i.set(c,u)}}catch(e){a.e(e)}finally{a.f()}this.checked_items=i,this.partially_checked_dirs.clear();var l,p=k(r);try{for(p.s();!(l=p.n()).done;){var h=l.value;if(this.checked_items.has(h))for(var f=n.dirname(h),d=this.get_workspace_root_for_file(h);d&&f.startsWith(d);)this.update_parent_state(f),f=n.dirname(f)}}catch(e){p.e(e)}finally{p.f()}o.length>0&&t.window.showInformationMessage("".concat(o.length," file").concat(1==o.length?"":"s"," remain").concat(1==o.length?"s":""," checked."),"Clear open editors").then((function(e){"Clear open editors"==e&&t.commands.executeCommand("codeWebChat.clearChecksOpenEditors")})),this.refresh(),this._on_did_change_checked_files.fire()}},{key:"getTreeItem",value:function(e){var r,n=e.resourceUri.fsPath,o=null!==(r=this.checked_items.get(n))&&void 0!==r?r:t.TreeItemCheckboxState.Unchecked;e.checkboxState=o;var i=e.tokenCount;if(void 0!==i){var a=i>=1e3?"".concat(Math.floor(i/1e3),"k"):"".concat(i);e.description?e.description="".concat(a," ").concat(e.description):e.description=a}return e.isDirectory&&this.partially_checked_dirs.has(n)&&(e.description=e.description?"".concat(e.description," ✓"):"✓",e.tooltip="".concat(e.tooltip||""," (Partially selected)")),e.isWorkspaceRoot&&(e.contextValue="workspaceRoot",e.iconPath=new t.ThemeIcon("root-folder"),e.tooltip="".concat(e.label," (Workspace Root)")),e}},{key:"getChildren",value:(x=_(b().mark((function e(r){var o,i,a,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.workspace_roots.length){e.next=3;break}return t.window.showInformationMessage("No workspace folder found."),e.abrupt("return",[]);case 3:if(r){e.next=8;break}if(1!=this.workspace_roots.length){e.next=7;break}return o=this.workspace_roots[0],e.abrupt("return",this.get_files_and_directories(o));case 7:return e.abrupt("return",this.getWorkspaceFolderItems());case 8:if(i=r.resourceUri.fsPath,!r.isDirectory){e.next=15;break}if(!(a=this.get_workspace_root_for_file(i))){e.next=15;break}if(s=n.relative(a,i),!this.is_excluded(s)){e.next=15;break}return e.abrupt("return",[]);case 15:return e.abrupt("return",this.get_files_and_directories(i));case 16:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"getWorkspaceFolderItems",value:function(){var e=this;return this.workspace_roots.map((function(r,n){var o,i=t.Uri.file(r),a=e.workspace_names[n];return new I(a,i,t.TreeItemCollapsibleState.Collapsed,!0,null!==(o=e.checked_items.get(r))&&void 0!==o?o:t.TreeItemCheckboxState.Unchecked,!1,!1,!1,void 0,void 0,!0)}))}},{key:"calculate_file_tokens",value:(g=_(b().mark((function e(t){var n,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.file_token_counts.has(t)){e.next=2;break}return e.abrupt("return",this.file_token_counts.get(t));case 2:return e.prev=2,e.next=5,r.promises.readFile(t,"utf8");case 5:return n=e.sent,o=Math.floor(n.length/4),this.file_token_counts.set(t,o),e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(2),l.error({function_name:"calculate_file_tokens",message:"Error calculating tokens for ".concat(t),data:e.t0}),e.abrupt("return",0);case 15:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(e){return g.apply(this,arguments)})},{key:"calculate_directory_tokens",value:(v=_(b().mark((function e(t){var o,i,a,s,c,p,h,f,d,m,v,g,y;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.directory_token_counts.has(t)){e.next=2;break}return e.abrupt("return",this.directory_token_counts.get(t));case 2:if(e.prev=2,o=this.get_workspace_root_for_file(t)){e.next=6;break}return e.abrupt("return",0);case 6:if(i=n.relative(o,t),!this.is_excluded(i)){e.next=10;break}return this.directory_token_counts.set(t,0),e.abrupt("return",0);case 10:return e.next=12,r.promises.readdir(t,{withFileTypes:!0});case 12:a=e.sent,s=0,c=k(a),e.prev=15,c.s();case 17:if((p=c.n()).done){e.next=53;break}if(h=p.value,f=n.join(t,h.name),d=n.relative(o,f),!this.is_excluded(d)){e.next=23;break}return e.abrupt("continue",51);case 23:if(!u(h.name,this.ignored_extensions)){e.next=25;break}return e.abrupt("continue",51);case 25:if(m=h.isDirectory(),v=h.isSymbolicLink(),g=!1,!v){e.next=39;break}return e.prev=29,e.next=32,r.promises.stat(f);case 32:y=e.sent,m=y.isDirectory(),e.next=39;break;case 36:e.prev=36,e.t0=e.catch(29),g=!0;case 39:if(!m||g){e.next=46;break}return e.t1=s,e.next=43,this.calculate_directory_tokens(f);case 43:s=e.t1+=e.sent,e.next=51;break;case 46:if(!h.isFile()&&(!v||g||m)){e.next=51;break}return e.t2=s,e.next=50,this.calculate_file_tokens(f);case 50:s=e.t2+=e.sent;case 51:e.next=17;break;case 53:e.next=58;break;case 55:e.prev=55,e.t3=e.catch(15),c.e(e.t3);case 58:return e.prev=58,c.f(),e.finish(58);case 61:return this.directory_token_counts.set(t,s),e.abrupt("return",s);case 65:return e.prev=65,e.t4=e.catch(2),l.error({function_name:"calculate_directory_tokens",message:"Error calculating tokens for directory ".concat(t),data:e.t4}),e.abrupt("return",0);case 69:case"end":return e.stop()}}),e,this,[[2,65],[15,55,58,61],[29,36]])}))),function(e){return v.apply(this,arguments)})},{key:"get_files_and_directories",value:(m=_(b().mark((function e(o){var i,a,s,c,p,h,d,m,v,g,y,w,x,_,E,S,O,T,j,C;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],e.prev=1,a=this.get_workspace_root_for_file(o)){e.next=5;break}return e.abrupt("return",[]);case 5:if(s=n.relative(a,o),o===a||!this.is_excluded(s)){e.next=8;break}return e.abrupt("return",[]);case 8:return e.next=10,r.promises.readdir(o,{withFileTypes:!0});case 10:(c=e.sent).sort((function(e,t){var r=e.isDirectory()||e.isSymbolicLink(),n=t.isDirectory()||t.isSymbolicLink();return r&&!n?-1:!r&&n?1:f(e.name,t.name)})),p=k(c),e.prev=13,p.s();case 15:if((h=p.n()).done){e.next=59;break}if(d=h.value,m=n.join(o,d.name),v=n.relative(a,m),!this.is_excluded(v)){e.next=22;break}return e.abrupt("continue",57);case 22:if(!(g=u(d.name,this.ignored_extensions))||d.isDirectory()){e.next=25;break}return e.abrupt("continue",57);case 25:if(y=t.Uri.file(m),w=d.isDirectory(),x=d.isSymbolicLink(),_=!1,!x){e.next=40;break}return e.prev=30,e.next=33,r.promises.stat(m);case 33:E=e.sent,w=E.isDirectory(),e.next=40;break;case 37:e.prev=37,e.t0=e.catch(30),_=!0;case 40:if(!_){e.next=42;break}return e.abrupt("continue",57);case 42:if(S=m,void 0===(O=this.checked_items.get(S))&&(T=n.dirname(m),this.checked_items.get(T)!=t.TreeItemCheckboxState.Checked||g?O=t.TreeItemCheckboxState.Unchecked:(O=t.TreeItemCheckboxState.Checked,this.checked_items.set(m,O))),!w){e.next=51;break}return e.next=48,this.calculate_directory_tokens(m);case 48:e.t1=e.sent,e.next=54;break;case 51:return e.next=53,this.calculate_file_tokens(m);case 53:e.t1=e.sent;case 54:j=e.t1,C=new I(d.name,y,w?t.TreeItemCollapsibleState.Collapsed:t.TreeItemCollapsibleState.None,w,O,!1,x,!1,j,void 0),i.push(C);case 57:e.next=15;break;case 59:e.next=64;break;case 61:e.prev=61,e.t2=e.catch(13),p.e(e.t2);case 64:return e.prev=64,p.f(),e.finish(64);case 67:e.next=72;break;case 69:e.prev=69,e.t3=e.catch(1),l.error({function_name:"get_files_and_directories",message:"Error reading directory ".concat(o),data:e.t3});case 72:return e.abrupt("return",i);case 73:case"end":return e.stop()}}),e,this,[[1,69],[13,61,64,67],[30,37]])}))),function(e){return m.apply(this,arguments)})},{key:"update_check_state",value:(d=_(b().mark((function e(r,o){var i,a,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.resourceUri.fsPath,r.isDirectory&&this.partially_checked_dirs.has(i)&&(o=t.TreeItemCheckboxState.Checked,this.partially_checked_dirs.delete(i)),this.checked_items.set(i,o),!r.isDirectory){e.next=6;break}return e.next=6,this.update_directory_check_state(i,o,!1);case 6:a=n.dirname(i),s=this.get_workspace_root_for_file(i);case 8:if(!s||!a.startsWith(s)){e.next=14;break}return e.next=11,this.update_parent_state(a);case 11:a=n.dirname(a),e.next=8;break;case 14:this._on_did_change_checked_files.fire(),this.refresh();case 16:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"update_parent_state",value:(h=_(b().mark((function e(o){var i,a,s,c,p,h,f,d,m,v,g,y,w,x,_;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=this.get_workspace_root_for_file(o)){e.next=4;break}return e.abrupt("return");case 4:if(a=n.relative(i,o),!this.is_excluded(a)){e.next=9;break}return this.checked_items.set(o,t.TreeItemCheckboxState.Unchecked),this.partially_checked_dirs.delete(o),e.abrupt("return");case 9:return e.next=11,r.promises.readdir(o,{withFileTypes:!0});case 11:s=e.sent,c=!0,p=!1,h=!1,f=k(s),e.prev=16,f.s();case 18:if((d=f.n()).done){e.next=32;break}if(v=d.value,g=n.join(o,v.name),y=n.relative(i,g),w=u(v.name,this.ignored_extensions),!this.is_excluded(y)&&!w){e.next=25;break}return e.abrupt("continue",30);case 25:h=!0,x=null!==(m=this.checked_items.get(g))&&void 0!==m?m:t.TreeItemCheckboxState.Unchecked,_=v.isDirectory()&&this.partially_checked_dirs.has(g),x!=t.TreeItemCheckboxState.Checked&&(c=!1),(x==t.TreeItemCheckboxState.Checked||_)&&(p=!0);case 30:e.next=18;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(16),f.e(e.t0);case 37:return e.prev=37,f.f(),e.finish(37);case 40:h?c?(this.checked_items.set(o,t.TreeItemCheckboxState.Checked),this.partially_checked_dirs.delete(o)):p?(this.checked_items.set(o,t.TreeItemCheckboxState.Unchecked),this.partially_checked_dirs.add(o)):(this.checked_items.set(o,t.TreeItemCheckboxState.Unchecked),this.partially_checked_dirs.delete(o)):(this.checked_items.set(o,t.TreeItemCheckboxState.Unchecked),this.partially_checked_dirs.delete(o)),e.next=46;break;case 43:e.prev=43,e.t1=e.catch(0),l.error({function_name:"update_parent_state",message:"Error updating parent state for ".concat(o),data:e.t1});case 46:case"end":return e.stop()}}),e,this,[[0,43],[16,34,37,40]])}))),function(e){return h.apply(this,arguments)})},{key:"update_directory_check_state",value:(p=_(b().mark((function e(o,i,a){var s,c,p,h,f,d,m,v,g,y,w,x,_;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=this.get_workspace_root_for_file(o)){e.next=4;break}return e.abrupt("return");case 4:if(c=n.relative(s,o),!this.is_excluded(c)&&!a){e.next=7;break}return e.abrupt("return");case 7:return i==t.TreeItemCheckboxState.Checked&&this.partially_checked_dirs.delete(o),e.next=10,r.promises.readdir(o,{withFileTypes:!0});case 10:p=e.sent,h=k(p),e.prev=12,h.s();case 14:if((f=h.n()).done){e.next=41;break}if(d=f.value,m=n.join(o,d.name),v=n.relative(s,m),g=u(d.name,this.ignored_extensions),!this.is_excluded(v)&&!g){e.next=21;break}return e.abrupt("continue",39);case 21:if(this.checked_items.set(m,i),y=d.isDirectory(),w=d.isSymbolicLink(),x=!1,!w){e.next=36;break}return e.prev=26,e.next=29,r.promises.stat(m);case 29:_=e.sent,y=_.isDirectory(),e.next=36;break;case 33:e.prev=33,e.t0=e.catch(26),x=!0;case 36:if(!y||x){e.next=39;break}return e.next=39,this.update_directory_check_state(m,i,!1);case 39:e.next=14;break;case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(12),h.e(e.t1);case 46:return e.prev=46,h.f(),e.finish(46);case 49:e.next=54;break;case 51:e.prev=51,e.t2=e.catch(0),l.error({function_name:"update_directory_check_state",message:"Error updating directory check state for ".concat(o),data:e.t2});case 54:case"end":return e.stop()}}),e,this,[[0,51],[12,43,46,49],[26,33]])}))),function(e,t,r){return p.apply(this,arguments)})},{key:"get_checked_files",value:function(){var e=this;return Array.from(this.checked_items.entries()).filter((function(o){var i,a=w(o,2),s=a[0];return a[1]==t.TreeItemCheckboxState.Checked&&r.existsSync(s)&&(r.lstatSync(s).isFile()||r.lstatSync(s).isSymbolicLink())&&!!(i=e.get_workspace_root_for_file(s))&&!e.is_excluded(n.relative(i,s))})).map((function(e){var t=w(e,2),r=t[0];return t[1],r}))}},{key:"set_checked_files",value:(a=_(b().mark((function e(o){var i,a,s,c,u,l,p,h,f,d,m,v,g,w;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.checked_items.clear(),this.partially_checked_dirs.clear(),i=[],a=k(o),e.prev=4,a.s();case 6:if((s=a.n()).done){e.next=26;break}if(c=s.value,r.existsSync(c)){e.next=10;break}return e.abrupt("continue",24);case 10:if(u=this.get_workspace_root_for_file(c)){e.next=13;break}return e.abrupt("continue",24);case 13:if(l=n.relative(u,c),!this.is_excluded(l)){e.next=16;break}return e.abrupt("continue",24);case 16:if(!r.lstatSync(c).isDirectory()){e.next=23;break}return this.checked_items.set(c,t.TreeItemCheckboxState.Checked),e.next=21,this.update_directory_check_state(c,t.TreeItemCheckboxState.Checked,!1);case 21:e.next=24;break;case 23:i.push(c);case 24:e.next=6;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(4),a.e(e.t0);case 31:return e.prev=31,a.f(),e.finish(31);case 34:for(p=0,h=i;p<h.length;p++)f=h[p],this.checked_items.set(f,t.TreeItemCheckboxState.Checked);d=0,m=[].concat(y(o),i);case 36:if(!(d<m.length)){e.next=49;break}v=m[d],g=n.dirname(v),w=this.get_workspace_root_for_file(v);case 40:if(!w||!g.startsWith(w)){e.next=46;break}return e.next=43,this.update_parent_state(g);case 43:g=n.dirname(g),e.next=40;break;case 46:d++,e.next=36;break;case 49:this.refresh();case 50:case"end":return e.stop()}}),e,this,[[4,28,31,34]])}))),function(e){return a.apply(this,arguments)})},{key:"load_all_gitignore_files",value:(i=_(b().mark((function e(){var o,i,a,c,u=this;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.workspace.findFiles("**/.gitignore");case 2:o=e.sent,this.combined_gitignore=s()(),i=k(o),e.prev=5,c=b().mark((function e(){var t,o,i,s,c,p;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.value,o=t.fsPath,i=u.get_workspace_root_for_file(o)){e.next=5;break}return e.abrupt("return",1);case 5:s=n.relative(i,n.dirname(o));try{c=r.readFileSync(o,"utf-8"),p=c.split("\n").map((function(e){return e.trim()})).filter((function(e){return e&&!e.startsWith("#")})).map((function(e){return""==s?e:"".concat(s).concat(e.startsWith("/")?e:"/".concat(e))})),u.combined_gitignore.add(p)}catch(e){l.error({function_name:"load_all_gitignore_files",message:"Error reading .gitignore file at ".concat(o),data:e})}case 7:case"end":return e.stop()}}),e)})),i.s();case 8:if((a=i.n()).done){e.next=14;break}return e.delegateYield(c(),"t0",10);case 10:if(!e.t0){e.next=12;break}return e.abrupt("continue",12);case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(5),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:this.combined_gitignore.add(["node_modules/"]),this.file_token_counts.clear(),this.directory_token_counts.clear(),this.refresh();case 26:case"end":return e.stop()}}),e,this,[[5,16,19,22]])}))),function(){return i.apply(this,arguments)})},{key:"is_excluded",value:function(e){return!(!e||""===e.trim())&&(!!e.split(n.sep).some((function(e){return".git"==e}))||this.combined_gitignore.ignores(e))}},{key:"load_ignored_extensions",value:function(){var e=t.workspace.getConfiguration("codeWebChat").get("ignoredExtensions",[]).map((function(e){return e.toLowerCase().replace(/^\./,"")}));this.ignored_extensions=new Set([].concat(y(c),y(e))),this.file_token_counts.clear(),this.directory_token_counts.clear()}},{key:"check_all",value:(o=_(b().mark((function e(){var r,n,o,i,a,s,c,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=k(this.workspace_roots),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=33;break}return o=n.value,this.checked_items.set(o,t.TreeItemCheckboxState.Checked),this.partially_checked_dirs.delete(o),e.next=9,this.get_files_and_directories(o);case 9:i=e.sent,a=k(i),e.prev=11,a.s();case 13:if((s=a.n()).done){e.next=23;break}if(c=s.value,u=c.resourceUri.fsPath,this.checked_items.set(u,t.TreeItemCheckboxState.Checked),this.partially_checked_dirs.delete(u),!c.isDirectory){e.next=21;break}return e.next=21,this.update_directory_check_state(u,t.TreeItemCheckboxState.Checked,!1);case 21:e.next=13;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(11),a.e(e.t0);case 28:return e.prev=28,a.f(),e.finish(28);case 31:e.next=3;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(1),r.e(e.t1);case 38:return e.prev=38,r.f(),e.finish(38);case 41:this.refresh(),this._on_did_change_checked_files.fire();case 43:case"end":return e.stop()}}),e,this,[[1,35,38,41],[11,25,28,31]])}))),function(){return o.apply(this,arguments)})},{key:"get_checked_files_token_count",value:(e=_(b().mark((function e(){var t,n,o,i,a,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.get_checked_files(),n=0,o=k(t),e.prev=3,o.s();case 5:if((i=o.n()).done){e.next=24;break}if(a=i.value,e.prev=7,!r.statSync(a).isFile()){e.next=17;break}if(!this.file_token_counts.has(a)){e.next=13;break}n+=this.file_token_counts.get(a),e.next=17;break;case 13:return e.next=15,this.calculate_file_tokens(a);case 15:s=e.sent,n+=s;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),l.error({function_name:"get_checked_files_token_count",message:"Error accessing file ".concat(a," for token count"),data:e.t0});case 22:e.next=5;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(3),o.e(e.t1);case 29:return e.prev=29,o.f(),e.finish(29);case 32:return e.abrupt("return",n);case 33:case"end":return e.stop()}}),e,this,[[3,26,29,32],[7,19]])}))),function(){return e.apply(this,arguments)})}]);var e,o,i,a,p,h,d,m,v,g,x,E,S}(),I=function(e){function r(e,n,o,i,a,s){var c,u,l,p,h=arguments.length>6&&void 0!==arguments[6]&&arguments[6],f=arguments.length>7&&void 0!==arguments[7]&&arguments[7],g=arguments.length>8?arguments[8]:void 0,y=arguments.length>9?arguments[9]:void 0,b=arguments.length>10&&void 0!==arguments[10]&&arguments[10];return O(this,r),(u=this,l=r,p=[e,o],l=v(l),c=function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(u,m()?Reflect.construct(l,p||[],v(u).constructor):l.apply(u,p))).label=e,c.resourceUri=n,c.collapsibleState=o,c.isDirectory=i,c.checkboxState=a,c.isGitIgnored=s,c.isSymbolicLink=h,c.isOpenFile=f,c.tokenCount=g,c.isWorkspaceRoot=b,c.tooltip=c.resourceUri.fsPath,c.description=y,c.isWorkspaceRoot?(c.iconPath=new t.ThemeIcon("root-folder"),c.contextValue="workspaceRoot"):c.isDirectory?(c.iconPath=new t.ThemeIcon("folder"),c.contextValue="directory"):(c.iconPath=new t.ThemeIcon("file"),c.command={command:"codeWebChat.openFileFromWorkspace",title:"Open File",arguments:[c.resourceUri]}),c.checkboxState=a,c.isOpenFile&&(c.contextValue="openEditor"),c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(r,e),j(r)}(t.TreeItem);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function F(){F=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==N(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(N(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function D(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=L(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function R(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return G(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function q(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U(n.key),n)}}function U(e){var t=function(e){if("object"!=N(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==N(t)?t:t+""}var B=function(){return e=function e(t,r,n){var o,i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,a=[],(i=U(i="workspace_roots"))in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,this.workspace_provider=t,this.open_editors_provider=r,this.websites_provider=n,this.workspace_roots=t.getWorkspaceRoots()},t=[{key:"collect_files",value:(o=F().mark((function e(t){var o,i,a,s,c,u,l,p,h,d,m,v,g,y,b,w,x,_,k;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.workspace_provider.get_checked_files(),a=(null===(o=this.open_editors_provider)||void 0===o?void 0:o.get_checked_files())||[],s=Array.from(new Set([].concat(R(i),R(a)))).sort((function(e,t){return f(e,t)})),c="",this.websites_provider){u=this.websites_provider.get_checked_websites(),l=D(u);try{for(l.s();!(p=l.n()).done;)h=p.value,null!=t&&t.disable_xml?c+=h.content:c+='<text title="'.concat(h.title,'">\n<![CDATA[\n').concat(h.content,"\n]]>\n</text>\n")}catch(e){l.e(e)}finally{l.f()}}d=D(s),e.prev=6,d.s();case 8:if((m=d.n()).done){e.next=35;break}if(v=m.value,null==t||!t.exclude_path||t.exclude_path!=v){e.next=12;break}return e.abrupt("continue",33);case 12:if(e.prev=12,r.existsSync(v)){e.next=15;break}return e.abrupt("continue",33);case 15:if(!r.statSync(v).isDirectory()){e.next=18;break}return e.abrupt("continue",33);case 18:if(g=r.readFileSync(v,"utf8"),null!=t&&t.with_line_numbers&&(g=this.add_line_numbers(g)),y=this.get_workspace_root_for_file(v)){e.next=24;break}return null!=t&&t.disable_xml?c+=g:(b=(null==t?void 0:t.active_path)==v,c+='<file path="'.concat(v,'"').concat(b?" active":"",">\n<![CDATA[\n").concat(g,"\n]]>\n</file>\n")),e.abrupt("continue",33);case 24:w=n.relative(y,v),x=w,this.workspace_roots.length>1&&(_=this.workspace_provider.getWorkspaceName(y),x="".concat(_,"/").concat(w)),null!=t&&t.disable_xml?c+=g:(k=(null==t?void 0:t.active_path)==v,c+='<file path="'.concat(x,'"').concat(k?" active":"",">\n<![CDATA[\n").concat(g,"\n]]>\n</file>\n")),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(12),console.error("Error reading file ".concat(v,":"),e.t0);case 33:e.next=8;break;case 35:e.next=40;break;case 37:e.prev=37,e.t1=e.catch(6),d.e(e.t1);case 40:return e.prev=40,d.f(),e.finish(40);case 43:return e.abrupt("return",c);case 44:case"end":return e.stop()}}),e,this,[[6,37,40,43],[12,30]])})),i=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=o.apply(e,t);function a(e){q(i,r,n,a,s,"next",e)}function s(e){q(i,r,n,a,s,"throw",e)}a(void 0)}))},function(e){return i.apply(this,arguments)})},{key:"add_line_numbers",value:function(e){var t=e.split("\n"),r=t.length.toString().length;return t.map((function(e,t){var n=(t+1).toString().padStart(r," ");return"".concat(n," ").concat(e)})).join("\n")}},{key:"get_workspace_root_for_file",value:function(e){return this.workspace_provider.get_workspace_root_for_file(e)}}],t&&M(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,o,i}();function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function W(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(){$=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==z(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(z(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function V(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=H(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function H(e,t){if(e){if("string"==typeof e)return Y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(e,t):void 0}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function J(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function K(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){J(i,n,o,a,s,"next",e)}function s(e){J(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,X(n.key),n)}}function Z(e,t,r){return(t=X(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e){var t=function(e){if("object"!=z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==z(t)?t:t+""}var ee=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Z(this,"_on_did_change_checked_files",new t.EventEmitter),Z(this,"onDidChangeCheckedFiles",this._on_did_change_checked_files.event),Z(this,"checked_files",new Set),Z(this,"unchecked_in_open_editors",new Set),Z(this,"unchecked_in_workspace",new Set),Z(this,"synchronizing_provider",null),Z(this,"is_synchronizing",!1),Z(this,"is_initialized",!1)}return o=e,i=[{key:"setProviders",value:function(e,t){var r=this;this.workspace_provider=e,this.open_editors_provider=t,e.onDidChangeCheckedFiles((function(){r.is_synchronizing||(r.synchronizing_provider="workspace",r.synchronize_state(),r.synchronizing_provider=null)})),t.onDidChangeCheckedFiles((function(){r.is_synchronizing||(r.synchronizing_provider="openEditors",r.synchronize_state(),r.synchronizing_provider=null)})),setTimeout((function(){r.is_initialized||(r.synchronize_state(),r.is_initialized=!0)}),1e3)}},{key:"synchronize_state",value:(l=K($().mark((function e(){var t,r,n,o,i,a,s,c,u,l,p,h,f,d,m,v,g,y,b,w,x,_,k;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.workspace_provider&&this.open_editors_provider){e.next=2;break}return e.abrupt("return");case 2:if(!this.is_synchronizing){e.next=4;break}return e.abrupt("return");case 4:if(this.is_synchronizing=!0,e.prev=5,t=this.workspace_provider.get_checked_files(),r=this.open_editors_provider.get_checked_files(),n=this.get_open_editor_uris(),o=n.map((function(e){return e.fsPath})),"workspace"!==this.synchronizing_provider){e.next=34;break}i=V(o),e.prev=12,i.s();case 14:if((a=i.n()).done){e.next=24;break}if(s=a.value,c=this.is_file_checked_in_workspace(s),u=r.includes(s),c===u){e.next=22;break}return e.next=21,this.update_file_in_open_editors(s,c);case 21:c?this.unchecked_in_open_editors.delete(s):r.includes(s)&&this.unchecked_in_open_editors.add(s);case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),i.e(e.t0);case 29:return e.prev=29,i.f(),e.finish(29);case 32:e.next=113;break;case 34:if("openEditors"!==this.synchronizing_provider){e.next=75;break}l=V(r),e.prev=36,l.s();case 38:if((p=l.n()).done){e.next=46;break}if(h=p.value,t.includes(h)){e.next=44;break}return e.next=43,this.update_file_in_workspace(h,!0);case 43:this.unchecked_in_workspace.delete(h);case 44:e.next=38;break;case 46:e.next=51;break;case 48:e.prev=48,e.t1=e.catch(36),l.e(e.t1);case 51:return e.prev=51,l.f(),e.finish(51);case 54:f=V(o),e.prev=55,f.s();case 57:if((d=f.n()).done){e.next=65;break}if(m=d.value,r.includes(m)||!t.includes(m)){e.next=63;break}return e.next=62,this.update_file_in_workspace(m,!1);case 62:this.unchecked_in_workspace.add(m);case 63:e.next=57;break;case 65:e.next=70;break;case 67:e.prev=67,e.t2=e.catch(55),f.e(e.t2);case 70:return e.prev=70,f.f(),e.finish(70);case 73:e.next=113;break;case 75:v=V(o),e.prev=76,v.s();case 78:if((g=v.n()).done){e.next=87;break}if(y=g.value,b=this.is_file_checked_in_workspace(y),w=r.includes(y),b===w){e.next=85;break}return e.next=85,this.update_file_in_open_editors(y,b);case 85:e.next=78;break;case 87:e.next=92;break;case 89:e.prev=89,e.t3=e.catch(76),v.e(e.t3);case 92:return e.prev=92,v.f(),e.finish(92);case 95:x=V(r),e.prev=96,x.s();case 98:if((_=x.n()).done){e.next=105;break}if(k=_.value,t.includes(k)){e.next=103;break}return e.next=103,this.update_file_in_workspace(k,!0);case 103:e.next=98;break;case 105:e.next=110;break;case 107:e.prev=107,e.t4=e.catch(96),x.e(e.t4);case 110:return e.prev=110,x.f(),e.finish(110);case 113:this.update_checked_files_set(),this._on_did_change_checked_files.fire();case 115:return e.prev=115,this.is_synchronizing=!1,e.finish(115);case 118:case"end":return e.stop()}}),e,this,[[5,,115,118],[12,26,29,32],[36,48,51,54],[55,67,70,73],[76,89,92,95],[96,107,110,113]])}))),function(){return l.apply(this,arguments)})},{key:"is_file_checked_in_workspace",value:function(e){if(!this.workspace_provider)return!1;var t=this.workspace_provider.get_checked_files();if(t.includes(e))return!0;var r=this.workspace_provider.get_workspace_root_for_file(e);if(!r)return!1;for(var o=n.dirname(e);o.startsWith(r);){if(t.includes(o))return!0;o=n.dirname(o)}return!1}},{key:"get_open_editor_uris",value:function(){var e=[];return t.window.tabGroups.all.forEach((function(r){r.tabs.forEach((function(r){r.input instanceof t.TabInputText&&e.push(r.input.uri)}))})),e}},{key:"update_file_in_open_editors",value:(u=K($().mark((function e(r,o){var i,a;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.open_editors_provider){e.next=2;break}return e.abrupt("return");case 2:return i=o?t.TreeItemCheckboxState.Checked:t.TreeItemCheckboxState.Unchecked,a={resourceUri:t.Uri.file(r),label:n.basename(r),collapsibleState:t.TreeItemCollapsibleState.None,isDirectory:!1,checkboxState:i,isGitIgnored:!1,isSymbolicLink:!1,isOpenFile:!0,command:void 0,iconPath:void 0,tooltip:r,description:"",contextValue:"openEditor",isWorkspaceRoot:!1},e.next=6,this.open_editors_provider.update_check_state(a,i);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"update_file_in_workspace",value:(c=K($().mark((function e(o,i){var a,s;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.workspace_provider&&r.existsSync(o)){e.next=2;break}return e.abrupt("return");case 2:return a=i?t.TreeItemCheckboxState.Checked:t.TreeItemCheckboxState.Unchecked,s={resourceUri:t.Uri.file(o),label:n.basename(o),collapsibleState:t.TreeItemCollapsibleState.None,isDirectory:!1,checkboxState:a,isGitIgnored:!1,isSymbolicLink:!1,isOpenFile:!1,isWorkspaceRoot:!1,command:void 0,iconPath:void 0,tooltip:o,description:"",contextValue:"file"},e.next=6,this.workspace_provider.update_check_state(s,a);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"update_checked_files_set",value:function(){if(this.workspace_provider&&this.open_editors_provider){var e=this.workspace_provider.get_checked_files(),t=this.open_editors_provider.get_checked_files();this.checked_files=new Set([].concat(W(e),W(t)))}}},{key:"get_checked_files",value:function(){return Array.from(this.checked_files)}},{key:"update_checked_file",value:(s=K($().mark((function e(t,r){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r?(this.checked_files.add(t),this.unchecked_in_open_editors.delete(t),this.unchecked_in_workspace.delete(t)):this.checked_files.delete(t),e.next=3,this.synchronize_state();case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"dispose",value:function(){this._on_did_change_checked_files.dispose()}}],a=[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}],i&&Q(o.prototype,i),a&&Q(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i,a,s,c,u,l}();function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(){ne=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==te(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(te(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function oe(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function ie(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){oe(i,n,o,a,s,"next",e)}function s(e){oe(i,n,o,a,s,"throw",e)}a(void 0)}))}}function ae(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ce(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ce(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function ce(e,t){if(e){if("string"==typeof e)return ue(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ue(e,t):void 0}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,he(n.key),n)}}function pe(e,t,r){return(t=he(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function he(e){var t=function(e){if("object"!=te(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==te(t)?t:t+""}var fe=function(){return e=function e(r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),pe(this,"_on_did_change_tree_data",new t.EventEmitter),pe(this,"onDidChangeTreeData",this._on_did_change_tree_data.event),pe(this,"_workspace_roots",[]),pe(this,"_checked_items",new Map),pe(this,"_file_token_counts",new Map),pe(this,"_ignored_extensions",new Set),pe(this,"_initialized",!1),pe(this,"_opened_from_workspace_view",new Set),pe(this,"_non_preview_files",new Set),pe(this,"_preview_tabs",new Map),pe(this,"_on_did_change_checked_files",new t.EventEmitter),pe(this,"onDidChangeCheckedFiles",this._on_did_change_checked_files.event),this._workspace_roots=r.map((function(e){return e.uri.fsPath})),this._shared_state=ee.getInstance(),this._load_ignored_extensions(),this._update_preview_tabs_state(),this._tab_change_handler=t.window.tabGroups.onDidChangeTabs((function(e){n._handle_tab_changes(e),n.refresh()})),this._file_change_watcher=t.workspace.onDidChangeTextDocument((function(e){if(!e.document.isDirty){var t=e.document.uri.fsPath;n._file_token_counts.delete(t),n._on_did_change_tree_data.fire()}})),this._config_change_handler=t.workspace.onDidChangeConfiguration((function(e){if(e.affectsConfiguration("codeWebChat.ignoredExtensions")){var t=new Set(n._ignored_extensions);n._load_ignored_extensions(),n._uncheck_ignored_files(t),n.refresh()}})),setTimeout((function(){n._initialized=!0,n._on_did_change_tree_data.fire()}),500)},o=[{key:"_is_file_in_any_workspace",value:function(e){return this._workspace_roots.some((function(t){return e.startsWith(t)}))}},{key:"_get_containing_workspace_root",value:function(e){return this._workspace_roots.find((function(t){return e.startsWith(t)}))}},{key:"_uncheck_ignored_files",value:function(e){var r,n=this,o=this.get_checked_files().filter((function(t){return e?!u(t,e)&&u(t,n._ignored_extensions):u(t,n._ignored_extensions)})),i=se(o);try{for(i.s();!(r=i.n()).done;){var a=r.value;this._checked_items.set(a,t.TreeItemCheckboxState.Unchecked)}}catch(e){i.e(e)}finally{i.f()}o.length>0&&this._on_did_change_checked_files.fire()}},{key:"_load_ignored_extensions",value:function(){var e=t.workspace.getConfiguration("codeWebChat").get("ignoredExtensions",[]).map((function(e){return e.toLowerCase().replace(/^\./,"")}));this._ignored_extensions=new Set([].concat(ae(c),ae(e))),this._file_token_counts.clear()}},{key:"_update_preview_tabs_state",value:function(){var e=this;this._preview_tabs.clear(),t.window.tabGroups.all.forEach((function(r){r.tabs.forEach((function(r){if(r.input instanceof t.TabInputText){var n=r.input.uri;e._preview_tabs.set(n.fsPath,!!r.isPreview)}}))}))}},{key:"_handle_tab_changes",value:function(e){var r,n=se(e.changed);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.input instanceof t.TabInputText){var i=o.input.uri.fsPath,a=!!o.isPreview;this._preview_tabs.set(i,a)}}}catch(e){n.e(e)}finally{n.f()}var s,c=se(e.opened);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.input instanceof t.TabInputText&&this._preview_tabs.set(u.input.uri.fsPath,!!u.isPreview)}}catch(e){c.e(e)}finally{c.f()}var l,p=se(e.closed);try{for(p.s();!(l=p.n()).done;){var h=l.value;h.input instanceof t.TabInputText&&this._preview_tabs.delete(h.input.uri.fsPath)}}catch(e){p.e(e)}finally{p.f()}}},{key:"mark_opened_from_workspace_view",value:function(e){this._opened_from_workspace_view.add(e)}},{key:"dispose",value:function(){this._tab_change_handler.dispose(),this._file_change_watcher.dispose(),this._config_change_handler.dispose(),this._on_did_change_checked_files.dispose()}},{key:"refresh",value:function(){this._clean_up_closed_files(),this._on_did_change_tree_data.fire()}},{key:"_is_file_checked_in_workspace",value:function(e){return this._shared_state.get_checked_files().includes(e)}},{key:"_clean_up_closed_files",value:function(){var e=this,t=new Set(this._get_open_editors().map((function(e){return e.fsPath}))),r=[];this._checked_items.forEach((function(e,n){t.has(n)||r.push(n)})),r.forEach((function(t){e._checked_items.delete(t),e._opened_from_workspace_view.delete(t),e._non_preview_files.delete(t),e._preview_tabs.delete(t)})),r.forEach((function(t){e._file_token_counts.delete(t)}))}},{key:"getTreeItem",value:function(e){var r,n=e.resourceUri.fsPath,o=null!==(r=this._checked_items.get(n))&&void 0!==r?r:t.TreeItemCheckboxState.Unchecked;e.checkboxState=o;var i=e.tokenCount;if(void 0!==i){var a=i>=1e3?"".concat(Math.floor(i/1e3),"k"):"".concat(i);e.description?e.description="".concat(a," ").concat(e.description):e.description=a}return e}},{key:"getChildren",value:(f=ie(ne().mark((function e(){return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workspace_roots.length){e.next=3;break}return t.window.showInformationMessage("No workspace folder found."),e.abrupt("return",[]);case 3:return e.abrupt("return",this.create_open_editor_items());case 4:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"_get_open_editors",value:function(){var e=this,r=new Map;return t.window.tabGroups.all.forEach((function(n){n.tabs.forEach((function(n){if(n.input instanceof t.TabInputText){var o=n.input.uri,i=o.fsPath;r.has(i)||r.set(i,o),e._preview_tabs.set(i,!!n.isPreview)}}))})),Array.from(r.values())}},{key:"_calculate_file_tokens",value:(h=ie(ne().mark((function e(t){var n,o;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._file_token_counts.has(t)){e.next=2;break}return e.abrupt("return",this._file_token_counts.get(t));case 2:return e.prev=2,e.next=5,r.promises.readFile(t,"utf8");case 5:return n=e.sent,o=Math.floor(n.length/4),this._file_token_counts.set(t,o),e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(2),console.error("Error calculating tokens for ".concat(t,":"),e.t0),e.abrupt("return",0);case 15:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(e){return h.apply(this,arguments)})},{key:"create_open_editor_items",value:(p=ie(ne().mark((function e(){var r,o,i,a,s,c,l,p,h,f,d,m,v,g,y;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],o=this._get_open_editors(),i=se(o),e.prev=3,i.s();case 5:if((a=i.n()).done){e.next=26;break}if(s=a.value,c=s.fsPath,this._is_file_in_any_workspace(c)){e.next=10;break}return e.abrupt("continue",24);case 10:if(l=n.basename(c),!u(c,this._ignored_extensions)){e.next=13;break}return e.abrupt("continue",24);case 13:return void 0===(p=this._checked_items.get(c))&&(h=this._is_file_checked_in_workspace(c),p=h?t.TreeItemCheckboxState.Checked:t.TreeItemCheckboxState.Unchecked,this._checked_items.set(c,p)),f=this._get_containing_workspace_root(c),d=f?n.relative(f,n.dirname(c)):n.dirname(c),m=d?"".concat(d):"",this._workspace_roots.length>1&&f&&(v=n.basename(f),m=d?"".concat(v," • ").concat(d):v),e.next=21,this._calculate_file_tokens(c);case 21:g=e.sent,y=new I(l,s,t.TreeItemCollapsibleState.None,!1,p,!1,!1,!0,g,m),r.push(y);case 24:e.next=5;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(3),i.e(e.t0);case 31:return e.prev=31,i.f(),e.finish(31);case 34:return e.abrupt("return",r);case 35:case"end":return e.stop()}}),e,this,[[3,28,31,34]])}))),function(){return p.apply(this,arguments)})},{key:"_open_file_in_non_preview_mode",value:(l=ie(ne().mark((function e(r){var n;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.fsPath,!this._non_preview_files.has(n)){e.next=3;break}return e.abrupt("return");case 3:return this._non_preview_files.add(n),e.prev=4,e.next=7,t.window.showTextDocument(r,{preview:!1});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error("Error opening file in non-preview mode for ".concat(n,":"),e.t0);case 12:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e){return l.apply(this,arguments)})},{key:"update_check_state",value:(s=ie(ne().mark((function e(r,n){var o;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.resourceUri.fsPath,this._checked_items.set(o,n),n!==t.TreeItemCheckboxState.Checked||!0!==this._preview_tabs.get(o)){e.next=5;break}return e.next=5,this._open_file_in_non_preview_mode(r.resourceUri);case 5:this._on_did_change_checked_files.fire(),this.refresh();case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"clear_checks",value:function(){var e,r=se(this._get_open_editors());try{for(r.s();!(e=r.n()).done;){var n=e.value.fsPath;this._is_file_in_any_workspace(n)&&this._checked_items.set(n,t.TreeItemCheckboxState.Unchecked)}}catch(e){r.e(e)}finally{r.f()}this._file_token_counts.clear(),this._on_did_change_tree_data.fire(void 0),this._on_did_change_checked_files.fire()}},{key:"check_all",value:(a=ie(ne().mark((function e(){var r,n,o,i,a;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this._get_open_editors(),n=se(r),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=17;break}if(i=o.value,a=i.fsPath,this._is_file_in_any_workspace(a)){e.next=9;break}return e.abrupt("continue",15);case 9:if(!u(a,this._ignored_extensions)){e.next=11;break}return e.abrupt("continue",15);case 11:if(this._checked_items.set(a,t.TreeItemCheckboxState.Checked),!0!==this._preview_tabs.get(a)){e.next=15;break}return e.next=15,this._open_file_in_non_preview_mode(i);case 15:e.next=4;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),n.e(e.t0);case 22:return e.prev=22,n.f(),e.finish(22);case 25:this._file_token_counts.clear(),this._on_did_change_tree_data.fire(void 0),this._on_did_change_checked_files.fire();case 28:case"end":return e.stop()}}),e,this,[[2,19,22,25]])}))),function(){return a.apply(this,arguments)})},{key:"get_checked_files",value:function(){return Array.from(this._checked_items.entries()).filter((function(e){var n=re(e,2),o=n[0];return n[1]===t.TreeItemCheckboxState.Checked&&r.existsSync(o)&&(r.lstatSync(o).isFile()||r.lstatSync(o).isSymbolicLink())})).map((function(e){var t=re(e,2),r=t[0];return t[1],r}))}},{key:"set_checked_files",value:(i=ie(ne().mark((function e(n){var o,i,a;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._checked_items.clear(),o=se(n),e.prev=2,o.s();case 4:if((i=o.n()).done){e.next=16;break}if(a=i.value,r.existsSync(a)){e.next=8;break}return e.abrupt("continue",14);case 8:if(!u(a,this._ignored_extensions)){e.next=10;break}return e.abrupt("continue",14);case 10:if(this._checked_items.set(a,t.TreeItemCheckboxState.Checked),!0!==this._preview_tabs.get(a)){e.next=14;break}return e.next=14,this._open_file_in_non_preview_mode(t.Uri.file(a));case 14:e.next=4;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),o.e(e.t0);case 21:return e.prev=21,o.f(),e.finish(21);case 24:this.refresh(),this._on_did_change_checked_files.fire();case 26:case"end":return e.stop()}}),e,this,[[2,18,21,24]])}))),function(e){return i.apply(this,arguments)})},{key:"is_initialized",value:function(){return this._initialized}}],o&&le(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,o,i,a,s,l,p,h,f}();function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function me(){me=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==de(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(de(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function ve(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ye(e,t,r){return(t=xe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xe(n.key),n)}}function we(e,t,r){return t&&be(e.prototype,t),r&&be(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xe(e){var t=function(e){if("object"!=de(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=de(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==de(t)?t:t+""}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t,r){return t=Se(t),function(e,t){if(t&&("object"==de(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ee()?Reflect.construct(t,r||[],Se(e).constructor):t.apply(e,r))}function Ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ee=function(){return!!e})()}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Se(e)}function Oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Te(e,t)}function Te(e,t){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Te(e,t)}var je=function(e){function r(e,n,o,i){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.TreeItemCheckboxState.Unchecked;_e(this,r),(a=ke(this,r,[e,t.TreeItemCollapsibleState.None])).title=e,a.url=n,a.content=o,a.favicon=i,a.checkboxState=s,a.token_count=Math.floor(o.length/4);var c=a.token_count>=1e3?"".concat(Math.floor(a.token_count/1e3),"k"):"".concat(a.token_count);return a.tooltip="".concat(e," - About ").concat(c," tokens"),a.description=c,a.iconPath=i?t.Uri.parse(i):new t.ThemeIcon("globe"),a.command={command:"codeWebChat.previewWebsite",title:"Preview Website Content",arguments:[a]},a.contextValue="website",a}return Oe(r,e),we(r)}(t.TreeItem),Ce=function(e){function r(){var e;return _e(this,r),(e=ke(this,r,["No websites available for context",t.TreeItemCollapsibleState.None])).description="Use browser extension to add some",e.tooltip="Use browser extension to add some",e.iconPath=new t.ThemeIcon("info"),e.contextValue="empty",e}return Oe(r,e),we(r)}(t.TreeItem),Pe=function(){return we((function e(){_e(this,e),ye(this,"_websites",[]),ye(this,"_checked_websites",new Map),ye(this,"_onDidChangeTreeData",new t.EventEmitter),ye(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),ye(this,"_onDidChangeCheckedWebsites",new t.EventEmitter),ye(this,"onDidChangeCheckedWebsites",this._onDidChangeCheckedWebsites.event)}),[{key:"update_websites",value:function(e){var t,r=new Set(e.map((function(e){return e.url}))),n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ge(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ge(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(this._checked_websites.keys());try{for(n.s();!(t=n.n()).done;){var o=t.value;r.has(o)||this._checked_websites.delete(o)}}catch(e){n.e(e)}finally{n.f()}this._websites=e,this._onDidChangeTreeData.fire(),this._onDidChangeCheckedWebsites.fire()}},{key:"getTreeItem",value:function(e){var r;if(e instanceof Ce)return e;var n=null!==(r=this._checked_websites.get(e.url))&&void 0!==r?r:t.TreeItemCheckboxState.Unchecked;return e.checkboxState=n,e}},{key:"getChildren",value:function(){var e=this;return 0==this._websites.length?Promise.resolve([new Ce]):Promise.resolve(this._websites.map((function(r){var n;return new je(r.title||r.url,r.url,r.content,r.favicon||"",null!==(n=e._checked_websites.get(r.url))&&void 0!==n?n:t.TreeItemCheckboxState.Unchecked)})))}},{key:"get_checked_websites",value:function(){var e=this;return this._websites.filter((function(r){return e._checked_websites.get(r.url)===t.TreeItemCheckboxState.Checked}))}},{key:"get_checked_websites_token_count",value:function(){return this.get_checked_websites().map((function(e){return Math.floor(e.content.length/4)})).reduce((function(e,t){return e+t}),0)}},{key:"update_check_state",value:(e=me().mark((function e(t,r){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._checked_websites.set(t.url,r),this._onDidChangeCheckedWebsites.fire(),this._onDidChangeTreeData.fire();case 3:case"end":return e.stop()}}),e,this)})),r=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ve(i,n,o,a,s,"next",e)}function s(e){ve(i,n,o,a,s,"throw",e)}a(void 0)}))},function(e,t){return r.apply(this,arguments)})},{key:"dispose",value:function(){this._onDidChangeTreeData.dispose(),this._onDidChangeCheckedWebsites.dispose()}}]);var e,r}();let Ae={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Ie(e){Ae=e}const Ne={exec:()=>null};function Fe(e,t=""){let r="string"==typeof e?e:e.source;const n={replace:(e,t)=>{let o="string"==typeof t?t:t.source;return o=o.replace(De.caret,"$1"),r=r.replace(e,o),n},getRegex:()=>new RegExp(r,t)};return n}const De={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},Re=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Le=/(?:[*+-]|\d{1,9}[.)])/,Ge=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,qe=Fe(Ge).replace(/bull/g,Le).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Me=Fe(Ge).replace(/bull/g,Le).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Ue=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Be=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ze=Fe(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Be).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),We=Fe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Le).getRegex(),$e="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ve=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,He=Fe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",Ve).replace("tag",$e).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ye=Fe(Ue).replace("hr",Re).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$e).getRegex(),Je={blockquote:Fe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ye).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:ze,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Re,html:He,lheading:qe,list:We,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:Ye,table:Ne,text:/^[^\n]+/},Ke=Fe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Re).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$e).getRegex(),Qe={...Je,lheading:Me,table:Ke,paragraph:Fe(Ue).replace("hr",Re).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Ke).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$e).getRegex()},Ze={...Je,html:Fe("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Ve).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ne,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Fe(Ue).replace("hr",Re).replace("heading"," *#{1,6} *[^\n]").replace("lheading",qe).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Xe=/^( {2,}|\\)\n(?!\s*$)/,et=/[\p{P}\p{S}]/u,tt=/[\s\p{P}\p{S}]/u,rt=/[^\s\p{P}\p{S}]/u,nt=Fe(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,tt).getRegex(),ot=/(?!~)[\p{P}\p{S}]/u,it=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,at=Fe(it,"u").replace(/punct/g,et).getRegex(),st=Fe(it,"u").replace(/punct/g,ot).getRegex(),ct="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",ut=Fe(ct,"gu").replace(/notPunctSpace/g,rt).replace(/punctSpace/g,tt).replace(/punct/g,et).getRegex(),lt=Fe(ct,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,ot).getRegex(),pt=Fe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,rt).replace(/punctSpace/g,tt).replace(/punct/g,et).getRegex(),ht=Fe(/\\(punct)/,"gu").replace(/punct/g,et).getRegex(),ft=Fe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),dt=Fe(Ve).replace("(?:--\x3e|$)","--\x3e").getRegex(),mt=Fe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",dt).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),vt=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,gt=Fe(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",vt).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),yt=Fe(/^!?\[(label)\]\[(ref)\]/).replace("label",vt).replace("ref",Be).getRegex(),bt=Fe(/^!?\[(ref)\](?:\[\])?/).replace("ref",Be).getRegex(),wt={_backpedal:Ne,anyPunctuation:ht,autolink:ft,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:Xe,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Ne,emStrongLDelim:at,emStrongRDelimAst:ut,emStrongRDelimUnd:pt,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:gt,nolink:bt,punctuation:nt,reflink:yt,reflinkSearch:Fe("reflink|nolink(?!\\()","g").replace("reflink",yt).replace("nolink",bt).getRegex(),tag:mt,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Ne},xt={...wt,link:Fe(/^!?\[(label)\]\((.*?)\)/).replace("label",vt).getRegex(),reflink:Fe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",vt).getRegex()},_t={...wt,emStrongRDelimAst:lt,emStrongLDelim:st,url:Fe(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},kt={..._t,br:Fe(Xe).replace("{2,}","*").getRegex(),text:Fe(_t.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Et={normal:Je,gfm:Qe,pedantic:Ze},St={normal:wt,gfm:_t,breaks:kt,pedantic:xt},Ot={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Tt=e=>Ot[e];function jt(e,t){if(t){if(De.escapeTest.test(e))return e.replace(De.escapeReplace,Tt)}else if(De.escapeTestNoEncode.test(e))return e.replace(De.escapeReplaceNoEncode,Tt);return e}function Ct(e){try{e=encodeURI(e).replace(De.percentDecode,"%")}catch{return null}return e}function Pt(e,t){const r=e.replace(De.findPipe,((e,t,r)=>{let n=!1,o=t;for(;--o>=0&&"\\"===r[o];)n=!n;return n?"|":" |"})).split(De.splitPipe);let n=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;n<r.length;n++)r[n]=r[n].trim().replace(De.slashPipe,"|");return r}function At(e,t,r){const n=e.length;if(0===n)return"";let o=0;for(;o<n&&e.charAt(n-o-1)===t;)o++;return e.slice(0,n-o)}function It(e,t,r,n,o){const i=t.href,a=t.title||null,s=e[1].replace(o.other.outputLinkReplace,"$1");n.state.inLink=!0;const c={type:"!"===e[0].charAt(0)?"image":"link",raw:r,href:i,title:a,text:s,tokens:n.inlineTokens(s)};return n.state.inLink=!1,c}class Nt{options;rules;lexer;constructor(e){this.options=e||Ae}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:At(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],r=function(e,t,r){const n=e.match(r.other.indentCodeCompensation);if(null===n)return t;const o=n[1];return t.split("\n").map((e=>{const t=e.match(r.other.beginningSpace);if(null===t)return e;const[n]=t;return n.length>=o.length?e.slice(o.length):e})).join("\n")}(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){const t=At(e,"#");this.options.pedantic?e=t.trim():t&&!this.rules.other.endingSpaceChar.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:At(t[0],"\n")}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let e=At(t[0],"\n").split("\n"),r="",n="";const o=[];for(;e.length>0;){let t=!1;const i=[];let a;for(a=0;a<e.length;a++)if(this.rules.other.blockquoteStart.test(e[a]))i.push(e[a]),t=!0;else{if(t)break;i.push(e[a])}e=e.slice(a);const s=i.join("\n"),c=s.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}\n${s}`:s,n=n?`${n}\n${c}`:c;const u=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,o,!0),this.lexer.state.top=u,0===e.length)break;const l=o.at(-1);if("code"===l?.type)break;if("blockquote"===l?.type){const t=l,i=t.raw+"\n"+e.join("\n"),a=this.blockquote(i);o[o.length-1]=a,r=r.substring(0,r.length-t.raw.length)+a.raw,n=n.substring(0,n.length-t.text.length)+a.text;break}if("list"!==l?.type);else{const t=l,i=t.raw+"\n"+e.join("\n"),a=this.list(i);o[o.length-1]=a,r=r.substring(0,r.length-l.raw.length)+a.raw,n=n.substring(0,n.length-t.raw.length)+a.raw,e=i.substring(o.at(-1).raw.length).split("\n")}}return{type:"blockquote",raw:r,tokens:o,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const n=r.length>1,o={type:"list",raw:"",ordered:n,start:n?+r.slice(0,-1):"",loose:!1,items:[]};r=n?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=n?r:"[*+-]");const i=this.rules.other.listItemRegex(r);let a=!1;for(;e;){let r=!1,n="",s="";if(!(t=i.exec(e)))break;if(this.rules.block.hr.test(e))break;n=t[0],e=e.substring(n.length);let c=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,(e=>" ".repeat(3*e.length))),u=e.split("\n",1)[0],l=!c.trim(),p=0;if(this.options.pedantic?(p=2,s=c.trimStart()):l?p=t[1].length+1:(p=t[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,s=c.slice(p),p+=t[1].length),l&&this.rules.other.blankLine.test(u)&&(n+=u+"\n",e=e.substring(u.length+1),r=!0),!r){const t=this.rules.other.nextBulletRegex(p),r=this.rules.other.hrRegex(p),o=this.rules.other.fencesBeginRegex(p),i=this.rules.other.headingBeginRegex(p),a=this.rules.other.htmlBeginRegex(p);for(;e;){const h=e.split("\n",1)[0];let f;if(u=h,this.options.pedantic?(u=u.replace(this.rules.other.listReplaceNesting,"  "),f=u):f=u.replace(this.rules.other.tabCharGlobal,"    "),o.test(u))break;if(i.test(u))break;if(a.test(u))break;if(t.test(u))break;if(r.test(u))break;if(f.search(this.rules.other.nonSpaceChar)>=p||!u.trim())s+="\n"+f.slice(p);else{if(l)break;if(c.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4)break;if(o.test(c))break;if(i.test(c))break;if(r.test(c))break;s+="\n"+u}l||u.trim()||(l=!0),n+=h+"\n",e=e.substring(h.length+1),c=f.slice(p)}}o.loose||(a?o.loose=!0:this.rules.other.doubleBlankLine.test(n)&&(a=!0));let h,f=null;this.options.gfm&&(f=this.rules.other.listIsTask.exec(s),f&&(h="[ ] "!==f[0],s=s.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:n,task:!!f,checked:h,loose:!1,text:s,tokens:[]}),o.raw+=n}const s=o.items.at(-1);if(!s)return;s.raw=s.raw.trimEnd(),s.text=s.text.trimEnd(),o.raw=o.raw.trimEnd();for(let e=0;e<o.items.length;e++)if(this.lexer.state.top=!1,o.items[e].tokens=this.lexer.blockTokens(o.items[e].text,[]),!o.loose){const t=o.items[e].tokens.filter((e=>"space"===e.type)),r=t.length>0&&t.some((e=>this.rules.other.anyLine.test(e.raw)));o.loose=r}if(o.loose)for(let e=0;e<o.items.length;e++)o.items[e].loose=!0;return o}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:r,title:n}}}table(e){const t=this.rules.block.table.exec(e);if(!t)return;if(!this.rules.other.tableDelimiter.test(t[2]))return;const r=Pt(t[1]),n=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===n.length){for(const e of n)this.rules.other.tableAlignRight.test(e)?i.align.push("right"):this.rules.other.tableAlignCenter.test(e)?i.align.push("center"):this.rules.other.tableAlignLeft.test(e)?i.align.push("left"):i.align.push(null);for(let e=0;e<r.length;e++)i.header.push({text:r[e],tokens:this.lexer.inline(r[e]),header:!0,align:i.align[e]});for(const e of o)i.rows.push(Pt(e,i.header.length).map(((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:i.align[t]}))));return i}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;const t=At(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let r=0;for(let n=0;n<e.length;n++)if("\\"===e[n])n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&(r--,r<0))return n;return r>0?-2:-1}(t[2],"()");if(-2===e)return;if(e>-1){const r=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,r).trim(),t[3]=""}}let r=t[2],n="";if(this.options.pedantic){const e=this.rules.other.pedanticHrefTitle.exec(r);e&&(r=e[1],n=e[3])}else n=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(r=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?r.slice(1):r.slice(1,-1)),It(t,{href:r?r.replace(this.rules.inline.anyPunctuation,"$1"):r,title:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const e=t[(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){const e=r[0].charAt(0);return{type:"text",raw:e,text:e}}return It(r,e,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(n&&(!n[3]||!r.match(this.rules.other.unicodeAlphaNumeric))&&(!n[1]&&!n[2]||!r||this.rules.inline.punctuation.exec(r))){const r=[...n[0]].length-1;let o,i,a=r,s=0;const c="*"===n[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+r);null!=(n=c.exec(t));){if(o=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!o)continue;if(i=[...o].length,n[3]||n[4]){a+=i;continue}if((n[5]||n[6])&&r%3&&!((r+i)%3)){s+=i;continue}if(a-=i,a>0)continue;i=Math.min(i,i+a+s);const t=[...n[0]][0].length,c=e.slice(0,r+n.index+t+i);if(Math.min(r,i)%2){const e=c.slice(1,-1);return{type:"em",raw:c,text:e,tokens:this.lexer.inlineTokens(e)}}const u=c.slice(2,-2);return{type:"strong",raw:c,text:u,tokens:this.lexer.inlineTokens(u)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(e),n=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return r&&n&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,r;return"@"===t[2]?(e=t[1],r="mailto:"+e):(e=t[1],r=e),{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,r;if("@"===t[2])e=t[0],r="mailto:"+e;else{let n;do{n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(n!==t[0]);e=t[0],r="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}}class Ft{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ae,this.options.tokenizer=this.options.tokenizer||new Nt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:De,block:Et.normal,inline:St.normal};this.options.pedantic?(t.block=Et.pedantic,t.inline=St.pedantic):this.options.gfm&&(t.block=Et.gfm,this.options.breaks?t.inline=St.breaks:t.inline=St.gfm),this.tokenizer.rules=t}static get rules(){return{block:Et,inline:St}}static lex(e,t){return new Ft(t).lex(e)}static lexInline(e,t){return new Ft(t).inlineTokens(e)}lex(e){e=e.replace(De.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){for(this.options.pedantic&&(e=e.replace(De.tabCharGlobal,"    ").replace(De.spaceLine,""));e;){let n;if(this.options.extensions?.block?.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);const r=t.at(-1);1===n.raw.length&&void 0!==r?r.raw+="\n":t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);const r=t.at(-1);"paragraph"===r?.type||"text"===r?.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.at(-1).src=r.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);const r=t.at(-1);"paragraph"===r?.type||"text"===r?.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue.at(-1).src=r.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}let o=e;if(this.options.extensions?.startBlock){let t=1/0;const r=e.slice(1);let n;this.options.extensions.startBlock.forEach((e=>{n=e.call({lexer:this},r),"number"==typeof n&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(o=e.substring(0,t+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o))){const i=t.at(-1);r&&"paragraph"===i?.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):t.push(n),r=o.length!==e.length,e=e.substring(n.raw.length)}else if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);const r=t.at(-1);"text"===r?.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):t.push(n)}else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r=e,n=null;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(n=this.tokenizer.rules.inline.reflinkSearch.exec(r));)e.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(n=this.tokenizer.rules.inline.anyPunctuation.exec(r));)r=r.slice(0,n.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(n=this.tokenizer.rules.inline.blockSkip.exec(r));)r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let o=!1,i="";for(;e;){let n;if(o||(i=""),o=!1,this.options.extensions?.inline?.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))continue;if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length);const r=t.at(-1);"text"===n.type&&"text"===r?.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(e,r,i)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}let a=e;if(this.options.extensions?.startInline){let t=1/0;const r=e.slice(1);let n;this.options.extensions.startInline.forEach((e=>{n=e.call({lexer:this},r),"number"==typeof n&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(a=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(a)){e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(i=n.raw.slice(-1)),o=!0;const r=t.at(-1);"text"===r?.type?(r.raw+=n.raw,r.text+=n.text):t.push(n)}else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}}class Dt{options;parser;constructor(e){this.options=e||Ae}space(e){return""}code({text:e,lang:t,escaped:r}){const n=(t||"").match(De.notSpaceStart)?.[0],o=e.replace(De.endingNewline,"")+"\n";return n?'<pre><code class="language-'+jt(n)+'">'+(r?o:jt(o,!0))+"</code></pre>\n":"<pre><code>"+(r?o:jt(o,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){const t=e.ordered,r=e.start;let n="";for(let t=0;t<e.items.length;t++){const r=e.items[t];n+=this.listitem(r)}const o=t?"ol":"ul";return"<"+o+(t&&1!==r?' start="'+r+'"':"")+">\n"+n+"</"+o+">\n"}listitem(e){let t="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?"paragraph"===e.tokens[0]?.type?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=r+" "+jt(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",r="";for(let t=0;t<e.header.length;t++)r+=this.tablecell(e.header[t]);t+=this.tablerow({text:r});let n="";for(let t=0;t<e.rows.length;t++){const o=e.rows[t];r="";for(let e=0;e<o.length;e++)r+=this.tablecell(o[e]);n+=this.tablerow({text:r})}return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+n+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){const t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${jt(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){const n=this.parser.parseInline(r),o=Ct(e);if(null===o)return n;let i='<a href="'+(e=o)+'"';return t&&(i+=' title="'+jt(t)+'"'),i+=">"+n+"</a>",i}image({href:e,title:t,text:r,tokens:n}){n&&(r=this.parser.parseInline(n,this.parser.textRenderer));const o=Ct(e);if(null===o)return jt(r);let i=`<img src="${e=o}" alt="${r}"`;return t&&(i+=` title="${jt(t)}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:jt(e.text)}}class Rt{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class Lt{options;renderer;textRenderer;constructor(e){this.options=e||Ae,this.options.renderer=this.options.renderer||new Dt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Rt}static parse(e,t){return new Lt(t).parse(e)}static parseInline(e,t){return new Lt(t).parseInline(e)}parse(e,t=!0){let r="";for(let n=0;n<e.length;n++){const o=e[n];if(this.options.extensions?.renderers?.[o.type]){const e=o,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){r+=t||"";continue}}const i=o;switch(i.type){case"space":r+=this.renderer.space(i);continue;case"hr":r+=this.renderer.hr(i);continue;case"heading":r+=this.renderer.heading(i);continue;case"code":r+=this.renderer.code(i);continue;case"table":r+=this.renderer.table(i);continue;case"blockquote":r+=this.renderer.blockquote(i);continue;case"list":r+=this.renderer.list(i);continue;case"html":r+=this.renderer.html(i);continue;case"paragraph":r+=this.renderer.paragraph(i);continue;case"text":{let o=i,a=this.renderer.text(o);for(;n+1<e.length&&"text"===e[n+1].type;)o=e[++n],a+="\n"+this.renderer.text(o);r+=t?this.renderer.paragraph({type:"paragraph",raw:a,text:a,tokens:[{type:"text",raw:a,text:a,escaped:!0}]}):a;continue}default:{const e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return r}parseInline(e,t=this.renderer){let r="";for(let n=0;n<e.length;n++){const o=e[n];if(this.options.extensions?.renderers?.[o.type]){const e=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=e||"";continue}}const i=o;switch(i.type){case"escape":case"text":r+=t.text(i);break;case"html":r+=t.html(i);break;case"link":r+=t.link(i);break;case"image":r+=t.image(i);break;case"strong":r+=t.strong(i);break;case"em":r+=t.em(i);break;case"codespan":r+=t.codespan(i);break;case"br":r+=t.br(i);break;case"del":r+=t.del(i);break;default:{const e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return r}}class Gt{options;block;constructor(e){this.options=e||Ae}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Ft.lex:Ft.lexInline}provideParser(){return this.block?Lt.parse:Lt.parseInline}}const qt=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Lt;Renderer=Dt;TextRenderer=Rt;Lexer=Ft;Tokenizer=Nt;Hooks=Gt;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(const n of e)switch(r=r.concat(t.call(this,n)),n.type){case"table":{const e=n;for(const n of e.header)r=r.concat(this.walkTokens(n.tokens,t));for(const n of e.rows)for(const e of n)r=r.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=n;r=r.concat(this.walkTokens(e.items,t));break}default:{const e=n;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((n=>{const o=e[n].flat(1/0);r=r.concat(this.walkTokens(o,t))})):e.tokens&&(r=r.concat(this.walkTokens(e.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{const r={...e};if(r.async=this.defaults.async||r.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){const r=t.renderers[e.name];t.renderers[e.name]=r?function(...t){let n=e.renderer.apply(this,t);return!1===n&&(n=r.apply(this,t)),n}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");const r=t[e.level];r?r.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),r.extensions=t),e.renderer){const t=this.defaults.renderer||new Dt(this.defaults);for(const r in e.renderer){if(!(r in t))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;const n=r,o=e.renderer[n],i=t[n];t[n]=(...e)=>{let r=o.apply(t,e);return!1===r&&(r=i.apply(t,e)),r||""}}r.renderer=t}if(e.tokenizer){const t=this.defaults.tokenizer||new Nt(this.defaults);for(const r in e.tokenizer){if(!(r in t))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;const n=r,o=e.tokenizer[n],i=t[n];t[n]=(...e)=>{let r=o.apply(t,e);return!1===r&&(r=i.apply(t,e)),r}}r.tokenizer=t}if(e.hooks){const t=this.defaults.hooks||new Gt;for(const r in e.hooks){if(!(r in t))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;const n=r,o=e.hooks[n],i=t[n];Gt.passThroughHooks.has(r)?t[n]=e=>{if(this.defaults.async)return Promise.resolve(o.call(t,e)).then((e=>i.call(t,e)));const r=o.call(t,e);return i.call(t,r)}:t[n]=(...e)=>{let r=o.apply(t,e);return!1===r&&(r=i.apply(t,e)),r}}r.hooks=t}if(e.walkTokens){const t=this.defaults.walkTokens,n=e.walkTokens;r.walkTokens=function(e){let r=[];return r.push(n.call(this,e)),t&&(r=r.concat(t.call(this,e))),r}}this.defaults={...this.defaults,...r}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Ft.lex(e,t??this.defaults)}parser(e,t){return Lt.parse(e,t??this.defaults)}parseMarkdown(e){return(t,r)=>{const n={...r},o={...this.defaults,...n},i=this.onError(!!o.silent,!!o.async);if(!0===this.defaults.async&&!1===n.async)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(null==t)return i(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);const a=o.hooks?o.hooks.provideLexer():e?Ft.lex:Ft.lexInline,s=o.hooks?o.hooks.provideParser():e?Lt.parse:Lt.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(t):t).then((e=>a(e,o))).then((e=>o.hooks?o.hooks.processAllTokens(e):e)).then((e=>o.walkTokens?Promise.all(this.walkTokens(e,o.walkTokens)).then((()=>e)):e)).then((e=>s(e,o))).then((e=>o.hooks?o.hooks.postprocess(e):e)).catch(i);try{o.hooks&&(t=o.hooks.preprocess(t));let e=a(t,o);o.hooks&&(e=o.hooks.processAllTokens(e)),o.walkTokens&&this.walkTokens(e,o.walkTokens);let r=s(e,o);return o.hooks&&(r=o.hooks.postprocess(r)),r}catch(e){return i(e)}}}onError(e,t){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+jt(r.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(r);throw r}}};function Mt(e,t){return qt.parse(e,t)}Mt.options=Mt.setOptions=function(e){return qt.setOptions(e),Mt.defaults=qt.defaults,Ie(Mt.defaults),Mt},Mt.getDefaults=function(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Mt.defaults=Ae,Mt.use=function(...e){return qt.use(...e),Mt.defaults=qt.defaults,Ie(Mt.defaults),Mt},Mt.walkTokens=function(e,t){return qt.walkTokens(e,t)},Mt.parseInline=qt.parseInline,Mt.Parser=Lt,Mt.parser=Lt.parse,Mt.Renderer=Dt,Mt.TextRenderer=Rt,Mt.Lexer=Ft,Mt.lexer=Ft.lex,Mt.Tokenizer=Nt,Mt.Hooks=Gt,Mt.parse=Mt,Mt.options,Mt.setOptions,Mt.use,Mt.walkTokens,Mt.parseInline,Lt.parse,Ft.lex;var Ut=o(4434),Bt=o(4807);const zt=e=>{if("string"!=typeof e)throw new TypeError("invalid pattern");if(e.length>65536)throw new TypeError("pattern is too long")},Wt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},$t=e=>e.replace(/[[\]\\-]/g,"\\$&"),Vt=e=>e.join(""),Ht=(e,t)=>{const r=t;if("["!==e.charAt(r))throw new Error("not in a brace expression");const n=[],o=[];let i=r+1,a=!1,s=!1,c=!1,u=!1,l=r,p="";e:for(;i<e.length;){const t=e.charAt(i);if("!"!==t&&"^"!==t||i!==r+1){if("]"===t&&a&&!c){l=i+1;break}if(a=!0,"\\"!==t||c){if("["===t&&!c)for(const[t,[a,c,u]]of Object.entries(Wt))if(e.startsWith(t,i)){if(p)return["$.",!1,e.length-r,!0];i+=t.length,u?o.push(a):n.push(a),s=s||c;continue e}c=!1,p?(t>p?n.push($t(p)+"-"+$t(t)):t===p&&n.push($t(t)),p="",i++):e.startsWith("-]",i+1)?(n.push($t(t+"-")),i+=2):e.startsWith("-",i+1)?(p=t,i+=2):(n.push($t(t)),i++)}else c=!0,i++}else u=!0,i++}if(l<i)return["",!1,0,!1];if(!n.length&&!o.length)return["$.",!1,e.length-r,!0];if(0===o.length&&1===n.length&&/^\\?.$/.test(n[0])&&!u){return[(h=2===n[0].length?n[0].slice(-1):n[0],h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),!1,l-r,!1]}var h;const f="["+(u?"^":"")+Vt(n)+"]",d="["+(u?"":"^")+Vt(o)+"]";return[n.length&&o.length?"("+f+"|"+d+")":n.length?f:d,s,l-r,!0]},Yt=(e,{windowsPathsNoEscape:t=!1}={})=>t?e.replace(/\[([^\/\\])\]/g,"$1"):e.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),Jt=new Set(["!","?","+","*","@"]),Kt=e=>Jt.has(e),Qt="(?!\\.)",Zt=new Set(["[","."]),Xt=new Set(["..","."]),er=new Set("().*{}+?[]^$\\!"),tr="[^/]",rr=tr+"*?",nr=tr+"+?";class or{type;#e;#t;#r=!1;#n=[];#o;#i;#a;#s=!1;#c;#u;#l=!1;constructor(e,t,r={}){this.type=e,e&&(this.#t=!0),this.#o=t,this.#e=this.#o?this.#o.#e:this,this.#c=this.#e===this?r:this.#e.#c,this.#a=this.#e===this?[]:this.#e.#a,"!"!==e||this.#e.#s||this.#a.push(this),this.#i=this.#o?this.#o.#n.length:0}get hasMagic(){if(void 0!==this.#t)return this.#t;for(const e of this.#n)if("string"!=typeof e&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return void 0!==this.#u?this.#u:this.type?this.#u=this.type+"("+this.#n.map((e=>String(e))).join("|")+")":this.#u=this.#n.map((e=>String(e))).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#s)return this;let e;for(this.toString(),this.#s=!0;e=this.#a.pop();){if("!"!==e.type)continue;let t=e,r=t.#o;for(;r;){for(let n=t.#i+1;!r.type&&n<r.#n.length;n++)for(const t of e.#n){if("string"==typeof t)throw new Error("string part in extglob AST??");t.copyIn(r.#n[n])}t=r,r=t.#o}}return this}push(...e){for(const t of e)if(""!==t){if("string"!=typeof t&&!(t instanceof or&&t.#o===this))throw new Error("invalid part: "+t);this.#n.push(t)}}toJSON(){const e=null===this.type?this.#n.slice().map((e=>"string"==typeof e?e:e.toJSON())):[this.type,...this.#n.map((e=>e.toJSON()))];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#s&&"!"===this.#o?.type)&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#o?.isStart())return!1;if(0===this.#i)return!0;const e=this.#o;for(let t=0;t<this.#i;t++){const r=e.#n[t];if(!(r instanceof or&&"!"===r.type))return!1}return!0}isEnd(){if(this.#e===this)return!0;if("!"===this.#o?.type)return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();const e=this.#o?this.#o.#n.length:0;return this.#i===e-1}copyIn(e){"string"==typeof e?this.push(e):this.push(e.clone(this))}clone(e){const t=new or(this.type,e);for(const e of this.#n)t.copyIn(e);return t}static#h(e,t,r,n){let o=!1,i=!1,a=-1,s=!1;if(null===t.type){let c=r,u="";for(;c<e.length;){const r=e.charAt(c++);if(o||"\\"===r)o=!o,u+=r;else if(i)c===a+1?"^"!==r&&"!"!==r||(s=!0):"]"!==r||c===a+2&&s||(i=!1),u+=r;else if("["!==r)if(n.noext||!Kt(r)||"("!==e.charAt(c))u+=r;else{t.push(u),u="";const o=new or(r,t);c=or.#h(e,o,c,n),t.push(o)}else i=!0,a=c,s=!1,u+=r}return t.push(u),c}let c=r+1,u=new or(null,t);const l=[];let p="";for(;c<e.length;){const r=e.charAt(c++);if(o||"\\"===r)o=!o,p+=r;else if(i)c===a+1?"^"!==r&&"!"!==r||(s=!0):"]"!==r||c===a+2&&s||(i=!1),p+=r;else if("["!==r)if(Kt(r)&&"("===e.charAt(c)){u.push(p),p="";const t=new or(r,u);u.push(t),c=or.#h(e,t,c,n)}else if("|"!==r){if(")"===r)return""===p&&0===t.#n.length&&(t.#l=!0),u.push(p),p="",t.push(...l,u),c;p+=r}else u.push(p),p="",l.push(u),u=new or(null,t);else i=!0,a=c,s=!1,p+=r}return t.type=null,t.#t=void 0,t.#n=[e.substring(r-1)],c}static fromGlob(e,t={}){const r=new or(null,void 0,t);return or.#h(e,r,0,t),r}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();const e=this.toString(),[t,r,n,o]=this.toRegExpSource();if(!(n||this.#t||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;const i=(this.#c.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${t}$`,i),{_src:t,_glob:e})}get options(){return this.#c}toRegExpSource(e){const t=e??!!this.#c.dot;if(this.#e===this&&this.#p(),!this.type){const r=this.isStart()&&this.isEnd(),n=this.#n.map((t=>{const[n,o,i,a]="string"==typeof t?or.#f(t,this.#t,r):t.toRegExpSource(e);return this.#t=this.#t||i,this.#r=this.#r||a,n})).join("");let o="";if(this.isStart()&&"string"==typeof this.#n[0]&&(1!==this.#n.length||!Xt.has(this.#n[0]))){const r=Zt,i=t&&r.has(n.charAt(0))||n.startsWith("\\.")&&r.has(n.charAt(2))||n.startsWith("\\.\\.")&&r.has(n.charAt(4)),a=!t&&!e&&r.has(n.charAt(0));o=i?"(?!(?:^|/)\\.\\.?(?:$|/))":a?Qt:""}let i="";return this.isEnd()&&this.#e.#s&&"!"===this.#o?.type&&(i="(?:$|\\/)"),[o+n+i,Yt(n),this.#t=!!this.#t,this.#r]}const r="*"===this.type||"+"===this.type,n="!"===this.type?"(?:(?!(?:":"(?:";let o=this.#d(t);if(this.isStart()&&this.isEnd()&&!o&&"!"!==this.type){const e=this.toString();return this.#n=[e],this.type=null,this.#t=void 0,[e,Yt(this.toString()),!1,!1]}let i=!r||e||t?"":this.#d(!0);i===o&&(i=""),i&&(o=`(?:${o})(?:${i})*?`);let a="";return a="!"===this.type&&this.#l?(this.isStart()&&!t?Qt:"")+nr:n+o+("!"===this.type?"))"+(!this.isStart()||t||e?"":Qt)+rr+")":"@"===this.type?")":"?"===this.type?")?":"+"===this.type&&i?")":"*"===this.type&&i?")?":`)${this.type}`),[a,Yt(o),this.#t=!!this.#t,this.#r]}#d(e){return this.#n.map((t=>{if("string"==typeof t)throw new Error("string type in extglob ast??");const[r,n,o,i]=t.toRegExpSource(e);return this.#r=this.#r||i,r})).filter((e=>!(this.isStart()&&this.isEnd()&&!e))).join("|")}static#f(e,t,r=!1){let n=!1,o="",i=!1;for(let a=0;a<e.length;a++){const s=e.charAt(a);if(n)n=!1,o+=(er.has(s)?"\\":"")+s;else if("\\"!==s){if("["===s){const[r,n,s,c]=Ht(e,a);if(s){o+=r,i=i||n,a+=s-1,t=t||c;continue}}"*"!==s?"?"!==s?o+=s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):(o+=tr,t=!0):(o+=r&&"*"===e?nr:rr,t=!0)}else a===e.length-1?o+="\\\\":n=!0}return[o,Yt(e),!!t,i]}}const ir=(e,{windowsPathsNoEscape:t=!1}={})=>t?e.replace(/[?*()[\]]/g,"[$&]"):e.replace(/[?*()[\]\\]/g,"\\$&"),ar=(e,t,r={})=>(zt(t),!(!r.nocomment&&"#"===t.charAt(0))&&new Ir(t,r).match(e)),sr=/^\*+([^+@!?\*\[\(]*)$/,cr=e=>t=>!t.startsWith(".")&&t.endsWith(e),ur=e=>t=>t.endsWith(e),lr=e=>(e=e.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(e)),pr=e=>(e=e.toLowerCase(),t=>t.toLowerCase().endsWith(e)),hr=/^\*+\.\*+$/,fr=e=>!e.startsWith(".")&&e.includes("."),dr=e=>"."!==e&&".."!==e&&e.includes("."),mr=/^\.\*+$/,vr=e=>"."!==e&&".."!==e&&e.startsWith("."),gr=/^\*+$/,yr=e=>0!==e.length&&!e.startsWith("."),br=e=>0!==e.length&&"."!==e&&".."!==e,wr=/^\?+([^+@!?\*\[\(]*)?$/,xr=([e,t=""])=>{const r=Sr([e]);return t?(t=t.toLowerCase(),e=>r(e)&&e.toLowerCase().endsWith(t)):r},_r=([e,t=""])=>{const r=Or([e]);return t?(t=t.toLowerCase(),e=>r(e)&&e.toLowerCase().endsWith(t)):r},kr=([e,t=""])=>{const r=Or([e]);return t?e=>r(e)&&e.endsWith(t):r},Er=([e,t=""])=>{const r=Sr([e]);return t?e=>r(e)&&e.endsWith(t):r},Sr=([e])=>{const t=e.length;return e=>e.length===t&&!e.startsWith(".")},Or=([e])=>{const t=e.length;return e=>e.length===t&&"."!==e&&".."!==e},Tr="object"==typeof process&&process?"object"==typeof process.env&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix";ar.sep="win32"===Tr?"\\":"/";const jr=Symbol("globstar **");ar.GLOBSTAR=jr,ar.filter=(e,t={})=>r=>ar(r,e,t);const Cr=(e,t={})=>Object.assign({},e,t);ar.defaults=e=>{if(!e||"object"!=typeof e||!Object.keys(e).length)return ar;const t=ar;return Object.assign(((r,n,o={})=>t(r,n,Cr(e,o))),{Minimatch:class extends t.Minimatch{constructor(t,r={}){super(t,Cr(e,r))}static defaults(r){return t.defaults(Cr(e,r)).Minimatch}},AST:class extends t.AST{constructor(t,r,n={}){super(t,r,Cr(e,n))}static fromGlob(r,n={}){return t.AST.fromGlob(r,Cr(e,n))}},unescape:(r,n={})=>t.unescape(r,Cr(e,n)),escape:(r,n={})=>t.escape(r,Cr(e,n)),filter:(r,n={})=>t.filter(r,Cr(e,n)),defaults:r=>t.defaults(Cr(e,r)),makeRe:(r,n={})=>t.makeRe(r,Cr(e,n)),braceExpand:(r,n={})=>t.braceExpand(r,Cr(e,n)),match:(r,n,o={})=>t.match(r,n,Cr(e,o)),sep:t.sep,GLOBSTAR:jr})};const Pr=(e,t={})=>(zt(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:Bt(e));ar.braceExpand=Pr,ar.makeRe=(e,t={})=>new Ir(e,t).makeRe(),ar.match=(e,t,r={})=>{const n=new Ir(t,r);return e=e.filter((e=>n.match(e))),n.options.nonull&&!e.length&&e.push(t),e};const Ar=/[?*]|[+@!]\(.*?\)|\[|\]/;class Ir{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){zt(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||Tr,this.isWindows="win32"===this.platform,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||!1===t.allowWindowsEscape,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=void 0!==t.windowsNoMagicRoot?t.windowsNoMagicRoot:!(!this.isWindows||!this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const e of this.set)for(const t of e)if("string"!=typeof t)return!0;return!1}debug(...e){}make(){const e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...e)=>console.error(...e)),this.debug(this.pattern,this.globSet);const r=this.globSet.map((e=>this.slashSplit(e)));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let n=this.globParts.map(((e,t,r)=>{if(this.isWindows&&this.windowsNoMagicRoot){const t=!(""!==e[0]||""!==e[1]||"?"!==e[2]&&Ar.test(e[2])||Ar.test(e[3])),r=/^[a-z]:/i.test(e[0]);if(t)return[...e.slice(0,4),...e.slice(4).map((e=>this.parse(e)))];if(r)return[e[0],...e.slice(1).map((e=>this.parse(e)))]}return e.map((e=>this.parse(e)))}));if(this.debug(this.pattern,n),this.set=n.filter((e=>-1===e.indexOf(!1))),this.isWindows)for(let e=0;e<this.set.length;e++){const t=this.set[e];""===t[0]&&""===t[1]&&"?"===this.globParts[e][2]&&"string"==typeof t[3]&&/^[a-z]:$/i.test(t[3])&&(t[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let t=0;t<e.length;t++)for(let r=0;r<e[t].length;r++)"**"===e[t][r]&&(e[t][r]="*");const{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):e=t>=1?this.levelOneOptimize(e):this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map((e=>{let t=-1;for(;-1!==(t=e.indexOf("**",t+1));){let r=t;for(;"**"===e[r+1];)r++;r!==t&&e.splice(t,r-t)}return e}))}levelOneOptimize(e){return e.map((e=>0===(e=e.reduce(((e,t)=>{const r=e[e.length-1];return"**"===t&&"**"===r?e:".."===t&&r&&".."!==r&&"."!==r&&"**"!==r?(e.pop(),e):(e.push(t),e)}),[])).length?[""]:e))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let r=1;r<e.length-1;r++){const n=e[r];1===r&&""===n&&""===e[0]||"."!==n&&""!==n||(t=!0,e.splice(r,1),r--)}"."!==e[0]||2!==e.length||"."!==e[1]&&""!==e[1]||(t=!0,e.pop())}let r=0;for(;-1!==(r=e.indexOf("..",r+1));){const n=e[r-1];n&&"."!==n&&".."!==n&&"**"!==n&&(t=!0,e.splice(r-1,2),r-=2)}}while(t);return 0===e.length?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let r of e){let n=-1;for(;-1!==(n=r.indexOf("**",n+1));){let o=n;for(;"**"===r[o+1];)o++;o>n&&r.splice(n+1,o-n);let i=r[n+1];const a=r[n+2],s=r[n+3];if(".."!==i)continue;if(!a||"."===a||".."===a||!s||"."===s||".."===s)continue;t=!0,r.splice(n,1);const c=r.slice(0);c[n]="**",e.push(c),n--}if(!this.preserveMultipleSlashes){for(let e=1;e<r.length-1;e++){const n=r[e];1===e&&""===n&&""===r[0]||"."!==n&&""!==n||(t=!0,r.splice(e,1),e--)}"."!==r[0]||2!==r.length||"."!==r[1]&&""!==r[1]||(t=!0,r.pop())}let o=0;for(;-1!==(o=r.indexOf("..",o+1));){const e=r[o-1];if(e&&"."!==e&&".."!==e&&"**"!==e){t=!0;const e=1===o&&"**"===r[o+1]?["."]:[];r.splice(o-1,2,...e),0===r.length&&r.push(""),o-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let r=t+1;r<e.length;r++){const n=this.partsMatch(e[t],e[r],!this.preserveMultipleSlashes);if(n){e[t]=[],e[r]=n;break}}return e.filter((e=>e.length))}partsMatch(e,t,r=!1){let n=0,o=0,i=[],a="";for(;n<e.length&&o<t.length;)if(e[n]===t[o])i.push("b"===a?t[o]:e[n]),n++,o++;else if(r&&"**"===e[n]&&t[o]===e[n+1])i.push(e[n]),n++;else if(r&&"**"===t[o]&&e[n]===t[o+1])i.push(t[o]),o++;else if("*"!==e[n]||!t[o]||!this.options.dot&&t[o].startsWith(".")||"**"===t[o]){if("*"!==t[o]||!e[n]||!this.options.dot&&e[n].startsWith(".")||"**"===e[n])return!1;if("a"===a)return!1;a="b",i.push(t[o]),n++,o++}else{if("b"===a)return!1;a="a",i.push(e[n]),n++,o++}return e.length===t.length&&i}parseNegate(){if(this.nonegate)return;const e=this.pattern;let t=!1,r=0;for(let n=0;n<e.length&&"!"===e.charAt(n);n++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r=!1){const n=this.options;if(this.isWindows){const r="string"==typeof e[0]&&/^[a-z]:$/i.test(e[0]),n=!r&&""===e[0]&&""===e[1]&&"?"===e[2]&&/^[a-z]:$/i.test(e[3]),o="string"==typeof t[0]&&/^[a-z]:$/i.test(t[0]),i=n?3:r?0:void 0,a=!o&&""===t[0]&&""===t[1]&&"?"===t[2]&&"string"==typeof t[3]&&/^[a-z]:$/i.test(t[3])?3:o?0:void 0;if("number"==typeof i&&"number"==typeof a){const[r,n]=[e[i],t[a]];r.toLowerCase()===n.toLowerCase()&&(t[a]=r,a>i?t=t.slice(a):i>a&&(e=e.slice(i)))}}const{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,a=0,s=e.length,c=t.length;i<s&&a<c;i++,a++){this.debug("matchOne loop");var u=t[a],l=e[i];if(this.debug(t,u,l),!1===u)return!1;if(u===jr){this.debug("GLOBSTAR",[t,u,l]);var p=i,h=a+1;if(h===c){for(this.debug("** at the end");i<s;i++)if("."===e[i]||".."===e[i]||!n.dot&&"."===e[i].charAt(0))return!1;return!0}for(;p<s;){var f=e[p];if(this.debug("\nglobstar while",e,p,t,h,f),this.matchOne(e.slice(p),t.slice(h),r))return this.debug("globstar found match!",p,s,f),!0;if("."===f||".."===f||!n.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,p,t,h);break}this.debug("globstar swallow a segment, and continue"),p++}return!(!r||(this.debug("\n>>> no match, partial?",e,p,t,h),p!==s))}let o;if("string"==typeof u?(o=l===u,this.debug("string match",u,l,o)):(o=u.test(l),this.debug("pattern match",u,l,o)),!o)return!1}if(i===s&&a===c)return!0;if(i===s)return r;if(a===c)return i===s-1&&""===e[i];throw new Error("wtf?")}braceExpand(){return Pr(this.pattern,this.options)}parse(e){zt(e);const t=this.options;if("**"===e)return jr;if(""===e)return"";let r,n=null;(r=e.match(gr))?n=t.dot?br:yr:(r=e.match(sr))?n=(t.nocase?t.dot?pr:lr:t.dot?ur:cr)(r[1]):(r=e.match(wr))?n=(t.nocase?t.dot?_r:xr:t.dot?kr:Er)(r):(r=e.match(hr))?n=t.dot?dr:fr:(r=e.match(mr))&&(n=vr);const o=or.fromGlob(e,this.options).toMMPattern();return n&&"object"==typeof o&&Reflect.defineProperty(o,"test",{value:n}),o}makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const t=this.options,r=t.noglobstar?"[^/]*?":t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=new Set(t.nocase?["i"]:[]);let o=e.map((e=>{const t=e.map((e=>{if(e instanceof RegExp)for(const t of e.flags.split(""))n.add(t);return"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e===jr?jr:e._src}));return t.forEach(((e,n)=>{const o=t[n+1],i=t[n-1];e===jr&&i!==jr&&(void 0===i?void 0!==o&&o!==jr?t[n+1]="(?:\\/|"+r+"\\/)?"+o:t[n]=r:void 0===o?t[n-1]=i+"(?:\\/|"+r+")?":o!==jr&&(t[n-1]=i+"(?:\\/|\\/"+r+"\\/)"+o,t[n+1]=jr))})),t.filter((e=>e!==jr)).join("/")})).join("|");const[i,a]=e.length>1?["(?:",")"]:["",""];o="^"+i+o+a+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...n].join(""))}catch(e){this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;const r=this.options;this.isWindows&&(e=e.split("\\").join("/"));const n=this.slashSplit(e);this.debug(this.pattern,"split",n);const o=this.set;this.debug(this.pattern,"set",o);let i=n[n.length-1];if(!i)for(let e=n.length-2;!i&&e>=0;e--)i=n[e];for(let e=0;e<o.length;e++){const a=o[e];let s=n;if(r.matchBase&&1===a.length&&(s=[i]),this.matchOne(s,a,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate}static defaults(e){return ar.defaults(e).Minimatch}}ar.AST=or,ar.Minimatch=Ir,ar.escape=ir,ar.unescape=Yt;const Nr=require("node:url"),Fr="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,Dr=new Set,Rr="object"==typeof process&&process?process:{},Lr=(e,t,r,n)=>{"function"==typeof Rr.emitWarning?Rr.emitWarning(e,t,r,n):console.error(`[${r}] ${t}: ${e}`)};let Gr=globalThis.AbortController,qr=globalThis.AbortSignal;if(void 0===Gr){qr=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},Gr=class{constructor(){t()}signal=new qr;abort(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(const t of this.signal._onabort)t(e);this.signal.onabort?.(e)}}};let e="1"!==Rr.env?.LRU_CACHE_IGNORE_AC_WARNING;const t=()=>{e&&(e=!1,Lr("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Symbol("type");const Mr=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),Ur=e=>Mr(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?Br:null:null;class Br extends Array{constructor(e){super(e),this.fill(0)}}class zr{heap;length;static#m=!1;static create(e){const t=Ur(e);if(!t)return[];zr.#m=!0;const r=new zr(e,t);return zr.#m=!1,r}constructor(e,t){if(!zr.#m)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class Wr{#v;#g;#y;#b;#w;#x;#_;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#k;#E;#S;#O;#T;#j;#C;#P;#A;#I;#N;#F;#D;#R;#L;#G;#q;#M;static unsafeExposeInternals(e){return{starts:e.#D,ttls:e.#R,sizes:e.#F,keyMap:e.#S,keyList:e.#O,valList:e.#T,next:e.#j,prev:e.#C,get head(){return e.#P},get tail(){return e.#A},free:e.#I,isBackgroundFetch:t=>e.#U(t),backgroundFetch:(t,r,n,o)=>e.#B(t,r,n,o),moveToTail:t=>e.#z(t),indexes:t=>e.#W(t),rindexes:t=>e.#$(t),isStale:t=>e.#V(t)}}get max(){return this.#v}get maxSize(){return this.#g}get calculatedSize(){return this.#E}get size(){return this.#k}get fetchMethod(){return this.#x}get memoMethod(){return this.#_}get dispose(){return this.#y}get onInsert(){return this.#b}get disposeAfter(){return this.#w}constructor(e){const{max:t=0,ttl:r,ttlResolution:n=1,ttlAutopurge:o,updateAgeOnGet:i,updateAgeOnHas:a,allowStale:s,dispose:c,onInsert:u,disposeAfter:l,noDisposeOnSet:p,noUpdateTTL:h,maxSize:f=0,maxEntrySize:d=0,sizeCalculation:m,fetchMethod:v,memoMethod:g,noDeleteOnFetchRejection:y,noDeleteOnStaleGet:b,allowStaleOnFetchRejection:w,allowStaleOnFetchAbort:x,ignoreFetchAbort:_}=e;if(0!==t&&!Mr(t))throw new TypeError("max option must be a nonnegative integer");const k=t?Ur(t):Array;if(!k)throw new Error("invalid max value: "+t);if(this.#v=t,this.#g=f,this.maxEntrySize=d||this.#g,this.sizeCalculation=m,this.sizeCalculation){if(!this.#g&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==g&&"function"!=typeof g)throw new TypeError("memoMethod must be a function if defined");if(this.#_=g,void 0!==v&&"function"!=typeof v)throw new TypeError("fetchMethod must be a function if specified");if(this.#x=v,this.#G=!!v,this.#S=new Map,this.#O=new Array(t).fill(void 0),this.#T=new Array(t).fill(void 0),this.#j=new k(t),this.#C=new k(t),this.#P=0,this.#A=0,this.#I=zr.create(t),this.#k=0,this.#E=0,"function"==typeof c&&(this.#y=c),"function"==typeof u&&(this.#b=u),"function"==typeof l?(this.#w=l,this.#N=[]):(this.#w=void 0,this.#N=void 0),this.#L=!!this.#y,this.#M=!!this.#b,this.#q=!!this.#w,this.noDisposeOnSet=!!p,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!y,this.allowStaleOnFetchRejection=!!w,this.allowStaleOnFetchAbort=!!x,this.ignoreFetchAbort=!!_,0!==this.maxEntrySize){if(0!==this.#g&&!Mr(this.#g))throw new TypeError("maxSize must be a positive integer if specified");if(!Mr(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#H()}if(this.allowStale=!!s,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!i,this.updateAgeOnHas=!!a,this.ttlResolution=Mr(n)||0===n?n:1,this.ttlAutopurge=!!o,this.ttl=r||0,this.ttl){if(!Mr(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#Y()}if(0===this.#v&&0===this.ttl&&0===this.#g)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#v&&!this.#g){const e="LRU_CACHE_UNBOUNDED";(e=>!Dr.has(e))(e)&&(Dr.add(e),Lr("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,Wr))}}getRemainingTTL(e){return this.#S.has(e)?1/0:0}#Y(){const e=new Br(this.#v),t=new Br(this.#v);this.#R=e,this.#D=t,this.#J=(r,n,o=Fr.now())=>{if(t[r]=0!==n?o:0,e[r]=n,0!==n&&this.ttlAutopurge){const e=setTimeout((()=>{this.#V(r)&&this.#K(this.#O[r],"expire")}),n+1);e.unref&&e.unref()}},this.#Q=r=>{t[r]=0!==e[r]?Fr.now():0},this.#Z=(o,i)=>{if(e[i]){const a=e[i],s=t[i];if(!a||!s)return;o.ttl=a,o.start=s,o.now=r||n();const c=o.now-s;o.remainingTTL=a-c}};let r=0;const n=()=>{const e=Fr.now();if(this.ttlResolution>0){r=e;const t=setTimeout((()=>r=0),this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=o=>{const i=this.#S.get(o);if(void 0===i)return 0;const a=e[i],s=t[i];return a&&s?a-((r||n())-s):1/0},this.#V=o=>{const i=t[o],a=e[o];return!!a&&!!i&&(r||n())-i>a}}#Q=()=>{};#Z=()=>{};#J=()=>{};#V=()=>!1;#H(){const e=new Br(this.#v);this.#E=0,this.#F=e,this.#X=t=>{this.#E-=e[t],e[t]=0},this.#ee=(e,t,r,n)=>{if(this.#U(t))return 0;if(!Mr(r)){if(!n)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof n)throw new TypeError("sizeCalculation must be a function");if(r=n(t,e),!Mr(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return r},this.#te=(t,r,n)=>{if(e[t]=r,this.#g){const r=this.#g-e[t];for(;this.#E>r;)this.#re(!0)}this.#E+=e[t],n&&(n.entrySize=r,n.totalCalculatedSize=this.#E)}}#X=e=>{};#te=(e,t,r)=>{};#ee=(e,t,r,n)=>{if(r||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#W({allowStale:e=this.allowStale}={}){if(this.#k)for(let t=this.#A;this.#ne(t)&&(!e&&this.#V(t)||(yield t),t!==this.#P);)t=this.#C[t]}*#$({allowStale:e=this.allowStale}={}){if(this.#k)for(let t=this.#P;this.#ne(t)&&(!e&&this.#V(t)||(yield t),t!==this.#A);)t=this.#j[t]}#ne(e){return void 0!==e&&this.#S.get(this.#O[e])===e}*entries(){for(const e of this.#W())void 0===this.#T[e]||void 0===this.#O[e]||this.#U(this.#T[e])||(yield[this.#O[e],this.#T[e]])}*rentries(){for(const e of this.#$())void 0===this.#T[e]||void 0===this.#O[e]||this.#U(this.#T[e])||(yield[this.#O[e],this.#T[e]])}*keys(){for(const e of this.#W()){const t=this.#O[e];void 0===t||this.#U(this.#T[e])||(yield t)}}*rkeys(){for(const e of this.#$()){const t=this.#O[e];void 0===t||this.#U(this.#T[e])||(yield t)}}*values(){for(const e of this.#W())void 0===this.#T[e]||this.#U(this.#T[e])||(yield this.#T[e])}*rvalues(){for(const e of this.#$())void 0===this.#T[e]||this.#U(this.#T[e])||(yield this.#T[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(const r of this.#W()){const n=this.#T[r],o=this.#U(n)?n.__staleWhileFetching:n;if(void 0!==o&&e(o,this.#O[r],this))return this.get(this.#O[r],t)}}forEach(e,t=this){for(const r of this.#W()){const n=this.#T[r],o=this.#U(n)?n.__staleWhileFetching:n;void 0!==o&&e.call(t,o,this.#O[r],this)}}rforEach(e,t=this){for(const r of this.#$()){const n=this.#T[r],o=this.#U(n)?n.__staleWhileFetching:n;void 0!==o&&e.call(t,o,this.#O[r],this)}}purgeStale(){let e=!1;for(const t of this.#$({allowStale:!0}))this.#V(t)&&(this.#K(this.#O[t],"expire"),e=!0);return e}info(e){const t=this.#S.get(e);if(void 0===t)return;const r=this.#T[t],n=this.#U(r)?r.__staleWhileFetching:r;if(void 0===n)return;const o={value:n};if(this.#R&&this.#D){const e=this.#R[t],r=this.#D[t];if(e&&r){const t=e-(Fr.now()-r);o.ttl=t,o.start=Date.now()}}return this.#F&&(o.size=this.#F[t]),o}dump(){const e=[];for(const t of this.#W({allowStale:!0})){const r=this.#O[t],n=this.#T[t],o=this.#U(n)?n.__staleWhileFetching:n;if(void 0===o||void 0===r)continue;const i={value:o};if(this.#R&&this.#D){i.ttl=this.#R[t];const e=Fr.now()-this.#D[t];i.start=Math.floor(Date.now()-e)}this.#F&&(i.size=this.#F[t]),e.unshift([r,i])}return e}load(e){this.clear();for(const[t,r]of e){if(r.start){const e=Date.now()-r.start;r.start=Fr.now()-e}this.set(t,r.value,r)}}set(e,t,r={}){if(void 0===t)return this.delete(e),this;const{ttl:n=this.ttl,start:o,noDisposeOnSet:i=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:s}=r;let{noUpdateTTL:c=this.noUpdateTTL}=r;const u=this.#ee(e,t,r.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return s&&(s.set="miss",s.maxEntrySizeExceeded=!0),this.#K(e,"set"),this;let l=0===this.#k?void 0:this.#S.get(e);if(void 0===l)l=0===this.#k?this.#A:0!==this.#I.length?this.#I.pop():this.#k===this.#v?this.#re(!1):this.#k,this.#O[l]=e,this.#T[l]=t,this.#S.set(e,l),this.#j[this.#A]=l,this.#C[l]=this.#A,this.#A=l,this.#k++,this.#te(l,u,s),s&&(s.set="add"),c=!1,this.#M&&this.#b?.(t,e,"add");else{this.#z(l);const r=this.#T[l];if(t!==r){if(this.#G&&this.#U(r)){r.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:t}=r;void 0===t||i||(this.#L&&this.#y?.(t,e,"set"),this.#q&&this.#N?.push([t,e,"set"]))}else i||(this.#L&&this.#y?.(r,e,"set"),this.#q&&this.#N?.push([r,e,"set"]));if(this.#X(l),this.#te(l,u,s),this.#T[l]=t,s){s.set="replace";const e=r&&this.#U(r)?r.__staleWhileFetching:r;void 0!==e&&(s.oldValue=e)}}else s&&(s.set="update");this.#M&&this.onInsert?.(t,e,t===r?"update":"replace")}if(0===n||this.#R||this.#Y(),this.#R&&(c||this.#J(l,n,o),s&&this.#Z(s,l)),!i&&this.#q&&this.#N){const e=this.#N;let t;for(;t=e?.shift();)this.#w?.(...t)}return this}pop(){try{for(;this.#k;){const e=this.#T[this.#P];if(this.#re(!0),this.#U(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#q&&this.#N){const e=this.#N;let t;for(;t=e?.shift();)this.#w?.(...t)}}}#re(e){const t=this.#P,r=this.#O[t],n=this.#T[t];return this.#G&&this.#U(n)?n.__abortController.abort(new Error("evicted")):(this.#L||this.#q)&&(this.#L&&this.#y?.(n,r,"evict"),this.#q&&this.#N?.push([n,r,"evict"])),this.#X(t),e&&(this.#O[t]=void 0,this.#T[t]=void 0,this.#I.push(t)),1===this.#k?(this.#P=this.#A=0,this.#I.length=0):this.#P=this.#j[t],this.#S.delete(r),this.#k--,t}has(e,t={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:n}=t,o=this.#S.get(e);if(void 0!==o){const e=this.#T[o];if(this.#U(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#V(o))return r&&this.#Q(o),n&&(n.has="hit",this.#Z(n,o)),!0;n&&(n.has="stale",this.#Z(n,o))}else n&&(n.has="miss");return!1}peek(e,t={}){const{allowStale:r=this.allowStale}=t,n=this.#S.get(e);if(void 0===n||!r&&this.#V(n))return;const o=this.#T[n];return this.#U(o)?o.__staleWhileFetching:o}#B(e,t,r,n){const o=void 0===t?void 0:this.#T[t];if(this.#U(o))return o;const i=new Gr,{signal:a}=r;a?.addEventListener("abort",(()=>i.abort(a.reason)),{signal:i.signal});const s={signal:i.signal,options:r,context:n},c=(n,o=!1)=>{const{aborted:a}=i.signal,c=r.ignoreFetchAbort&&void 0!==n;if(r.status&&(a&&!o?(r.status.fetchAborted=!0,r.status.fetchError=i.signal.reason,c&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),a&&!c&&!o)return u(i.signal.reason);const p=l;return this.#T[t]===l&&(void 0===n?p.__staleWhileFetching?this.#T[t]=p.__staleWhileFetching:this.#K(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,n,s.options))),n},u=n=>{const{aborted:o}=i.signal,a=o&&r.allowStaleOnFetchAbort,s=a||r.allowStaleOnFetchRejection,c=s||r.noDeleteOnFetchRejection,u=l;if(this.#T[t]===l&&(c&&void 0!==u.__staleWhileFetching?a||(this.#T[t]=u.__staleWhileFetching):this.#K(e,"fetch")),s)return r.status&&void 0!==u.__staleWhileFetching&&(r.status.returnedStale=!0),u.__staleWhileFetching;if(u.__returned===u)throw n};r.status&&(r.status.fetchDispatched=!0);const l=new Promise(((t,n)=>{const a=this.#x?.(e,o,s);a&&a instanceof Promise&&a.then((e=>t(void 0===e?void 0:e)),n),i.signal.addEventListener("abort",(()=>{r.ignoreFetchAbort&&!r.allowStaleOnFetchAbort||(t(void 0),r.allowStaleOnFetchAbort&&(t=e=>c(e,!0)))}))})).then(c,(e=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=e),u(e)))),p=Object.assign(l,{__abortController:i,__staleWhileFetching:o,__returned:void 0});return void 0===t?(this.set(e,p,{...s.options,status:void 0}),t=this.#S.get(e)):this.#T[t]=p,p}#U(e){if(!this.#G)return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Gr}async fetch(e,t={}){const{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:i=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:s=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:h=this.ignoreFetchAbort,allowStaleOnFetchAbort:f=this.allowStaleOnFetchAbort,context:d,forceRefresh:m=!1,status:v,signal:g}=t;if(!this.#G)return v&&(v.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:o,status:v});const y={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:o,ttl:i,noDisposeOnSet:a,size:s,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:l,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:f,ignoreFetchAbort:h,status:v,signal:g};let b=this.#S.get(e);if(void 0===b){v&&(v.fetch="miss");const t=this.#B(e,b,y,d);return t.__returned=t}{const t=this.#T[b];if(this.#U(t)){const e=r&&void 0!==t.__staleWhileFetching;return v&&(v.fetch="inflight",e&&(v.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}const o=this.#V(b);if(!m&&!o)return v&&(v.fetch="hit"),this.#z(b),n&&this.#Q(b),v&&this.#Z(v,b),t;const i=this.#B(e,b,y,d),a=void 0!==i.__staleWhileFetching&&r;return v&&(v.fetch=o?"stale":"refresh",a&&o&&(v.returnedStale=!0)),a?i.__staleWhileFetching:i.__returned=i}}async forceFetch(e,t={}){const r=await this.fetch(e,t);if(void 0===r)throw new Error("fetch() returned undefined");return r}memo(e,t={}){const r=this.#_;if(!r)throw new Error("no memoMethod provided to constructor");const{context:n,forceRefresh:o,...i}=t,a=this.get(e,i);if(!o&&void 0!==a)return a;const s=r(e,a,{options:i,context:n});return this.set(e,s,i),s}get(e,t={}){const{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:i}=t,a=this.#S.get(e);if(void 0!==a){const t=this.#T[a],s=this.#U(t);return i&&this.#Z(i,a),this.#V(a)?(i&&(i.get="stale"),s?(i&&r&&void 0!==t.__staleWhileFetching&&(i.returnedStale=!0),r?t.__staleWhileFetching:void 0):(o||this.#K(e,"expire"),i&&r&&(i.returnedStale=!0),r?t:void 0)):(i&&(i.get="hit"),s?t.__staleWhileFetching:(this.#z(a),n&&this.#Q(a),t))}i&&(i.get="miss")}#oe(e,t){this.#C[t]=e,this.#j[e]=t}#z(e){e!==this.#A&&(e===this.#P?this.#P=this.#j[e]:this.#oe(this.#C[e],this.#j[e]),this.#oe(this.#A,e),this.#A=e)}delete(e){return this.#K(e,"delete")}#K(e,t){let r=!1;if(0!==this.#k){const n=this.#S.get(e);if(void 0!==n)if(r=!0,1===this.#k)this.#ie(t);else{this.#X(n);const r=this.#T[n];if(this.#U(r)?r.__abortController.abort(new Error("deleted")):(this.#L||this.#q)&&(this.#L&&this.#y?.(r,e,t),this.#q&&this.#N?.push([r,e,t])),this.#S.delete(e),this.#O[n]=void 0,this.#T[n]=void 0,n===this.#A)this.#A=this.#C[n];else if(n===this.#P)this.#P=this.#j[n];else{const e=this.#C[n];this.#j[e]=this.#j[n];const t=this.#j[n];this.#C[t]=this.#C[n]}this.#k--,this.#I.push(n)}}if(this.#q&&this.#N?.length){const e=this.#N;let t;for(;t=e?.shift();)this.#w?.(...t)}return r}clear(){return this.#ie("delete")}#ie(e){for(const t of this.#$({allowStale:!0})){const r=this.#T[t];if(this.#U(r))r.__abortController.abort(new Error("deleted"));else{const n=this.#O[t];this.#L&&this.#y?.(r,n,e),this.#q&&this.#N?.push([r,n,e])}}if(this.#S.clear(),this.#T.fill(void 0),this.#O.fill(void 0),this.#R&&this.#D&&(this.#R.fill(0),this.#D.fill(0)),this.#F&&this.#F.fill(0),this.#P=0,this.#A=0,this.#I.length=0,this.#E=0,this.#k=0,this.#q&&this.#N){const e=this.#N;let t;for(;t=e?.shift();)this.#w?.(...t)}}}const $r=require("node:path"),Vr=require("node:fs");var Hr=o.t(Vr,2);const Yr=require("node:fs/promises"),Jr=require("node:events"),Kr=require("node:stream"),Qr=require("node:string_decoder"),Zr="object"==typeof process&&process?process:{stdout:null,stderr:null},Xr=e=>!!e&&"object"==typeof e&&(e instanceof Gn||e instanceof Kr||en(e)||tn(e)),en=e=>!!e&&"object"==typeof e&&e instanceof Jr.EventEmitter&&"function"==typeof e.pipe&&e.pipe!==Kr.Writable.prototype.pipe,tn=e=>!!e&&"object"==typeof e&&e instanceof Jr.EventEmitter&&"function"==typeof e.write&&"function"==typeof e.end,rn=Symbol("EOF"),nn=Symbol("maybeEmitEnd"),on=Symbol("emittedEnd"),an=Symbol("emittingEnd"),sn=Symbol("emittedError"),cn=Symbol("closed"),un=Symbol("read"),ln=Symbol("flush"),pn=Symbol("flushChunk"),hn=Symbol("encoding"),fn=Symbol("decoder"),dn=Symbol("flowing"),mn=Symbol("paused"),vn=Symbol("resume"),gn=Symbol("buffer"),yn=Symbol("pipes"),bn=Symbol("bufferLength"),wn=Symbol("bufferPush"),xn=Symbol("bufferShift"),_n=Symbol("objectMode"),kn=Symbol("destroyed"),En=Symbol("error"),Sn=Symbol("emitData"),On=Symbol("emitEnd"),Tn=Symbol("emitEnd2"),jn=Symbol("async"),Cn=Symbol("abort"),Pn=Symbol("aborted"),An=Symbol("signal"),In=Symbol("dataListeners"),Nn=Symbol("discarded"),Fn=e=>Promise.resolve().then(e),Dn=e=>e();class Rn{src;dest;opts;ondrain;constructor(e,t,r){this.src=e,this.dest=t,this.opts=r,this.ondrain=()=>e[vn](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}}class Ln extends Rn{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,r){super(e,t,r),this.proxyErrors=e=>t.emit("error",e),e.on("error",this.proxyErrors)}}class Gn extends Jr.EventEmitter{[dn]=!1;[mn]=!1;[yn]=[];[gn]=[];[_n];[hn];[jn];[fn];[rn]=!1;[on]=!1;[an]=!1;[cn]=!1;[sn]=null;[bn]=0;[kn]=!1;[An];[Pn]=!1;[In]=0;[Nn]=!1;writable=!0;readable=!0;constructor(...e){const t=e[0]||{};if(super(),t.objectMode&&"string"==typeof t.encoding)throw new TypeError("Encoding and objectMode may not be used together");var r;t.objectMode?(this[_n]=!0,this[hn]=null):!(r=t).objectMode&&r.encoding&&"buffer"!==r.encoding?(this[hn]=t.encoding,this[_n]=!1):(this[_n]=!1,this[hn]=null),this[jn]=!!t.async,this[fn]=this[hn]?new Qr.StringDecoder(this[hn]):null,t&&!0===t.debugExposeBuffer&&Object.defineProperty(this,"buffer",{get:()=>this[gn]}),t&&!0===t.debugExposePipes&&Object.defineProperty(this,"pipes",{get:()=>this[yn]});const{signal:n}=t;n&&(this[An]=n,n.aborted?this[Cn]():n.addEventListener("abort",(()=>this[Cn]())))}get bufferLength(){return this[bn]}get encoding(){return this[hn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[_n]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[jn]}set async(e){this[jn]=this[jn]||!!e}[Cn](){this[Pn]=!0,this.emit("abort",this[An]?.reason),this.destroy(this[An]?.reason)}get aborted(){return this[Pn]}set aborted(e){}write(e,t,r){if(this[Pn])return!1;if(this[rn])throw new Error("write after end");if(this[kn])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;"function"==typeof t&&(r=t,t="utf8"),t||(t="utf8");const n=this[jn]?Fn:Dn;if(!this[_n]&&!Buffer.isBuffer(e))if(o=e,!Buffer.isBuffer(o)&&ArrayBuffer.isView(o))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if((e=>e instanceof ArrayBuffer||!!e&&"object"==typeof e&&e.constructor&&"ArrayBuffer"===e.constructor.name&&e.byteLength>=0)(e))e=Buffer.from(e);else if("string"!=typeof e)throw new Error("Non-contiguous data written to non-objectMode stream");var o;return this[_n]?(this[dn]&&0!==this[bn]&&this[ln](!0),this[dn]?this.emit("data",e):this[wn](e),0!==this[bn]&&this.emit("readable"),r&&n(r),this[dn]):e.length?("string"!=typeof e||t===this[hn]&&!this[fn]?.lastNeed||(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[hn]&&(e=this[fn].write(e)),this[dn]&&0!==this[bn]&&this[ln](!0),this[dn]?this.emit("data",e):this[wn](e),0!==this[bn]&&this.emit("readable"),r&&n(r),this[dn]):(0!==this[bn]&&this.emit("readable"),r&&n(r),this[dn])}read(e){if(this[kn])return null;if(this[Nn]=!1,0===this[bn]||0===e||e&&e>this[bn])return this[nn](),null;this[_n]&&(e=null),this[gn].length>1&&!this[_n]&&(this[gn]=[this[hn]?this[gn].join(""):Buffer.concat(this[gn],this[bn])]);const t=this[un](e||null,this[gn][0]);return this[nn](),t}[un](e,t){if(this[_n])this[xn]();else{const r=t;e===r.length||null===e?this[xn]():"string"==typeof r?(this[gn][0]=r.slice(e),t=r.slice(0,e),this[bn]-=e):(this[gn][0]=r.subarray(e),t=r.subarray(0,e),this[bn]-=e)}return this.emit("data",t),this[gn].length||this[rn]||this.emit("drain"),t}end(e,t,r){return"function"==typeof e&&(r=e,e=void 0),"function"==typeof t&&(r=t,t="utf8"),void 0!==e&&this.write(e,t),r&&this.once("end",r),this[rn]=!0,this.writable=!1,!this[dn]&&this[mn]||this[nn](),this}[vn](){this[kn]||(this[In]||this[yn].length||(this[Nn]=!0),this[mn]=!1,this[dn]=!0,this.emit("resume"),this[gn].length?this[ln]():this[rn]?this[nn]():this.emit("drain"))}resume(){return this[vn]()}pause(){this[dn]=!1,this[mn]=!0,this[Nn]=!1}get destroyed(){return this[kn]}get flowing(){return this[dn]}get paused(){return this[mn]}[wn](e){this[_n]?this[bn]+=1:this[bn]+=e.length,this[gn].push(e)}[xn](){return this[_n]?this[bn]-=1:this[bn]-=this[gn][0].length,this[gn].shift()}[ln](e=!1){do{}while(this[pn](this[xn]())&&this[gn].length);e||this[gn].length||this[rn]||this.emit("drain")}[pn](e){return this.emit("data",e),this[dn]}pipe(e,t){if(this[kn])return e;this[Nn]=!1;const r=this[on];return t=t||{},e===Zr.stdout||e===Zr.stderr?t.end=!1:t.end=!1!==t.end,t.proxyErrors=!!t.proxyErrors,r?t.end&&e.end():(this[yn].push(t.proxyErrors?new Ln(this,e,t):new Rn(this,e,t)),this[jn]?Fn((()=>this[vn]())):this[vn]()),e}unpipe(e){const t=this[yn].find((t=>t.dest===e));t&&(1===this[yn].length?(this[dn]&&0===this[In]&&(this[dn]=!1),this[yn]=[]):this[yn].splice(this[yn].indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){const r=super.on(e,t);if("data"===e)this[Nn]=!1,this[In]++,this[yn].length||this[dn]||this[vn]();else if("readable"===e&&0!==this[bn])super.emit("readable");else if((e=>"end"===e||"finish"===e||"prefinish"===e)(e)&&this[on])super.emit(e),this.removeAllListeners(e);else if("error"===e&&this[sn]){const e=t;this[jn]?Fn((()=>e.call(this,this[sn]))):e.call(this,this[sn])}return r}removeListener(e,t){return this.off(e,t)}off(e,t){const r=super.off(e,t);return"data"===e&&(this[In]=this.listeners("data").length,0!==this[In]||this[Nn]||this[yn].length||(this[dn]=!1)),r}removeAllListeners(e){const t=super.removeAllListeners(e);return"data"!==e&&void 0!==e||(this[In]=0,this[Nn]||this[yn].length||(this[dn]=!1)),t}get emittedEnd(){return this[on]}[nn](){this[an]||this[on]||this[kn]||0!==this[gn].length||!this[rn]||(this[an]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[cn]&&this.emit("close"),this[an]=!1)}emit(e,...t){const r=t[0];if("error"!==e&&"close"!==e&&e!==kn&&this[kn])return!1;if("data"===e)return!(!this[_n]&&!r)&&(this[jn]?(Fn((()=>this[Sn](r))),!0):this[Sn](r));if("end"===e)return this[On]();if("close"===e){if(this[cn]=!0,!this[on]&&!this[kn])return!1;const e=super.emit("close");return this.removeAllListeners("close"),e}if("error"===e){this[sn]=r,super.emit(En,r);const e=!(this[An]&&!this.listeners("error").length)&&super.emit("error",r);return this[nn](),e}if("resume"===e){const e=super.emit("resume");return this[nn](),e}if("finish"===e||"prefinish"===e){const t=super.emit(e);return this.removeAllListeners(e),t}const n=super.emit(e,...t);return this[nn](),n}[Sn](e){for(const t of this[yn])!1===t.dest.write(e)&&this.pause();const t=!this[Nn]&&super.emit("data",e);return this[nn](),t}[On](){return!this[on]&&(this[on]=!0,this.readable=!1,this[jn]?(Fn((()=>this[Tn]())),!0):this[Tn]())}[Tn](){if(this[fn]){const e=this[fn].end();if(e){for(const t of this[yn])t.dest.write(e);this[Nn]||super.emit("data",e)}}for(const e of this[yn])e.end();const e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){const e=Object.assign([],{dataLength:0});this[_n]||(e.dataLength=0);const t=this.promise();return this.on("data",(t=>{e.push(t),this[_n]||(e.dataLength+=t.length)})),await t,e}async concat(){if(this[_n])throw new Error("cannot concat in objectMode");const e=await this.collect();return this[hn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise(((e,t)=>{this.on(kn,(()=>t(new Error("stream destroyed")))),this.on("error",(e=>t(e))),this.on("end",(()=>e()))}))}[Symbol.asyncIterator](){this[Nn]=!1;let e=!1;const t=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return t();const r=this.read();if(null!==r)return Promise.resolve({done:!1,value:r});if(this[rn])return t();let n,o;const i=e=>{this.off("data",a),this.off("end",s),this.off(kn,c),t(),o(e)},a=e=>{this.off("error",i),this.off("end",s),this.off(kn,c),this.pause(),n({value:e,done:!!this[rn]})},s=()=>{this.off("error",i),this.off("data",a),this.off(kn,c),t(),n({done:!0,value:void 0})},c=()=>i(new Error("stream destroyed"));return new Promise(((e,t)=>{o=t,n=e,this.once(kn,c),this.once("error",i),this.once("end",s),this.once("data",a)}))},throw:t,return:t,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Nn]=!1;let e=!1;const t=()=>(this.pause(),this.off(En,t),this.off(kn,t),this.off("end",t),e=!0,{done:!0,value:void 0});return this.once("end",t),this.once(En,t),this.once(kn,t),{next:()=>{if(e)return t();const r=this.read();return null===r?t():{done:!1,value:r}},throw:t,return:t,[Symbol.iterator](){return this}}}destroy(e){return this[kn]?(e?this.emit("error",e):this.emit(kn),this):(this[kn]=!0,this[Nn]=!0,this[gn].length=0,this[bn]=0,"function"!=typeof this.close||this[cn]||this.close(),e?this.emit("error",e):this.emit(kn),this)}static get isStream(){return Xr}}const qn=r.realpathSync.native,Mn={lstatSync:r.lstatSync,readdir:r.readdir,readdirSync:r.readdirSync,readlinkSync:r.readlinkSync,realpathSync:qn,promises:{lstat:Yr.lstat,readdir:Yr.readdir,readlink:Yr.readlink,realpath:Yr.realpath}},Un=e=>e&&e!==Mn&&e!==Hr?{...Mn,...e,promises:{...Mn.promises,...e.promises||{}}}:Mn,Bn=/^\\\\\?\\([a-z]:)\\?$/i,zn=/[\\\/]/,Wn=10,$n=15,Vn=-16,Hn=128,Yn=e=>e.isFile()?8:e.isDirectory()?4:e.isSymbolicLink()?Wn:e.isCharacterDevice()?2:e.isBlockDevice()?6:e.isSocket()?12:e.isFIFO()?1:0,Jn=new Map,Kn=e=>{const t=Jn.get(e);if(t)return t;const r=e.normalize("NFKD");return Jn.set(e,r),r},Qn=new Map,Zn=e=>{const t=Qn.get(e);if(t)return t;const r=Kn(e.toLowerCase());return Qn.set(e,r),r};class Xn extends Wr{constructor(){super({max:256})}}class eo extends Wr{constructor(e=16384){super({maxSize:e,sizeCalculation:e=>e.length+1})}}const to=Symbol("PathScurry setAsCwd");class ro{name;root;roots;parent;nocase;isCWD=!1;#ae;#se;get dev(){return this.#se}#ce;get mode(){return this.#ce}#ue;get nlink(){return this.#ue}#le;get uid(){return this.#le}#pe;get gid(){return this.#pe}#he;get rdev(){return this.#he}#fe;get blksize(){return this.#fe}#de;get ino(){return this.#de}#k;get size(){return this.#k}#me;get blocks(){return this.#me}#ve;get atimeMs(){return this.#ve}#ge;get mtimeMs(){return this.#ge}#ye;get ctimeMs(){return this.#ye}#be;get birthtimeMs(){return this.#be}#we;get atime(){return this.#we}#xe;get mtime(){return this.#xe}#_e;get ctime(){return this.#_e}#ke;get birthtime(){return this.#ke}#Ee;#Se;#Oe;#Te;#je;#Ce;#Pe;#Ae;#Ie;#Ne;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,t=0,r,n,o,i,a){this.name=e,this.#Ee=o?Zn(e):Kn(e),this.#Pe=1023&t,this.nocase=o,this.roots=n,this.root=r||this,this.#Ae=i,this.#Oe=a.fullpath,this.#je=a.relative,this.#Ce=a.relativePosix,this.parent=a.parent,this.parent?this.#ae=this.parent.#ae:this.#ae=Un(a.fs)}depth(){return void 0!==this.#Se?this.#Se:this.parent?this.#Se=this.parent.depth()+1:this.#Se=0}childrenCache(){return this.#Ae}resolve(e){if(!e)return this;const t=this.getRootString(e),r=e.substring(t.length).split(this.splitSep);return t?this.getRoot(t).#Fe(r):this.#Fe(r)}#Fe(e){let t=this;for(const r of e)t=t.child(r);return t}children(){const e=this.#Ae.get(this);if(e)return e;const t=Object.assign([],{provisional:0});return this.#Ae.set(this,t),this.#Pe&=-17,t}child(e,t){if(""===e||"."===e)return this;if(".."===e)return this.parent||this;const r=this.children(),n=this.nocase?Zn(e):Kn(e);for(const e of r)if(e.#Ee===n)return e;const o=this.parent?this.sep:"",i=this.#Oe?this.#Oe+o+e:void 0,a=this.newChild(e,0,{...t,parent:this,fullpath:i});return this.canReaddir()||(a.#Pe|=Hn),r.push(a),a}relative(){if(this.isCWD)return"";if(void 0!==this.#je)return this.#je;const e=this.name,t=this.parent;if(!t)return this.#je=this.name;const r=t.relative();return r+(r&&t.parent?this.sep:"")+e}relativePosix(){if("/"===this.sep)return this.relative();if(this.isCWD)return"";if(void 0!==this.#Ce)return this.#Ce;const e=this.name,t=this.parent;if(!t)return this.#Ce=this.fullpathPosix();const r=t.relativePosix();return r+(r&&t.parent?"/":"")+e}fullpath(){if(void 0!==this.#Oe)return this.#Oe;const e=this.name,t=this.parent;if(!t)return this.#Oe=this.name;const r=t.fullpath()+(t.parent?this.sep:"")+e;return this.#Oe=r}fullpathPosix(){if(void 0!==this.#Te)return this.#Te;if("/"===this.sep)return this.#Te=this.fullpath();if(!this.parent){const e=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(e)?this.#Te=`//?/${e}`:this.#Te=e}const e=this.parent,t=e.fullpathPosix(),r=t+(t&&e.parent?"/":"")+this.name;return this.#Te=r}isUnknown(){return!(this.#Pe&$n)}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return 8==(this.#Pe&$n)}isDirectory(){return 4==(this.#Pe&$n)}isCharacterDevice(){return 2==(this.#Pe&$n)}isBlockDevice(){return 6==(this.#Pe&$n)}isFIFO(){return 1==(this.#Pe&$n)}isSocket(){return 12==(this.#Pe&$n)}isSymbolicLink(){return(this.#Pe&Wn)===Wn}lstatCached(){return 32&this.#Pe?this:void 0}readlinkCached(){return this.#Ie}realpathCached(){return this.#Ne}readdirCached(){const e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#Ie)return!0;if(!this.parent)return!1;const e=this.#Pe&$n;return!(0!==e&&e!==Wn||256&this.#Pe||this.#Pe&Hn)}calledReaddir(){return!!(16&this.#Pe)}isENOENT(){return!!(this.#Pe&Hn)}isNamed(e){return this.nocase?this.#Ee===Zn(e):this.#Ee===Kn(e)}async readlink(){const e=this.#Ie;if(e)return e;if(this.canReadlink()&&this.parent)try{const e=await this.#ae.promises.readlink(this.fullpath()),t=(await this.parent.realpath())?.resolve(e);if(t)return this.#Ie=t}catch(e){return void this.#De(e.code)}}readlinkSync(){const e=this.#Ie;if(e)return e;if(this.canReadlink()&&this.parent)try{const e=this.#ae.readlinkSync(this.fullpath()),t=this.parent.realpathSync()?.resolve(e);if(t)return this.#Ie=t}catch(e){return void this.#De(e.code)}}#Re(e){this.#Pe|=16;for(let t=e.provisional;t<e.length;t++){const r=e[t];r&&r.#Le()}}#Le(){this.#Pe&Hn||(this.#Pe=(this.#Pe|Hn)&Vn,this.#Ge())}#Ge(){const e=this.children();e.provisional=0;for(const t of e)t.#Le()}#qe(){this.#Pe|=512,this.#Me()}#Me(){if(64&this.#Pe)return;let e=this.#Pe;4==(e&$n)&&(e&=Vn),this.#Pe=64|e,this.#Ge()}#Ue(e=""){"ENOTDIR"===e||"EPERM"===e?this.#Me():"ENOENT"===e?this.#Le():this.children().provisional=0}#Be(e=""){"ENOTDIR"===e?this.parent.#Me():"ENOENT"===e&&this.#Le()}#De(e=""){let t=this.#Pe;t|=256,"ENOENT"===e&&(t|=Hn),"EINVAL"!==e&&"UNKNOWN"!==e||(t&=Vn),this.#Pe=t,"ENOTDIR"===e&&this.parent&&this.parent.#Me()}#ze(e,t){return this.#We(e,t)||this.#$e(e,t)}#$e(e,t){const r=Yn(e),n=this.newChild(e.name,r,{parent:this}),o=n.#Pe&$n;return 4!==o&&o!==Wn&&0!==o&&(n.#Pe|=64),t.unshift(n),t.provisional++,n}#We(e,t){for(let r=t.provisional;r<t.length;r++){const n=t[r];if((this.nocase?Zn(e.name):Kn(e.name))===n.#Ee)return this.#Ve(e,n,r,t)}}#Ve(e,t,r,n){const o=t.name;return t.#Pe=t.#Pe&Vn|Yn(e),o!==e.name&&(t.name=e.name),r!==n.provisional&&(r===n.length-1?n.pop():n.splice(r,1),n.unshift(t)),n.provisional++,t}async lstat(){if(!(this.#Pe&Hn))try{return this.#He(await this.#ae.promises.lstat(this.fullpath())),this}catch(e){this.#Be(e.code)}}lstatSync(){if(!(this.#Pe&Hn))try{return this.#He(this.#ae.lstatSync(this.fullpath())),this}catch(e){this.#Be(e.code)}}#He(e){const{atime:t,atimeMs:r,birthtime:n,birthtimeMs:o,blksize:i,blocks:a,ctime:s,ctimeMs:c,dev:u,gid:l,ino:p,mode:h,mtime:f,mtimeMs:d,nlink:m,rdev:v,size:g,uid:y}=e;this.#we=t,this.#ve=r,this.#ke=n,this.#be=o,this.#fe=i,this.#me=a,this.#_e=s,this.#ye=c,this.#se=u,this.#pe=l,this.#de=p,this.#ce=h,this.#xe=f,this.#ge=d,this.#ue=m,this.#he=v,this.#k=g,this.#le=y;const b=Yn(e);this.#Pe=this.#Pe&Vn|b|32,0!==b&&4!==b&&b!==Wn&&(this.#Pe|=64)}#Ye=[];#Je=!1;#Ke(e){this.#Je=!1;const t=this.#Ye.slice();this.#Ye.length=0,t.forEach((t=>t(null,e)))}readdirCB(e,t=!1){if(!this.canReaddir())return void(t?e(null,[]):queueMicrotask((()=>e(null,[]))));const r=this.children();if(this.calledReaddir()){const n=r.slice(0,r.provisional);return void(t?e(null,n):queueMicrotask((()=>e(null,n))))}if(this.#Ye.push(e),this.#Je)return;this.#Je=!0;const n=this.fullpath();this.#ae.readdir(n,{withFileTypes:!0},((e,t)=>{if(e)this.#Ue(e.code),r.provisional=0;else{for(const e of t)this.#ze(e,r);this.#Re(r)}this.#Ke(r.slice(0,r.provisional))}))}#Qe;async readdir(){if(!this.canReaddir())return[];const e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);const t=this.fullpath();if(this.#Qe)await this.#Qe;else{let r=()=>{};this.#Qe=new Promise((e=>r=e));try{for(const r of await this.#ae.promises.readdir(t,{withFileTypes:!0}))this.#ze(r,e);this.#Re(e)}catch(t){this.#Ue(t.code),e.provisional=0}this.#Qe=void 0,r()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];const e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);const t=this.fullpath();try{for(const r of this.#ae.readdirSync(t,{withFileTypes:!0}))this.#ze(r,e);this.#Re(e)}catch(t){this.#Ue(t.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(704&this.#Pe)return!1;const e=$n&this.#Pe;return 0===e||4===e||e===Wn}shouldWalk(e,t){return!(4&~this.#Pe)&&!(704&this.#Pe)&&!e.has(this)&&(!t||t(this))}async realpath(){if(this.#Ne)return this.#Ne;if(!(896&this.#Pe))try{const e=await this.#ae.promises.realpath(this.fullpath());return this.#Ne=this.resolve(e)}catch(e){this.#qe()}}realpathSync(){if(this.#Ne)return this.#Ne;if(!(896&this.#Pe))try{const e=this.#ae.realpathSync(this.fullpath());return this.#Ne=this.resolve(e)}catch(e){this.#qe()}}[to](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;const t=new Set([]);let r=[],n=this;for(;n&&n.parent;)t.add(n),n.#je=r.join(this.sep),n.#Ce=r.join("/"),n=n.parent,r.push("..");for(n=e;n&&n.parent&&!t.has(n);)n.#je=void 0,n.#Ce=void 0,n=n.parent}}class no extends ro{sep="\\";splitSep=zn;constructor(e,t=0,r,n,o,i,a){super(e,t,r,n,o,i,a)}newChild(e,t=0,r={}){return new no(e,t,this.root,this.roots,this.nocase,this.childrenCache(),r)}getRootString(e){return $r.win32.parse(e).root}getRoot(e){if((e=(e=>e.replace(/\//g,"\\").replace(Bn,"$1\\"))(e.toUpperCase()))===this.root.name)return this.root;for(const[t,r]of Object.entries(this.roots))if(this.sameRoot(e,t))return this.roots[e]=r;return this.roots[e]=new ao(e,this).root}sameRoot(e,t=this.root.name){return(e=e.toUpperCase().replace(/\//g,"\\").replace(Bn,"$1\\"))===t}}class oo extends ro{splitSep="/";sep="/";constructor(e,t=0,r,n,o,i,a){super(e,t,r,n,o,i,a)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,t=0,r={}){return new oo(e,t,this.root,this.roots,this.nocase,this.childrenCache(),r)}}class io{root;rootPath;roots;cwd;#Ze;#Xe;#Ae;nocase;#ae;constructor(e=process.cwd(),t,r,{nocase:n,childrenCacheSize:o=16384,fs:i=Mn}={}){this.#ae=Un(i),(e instanceof URL||e.startsWith("file://"))&&(e=(0,Nr.fileURLToPath)(e));const a=t.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#Ze=new Xn,this.#Xe=new Xn,this.#Ae=new eo(o);const s=a.substring(this.rootPath.length).split(r);if(1!==s.length||s[0]||s.pop(),void 0===n)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=n,this.root=this.newRoot(this.#ae),this.roots[this.rootPath]=this.root;let c=this.root,u=s.length-1;const l=t.sep;let p=this.rootPath,h=!1;for(const e of s){const t=u--;c=c.child(e,{relative:new Array(t).fill("..").join(l),relativePosix:new Array(t).fill("..").join("/"),fullpath:p+=(h?"":l)+e}),h=!0}this.cwd=c}depth(e=this.cwd){return"string"==typeof e&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#Ae}resolve(...e){let t="";for(let r=e.length-1;r>=0;r--){const n=e[r];if(n&&"."!==n&&(t=t?`${n}/${t}`:n,this.isAbsolute(n)))break}const r=this.#Ze.get(t);if(void 0!==r)return r;const n=this.cwd.resolve(t).fullpath();return this.#Ze.set(t,n),n}resolvePosix(...e){let t="";for(let r=e.length-1;r>=0;r--){const n=e[r];if(n&&"."!==n&&(t=t?`${n}/${t}`:n,this.isAbsolute(n)))break}const r=this.#Xe.get(t);if(void 0!==r)return r;const n=this.cwd.resolve(t).fullpathPosix();return this.#Xe.set(t,n),n}relative(e=this.cwd){return"string"==typeof e&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return"string"==typeof e&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return"string"==typeof e&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return"string"==typeof e&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,t={withFileTypes:!0}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof ro||(t=e,e=this.cwd);const{withFileTypes:r}=t;if(e.canReaddir()){const t=await e.readdir();return r?t:t.map((e=>e.name))}return[]}readdirSync(e=this.cwd,t={withFileTypes:!0}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof ro||(t=e,e=this.cwd);const{withFileTypes:r=!0}=t;return e.canReaddir()?r?e.readdirSync():e.readdirSync().map((e=>e.name)):[]}async lstat(e=this.cwd){return"string"==typeof e&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return"string"==typeof e&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof ro||(t=e.withFileTypes,e=this.cwd);const r=await e.readlink();return t?r:r?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof ro||(t=e.withFileTypes,e=this.cwd);const r=e.readlinkSync();return t?r:r?.fullpath()}async realpath(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof ro||(t=e.withFileTypes,e=this.cwd);const r=await e.realpath();return t?r:r?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof ro||(t=e.withFileTypes,e=this.cwd);const r=e.realpathSync();return t?r:r?.fullpath()}async walk(e=this.cwd,t={}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof ro||(t=e,e=this.cwd);const{withFileTypes:r=!0,follow:n=!1,filter:o,walkFilter:i}=t,a=[];o&&!o(e)||a.push(r?e:e.fullpath());const s=new Set,c=(e,t)=>{s.add(e),e.readdirCB(((e,u)=>{if(e)return t(e);let l=u.length;if(!l)return t();const p=()=>{0==--l&&t()};for(const e of u)o&&!o(e)||a.push(r?e:e.fullpath()),n&&e.isSymbolicLink()?e.realpath().then((e=>e?.isUnknown()?e.lstat():e)).then((e=>e?.shouldWalk(s,i)?c(e,p):p())):e.shouldWalk(s,i)?c(e,p):p()}),!0)},u=e;return new Promise(((e,t)=>{c(u,(r=>{if(r)return t(r);e(a)}))}))}walkSync(e=this.cwd,t={}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof ro||(t=e,e=this.cwd);const{withFileTypes:r=!0,follow:n=!1,filter:o,walkFilter:i}=t,a=[];o&&!o(e)||a.push(r?e:e.fullpath());const s=new Set([e]);for(const e of s){const t=e.readdirSync();for(const e of t){o&&!o(e)||a.push(r?e:e.fullpath());let t=e;if(e.isSymbolicLink()){if(!n||!(t=e.realpathSync()))continue;t.isUnknown()&&t.lstatSync()}t.shouldWalk(s,i)&&s.add(t)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,t={}){return"string"==typeof e?e=this.cwd.resolve(e):e instanceof ro||(t=e,e=this.cwd),this.stream(e,t)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,t={}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof ro||(t=e,e=this.cwd);const{withFileTypes:r=!0,follow:n=!1,filter:o,walkFilter:i}=t;o&&!o(e)||(yield r?e:e.fullpath());const a=new Set([e]);for(const e of a){const t=e.readdirSync();for(const e of t){o&&!o(e)||(yield r?e:e.fullpath());let t=e;if(e.isSymbolicLink()){if(!n||!(t=e.realpathSync()))continue;t.isUnknown()&&t.lstatSync()}t.shouldWalk(a,i)&&a.add(t)}}}stream(e=this.cwd,t={}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof ro||(t=e,e=this.cwd);const{withFileTypes:r=!0,follow:n=!1,filter:o,walkFilter:i}=t,a=new Gn({objectMode:!0});o&&!o(e)||a.write(r?e:e.fullpath());const s=new Set,c=[e];let u=0;const l=()=>{let e=!1;for(;!e;){const t=c.shift();if(!t)return void(0===u&&a.end());u++,s.add(t);const p=(t,f,d=!1)=>{if(t)return a.emit("error",t);if(n&&!d){const e=[];for(const t of f)t.isSymbolicLink()&&e.push(t.realpath().then((e=>e?.isUnknown()?e.lstat():e)));if(e.length)return void Promise.all(e).then((()=>p(null,f,!0)))}for(const t of f)!t||o&&!o(t)||a.write(r?t:t.fullpath())||(e=!0);u--;for(const e of f){const t=e.realpathCached()||e;t.shouldWalk(s,i)&&c.push(t)}e&&!a.flowing?a.once("drain",l):h||l()};let h=!0;t.readdirCB(p,!0),h=!1}};return l(),a}streamSync(e=this.cwd,t={}){"string"==typeof e?e=this.cwd.resolve(e):e instanceof ro||(t=e,e=this.cwd);const{withFileTypes:r=!0,follow:n=!1,filter:o,walkFilter:i}=t,a=new Gn({objectMode:!0}),s=new Set;o&&!o(e)||a.write(r?e:e.fullpath());const c=[e];let u=0;const l=()=>{let e=!1;for(;!e;){const t=c.shift();if(!t)return void(0===u&&a.end());u++,s.add(t);const l=t.readdirSync();for(const t of l)o&&!o(t)||a.write(r?t:t.fullpath())||(e=!0);u--;for(const e of l){let t=e;if(e.isSymbolicLink()){if(!n||!(t=e.realpathSync()))continue;t.isUnknown()&&t.lstatSync()}t.shouldWalk(s,i)&&c.push(t)}}e&&!a.flowing&&a.once("drain",l)};return l(),a}chdir(e=this.cwd){const t=this.cwd;this.cwd="string"==typeof e?this.cwd.resolve(e):e,this.cwd[to](t)}}class ao extends io{sep="\\";constructor(e=process.cwd(),t={}){const{nocase:r=!0}=t;super(e,$r.win32,"\\",{...t,nocase:r}),this.nocase=r;for(let e=this.cwd;e;e=e.parent)e.nocase=this.nocase}parseRootPath(e){return $r.win32.parse(e).root.toUpperCase()}newRoot(e){return new no(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}}class so extends io{sep="/";constructor(e=process.cwd(),t={}){const{nocase:r=!1}=t;super(e,$r.posix,"/",{...t,nocase:r}),this.nocase=r}parseRootPath(e){return"/"}newRoot(e){return new oo(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}}class co extends so{constructor(e=process.cwd(),t={}){const{nocase:r=!0}=t;super(e,{...t,nocase:r})}}process.platform;const uo="win32"===process.platform?ao:"darwin"===process.platform?co:so;class lo{#et;#tt;#rt;length;#nt;#ot;#it;#at;#st;#ct;#ut=!0;constructor(e,t,r,n){if(!(e.length>=1))throw new TypeError("empty pattern list");if(!(t.length>=1))throw new TypeError("empty glob list");if(t.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,r<0||r>=this.length)throw new TypeError("index out of range");if(this.#et=e,this.#tt=t,this.#rt=r,this.#nt=n,0===this.#rt)if(this.isUNC()){const[e,t,r,n,...o]=this.#et,[i,a,s,c,...u]=this.#tt;""===o[0]&&(o.shift(),u.shift());const l=[e,t,r,n,""].join("/"),p=[i,a,s,c,""].join("/");this.#et=[l,...o],this.#tt=[p,...u],this.length=this.#et.length}else if(this.isDrive()||this.isAbsolute()){const[e,...t]=this.#et,[r,...n]=this.#tt;""===t[0]&&(t.shift(),n.shift());const o=e+"/",i=r+"/";this.#et=[o,...t],this.#tt=[i,...n],this.length=this.#et.length}}pattern(){return this.#et[this.#rt]}isString(){return"string"==typeof this.#et[this.#rt]}isGlobstar(){return this.#et[this.#rt]===jr}isRegExp(){return this.#et[this.#rt]instanceof RegExp}globString(){return this.#it=this.#it||(0===this.#rt?this.isAbsolute()?this.#tt[0]+this.#tt.slice(1).join("/"):this.#tt.join("/"):this.#tt.slice(this.#rt).join("/"))}hasMore(){return this.length>this.#rt+1}rest(){return void 0!==this.#ot?this.#ot:this.hasMore()?(this.#ot=new lo(this.#et,this.#tt,this.#rt+1,this.#nt),this.#ot.#ct=this.#ct,this.#ot.#st=this.#st,this.#ot.#at=this.#at,this.#ot):this.#ot=null}isUNC(){const e=this.#et;return void 0!==this.#st?this.#st:this.#st="win32"===this.#nt&&0===this.#rt&&""===e[0]&&""===e[1]&&"string"==typeof e[2]&&!!e[2]&&"string"==typeof e[3]&&!!e[3]}isDrive(){const e=this.#et;return void 0!==this.#at?this.#at:this.#at="win32"===this.#nt&&0===this.#rt&&this.length>1&&"string"==typeof e[0]&&/^[a-z]:$/i.test(e[0])}isAbsolute(){const e=this.#et;return void 0!==this.#ct?this.#ct:this.#ct=""===e[0]&&e.length>1||this.isDrive()||this.isUNC()}root(){const e=this.#et[0];return"string"==typeof e&&this.isAbsolute()&&0===this.#rt?e:""}checkFollowGlobstar(){return!(0===this.#rt||!this.isGlobstar()||!this.#ut)}markFollowGlobstar(){return!(0===this.#rt||!this.isGlobstar()||!this.#ut||(this.#ut=!1,0))}}const po="object"==typeof process&&process&&"string"==typeof process.platform?process.platform:"linux";class ho{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:t,nocase:r,noext:n,noglobstar:o,platform:i=po}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=i,this.mmopts={dot:!0,nobrace:t,nocase:r,noext:n,noglobstar:o,optimizationLevel:2,platform:i,nocomment:!0,nonegate:!0};for(const t of e)this.add(t)}add(e){const t=new Ir(e,this.mmopts);for(let e=0;e<t.set.length;e++){const r=t.set[e],n=t.globParts[e];if(!r||!n)throw new Error("invalid pattern object");for(;"."===r[0]&&"."===n[0];)r.shift(),n.shift();const o=new lo(r,n,0,this.platform),i=new Ir(o.globString(),this.mmopts),a="**"===n[n.length-1],s=o.isAbsolute();s?this.absolute.push(i):this.relative.push(i),a&&(s?this.absoluteChildren.push(i):this.relativeChildren.push(i))}}ignored(e){const t=e.fullpath(),r=`${t}/`,n=e.relative()||".",o=`${n}/`;for(const e of this.relative)if(e.match(n)||e.match(o))return!0;for(const e of this.absolute)if(e.match(t)||e.match(r))return!0;return!1}childrenIgnored(e){const t=e.fullpath()+"/",r=(e.relative()||".")+"/";for(const e of this.relativeChildren)if(e.match(r))return!0;for(const e of this.absoluteChildren)if(e.match(t))return!0;return!1}}class fo{store;constructor(e=new Map){this.store=e}copy(){return new fo(new Map(this.store))}hasWalked(e,t){return this.store.get(e.fullpath())?.has(t.globString())}storeWalked(e,t){const r=e.fullpath(),n=this.store.get(r);n?n.add(t.globString()):this.store.set(r,new Set([t.globString()]))}}class mo{store=new Map;add(e,t,r){const n=(t?2:0)|(r?1:0),o=this.store.get(e);this.store.set(e,void 0===o?n:n&o)}entries(){return[...this.store.entries()].map((([e,t])=>[e,!!(2&t),!!(1&t)]))}}class vo{store=new Map;add(e,t){if(!e.canReaddir())return;const r=this.store.get(e);r?r.find((e=>e.globString()===t.globString()))||r.push(t):this.store.set(e,[t])}get(e){const t=this.store.get(e);if(!t)throw new Error("attempting to walk unknown path");return t}entries(){return this.keys().map((e=>[e,this.store.get(e)]))}keys(){return[...this.store.keys()].filter((e=>e.canReaddir()))}}class go{hasWalkedCache;matches=new mo;subwalks=new vo;patterns;follow;dot;opts;constructor(e,t){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=t?t.copy():new fo}processPatterns(e,t){this.patterns=t;const r=t.map((t=>[e,t]));for(let[e,t]of r){this.hasWalkedCache.storeWalked(e,t);const r=t.root(),n=t.isAbsolute()&&!1!==this.opts.absolute;if(r){e=e.resolve("/"===r&&void 0!==this.opts.root?this.opts.root:r);const n=t.rest();if(!n){this.matches.add(e,!0,!1);continue}t=n}if(e.isENOENT())continue;let o,i,a=!1;for(;"string"==typeof(o=t.pattern())&&(i=t.rest());){const r=e.resolve(o);e=r,t=i,a=!0}if(o=t.pattern(),i=t.rest(),a){if(this.hasWalkedCache.hasWalked(e,t))continue;this.hasWalkedCache.storeWalked(e,t)}if("string"!=typeof o)if(o===jr){(!e.isSymbolicLink()||this.follow||t.checkFollowGlobstar())&&this.subwalks.add(e,t);const r=i?.pattern(),o=i?.rest();if(i&&(""!==r&&"."!==r||o)){if(".."===r){const t=e.parent||e;o?this.hasWalkedCache.hasWalked(t,o)||this.subwalks.add(t,o):this.matches.add(t,n,!0)}}else this.matches.add(e,n,""===r||"."===r)}else o instanceof RegExp&&this.subwalks.add(e,t);else{const t=".."===o||""===o||"."===o;this.matches.add(e.resolve(o),n,t)}}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new go(this.opts,this.hasWalkedCache)}filterEntries(e,t){const r=this.subwalks.get(e),n=this.child();for(const e of t)for(const t of r){const r=t.isAbsolute(),o=t.pattern(),i=t.rest();o===jr?n.testGlobstar(e,t,i,r):o instanceof RegExp?n.testRegExp(e,o,i,r):n.testString(e,o,i,r)}return n}testGlobstar(e,t,r,n){if(!this.dot&&e.name.startsWith(".")||(t.hasMore()||this.matches.add(e,n,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,t):e.isSymbolicLink()&&(r&&t.checkFollowGlobstar()?this.subwalks.add(e,r):t.markFollowGlobstar()&&this.subwalks.add(e,t)))),r){const t=r.pattern();if("string"==typeof t&&".."!==t&&""!==t&&"."!==t)this.testString(e,t,r.rest(),n);else if(".."===t){const t=e.parent||e;this.subwalks.add(t,r)}else t instanceof RegExp&&this.testRegExp(e,t,r.rest(),n)}}testRegExp(e,t,r,n){t.test(e.name)&&(r?this.subwalks.add(e,r):this.matches.add(e,n,!1))}testString(e,t,r,n){e.isNamed(t)&&(r?this.subwalks.add(e,r):this.matches.add(e,n,!1))}}class yo{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#lt=[];#pt;#ht;signal;maxDepth;includeChildMatches;constructor(e,t,r){if(this.patterns=e,this.path=t,this.opts=r,this.#ht=r.posix||"win32"!==r.platform?"/":"\\",this.includeChildMatches=!1!==r.includeChildMatches,(r.ignore||!this.includeChildMatches)&&(this.#pt=((e,t)=>"string"==typeof e?new ho([e],t):Array.isArray(e)?new ho(e,t):e)(r.ignore??[],r),!this.includeChildMatches&&"function"!=typeof this.#pt.add))throw new Error("cannot ignore child matches, ignore lacks add() method.");this.maxDepth=r.maxDepth||1/0,r.signal&&(this.signal=r.signal,this.signal.addEventListener("abort",(()=>{this.#lt.length=0})))}#ft(e){return this.seen.has(e)||!!this.#pt?.ignored?.(e)}#dt(e){return!!this.#pt?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;let e;for(this.paused=!1;!this.paused&&(e=this.#lt.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#lt.push(e):e())}async matchCheck(e,t){if(t&&this.opts.nodir)return;let r;if(this.opts.realpath){if(r=e.realpathCached()||await e.realpath(),!r)return;e=r}const n=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&n?.isSymbolicLink()){const e=await n.realpath();e&&(e.isUnknown()||this.opts.stat)&&await e.lstat()}return this.matchCheckTest(n,t)}matchCheckTest(e,t){return!e||!(this.maxDepth===1/0||e.depth()<=this.maxDepth)||t&&!e.canReaddir()||this.opts.nodir&&e.isDirectory()||this.opts.nodir&&this.opts.follow&&e.isSymbolicLink()&&e.realpathCached()?.isDirectory()||this.#ft(e)?void 0:e}matchCheckSync(e,t){if(t&&this.opts.nodir)return;let r;if(this.opts.realpath){if(r=e.realpathCached()||e.realpathSync(),!r)return;e=r}const n=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&n?.isSymbolicLink()){const e=n.realpathSync();e&&(e?.isUnknown()||this.opts.stat)&&e.lstatSync()}return this.matchCheckTest(n,t)}matchFinish(e,t){if(this.#ft(e))return;if(!this.includeChildMatches&&this.#pt?.add){const t=`${e.relativePosix()}/**`;this.#pt.add(t)}const r=void 0===this.opts.absolute?t:this.opts.absolute;this.seen.add(e);const n=this.opts.mark&&e.isDirectory()?this.#ht:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(r){const t=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(t+n)}else{const t=this.opts.posix?e.relativePosix():e.relative(),r=this.opts.dotRelative&&!t.startsWith(".."+this.#ht)?"."+this.#ht:"";this.matchEmit(t?r+t+n:"."+n)}}async match(e,t,r){const n=await this.matchCheck(e,r);n&&this.matchFinish(n,t)}matchSync(e,t,r){const n=this.matchCheckSync(e,r);n&&this.matchFinish(n,t)}walkCB(e,t,r){this.signal?.aborted&&r(),this.walkCB2(e,t,new go(this.opts),r)}walkCB2(e,t,r,n){if(this.#dt(e))return n();if(this.signal?.aborted&&n(),this.paused)return void this.onResume((()=>this.walkCB2(e,t,r,n)));r.processPatterns(e,t);let o=1;const i=()=>{0==--o&&n()};for(const[e,t,n]of r.matches.entries())this.#ft(e)||(o++,this.match(e,t,n).then((()=>i())));for(const e of r.subwalkTargets()){if(this.maxDepth!==1/0&&e.depth()>=this.maxDepth)continue;o++;const t=e.readdirCached();e.calledReaddir()?this.walkCB3(e,t,r,i):e.readdirCB(((t,n)=>this.walkCB3(e,n,r,i)),!0)}i()}walkCB3(e,t,r,n){r=r.filterEntries(e,t);let o=1;const i=()=>{0==--o&&n()};for(const[e,t,n]of r.matches.entries())this.#ft(e)||(o++,this.match(e,t,n).then((()=>i())));for(const[e,t]of r.subwalks.entries())o++,this.walkCB2(e,t,r.child(),i);i()}walkCBSync(e,t,r){this.signal?.aborted&&r(),this.walkCB2Sync(e,t,new go(this.opts),r)}walkCB2Sync(e,t,r,n){if(this.#dt(e))return n();if(this.signal?.aborted&&n(),this.paused)return void this.onResume((()=>this.walkCB2Sync(e,t,r,n)));r.processPatterns(e,t);let o=1;const i=()=>{0==--o&&n()};for(const[e,t,n]of r.matches.entries())this.#ft(e)||this.matchSync(e,t,n);for(const e of r.subwalkTargets()){if(this.maxDepth!==1/0&&e.depth()>=this.maxDepth)continue;o++;const t=e.readdirSync();this.walkCB3Sync(e,t,r,i)}i()}walkCB3Sync(e,t,r,n){r=r.filterEntries(e,t);let o=1;const i=()=>{0==--o&&n()};for(const[e,t,n]of r.matches.entries())this.#ft(e)||this.matchSync(e,t,n);for(const[e,t]of r.subwalks.entries())o++,this.walkCB2Sync(e,t,r.child(),i);i()}}class bo extends yo{matches=new Set;constructor(e,t,r){super(e,t,r)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise(((e,t)=>{this.walkCB(this.path,this.patterns,(()=>{this.signal?.aborted?t(this.signal.reason):e(this.matches)}))})),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,(()=>{if(this.signal?.aborted)throw this.signal.reason})),this.matches}}class wo extends yo{results;constructor(e,t,r){super(e,t,r),this.results=new Gn({signal:this.signal,objectMode:!0}),this.results.on("drain",(()=>this.resume())),this.results.on("resume",(()=>this.resume()))}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){const e=this.path;return e.isUnknown()?e.lstat().then((()=>{this.walkCB(e,this.patterns,(()=>this.results.end()))})):this.walkCB(e,this.patterns,(()=>this.results.end())),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,(()=>this.results.end())),this.results}}const xo="object"==typeof process&&process&&"string"==typeof process.platform?process.platform:"linux";class _o{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,t){if(!t)throw new TypeError("glob options required");if(this.withFileTypes=!!t.withFileTypes,this.signal=t.signal,this.follow=!!t.follow,this.dot=!!t.dot,this.dotRelative=!!t.dotRelative,this.nodir=!!t.nodir,this.mark=!!t.mark,t.cwd?(t.cwd instanceof URL||t.cwd.startsWith("file://"))&&(t.cwd=(0,Nr.fileURLToPath)(t.cwd)):this.cwd="",this.cwd=t.cwd||"",this.root=t.root,this.magicalBraces=!!t.magicalBraces,this.nobrace=!!t.nobrace,this.noext=!!t.noext,this.realpath=!!t.realpath,this.absolute=t.absolute,this.includeChildMatches=!1!==t.includeChildMatches,this.noglobstar=!!t.noglobstar,this.matchBase=!!t.matchBase,this.maxDepth="number"==typeof t.maxDepth?t.maxDepth:1/0,this.stat=!!t.stat,this.ignore=t.ignore,this.withFileTypes&&void 0!==this.absolute)throw new Error("cannot set absolute and withFileTypes:true");if("string"==typeof e&&(e=[e]),this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||!1===t.allowWindowsEscape,this.windowsPathsNoEscape&&(e=e.map((e=>e.replace(/\\/g,"/")))),this.matchBase){if(t.noglobstar)throw new TypeError("base matching requires globstar");e=e.map((e=>e.includes("/")?e:`./**/${e}`))}if(this.pattern=e,this.platform=t.platform||xo,this.opts={...t,platform:this.platform},t.scurry){if(this.scurry=t.scurry,void 0!==t.nocase&&t.nocase!==t.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{const e="win32"===t.platform?ao:"darwin"===t.platform?co:t.platform?so:uo;this.scurry=new e(this.cwd,{nocase:t.nocase,fs:t.fs})}this.nocase=this.scurry.nocase;const r="darwin"===this.platform||"win32"===this.platform,n={...t,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:r,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map((e=>new Ir(e,n))),[i,a]=o.reduce(((e,t)=>(e[0].push(...t.set),e[1].push(...t.globParts),e)),[[],[]]);this.patterns=i.map(((e,t)=>{const r=a[t];if(!r)throw new Error("invalid pattern object");return new lo(e,r,0,this.platform)}))}async walk(){return[...await new bo(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new bo(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new wo(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new wo(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}function ko(e,t={}){return new _o(e,t).streamSync()}function Eo(e,t={}){return new _o(e,t).stream()}function So(e,t={}){return new _o(e,t).walkSync()}async function Oo(e,t={}){return new _o(e,t).walk()}function To(e,t={}){return new _o(e,t).iterateSync()}function jo(e,t={}){return new _o(e,t).iterate()}const Co=ko,Po=Object.assign(Eo,{sync:ko}),Ao=To,Io=Object.assign(jo,{sync:To}),No=Object.assign(So,{stream:ko,iterate:To}),Fo=Object.assign(Oo,{glob:Oo,globSync:So,sync:No,globStream:Eo,stream:Po,globStreamSync:ko,streamSync:Co,globIterate:jo,iterate:Io,globIterateSync:To,iterateSync:Ao,Glob:_o,hasMagic:(e,t={})=>{Array.isArray(e)||(e=[e]);for(const r of e)if(new Ir(r,t).hasMagic())return!0;return!1},escape:ir,unescape:Yt});Fo.glob=Fo;var Do="lastAppliedChangesState",Ro="savedContexts",Lo="tempRefactoringInstruction",Go="lastSaveLocation",qo="lastReadLocation",Mo="toolConfigCodeCompletions",Uo="toolConfigFileRefactoring",Bo="toolConfigCommitMessages",zo="defaultCodeCompletionsConfiguration",Wo="defaultFileRefactoringConfiguration",$o="lastSelectedCodeCompletionConfigIndex",Vo="lastSelectedFileRefactoringConfigIndex",Ho="lastSelectedPreset";function Yo(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ei(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Jo(){Jo=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==ri(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ri(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Ko(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ko(Object(r),!0).forEach((function(t){Zo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ko(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zo(e,t,r){return(t=function(e){var t=function(e){if("object"!=ri(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ri(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ri(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||ei(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ei(e,t){if(e){if("string"==typeof e)return ti(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ti(e,t):void 0}}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ri(e){return ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ri(e)}function ni(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function oi(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ni(i,n,o,a,s,"next",e)}function s(e){ni(i,n,o,a,s,"throw",e)}a(void 0)}))}}function ii(e,t){return ai.apply(this,arguments)}function ai(){return(ai=oi(Jo().mark((function e(t,r){var o,i,a,s,c,u,p,h,f;return Jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=new Set,i=Yo(r.getWorkspaceRoots());try{for(i.s();!(a=i.n()).done;)s=a.value,r.find_all_files(s).forEach((function(e){return o.add(e)}))}catch(e){i.e(e)}finally{i.f()}u=t.some((function(e){return!e.startsWith("!")})),c=u?new Set:new Set(o),p=Yo(t),e.prev=6,f=Jo().mark((function e(){var t,r,i,a,s;return Jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,r=t.startsWith("!"),i=r?t.substring(1):t,a=new Set,s=!1,o.has(i)&&(a.add(i),s=!0),!s)try{No(i,{cwd:process.cwd(),absolute:!0,matchBase:!0}).forEach((function(e){if(o.has(e))a.add(e);else{var t,r=e.endsWith(n.sep)?e:e+n.sep,i=Yo(o);try{for(i.s();!(t=i.n()).done;){var s=t.value;s.startsWith(r)&&a.add(s)}}catch(e){i.e(e)}finally{i.f()}}}))}catch(e){console.warn('Failed to resolve glob pattern "'.concat(i,'" (during sequential processing):'),e),o.has(i)&&a.add(i)}r?a.forEach((function(e){return c.delete(e)})):a.forEach((function(e){return c.add(e)})),l.log({message:"Files this pattern ".concat(t," applies to: ").concat(a.size),data:{files_this_rule_applies_to:a}});case 9:case"end":return e.stop()}}),e)})),p.s();case 9:if((h=p.n()).done){e.next=13;break}return e.delegateYield(f(),"t0",11);case 11:e.next=9;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(6),p.e(e.t1);case 18:return e.prev=18,p.f(),e.finish(18);case 21:return l.log({message:"Resolved final paths: ".concat(c.size)}),e.abrupt("return",function(e){if(Array.isArray(e))return ti(e)}(d=c)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(d)||ei(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());case 23:case"end":return e.stop()}var d}),e,null,[[6,15,18,21]])})))).apply(this,arguments)}function si(e,t,r){return ci.apply(this,arguments)}function ci(){return(ci=oi(Jo().mark((function e(r,o,i){var a,s,c,u,l,p,h,f;return Jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.workspace.workspaceFolders||[],s=new Map,c=Yo(a);try{for(c.s();!(u=c.n()).done;)l=u.value,s.set(l.name,l.uri.fsPath)}catch(e){c.e(e)}finally{c.f()}return p=r.paths.map((function(e){var t,r=e.startsWith("!"),i=r?e.substring(1):e;if(i.includes(":")){var a=Xo(i.split(":",2),2),c=a[0],u=a[1],l=s.get(c);l?t=n.join(l,u):(console.warn('Unknown workspace prefix "'.concat(c,'" in path "').concat(i,'". Treating as relative to current workspace root.')),t=n.join(o,u))}else t=n.isAbsolute(i)?i:n.join(o,i);return r?"!".concat(t):t})),e.next=7,ii(p,i);case 7:if(h=e.sent,0!=(f=h).length){e.next=12;break}return t.window.showWarningMessage('No valid paths found in context "'.concat(r.name,'".')),e.abrupt("return");case 12:return e.next=14,i.set_checked_files(f);case 14:t.window.showInformationMessage('Applied context "'.concat(r.name,'".'));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ui(e,t){return li.apply(this,arguments)}function li(){return(li=oi(Jo().mark((function e(t,o){var i;return Jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,i=n.dirname(o),r.existsSync(i)||r.mkdirSync(i,{recursive:!0}),r.writeFileSync(o,JSON.stringify(t,null,2),"utf8"),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Failed to save contexts to file: ".concat(e.t0.message));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function pi(e){return pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pi(e)}function hi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||di(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fi(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=di(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function di(e,t){if(e){if("string"==typeof e)return mi(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mi(e,t):void 0}}function mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function vi(){vi=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==pi(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(pi(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function gi(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function yi(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){gi(i,n,o,a,s,"next",e)}function s(e){gi(i,n,o,a,s,"throw",e)}a(void 0)}))}}var bi=new Ut.EventEmitter;function wi(e){var o,i,a=t.workspace.workspaceFolders;if(!a)return t.window.showInformationMessage("Please open a project to use CWC."),{};o=new A(a);var s=new fe(a),c=new Pe,u=t.window.createTreeView("codeWebChatViewWebsites",{treeDataProvider:c,manageCheckboxStateManually:!0});e.subscriptions.push(c,u);var l=new B(o,s,c),p=function(){var e=yi(vi().mark((function e(){var t;return vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0,!o){e.next=6;break}return e.t0=t,e.next=5,o.get_checked_files_token_count();case 5:t=e.t0+=e.sent;case 6:c&&(t+=c.get_checked_websites_token_count()),i&&(i.badge={value:t,tooltip:t?"About ".concat(t," tokens in context"):""}),bi.emit("token-count-updated");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();u.onDidChangeCheckboxState(function(){var e=yi(vi().mark((function e(t){var r,n,o,i,a;return vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=fi(t.items),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=9;break}return o=hi(n.value,2),i=o[0],a=o[1],e.next=7,c.update_check_state(i,a);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.e(e.t0);case 14:return e.prev=14,r.f(),e.finish(14);case 17:p();case 18:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}());var h=ee.getInstance();h.setProviders(o,s),e.subscriptions.push({dispose:function(){return h.dispose()}});var f=function(e){e.onDidChangeCheckboxState(function(){var e=yi(vi().mark((function e(t){var r,n,i,a,s;return vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=fi(t.items),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=9;break}return i=hi(n.value,2),a=i[0],s=i[1],e.next=7,o.update_check_state(a,s);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.e(e.t0);case 14:return e.prev=14,r.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()),e.onDidCollapseElement((function(){o.refresh()}))};i=t.window.createTreeView("codeWebChatViewWorkspace",{treeDataProvider:o,manageCheckboxStateManually:!0}),f(i);var d=t.window.createTreeView("codeWebChatViewOpenEditors",{treeDataProvider:s,manageCheckboxStateManually:!0});e.subscriptions.push(o,s,i,d),e.subscriptions.push(t.commands.registerCommand("codeWebChat.copyContext",yi(vi().mark((function e(){var r;return vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.prev=1,e.next=4,l.collect_files();case 4:r=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),console.error("Error collecting files and websites:",e.t0),t.window.showErrorMessage("Error collecting files and websites: "+e.t0.message),e.abrupt("return");case 12:if(""!=r){e.next=15;break}return t.window.showWarningMessage("No files or websites selected or open."),e.abrupt("return");case 15:return r="<files>\n".concat(r,"</files>\n"),e.next=18,t.env.clipboard.writeText(r);case 18:t.window.showInformationMessage("Context copied to clipboard.");case 19:case"end":return e.stop()}}),e,null,[[1,7]])})))),t.commands.registerCommand("codeWebChat.collapseFolders",yi(vi().mark((function r(){return vi().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i.dispose(),r.next=3,new Promise((function(e){return setTimeout(e,0)}));case 3:i=t.window.createTreeView("codeWebChatViewWorkspace",{treeDataProvider:o,manageCheckboxStateManually:!0}),f(i),e.subscriptions.push(i);case 6:case"end":return r.stop()}}),r)})))),t.commands.registerCommand("codeWebChat.clearChecks",(function(){o.clear_checks()})),t.commands.registerCommand("codeWebChat.checkAll",yi(vi().mark((function e(){return vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.check_all();case 2:case"end":return e.stop()}}),e)})))),t.commands.registerCommand("codeWebChat.clearChecksOpenEditors",(function(){s.clear_checks()})),t.commands.registerCommand("codeWebChat.checkAllOpenEditors",yi(vi().mark((function e(){return vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.check_all();case 2:case"end":return e.stop()}}),e)})))),t.commands.registerCommand("codeWebChat.previewWebsite",function(){var e=yi(vi().mark((function e(r){var n,o;return vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.window.createWebviewPanel("websitePreview",r.title,t.ViewColumn.One,{enableScripts:!1}),o=Mt.parse(r.content),n.webview.html='\n            <!DOCTYPE html>\n            <html lang="en">\n            <head>\n              <meta charset="UTF-8">\n              <meta name="viewport" content="width=device-width, initial-scale=1.0">\n              <title>'.concat(r.title,"</title>\n              <style>\n                body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; line-height: 1.4; max-width: 700px; margin: 0 auto; padding: 40px; color: var(--vscode-editor-foreground); }\n                body > *:first-child { margin-top: 0; }\n                body > *:last-child { margin-bottom: 0; }\n                h1 { color: var(--vscode-editor-foreground); }\n                a { color: var(--vscode-textLink-foreground); }\n                hr { height: 1px; border: none; background-color: var(--vscode-editor-foreground); }\n              </style>\n            </head>\n            <body>\n              <h1>").concat(r.title,'</h1>\n              <p>🔗 <a href="').concat(r.url,'" target="_blank">').concat(r.url,"</a></p>\n              <hr>\n              <div>").concat(o,"</div>\n            </body>\n            </html>\n          ");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(e,o,i){return t.commands.registerCommand("codeWebChat.selectSavedContext",oi(Jo().mark((function o(){var a,s,c,u,l,h,f,d,m,v,g,y,b,w,x,_,k,E,S,O,T,j,C,P,A,I,N;return Jo().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e){o.next=3;break}return t.window.showErrorMessage("No workspace provider available"),o.abrupt("return");case 3:if(a=e.getWorkspaceRoot()){o.next=7;break}return t.window.showErrorMessage("No workspace root found."),o.abrupt("return");case 7:s=i.workspaceState.get(qo,"internal"),c=i.workspaceState.get(Ro,[]),u=n.join(a,".vscode","contexts.json"),l=[];try{r.existsSync(u)&&(h=r.readFileSync(u,"utf8"),f=JSON.parse(h),Array.isArray(f)?l=f.filter((function(e){return"object"==ri(e)&&null!==e&&"string"==typeof e.name&&Array.isArray(e.paths)&&e.paths.every((function(e){return"string"==typeof e}))})):console.warn("Contexts file is not an array:",u))}catch(e){t.window.showErrorMessage("Error reading contexts file: ".concat(e.message)),console.error("Error reading contexts file:",e)}if(0!=c.length||0!=l.length){o.next=15;break}return t.window.showInformationMessage("No saved contexts found."),o.abrupt("return");case 15:if(d=[],m=void 0,!(c.length>0&&l.length>0)){o.next=31;break}return v=[{label:"Workspace State",description:"".concat(c.length," ").concat(1==c.length?"context":"contexts"),value:"internal"},{label:"JSON File (.vscode/contexts.json)",description:"".concat(l.length," ").concat(1==l.length?"context":"contexts"),value:"file"}],"file"==s?(g=v.findIndex((function(e){return"file"==e.value})))>-1&&(y=v.splice(g,1),b=Xo(y,1),w=b[0],v.unshift(w)):(x=v.findIndex((function(e){return"internal"==e.value})))>-1&&(_=v.splice(x,1),k=Xo(_,1),E=k[0],v.unshift(E)),o.next=22,t.window.showQuickPick(v,{placeHolder:"Select contexts location"});case 22:if(S=o.sent){o.next=25;break}return o.abrupt("return");case 25:return m=S.value,d="internal"==m?c:l,o.next=29,i.workspaceState.update(qo,m);case 29:o.next=43;break;case 31:if(!(c.length>0)){o.next=38;break}return d=c,m="internal",o.next=36,i.workspaceState.update(qo,m);case 36:o.next=43;break;case 38:if(!(l.length>0)){o.next=43;break}return d=l,m="file",o.next=43,i.workspaceState.update(qo,m);case 43:if(m&&0!=d.length){o.next=46;break}return t.window.showInformationMessage("No saved contexts found in the selected source."),o.abrupt("return");case 46:return o.prev=46,O={iconPath:new t.ThemeIcon("edit"),tooltip:"Rename"},T={iconPath:new t.ThemeIcon("trash"),tooltip:"Delete"},j=function(e){return e.map((function(e){return{label:e.name,description:"".concat(e.paths.length," ").concat(1==e.paths.length?"path":"paths"),context:e,buttons:[O,T]}}))},(C=t.window.createQuickPick()).items=j(d),C.placeholder="Select saved context (from ".concat("internal"==m?"Workspace State":".vscode/contexts.json",")"),P=new Promise((function(e){C.onDidAccept((function(){var t=C.activeItems[0];C.hide(),e(t)})),C.onDidHide((function(){e(void 0)})),C.onDidTriggerItemButton(function(){var e=oi(Jo().mark((function e(r){var n,o,a,s,p,h,f,d;return Jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.item,r.button!==O){e.next=43;break}return o="internal"==m?c:l,e.next=5,t.window.showInputBox({prompt:"Enter new name for context",value:n.context.name,validateInput:function(e){return e.trim()?o.find((function(t){return t.name==e.trim()&&t.name!=n.context.name}))?"A context with this name already exists":null:"Name cannot be empty"}});case 5:if(null==(a=e.sent)||!a.trim()){e.next=42;break}if(s=a.trim(),p=[],h=!1,"internal"!=m){e.next=24;break}if(s==n.context.name){e.next=19;break}return p=c.map((function(e){return e.name==n.context.name?Qo(Qo({},e),{},{name:s}):e})),e.next=15,i.workspaceState.update(Ro,p);case 15:c=p,h=!0,e.next=20;break;case 19:p=c;case 20:C.items=j(c),C.show(),e.next=41;break;case 24:if("file"!=m){e.next=41;break}if(s!=n.context.name?(p=l.map((function(e){return e.name==n.context.name?Qo(Qo({},e),{},{name:s}):e})),h=!0):p=l,!h){e.next=39;break}return e.prev=27,e.next=30,ui(p,u);case 30:l=p,e.next=39;break;case 33:e.prev=33,e.t0=e.catch(27),t.window.showErrorMessage("Error updating context name in file: ".concat(e.t0.message)),console.error("Error updating context name in file:",e.t0),p=l,h=!1;case 39:C.items=j(l),C.show();case 41:h&&t.window.showInformationMessage('Renamed context to "'.concat(s,'".'));case 42:return e.abrupt("return");case 43:if(r.button!==T){e.next=72;break}return e.next=46,t.window.showWarningMessage('Are you sure you want to delete context "'.concat(n.context.name,'"?'),{modal:!0},"Delete");case 46:if("Delete"!=e.sent){e.next=71;break}if("internal"!=m){e.next=57;break}return f=c.filter((function(e){return e.name!=n.context.name})),e.next=52,i.workspaceState.update(Ro,f);case 52:c=f,t.window.showInformationMessage('Deleted context "'.concat(n.context.name,'" from workspace state')),0==c.length?(C.hide(),t.window.showInformationMessage("No saved contexts remaining in the Workspace State.")):(C.items=j(c),C.show()),e.next=71;break;case 57:if("file"!=m){e.next=71;break}return d=l.filter((function(e){return e.name!=n.context.name})),e.prev=59,e.next=62,ui(d,u);case 62:t.window.showInformationMessage('Deleted context "'.concat(n.context.name,'" from the JSON file')),l=d,0==d.length?(C.hide(),t.window.showInformationMessage("No saved contexts remaining in the JSON file.")):(C.items=j(d),C.show()),e.next=71;break;case 67:e.prev=67,e.t1=e.catch(59),t.window.showErrorMessage("Error deleting context from file: ".concat(e.t1.message)),console.error("Error deleting context from file:",e.t1);case 71:return e.abrupt("return");case 72:case"end":return e.stop()}}),e,null,[[27,33],[59,67]])})));return function(t){return e.apply(this,arguments)}}())})),C.show(),o.next=57,P;case 57:if(A=o.sent){o.next=60;break}return o.abrupt("return");case 60:if(I="internal"==m?c.find((function(e){return e.name==A.label})):l.find((function(e){return e.name==A.label}))){o.next=65;break}return t.window.showErrorMessage('Could not find the selected context "'.concat(A.label,'" after potential edits.')),console.error("Could not find selected context after potential edits:",A.label),o.abrupt("return");case 65:return o.next=67,si(I,a,e);case 67:if("internal"!=m){o.next=73;break}return(N=c.filter((function(e){return e.name!=I.name}))).unshift(I),o.next=72,i.workspaceState.update(Ro,N);case 72:c=N;case 73:p(),o.next=80;break;case 76:o.prev=76,o.t0=o.catch(46),t.window.showErrorMessage("Error selecting saved context: ".concat(o.t0.message)),console.error("Error selecting saved context:",o.t0);case 80:case"end":return o.stop()}}),o,null,[[46,76]])}))))}(o,0,e)),d.onDidChangeCheckboxState(function(){var e=yi(vi().mark((function e(t){var r,n,o,i,a;return vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=fi(t.items),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=9;break}return o=hi(n.value,2),i=o[0],a=o[1],e.next=7,s.update_check_state(i,a);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.e(e.t0);case 14:return e.prev=14,r.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()),e.subscriptions.push(o.onDidChangeCheckedFiles((function(){p()})),s.onDidChangeCheckedFiles((function(){p()})),c.onDidChangeCheckedWebsites((function(){p()})),c.onDidChangeTreeData((function(){p()})));var m=null;return e.subscriptions.push(t.window.tabGroups.onDidChangeTabs((function(){m&&clearTimeout(m),m=setTimeout((function(){p(),m=null}),100)}))),e.subscriptions.push(t.workspace.onDidChangeWorkspaceFolders((function(){if(t.workspace.workspaceFolders){var r=new A(t.workspace.workspaceFolders);if(o){var n=o.get_checked_files();o.dispose(),o=r,n.length>0&&o.set_checked_files(n)}else o=r;var a=i;i=t.window.createTreeView("codeWebChatViewWorkspace",{treeDataProvider:o,manageCheckboxStateManually:!0}),f(i),a.dispose(),e.subscriptions.push(i),s&&h.setProviders(o,s),p()}}))),i.onDidCollapseElement((function(){o.refresh()})),e.subscriptions.push(s.onDidChangeTreeData((function(){s.is_initialized()&&p()}))),setTimeout((function(){p()}),1e3),{workspace_provider:o,open_editors_provider:s,websites_provider:c}}var xi=function(e){if(!e.includes("@selection"))return e;var r=t.window.activeTextEditor;if(!r||r.selection.isEmpty)return t.window.showInformationMessage("No text selected for @selection placeholder."),e.replace(/@selection/g,"");var n=r.document.getText(r.selection);return n.includes("\n")?e.replace(/@selection/g,"\n```\n".concat(n,"\n```\n")):e.replace(/@selection/g,"`".concat(n,"`"))};function _i(e){return _i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_i(e)}function ki(){ki=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==_i(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(_i(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Ei(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var Si=function(){var e,r=(e=ki().mark((function e(r){var n,o,i,a,s,c,u,l,p,h,f,d,m,v,g,y,b,w,x,_,k,E;return ki().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new B(r.workspace_provider,r.open_editors_provider,r.websites_provider),o=t.window.activeTextEditor,i=r.is_code_completions_mode?r.code_completion_suggestions:r.instructions,!r.is_code_completions_mode||!o){e.next=21;break}return s=o.document,c=o.selection.active,u=s.uri.fsPath,l=s.getText(new t.Range(new t.Position(0,0),c)),p=s.getText(new t.Range(c,s.positionAt(s.getText().length))),e.next=11,n.collect_files({exclude_path:u});case 11:h=e.sent,f=null===(a=t.workspace.workspaceFolders)||void 0===a?void 0:a[0].uri.fsPath,d=u.replace(f+"/",""),m=t.workspace.getConfiguration("codeWebChat"),v=m.get("chatCodeCompletionsInstructions"),g="".concat(v).concat(i?" Follow suggestions: ".concat(i):""),y="".concat(g,"\n<files>\n").concat(h,'<file path="').concat(d,'">\n<![CDATA[\n').concat(l,"<missing text>").concat(p,"\n]]>\n</file>\n</files>\n").concat(g),t.env.clipboard.writeText(y),e.next=36;break;case 21:if(r.is_code_completions_mode){e.next=34;break}return b=null==o?void 0:o.document.uri.fsPath,e.next=25,n.collect_files({active_path:b,with_line_numbers:"diff"==r.edit_format});case 25:w=e.sent,x=xi(i),_=t.workspace.getConfiguration("codeWebChat"),(k=_.get("editFormatInstructions".concat(r.edit_format.charAt(0).toUpperCase()+r.edit_format.slice(1))))&&(x+="\n".concat(k)),E="".concat(w?"".concat(x,"\n<files>\n").concat(w,"</files>\n"):"").concat(x),t.env.clipboard.writeText(E),e.next=36;break;case 34:return t.window.showWarningMessage("Cannot copy prompt in code completion mode without an active editor."),e.abrupt("return");case 36:t.window.showInformationMessage("Prompt copied to clipboard!");case 37:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ei(i,n,o,a,s,"next",e)}function s(e){Ei(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}(),Oi={Anthropic:{base_url:"https://api.anthropic.com/v1"},Cerebras:{base_url:"https://api.cerebras.ai/v1"},Chutes:{base_url:"https://llm.chutes.ai/v1"},DeepInfra:{base_url:"https://api.deepinfra.com/v1"},DeepSeek:{base_url:"https://api.deepseek.com/v1"},Fireworks:{base_url:"https://api.fireworks.ai/inference/v1"},Gemini:{base_url:"https://generativelanguage.googleapis.com/v1beta/openai"},Hyperbolic:{base_url:"https://api.hyperbolic.xyz/v1"},Mistral:{base_url:"https://api.mistral.ai/v1"},OpenAI:{base_url:"https://api.openai.com/v1"},OpenRouter:{base_url:"https://openrouter.ai/api/v1"},TogetherAI:{base_url:"https://api.together.xyz/v1"},xAI:{base_url:"https://api.x.ai/v1"}},Ti="api-providers";function ji(e){return ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ji(e)}function Ci(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(r),!0).forEach((function(t){Di(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ci(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ai(){Ai=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==ji(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ji(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Ii(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Ni(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ii(i,n,o,a,s,"next",e)}function s(e){Ii(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Fi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ri(n.key),n)}}function Di(e,t,r){return(t=Ri(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ri(e){var t=function(e){if("object"!=ji(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ji(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ji(t)?t:t+""}var Li=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Di(this,"_providers",[]),this._vscode=t,this._load_promise=this._load_providers()},t=[{key:"_load_providers",value:(v=Ni(Ai().mark((function e(){var t,r;return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._vscode.secrets.get(Ti);case 3:t=e.sent,r=t?JSON.parse(t):[],this._providers=r.filter((function(e){return"custom"==e.type||Oi[e.name]})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error loading providers from secret storage:",e.t0),this._providers=[];case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return v.apply(this,arguments)})},{key:"save_providers",value:(m=Ni(Ai().mark((function e(t){return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._vscode.secrets.store(Ti,JSON.stringify(t));case 3:this._providers=t,e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),console.error("Error saving providers to secret storage:",e.t0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return m.apply(this,arguments)})},{key:"get_providers",value:(d=Ni(Ai().mark((function e(){return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._load_promise;case 2:return e.abrupt("return",this._providers);case 3:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"get_provider",value:(f=Ni(Ai().mark((function e(t){return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._load_promise;case 2:return e.abrupt("return",this._providers.find((function(e){return e.name==t})));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"_validate_tool_config",value:function(e){if(e&&this._providers.find((function(t){return t.type==e.provider_type&&t.name==e.provider_name})))return e}},{key:"get_code_completions_tool_configs",value:(h=Ni(Ai().mark((function e(){var t,r=this;return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._load_promise;case 2:return t=this._vscode.globalState.get(Mo,[]),e.abrupt("return",t.filter((function(e){return void 0!==r._validate_tool_config(e)})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"get_default_code_completions_config",value:(p=Ni(Ai().mark((function e(){var t;return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._load_promise;case 2:return t=this._vscode.globalState.get(zo),e.abrupt("return",this._validate_tool_config(t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"set_default_code_completions_config",value:(l=Ni(Ai().mark((function e(t){return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._vscode.globalState.update(zo,t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"save_code_completions_tool_configs",value:(u=Ni(Ai().mark((function e(t){return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._vscode.globalState.update(Mo,t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"get_file_refactoring_tool_configs",value:(c=Ni(Ai().mark((function e(){var t,r=this;return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._load_promise;case 2:return t=this._vscode.globalState.get(Uo,[]),e.abrupt("return",t.filter((function(e){return void 0!==r._validate_tool_config(e)})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"get_default_file_refactoring_config",value:(s=Ni(Ai().mark((function e(){var t;return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._load_promise;case 2:return t=this._vscode.globalState.get(Wo),e.abrupt("return",this._validate_tool_config(t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"set_default_file_refactoring_config",value:(a=Ni(Ai().mark((function e(t){return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._vscode.globalState.update(Wo,t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"save_file_refactoring_tool_configs",value:(i=Ni(Ai().mark((function e(t){return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._vscode.globalState.update(Uo,t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"get_commit_messages_tool_config",value:(o=Ni(Ai().mark((function e(){var t;return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._load_promise;case 2:return t=this._vscode.globalState.get(Bo),e.abrupt("return",this._validate_tool_config(t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"save_commit_messages_tool_config",value:(n=Ni(Ai().mark((function e(t){return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._vscode.globalState.update(Bo,t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"update_provider_name_in_configs",value:(r=Ni(Ai().mark((function e(t){var r,n,o,i,a,s,c,u,l;return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.old_name,n=t.new_name,o=this._vscode.globalState.get(Mo,[]),i=o.map((function(e){return"custom"==e.provider_type&&e.provider_name==r?Pi(Pi({},e),{},{provider_name:n}):e})),e.next=5,this._vscode.globalState.update(Mo,i);case 5:if(!(a=this._vscode.globalState.get(zo))||"custom"!=a.provider_type||a.provider_name!=r){e.next=9;break}return e.next=9,this._vscode.globalState.update(zo,Pi(Pi({},a),{},{provider_name:n}));case 9:return s=this._vscode.globalState.get(Uo,[]),c=s.map((function(e){return"custom"==e.provider_type&&e.provider_name==r?Pi(Pi({},e),{},{provider_name:n}):e})),e.next=13,this._vscode.globalState.update(Uo,c);case 13:if(!(u=this._vscode.globalState.get(Wo))||"custom"!=u.provider_type||u.provider_name!=r){e.next=17;break}return e.next=17,this._vscode.globalState.update(Wo,Pi(Pi({},u),{},{provider_name:n}));case 17:if(!(l=this._vscode.globalState.get(Bo))||"custom"!=l.provider_type||l.provider_name!=r){e.next=21;break}return e.next=21,this._vscode.globalState.update(Bo,Pi(Pi({},l),{},{provider_name:n}));case 21:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}],t&&Fi(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n,o,i,a,s,c,u,l,p,h,f,d,m,v}();function Gi(e){return Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gi(e)}function qi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qi(Object(r),!0).forEach((function(t){Ui(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ui(e,t,r){return(t=function(e){var t=function(e){if("object"!=Gi(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Gi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Gi(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||$i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zi(){zi=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Gi(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Gi(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Wi(e){return function(e){if(Array.isArray(e))return Vi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $i(e,t){if(e){if("string"==typeof e)return Vi(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vi(e,t):void 0}}function Vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Hi(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Yi(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Hi(i,n,o,a,s,"next",e)}function s(e){Hi(i,n,o,a,s,"throw",e)}a(void 0)}))}}var Ji=function(){var e=Yi(zi().mark((function e(r){var n,o,i,a,s,c,u,l,p,h,f,d,m,v;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Li(r.context),o={iconPath:new t.ThemeIcon("edit"),tooltip:"Edit"},i={iconPath:new t.ThemeIcon("trash"),tooltip:"Delete"},a={iconPath:new t.ThemeIcon("chevron-up"),tooltip:"Move up"},s={iconPath:new t.ThemeIcon("chevron-down"),tooltip:"Move down"},c={iconPath:new t.ThemeIcon("key"),tooltip:"Change API key"},u=function(){var e=Yi(zi().mark((function e(){var r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get_providers();case 2:return r=e.sent,e.abrupt("return",[{label:"$(add) Add another API provider..."},{label:"",kind:t.QuickPickItemKind.Separator}].concat(Wi(r.map((function(e,t){var n=e.api_key?"...".concat(e.api_key.slice(-4)):"⚠ Missing API key",u=[];return r.length>1&&(t>0&&u.push(a),t<r.length-1&&u.push(s)),u.push("built-in"==e.type?c:o),u.push(i),{label:e.name,description:n,detail:"custom"==e.type?"Custom • ".concat(e.base_url?e.base_url:"⚠ Missing base URL"):"Predefined • ".concat(Oi[e.name].base_url),buttons:u,provider:e,index:t}})))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Yi(zi().mark((function e(){var r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get_providers();case 2:if(0!=e.sent.length){e.next=7;break}return e.next=6,p();case 6:return e.abrupt("return");case 7:return r=t.window.createQuickPick(),e.next=10,u();case 10:return r.items=e.sent,r.title="Configure API Providers",r.placeholder="Select an API provider to edit or add a new one",e.abrupt("return",new Promise((function(e){r.onDidAccept(Yi(zi().mark((function t(){var n;return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("$(add) Add another API provider..."!=(n=r.selectedItems[0]).label){t.next=7;break}return r.hide(),t.next=5,p();case 5:t.next=11;break;case 7:if(!("provider"in n)){t.next=11;break}return r.hide(),t.next=11,d(n.provider);case 11:e();case 12:case"end":return t.stop()}}),t)})))),r.onDidTriggerItemButton(function(){var l=Yi(zi().mark((function l(h){var f,m,g,y,b,w,x,_,k,E,S,O;return zi().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(f=h.item,h.button!==o){l.next=8;break}return r.hide(),l.next=5,d(f.provider);case 5:e(),l.next=59;break;case 8:if(h.button!==c){l.next=15;break}return r.hide(),l.next=12,v(f.provider);case 12:e(),l.next=59;break;case 15:if(h.button!==i){l.next=40;break}return l.next=18,t.window.showWarningMessage('Are you sure you want to delete "'.concat(f.label,'"?'),{modal:!0},"Delete");case 18:if("Delete"!=l.sent){l.next=38;break}return l.next=22,n.get_providers();case 22:return m=l.sent,g=m.filter((function(e){return e.name!=f.provider.name})),l.next=26,n.save_providers(g);case 26:return l.next=28,u();case 28:if(r.items=l.sent,0!==g.length){l.next=37;break}return r.hide(),t.window.showInformationMessage("All API providers have been removed."),l.next=34,p();case 34:e(),l.next=38;break;case 37:r.show();case 38:l.next=59;break;case 40:if(h.button!==a&&h.button!==s){l.next=59;break}return l.next=43,n.get_providers();case 43:if(y=l.sent,b=f.index,w=h.button===a,x=y.length-1,(_=w?Math.max(0,b-1):Math.min(x,b+1))!=b){l.next=51;break}return l.abrupt("return");case 51:return k=Wi(y),E=k.splice(b,1),S=Bi(E,1),O=S[0],k.splice(_,0,O),l.next=56,n.save_providers(k);case 56:return l.next=58,u();case 58:r.items=l.sent;case 59:case"end":return l.stop()}}),l)})));return function(e){return l.apply(this,arguments)}}()),r.onDidHide((function(){e()})),r.show()})));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Yi(zi().mark((function e(){var r,o,i,a,s,c,u,p;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get_providers();case 2:return r=e.sent,o=r.filter((function(e){return"built-in"==e.type})).map((function(e){return e.name})),i=Object.entries(Oi).filter((function(e){var t=Bi(e,1)[0];return!o.includes(t)})),a="$(arrow-left) Back",s="$(edit) Custom endpoint...",c=[].concat(Wi(r.length>0?[{label:a}]:[]),[{label:s,description:"You can use any OpenAI-API compatible provider"},{label:"",kind:t.QuickPickItemKind.Separator},{label:"Predefined providers",kind:t.QuickPickItemKind.Separator}],Wi(i.map((function(e){return{label:e[0],detail:e[1].base_url}})))),e.next=10,t.window.showQuickPick(c,{title:"Select Provider Type",placeHolder:"Choose a predefined provider or create a custom one"});case 10:if(u=e.sent){e.next=16;break}if(!(r.length>0)){e.next=15;break}return e.next=15,l();case 15:case 19:return e.abrupt("return");case 16:if(u.label!=a){e.next=22;break}return e.next=19,l();case 22:if(u.label!=s){e.next=27;break}return e.next=25,h();case 25:e.next=30;break;case 27:return p=i.find((function(e){return e[0]==u.label}))[0],e.next=30,f(p);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Yi(zi().mark((function e(){var r,o,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.window.showInputBox({title:"Provider Name",prompt:"Enter a name for the custom provider",validateInput:function(){var e=Yi(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.trim()){e.next=2;break}return e.abrupt("return","Name is required");case 2:return e.next=4,n.get_providers();case 4:if(!e.sent.some((function(e){return"custom"==e.type&&e.name==t.trim()}))){e.next=6;break}return e.abrupt("return","A provider with this name already exists");case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 2:if(r=e.sent){e.next=7;break}return e.next=6,p();case 6:return e.abrupt("return");case 7:return o={type:"custom",name:r.trim(),base_url:"",api_key:""},e.next=10,n.get_providers();case 10:return i=e.sent,e.next=13,n.save_providers([].concat(Wi(i),[o]));case 13:return e.next=15,m(o);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Yi(zi().mark((function e(r){var o,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.window.showInputBox({title:"API Key",prompt:"API keys are stored securely in the editor's Secret Storage.",validateInput:function(e){return e.trim()?null:"API key is required"}});case 2:if(o=e.sent){e.next=7;break}return e.next=6,p();case 6:return e.abrupt("return");case 7:return e.next=9,n.get_providers();case 9:return i=e.sent,e.next=12,n.save_providers([].concat(Wi(i),[{type:"built-in",name:r,api_key:o.trim()}]));case 12:return e.next=14,l();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Yi(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("custom"!=t.type){e.next=5;break}return e.next=3,m(t);case 3:e.next=7;break;case 5:return e.next=7,v(t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Yi(zi().mark((function e(r){var o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=Yi(zi().mark((function e(){var i,a,s,c,u,p,h,f,d,m,v,g,y,b,w;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="$(arrow-left) Back",a="Name",s="Base URL",c="API Key",u=r.api_key?"...".concat(r.api_key.slice(-4)):"Not set",e.next=7,t.window.showQuickPick([{label:i},{label:"",kind:t.QuickPickItemKind.Separator},{label:a,description:r.name},{label:s,description:"".concat(r.base_url||"Not set")},{label:c,description:u}],{title:"Edit Custom API Provider: ".concat(r.name),placeHolder:"Select what to edit",ignoreFocusOut:!0});case 7:if((p=e.sent)&&p.label!=i){e.next=12;break}return e.next=11,l();case 11:return e.abrupt("return");case 12:if(h=Mi({},r),p.label!=a){e.next=38;break}return e.next=16,t.window.showInputBox({title:"Provider Name",prompt:"Enter a new name for the custom provider",value:r.name,validateInput:function(){var e=Yi(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.trim()){e.next=2;break}return e.abrupt("return","Name is required");case 2:if(e.t0=t.trim()!=r.name,!e.t0){e.next=7;break}return e.next=6,n.get_providers();case 6:e.t0=e.sent.some((function(e){return"custom"==e.type&&e.name==t.trim()}));case 7:if(!e.t0){e.next=9;break}return e.abrupt("return","A provider with this name already exists");case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 16:if(void 0!==(f=e.sent)){e.next=21;break}return e.next=20,o();case 20:return e.abrupt("return");case 21:if(!f||f.trim()==r.name){e.next=36;break}return d=r.name,h.name=f.trim(),e.next=26,n.get_providers();case 26:return m=e.sent,v=m.map((function(e){return"custom"==e.type&&e.name==d?h:e})),e.next=30,n.save_providers(v);case 30:return e.next=32,n.update_provider_name_in_configs({old_name:d,new_name:h.name});case 32:return r=h,e.next=35,o();case 35:return e.abrupt("return");case 36:e.next=58;break;case 38:if(p.label!=s){e.next=49;break}return e.next=41,t.window.showInputBox({title:"Base URL",prompt:"Enter base URL for the API",value:r.base_url,validateInput:function(e){return e.trim()?null:"Base URL is required"}});case 41:if(void 0!==(g=e.sent)){e.next=46;break}return e.next=45,o();case 45:return e.abrupt("return");case 46:void 0!==g&&(h.base_url=g.trim().replace(/\/+$/,"")),e.next=58;break;case 49:if(p.label!=c){e.next=58;break}return e.next=52,t.window.showInputBox({title:"API Key",prompt:"Enter your API key",placeHolder:r.api_key?"(Keep current API key ...".concat(r.api_key.slice(-4),")"):"(No API key set)"});case 52:if(void 0!==(y=e.sent)){e.next=57;break}return e.next=56,o();case 56:return e.abrupt("return");case 57:y&&(h.api_key=y.trim());case 58:return e.next=60,n.get_providers();case 60:return b=e.sent,w=b.map((function(e){return"custom"==e.type&&e.name==r.name?h:e})),e.next=64,n.save_providers(w);case 64:return r=h,e.next=67,o();case 67:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,o();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Yi(zi().mark((function e(r){var o,i,a,s;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.window.showInputBox({title:"API Key for ".concat(r.name),prompt:"API keys are stored securely in the editor's Secret Storage.",placeHolder:r.api_key?"(Keep current API key ...".concat(r.api_key.slice(-4),")"):"(No API key set)"});case 2:if(void 0!==(o=e.sent)){e.next=7;break}return e.next=6,l();case 6:return e.abrupt("return");case 7:return i=Mi(Mi({},r),{},{api_key:o.trim()||r.api_key}),e.next=10,n.get_providers();case 10:return a=e.sent,s=a.map((function(e){return"built-in"==e.type&&e.name==r.name?i:e})),e.next=14,n.save_providers(s);case 14:return e.next=16,l();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=16,l();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ki={"AI Studio":{url:"https://aistudio.google.com/prompts/new_chat",supports_custom_temperature:!0,supports_custom_top_p:!0,supports_system_instructions:!0,supports_user_provided_model:!1,supports_user_provided_port:!1,default_system_instructions:"You're a helpful coding assistant.",default_top_p:.95,supported_options:{},models:{"gemini-2.5-flash-preview-04-17":"Gemini 2.5 Flash Preview 04-17","gemini-2.5-flash-preview-05-20":"Gemini 2.5 Flash Preview 05-20","gemini-2.5-pro-preview-05-06":"Gemini 2.5 Pro Preview 05-06","gemini-2.0-flash":"Gemini 2.0 Flash","gemini-2.0-flash-lite":"Gemini 2.0 Flash-Lite"}},Gemini:{url:"https://gemini.google.com/app",supports_custom_temperature:!1,supports_custom_top_p:!1,supports_system_instructions:!1,supports_user_provided_model:!1,supports_user_provided_port:!1,supported_options:{canvas:"Canvas"},default_system_instructions:"",default_top_p:0,models:{"2.5-flash":"2.5 Flash","2.5-pro-preview":"2.5 Pro (preview)"}},"Open WebUI":{url:"http://openwebui/",supports_custom_temperature:!0,supports_custom_top_p:!0,supports_system_instructions:!0,supports_user_provided_model:!0,supports_user_provided_port:!0,default_system_instructions:"You're a helpful coding assistant.",supported_options:{},default_top_p:.9,models:{}},OpenRouter:{url:"https://openrouter.ai/chat",supports_custom_temperature:!0,supports_custom_top_p:!0,supports_system_instructions:!0,supports_user_provided_model:!1,supports_user_provided_port:!1,default_system_instructions:"You're a helpful coding assistant.",supported_options:{},default_top_p:1,models:{}},ChatGPT:{url:"https://chatgpt.com/",supports_custom_temperature:!1,supports_custom_top_p:!1,supports_system_instructions:!1,supports_user_provided_model:!1,supports_user_provided_port:!1,default_system_instructions:"",supported_options:{temporary:"Temporary"},default_top_p:0,models:{}},Claude:{url:"https://claude.ai/new",supports_custom_temperature:!1,supports_custom_top_p:!1,supports_system_instructions:!1,supports_user_provided_model:!1,supports_user_provided_port:!1,default_system_instructions:"",supported_options:{},default_top_p:0,models:{}},DeepSeek:{url:"https://chat.deepseek.com/",supports_custom_temperature:!1,supports_custom_top_p:!1,supports_system_instructions:!1,supports_user_provided_model:!1,supports_user_provided_port:!1,default_system_instructions:"",supported_options:{"deep-think":"DeepThink (R1)",search:"Search"},default_top_p:0,models:{}},Mistral:{url:"https://chat.mistral.ai/chat",supports_custom_temperature:!1,supports_custom_top_p:!1,supports_system_instructions:!1,supports_user_provided_model:!1,supports_user_provided_port:!1,default_system_instructions:"",supported_options:{},default_top_p:0,models:{}},Grok:{url:"https://grok.com/",supports_custom_temperature:!1,supports_custom_top_p:!1,supports_system_instructions:!1,supports_user_provided_model:!1,supports_user_provided_port:!1,default_system_instructions:"",supported_options:{think:"Think"},default_top_p:0,models:{}},HuggingChat:{url:"https://huggingface.co/chat/",supports_custom_temperature:!1,supports_custom_top_p:!1,supports_system_instructions:!1,supports_user_provided_model:!1,supports_user_provided_port:!1,default_system_instructions:"",supported_options:{},default_top_p:0,models:{}},Qwen:{url:"https://chat.qwen.ai/",supports_custom_temperature:!1,supports_custom_top_p:!1,supports_system_instructions:!1,supports_user_provided_model:!1,supports_user_provided_port:!1,default_system_instructions:"",supported_options:{thinking:"Thinking"},default_top_p:0,models:{"qwen3-235b-a22b":"Qwen3-235B-A22B","qwen3-30b-a3b":"Qwen3-30B-A3B","qwen3-32b":"Qwen3-32B","qwen2.5-max":"Qwen2.5-Max"}},Yuanbao:{url:"https://yuanbao.tencent.com/chat",supports_custom_temperature:!1,supports_custom_top_p:!1,supports_system_instructions:!1,supports_user_provided_model:!1,supports_user_provided_port:!1,default_system_instructions:"",supported_options:{"deep-think":"DeepThink",search:"Search"},default_top_p:0,models:{deepseek:"DeepSeek",hunyuan:"Hunyuan"}},Doubao:{url:"https://www.doubao.com/chat/",supports_custom_temperature:!1,supports_custom_top_p:!1,supports_system_instructions:!1,supports_user_provided_model:!1,supports_user_provided_port:!1,default_system_instructions:"",supported_options:{"deep-thinking":"Deep Thinking"},default_top_p:0,models:{}}};function Qi(e){return{name:e.name,chatbot:e.chatbot,prompt_prefix:e.promptPrefix,prompt_suffix:e.promptSuffix,model:e.model,temperature:e.temperature,top_p:e.topP,system_instructions:e.systemInstructions,options:e.options,port:e.port}}function Zi(e){return{name:e.name,chatbot:e.chatbot,promptPrefix:e.prompt_prefix,promptSuffix:e.prompt_suffix,model:e.model,temperature:e.temperature,topP:e.top_p,systemInstructions:e.system_instructions,options:e.options,port:e.port}}function Xi(e){return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xi(e)}function ea(){ea=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Xi(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Xi(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ra(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var na=function(){var e,r=(e=ea().mark((function e(r){var n,o,i,a,s,c;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.workspace.getConfiguration("codeWebChat"),o=n.get("presets",[])||[],i="",a=0;o.some((function(e){return e.name==i}));)i="(".concat(a++,")");return s={name:i,chatbot:"AI Studio",model:Object.keys(Ki["AI Studio"].models)[0],temperature:.5,systemInstructions:Ki["AI Studio"].default_system_instructions},c=[].concat(function(e){if(Array.isArray(e))return ta(e)}(u=o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(u)||function(e,t){if(e){if("string"==typeof e)return ta(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ta(e,t):void 0}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[s]),e.prev=7,r.send_message({command:"PRESET_CREATED",preset:Qi(s)}),e.next=11,n.update("presets",c,!0);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),t.window.showErrorMessage("Failed to create preset: ".concat(e.t0));case 16:case"end":return e.stop()}var u}),e,null,[[7,13]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ra(i,n,o,a,s,"next",e)}function s(e){ra(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();function oa(e){return oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oa(e)}function ia(){ia=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==oa(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(oa(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function sa(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var ca=function(){var e,r=(e=ia().mark((function e(r,n,o){var i,a,s,c,u,l,p,h,f,d,m,v,g;return ia().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.name,a=t.workspace.getConfiguration("codeWebChat"),s=a.get("presets",[])||[],c="Delete",e.next=6,t.window.showInformationMessage("Please confirm",{modal:!0,detail:'Are you sure you want to delete preset "'.concat(i,'"?')},c);case 6:if(e.sent==c){e.next=9;break}return e.abrupt("return");case 9:return u=s.findIndex((function(e){return e.name==i})),l=s[u],p=s.filter((function(e){return e.name!=i})),e.prev=12,e.next=15,a.update("presets",p,t.ConfigurationTarget.Global);case 15:return h="Undo",e.next=18,t.window.showInformationMessage('Preset "'.concat(i,'" has been deleted.'),h);case 18:if(e.sent!=h||!l){e.next=25;break}return(y=p,f=function(e){if(Array.isArray(e))return aa(e)}(y)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(y)||function(e,t){if(e){if("string"==typeof e)return aa(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?aa(e,t):void 0}}(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).splice(u,0,l),e.next=24,a.update("presets",f,t.ConfigurationTarget.Global);case 24:t.window.showInformationMessage('Preset "'.concat(i,'" restored.'));case 25:if(r.send_presets_to_webview(o.webview),!(d=r.context.globalState.get("selectedPresets",[])).includes(i)){e.next=32;break}return m=d.filter((function(e){return e!=i})),e.next=31,r.context.globalState.update("selectedPresets",m);case 31:r.send_message({command:"SELECTED_PRESETS",names:m});case 32:if(!(v=r.context.globalState.get("selectedCodeCompletionPresets",[])).includes(i)){e.next=38;break}return g=v.filter((function(e){return e!=i})),e.next=37,r.context.globalState.update("selectedCodeCompletionPresets",g);case 37:r.send_message({command:"SELECTED_CODE_COMPLETION_PRESETS",names:g});case 38:e.next=43;break;case 40:e.prev=40,e.t0=e.catch(12),t.window.showErrorMessage("Failed to delete preset: ".concat(e.t0));case 43:case"end":return e.stop()}var y}),e,null,[[12,40]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){sa(i,n,o,a,s,"next",e)}function s(e){sa(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e,t,n){return r.apply(this,arguments)}}();function ua(e){return ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ua(e)}function la(){la=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==ua(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ua(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ha(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ha(Object(r),!0).forEach((function(t){da(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ha(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function da(e,t,r){return(t=function(e){var t=function(e){if("object"!=ua(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ua(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ua(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ma(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var va=function(){var e,r=(e=la().mark((function e(r,n,o){var i,a,s,c,u,l,p,h,f;return la().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.name,a=t.workspace.getConfiguration("codeWebChat"),s=a.get("presets",[])||[],c=s.find((function(e){return e.name==i}))){e.next=7;break}return t.window.showErrorMessage('Preset "'.concat(i,'" not found')),e.abrupt("return");case 7:for(u=s.findIndex((function(e){return e.name==i})),l="".concat(i," (1)"),p=1;s.some((function(e){return e.name==l}));)l="".concat(i," (").concat(p++,")");return h=fa(fa({},c),{},{name:l}),(d=s,f=function(e){if(Array.isArray(e))return pa(e)}(d)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(d)||function(e,t){if(e){if("string"==typeof e)return pa(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pa(e,t):void 0}}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).splice(u+1,0,h),e.prev=14,e.next=17,a.update("presets",f,!0);case 17:r.send_presets_to_webview(o.webview),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(14),t.window.showErrorMessage("Failed to duplicate preset: ".concat(e.t0));case 23:case"end":return e.stop()}var d}),e,null,[[14,20]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ma(i,n,o,a,s,"next",e)}function s(e){ma(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e,t,n){return r.apply(this,arguments)}}(),ga=function(e){e.send_message({command:"CODE_COMPLETION_SUGGESTIONS",value:e.code_completion_suggestions})},ya=function(e){var t=e.context.workspaceState.get("code-completions-history",[]);e.send_message({command:"FIM_CHAT_HISTORY",messages:t})},ba=function(e){var r=!!t.window.activeTextEditor;e.is_code_completions_mode&&!r?(e.is_code_completions_mode=!1,e.send_message({command:"CODE_COMPLETIONS_MODE",enabled:!1})):e.send_message({command:"CODE_COMPLETIONS_MODE",enabled:e.is_code_completions_mode})},wa=function(e){e.send_message({command:"CONNECTION_STATUS",connected:e.websocket_server_instance.is_connected_with_browser()})},xa=function(e){var r=t.workspace.getConfiguration("codeWebChat").get("editFormatSelectorVisibility");e.send_message({command:"EDIT_FORMAT_SELECTOR_VISIBILITY",visibility:r})},_a=function(e){e.send_message({command:"INSTRUCTIONS",value:e.instructions})},ka=function(e){var t=e.context.globalState.get("selectedCodeCompletionPresets",[]);e.send_message({command:"SELECTED_CODE_COMPLETION_PRESETS",names:t})},Ea=function(e){var t=e.context.globalState.get("selectedPresets",[]);e.send_message({command:"SELECTED_PRESETS",names:t})};function Sa(e){return Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sa(e)}function Oa(){Oa=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Sa(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Sa(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Ta(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var ja=function(){var e,r=(e=Oa().mark((function e(r,n){var o,i,a,s,c,u,l,p,h,f,d,m,v,g,y,b,w,x,_,k;return Oa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.workspace.saveAll();case 2:if(o=new B(r.workspace_provider,r.open_editors_provider,r.websites_provider),i=t.window.activeTextEditor,a=null==i?void 0:i.document.uri.fsPath,c=r.is_code_completions_mode?r.code_completion_suggestions:r.instructions,!r.is_code_completions_mode||!i){e.next=22;break}return l=i.document,p=i.selection.active,h=l.getText(new t.Range(new t.Position(0,0),p)),f=l.getText(new t.Range(p,l.positionAt(l.getText().length))),e.next=13,o.collect_files({exclude_path:a});case 13:d=e.sent,m=null===(u=t.workspace.workspaceFolders)||void 0===u?void 0:u[0].uri.fsPath,v=a.replace(m+"/",""),g=t.workspace.getConfiguration("codeWebChat"),y=g.get("chatCodeCompletionsInstructions"),b="".concat(y).concat(c?" Follow suggestions: ".concat(c):""),s="".concat(b,"\n<files>\n").concat(d,'<file path="').concat(v,'">\n<![CDATA[\n').concat(h,"<missing text>").concat(f,"\n]]>\n</file>\n</files>\n").concat(b),e.next=37;break;case 22:if(r.is_code_completions_mode){e.next=35;break}return e.next=25,o.collect_files({active_path:a,with_line_numbers:"diff"==r.edit_format});case 25:w=e.sent,x=xi(c),n.preset.prompt_prefix&&(x=n.preset.prompt_prefix+"\n"+x),n.preset.prompt_suffix&&(x=x+"\n"+n.preset.prompt_suffix),_=t.workspace.getConfiguration("codeWebChat"),(k=_.get("editFormatInstructions".concat(r.edit_format.charAt(0).toUpperCase()+r.edit_format.slice(1))))&&(x+="\n".concat(k)),s="".concat(w?"".concat(x,"\n<files>\n").concat(w,"</files>\n"):"").concat(x),e.next=37;break;case 35:return t.window.showWarningMessage("Cannot preview in code completion mode without an active editor."),e.abrupt("return");case 37:r.websocket_server_instance.preview_preset(s,n.preset),t.window.showInformationMessage("Preset preview sent to the connected browser.");case 39:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ta(i,n,o,a,s,"next",e)}function s(e){Ta(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),Ca=function(e){e.send_message({command:"EDITOR_SELECTION_CHANGED",has_selection:e.has_active_selection})},Pa=function(e){e.send_message({command:"EDITOR_STATE_CHANGED",has_active_editor:e.has_active_editor})};function Aa(e){return Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Aa(e)}function Ia(){Ia=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Aa(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Aa(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Na(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var Fa=function(){var e,t=(e=Ia().mark((function e(t,r){return Ia().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.code_completion_suggestions=r.instruction,e.next=3,t.context.workspaceState.update("code-completion-suggestions",r.instruction);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Na(i,n,o,a,s,"next",e)}function s(e){Na(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();function Da(e){return Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Da(e)}function Ra(){Ra=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Da(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Da(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function La(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var Ga=function(){var e,t=(e=Ra().mark((function e(t,r){return Ra().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.is_code_completions_mode=r.enabled,t.calculate_token_count(),t.send_message({command:"CODE_COMPLETIONS_MODE",enabled:r.enabled});case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){La(i,n,o,a,s,"next",e)}function s(e){La(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();function qa(e){return qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qa(e)}function Ma(){Ma=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==qa(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(qa(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Ua(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var Ba=function(){var e,r=(e=Ma().mark((function e(r,n){var o;return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.workspace.getConfiguration("codeWebChat"),e.next=3,o.update("editFormatSelectorVisibility",n.visibility,t.ConfigurationTarget.Global);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ua(i,n,o,a,s,"next",e)}function s(e){Ua(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}();function za(e){return za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},za(e)}function Wa(){Wa=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==za(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(za(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function $a(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var Va=function(){var e,t=(e=Wa().mark((function e(t,r){return Wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.edit_format=r,e.next=3,t.context.workspaceState.update("editFormat",r);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){$a(i,n,o,a,s,"next",e)}function s(e){$a(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();function Ha(e){return Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ha(e)}function Ya(){Ya=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Ha(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Ha(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Ja(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var Ka=function(){var e,t=(e=Ya().mark((function e(t,r){var n;return Ya().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.is_code_completions_mode?"code-completions-history":"history",e.next=3,t.context.workspaceState.update(n,r.messages);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ja(i,n,o,a,s,"next",e)}function s(e){Ja(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();function Qa(e){return Qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qa(e)}function Za(){Za=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Qa(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Qa(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Xa(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var es=function(){var e,t=(e=Za().mark((function e(t,r){return Za().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.instructions=r.instruction,e.next=3,t.context.workspaceState.update("instructions",r.instruction);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Xa(i,n,o,a,s,"next",e)}function s(e){Xa(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();function ts(e){return ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ts(e)}function rs(){rs=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==ts(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ts(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function ns(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var os=function(){var e,r=(e=rs().mark((function e(r,n){var o,i;return rs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.workspace.getConfiguration("codeWebChat"),i=n.presets.map((function(e){return Zi(e)})),e.next=4,o.update("presets",i,t.ConfigurationTarget.Global);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ns(i,n,o,a,s,"next",e)}function s(e){ns(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}();function is(e,r){var n=function(e){return t.workspace.getConfiguration("codeWebChat").get("presets",[]).filter((function(t){return e.includes(t.name)})).map((function(e){return{name:e.name,prompt_prefix:e.promptPrefix,prompt_suffix:e.promptSuffix}}))}(r);if(0==n.length)return e;var o=n[0],i=e;return o.prompt_prefix&&(i="".concat(o.prompt_prefix," ").concat(i)),o.prompt_suffix&&(i="".concat(i," ").concat(o.prompt_suffix)),i}function as(e){return as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},as(e)}function ss(){ss=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==as(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(as(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function cs(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function us(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){cs(i,n,o,a,s,"next",e)}function s(e){cs(i,n,o,a,s,"throw",e)}a(void 0)}))}}var ls=function(){var e=us(ss().mark((function e(r,n){var o,i,a,s,c,u,l,p,h,f,d,m,v,g,y,b,w,x,_,k,E;return ss().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ps(n,r.is_code_completions_mode,r.context);case 2:if(0!=(o=e.sent).length){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.workspace.saveAll();case 7:if(i=new B(r.workspace_provider,r.open_editors_provider,r.websites_provider),a=t.window.activeTextEditor,s=null==a?void 0:a.document.uri.fsPath,!r.is_code_completions_mode||!a){e.next=27;break}return u=a.document,l=a.selection.active,p=u.getText(new t.Range(new t.Position(0,0),l)),h=u.getText(new t.Range(l,u.positionAt(u.getText().length))),e.next=17,i.collect_files({exclude_path:s});case 17:f=e.sent,d=null===(c=t.workspace.workspaceFolders)||void 0===c?void 0:c[0].uri.fsPath,m=s.replace(d+"/",""),v=t.workspace.getConfiguration("codeWebChat"),g=v.get("chatCodeCompletionsInstructions"),y="".concat(g).concat(r.code_completion_suggestions?" Follow suggestions: ".concat(r.code_completion_suggestions):""),b="".concat(y,"\n<files>\n").concat(f,'<file path="').concat(m,'">\n<![CDATA[\n').concat(p,"<missing text>").concat(h,"\n]]>\n</file>\n</files>\n").concat(y),r.websocket_server_instance.initialize_chats(b,o),e.next=41;break;case 27:if(r.is_code_completions_mode){e.next=41;break}if(r.instructions){e.next=30;break}return e.abrupt("return");case 30:return e.next=32,i.collect_files({active_path:s,with_line_numbers:"diff"==r.edit_format});case 32:w=e.sent,x=r.instructions,x=is(x=xi(x),o),_=t.workspace.getConfiguration("codeWebChat"),(k=_.get("editFormatInstructions".concat(r.edit_format.charAt(0).toUpperCase()+r.edit_format.slice(1))))&&(x+="\n".concat(k)),E="".concat(w?"".concat(x,"\n<files>\n").concat(w,"</files>\n"):"").concat(x),r.websocket_server_instance.initialize_chats(E,o);case 41:t.window.showInformationMessage(o.length>1?"Chats have been initialized in the connected browser.":"Chat has been initialized in the connected browser.");case 42:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();function ps(e,t,r){return hs.apply(this,arguments)}function hs(){return hs=us(ss().mark((function e(r,n,o){var i,a,s,c,u,l,p,h,f,d,m;return ss().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.workspace.getConfiguration("codeWebChat"),a=i.get("presets",[]),s=a.filter((function(e){return!n||!e.promptPrefix&&!e.promptSuffix})),c=s.map((function(e){return e.name})),0!=(u=r.filter((function(e){return c.includes(e)}))).length){e.next=16;break}return l=o.globalState.get(Ho,""),p={iconPath:new t.ThemeIcon("chevron-up"),tooltip:"Move up"},h={iconPath:new t.ThemeIcon("chevron-down"),tooltip:"Move down"},f=function(){return s.map((function(e,t){var r=[];return s.length>1&&(t>0&&r.push(p),t<s.length-1&&r.push(h)),{label:e.name,description:"".concat(e.chatbot).concat(e.model?" • ".concat(e.model):""),index:t,buttons:r}}))},d=t.window.createQuickPick(),m=f(),d.items=m,d.placeholder="Select preset",l&&m.some((function(e){return e.label==l}))?d.activeItems=[m.find((function(e){return e.label==l}))]:m.length>0&&(d.activeItems=[m[0]]),e.abrupt("return",new Promise((function(e){d.onDidTriggerItemButton(function(){var e=us(ss().mark((function e(r){var n,o,a,c,u;return ss().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.item,o=r.button,a=n.index,!("Move up"==o.tooltip&&a>0)){e.next=12;break}return c=s[a],s[a]=s[a-1],s[a-1]=c,e.next=9,i.update("presets",s,t.ConfigurationTarget.Global);case 9:d.items=f(),e.next=19;break;case 12:if(!("Move down"==o.tooltip&&a<s.length-1)){e.next=19;break}return u=s[a],s[a]=s[a+1],s[a+1]=u,e.next=18,i.update("presets",s,t.ConfigurationTarget.Global);case 18:d.items=f();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d.onDidAccept((function(){var t=d.selectedItems[0];if(d.hide(),t){var r=t.label;o.globalState.update(Ho,r),e([r])}else e([])})),d.onDidHide((function(){d.dispose(),e([])})),d.show()})));case 16:return e.abrupt("return",u);case 17:case"end":return e.stop()}}),e)}))),hs.apply(this,arguments)}function fs(e){return fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fs(e)}function ds(){ds=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==fs(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(fs(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function ms(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var vs=function(){var e,r=(e=ds().mark((function e(r,n){var o,i,a,s,c,u,l,p,h;return ds().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.workspace.getConfiguration("codeWebChat"),i=o.get("presets",[]),a=n?"selectedCodeCompletionPresets":"selectedPresets",s=i.filter((function(e){return n?!e.promptPrefix&&!e.promptSuffix:e})).map((function(e){return e.name})),c=(c=r.context.globalState.get(a,[])).filter((function(e){return s.includes(e)})),e.next=8,r.context.globalState.update(a,c);case 8:return u=i.filter((function(e){return n?!e.promptPrefix&&!e.promptSuffix:e})).map((function(e){return{label:e.name,description:"".concat(e.chatbot).concat(e.model?" - ".concat(e.model):""),picked:c.includes(e.name)}})),l=n?"Select one or more code completion presets":"Select one or more chat presets",e.next=12,t.window.showQuickPick(u,{placeHolder:l,canPickMany:!0});case 12:if(!(p=e.sent)){e.next=18;break}return h=p.map((function(e){return e.label})),e.next=17,r.context.globalState.update(a,h);case 17:n?r.send_message({command:"SELECTED_CODE_COMPLETION_PRESETS",names:h}):r.send_message({command:"SELECTED_PRESETS",names:h});case 18:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ms(i,n,o,a,s,"next",e)}function s(e){ms(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}();function gs(e){return gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gs(e)}function ys(){ys=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==gs(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(gs(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function bs(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var ws=function(){var e,r=(e=ys().mark((function e(r){var n,o,i,a;return ys().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.items.map((function(e){return{label:e.label,description:e.description}})),e.next=3,t.window.showQuickPick(n,{placeHolder:r.title});case 3:(o=e.sent)&&(a=null===(i=r.items.find((function(e){return e.label==o.label})))||void 0===i?void 0:i.command)&&t.commands.executeCommand(a);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){bs(i,n,o,a,s,"next",e)}function s(e){bs(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();function xs(e){return xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xs(e)}function _s(){_s=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==xs(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(xs(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function ks(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Es(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ss(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Es(Object(r),!0).forEach((function(t){Os(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Es(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Os(e,t,r){return(t=function(e){var t=function(e){if("object"!=xs(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=xs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xs(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ts(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var js=function(){var e,r=(e=_s().mark((function e(r,n,o){var i,a,s,c,u,l,p,h,f,d,m,v,g,y,b,w,x,_;return _s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.workspace.getConfiguration("codeWebChat"),a=i.get("presets",[])||[],-1!=(s=a.findIndex((function(e){return e.name==n.updating_preset.name})))){e.next=7;break}return console.error('Preset with original name "'.concat(n.updating_preset.name,'" not found.')),t.window.showErrorMessage('Could not update preset: Original preset "'.concat(n.updating_preset.name,'" not found.')),e.abrupt("return");case 7:if(E=n.updating_preset,S=n.updated_preset,E.name!=S.name||E.chatbot!=S.chatbot||E.prompt_prefix!=S.prompt_prefix||E.prompt_suffix!=S.prompt_suffix||E.model!=S.model||E.temperature!==S.temperature||E.top_p!==S.top_p||E.system_instructions!=S.system_instructions||JSON.stringify(E.options)!=JSON.stringify(S.options)||E.port!=S.port){e.next=12;break}return r.send_message({command:"PRESET_UPDATED"}),e.abrupt("return");case 12:return c="Save",u="Discard Changes",e.next=16,t.window.showInformationMessage("Save changes to the preset?",{modal:!0,detail:"If you don't save, updates to the preset will be lost."},c,u);case 16:if((l=e.sent)!=u){e.next=20;break}return r.send_message({command:"PRESET_UPDATED"}),e.abrupt("return");case 20:if(l==c){e.next=22;break}return e.abrupt("return");case 22:p=Ss({},n.updated_preset),h=p.name.trim(),f=!1,d=0,m=h,v=_s().mark((function e(){var t;return _s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0==d?m:"".concat(m," (").concat(d,")").trim(),a.some((function(e,r){return r!=s&&e.name==t}))?d++:(h=t,f=!0);case 3:case"end":return e.stop()}}),e)}));case 28:if(f){e.next=32;break}return e.delegateYield(v(),"t0",30);case 30:e.next=28;break;case 32:return h!=p.name&&(p.name=h),(k=a,g=function(e){if(Array.isArray(e))return ks(e)}(k)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(k)||function(e,t){if(e){if("string"==typeof e)return ks(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ks(e,t):void 0}}(k)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[s]=Zi(p),e.next=37,i.update("presets",g,t.ConfigurationTarget.Global);case 37:if(!(y=r.context.globalState.get("selectedPresets",[])).includes(n.updating_preset.name)){e.next=43;break}return b=y.map((function(e){return e==n.updating_preset.name?h:e})),e.next=42,r.context.globalState.update("selectedPresets",b);case 42:r.send_message({command:"SELECTED_PRESETS",names:b});case 43:if(!(w=r.context.globalState.get("selectedCodeCompletionPresets",[])).includes(n.updating_preset.name)){e.next=59;break}if(!p.prompt_prefix&&!p.prompt_suffix){e.next=54;break}return x=w.filter((function(e){return e!==n.updating_preset.name})),e.next=51,r.context.globalState.update("selectedCodeCompletionPresets",x);case 51:r.send_message({command:"SELECTED_CODE_COMPLETION_PRESETS",names:x}),e.next=59;break;case 54:if(h==n.updating_preset.name){e.next=59;break}return _=w.map((function(e){return e==n.updating_preset.name?h:e})),e.next=58,r.context.globalState.update("selectedCodeCompletionPresets",_);case 58:r.send_message({command:"SELECTED_CODE_COMPLETION_PRESETS",names:_});case 59:r.send_presets_to_webview(o.webview),r.send_message({command:"PRESET_UPDATED"});case 61:case"end":return e.stop()}var k,E,S}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ts(i,n,o,a,s,"next",e)}function s(e){Ts(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e,t,n){return r.apply(this,arguments)}}();function Cs(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ps}=Object.prototype,{getPrototypeOf:As}=Object,{iterator:Is,toStringTag:Ns}=Symbol,Fs=(Ds=Object.create(null),e=>{const t=Ps.call(e);return Ds[t]||(Ds[t]=t.slice(8,-1).toLowerCase())});var Ds;const Rs=e=>(e=e.toLowerCase(),t=>Fs(t)===e),Ls=e=>t=>typeof t===e,{isArray:Gs}=Array,qs=Ls("undefined"),Ms=Rs("ArrayBuffer"),Us=Ls("string"),Bs=Ls("function"),zs=Ls("number"),Ws=e=>null!==e&&"object"==typeof e,$s=e=>{if("object"!==Fs(e))return!1;const t=As(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Ns in e||Is in e)},Vs=Rs("Date"),Hs=Rs("File"),Ys=Rs("Blob"),Js=Rs("FileList"),Ks=Rs("URLSearchParams"),[Qs,Zs,Xs,ec]=["ReadableStream","Request","Response","Headers"].map(Rs);function tc(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,o;if("object"!=typeof e&&(e=[e]),Gs(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let a;for(n=0;n<i;n++)a=o[n],t.call(null,e[a],a,e)}}function rc(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,o=r.length;for(;o-- >0;)if(n=r[o],t===n.toLowerCase())return n;return null}const nc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,oc=e=>!qs(e)&&e!==nc,ic=(ac="undefined"!=typeof Uint8Array&&As(Uint8Array),e=>ac&&e instanceof ac);var ac;const sc=Rs("HTMLFormElement"),cc=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),uc=Rs("RegExp"),lc=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};tc(r,((r,o)=>{let i;!1!==(i=t(r,o,e))&&(n[o]=i||r)})),Object.defineProperties(e,n)},pc=Rs("AsyncFunction"),hc=(fc="function"==typeof setImmediate,dc=Bs(nc.postMessage),fc?setImmediate:dc?(mc=`axios@${Math.random()}`,vc=[],nc.addEventListener("message",(({source:e,data:t})=>{e===nc&&t===mc&&vc.length&&vc.shift()()}),!1),e=>{vc.push(e),nc.postMessage(mc,"*")}):e=>setTimeout(e));var fc,dc,mc,vc;const gc="undefined"!=typeof queueMicrotask?queueMicrotask.bind(nc):"undefined"!=typeof process&&process.nextTick||hc,yc={isArray:Gs,isArrayBuffer:Ms,isBuffer:function(e){return null!==e&&!qs(e)&&null!==e.constructor&&!qs(e.constructor)&&Bs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Bs(e.append)&&("formdata"===(t=Fs(e))||"object"===t&&Bs(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Ms(e.buffer),t},isString:Us,isNumber:zs,isBoolean:e=>!0===e||!1===e,isObject:Ws,isPlainObject:$s,isReadableStream:Qs,isRequest:Zs,isResponse:Xs,isHeaders:ec,isUndefined:qs,isDate:Vs,isFile:Hs,isBlob:Ys,isRegExp:uc,isFunction:Bs,isStream:e=>Ws(e)&&Bs(e.pipe),isURLSearchParams:Ks,isTypedArray:ic,isFileList:Js,forEach:tc,merge:function e(){const{caseless:t}=oc(this)&&this||{},r={},n=(n,o)=>{const i=t&&rc(r,o)||o;$s(r[i])&&$s(n)?r[i]=e(r[i],n):$s(n)?r[i]=e({},n):Gs(n)?r[i]=n.slice():r[i]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&tc(arguments[e],n);return r},extend:(e,t,r,{allOwnKeys:n}={})=>(tc(t,((t,n)=>{r&&Bs(t)?e[n]=Cs(t,r):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let o,i,a;const s={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],n&&!n(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==r&&As(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:Fs,kindOfTest:Rs,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(Gs(e))return e;let t=e.length;if(!zs(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Is]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:sc,hasOwnProperty:cc,hasOwnProp:cc,reduceDescriptors:lc,freezeMethods:e=>{lc(e,((t,r)=>{if(Bs(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];Bs(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return Gs(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:rc,global:nc,isContextDefined:oc,isSpecCompliantForm:function(e){return!!(e&&Bs(e.append)&&"FormData"===e[Ns]&&e[Is])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(Ws(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const o=Gs(e)?[]:{};return tc(e,((e,t)=>{const i=r(e,n+1);!qs(i)&&(o[t]=i)})),t[n]=void 0,o}}return e};return r(e,0)},isAsyncFn:pc,isThenable:e=>e&&(Ws(e)||Bs(e))&&Bs(e.then)&&Bs(e.catch),setImmediate:hc,asap:gc,isIterable:e=>null!=e&&Bs(e[Is])};function bc(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}yc.inherits(bc,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:yc.toJSONObject(this.config),code:this.code,status:this.status}}});const wc=bc.prototype,xc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{xc[e]={value:e}})),Object.defineProperties(bc,xc),Object.defineProperty(wc,"isAxiosError",{value:!0}),bc.from=(e,t,r,n,o,i)=>{const a=Object.create(wc);return yc.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),bc.call(a,e.message,t,r,n,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const _c=bc,kc=o(3090);function Ec(e){return yc.isPlainObject(e)||yc.isArray(e)}function Sc(e){return yc.endsWith(e,"[]")?e.slice(0,-2):e}function Oc(e,t,r){return e?e.concat(t).map((function(e,t){return e=Sc(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}const Tc=yc.toFlatObject(yc,{},null,(function(e){return/^is[A-Z]/.test(e)})),jc=function(e,t,r){if(!yc.isObject(e))throw new TypeError("target must be an object");t=t||new(kc||FormData);const n=(r=yc.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!yc.isUndefined(t[e])}))).metaTokens,o=r.visitor||u,i=r.dots,a=r.indexes,s=(r.Blob||"undefined"!=typeof Blob&&Blob)&&yc.isSpecCompliantForm(t);if(!yc.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(yc.isDate(e))return e.toISOString();if(!s&&yc.isBlob(e))throw new _c("Blob is not supported. Use a Buffer instead.");return yc.isArrayBuffer(e)||yc.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,r,o){let s=e;if(e&&!o&&"object"==typeof e)if(yc.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(yc.isArray(e)&&function(e){return yc.isArray(e)&&!e.some(Ec)}(e)||(yc.isFileList(e)||yc.endsWith(r,"[]"))&&(s=yc.toArray(e)))return r=Sc(r),s.forEach((function(e,n){!yc.isUndefined(e)&&null!==e&&t.append(!0===a?Oc([r],n,i):null===a?r:r+"[]",c(e))})),!1;return!!Ec(e)||(t.append(Oc(o,r,i),c(e)),!1)}const l=[],p=Object.assign(Tc,{defaultVisitor:u,convertValue:c,isVisitable:Ec});if(!yc.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!yc.isUndefined(r)){if(-1!==l.indexOf(r))throw Error("Circular reference detected in "+n.join("."));l.push(r),yc.forEach(r,(function(r,i){!0===(!(yc.isUndefined(r)||null===r)&&o.call(t,r,yc.isString(i)?i.trim():i,n,p))&&e(r,n?n.concat(i):[i])})),l.pop()}}(e),t};function Cc(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Pc(e,t){this._pairs=[],e&&jc(e,this,t)}const Ac=Pc.prototype;Ac.append=function(e,t){this._pairs.push([e,t])},Ac.toString=function(e){const t=e?function(t){return e.call(this,t,Cc)}:Cc;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Ic=Pc;function Nc(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Fc(e,t,r){if(!t)return e;const n=r&&r.encode||Nc;yc.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let i;if(i=o?o(t,r):yc.isURLSearchParams(t)?t.toString():new Ic(t,r).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const Dc=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){yc.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Rc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var Lc=o(6982);const Gc=o(7016).URLSearchParams,qc="abcdefghijklmnopqrstuvwxyz",Mc="0123456789",Uc={DIGIT:Mc,ALPHA:qc,ALPHA_DIGIT:qc+qc.toUpperCase()+Mc},Bc={isNode:!0,classes:{URLSearchParams:Gc,FormData:kc,Blob:"undefined"!=typeof Blob&&Blob||null},ALPHABET:Uc,generateString:(e=16,t=Uc.ALPHA_DIGIT)=>{let r="";const{length:n}=t,o=new Uint32Array(e);Lc.randomFillSync(o);for(let i=0;i<e;i++)r+=t[o[i]%n];return r},protocols:["http","https","file","data"]},zc="undefined"!=typeof window&&"undefined"!=typeof document,Wc="object"==typeof navigator&&navigator||void 0,$c=zc&&(!Wc||["ReactNative","NativeScript","NS"].indexOf(Wc.product)<0),Vc="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Hc=zc&&window.location.href||"http://localhost",Yc={...e,...Bc},Jc=function(e){function t(e,r,n,o){let i=e[o++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),s=o>=e.length;return i=!i&&yc.isArray(n)?n.length:i,s?(yc.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!a):(n[i]&&yc.isObject(n[i])||(n[i]=[]),t(e,r,n[i],o)&&yc.isArray(n[i])&&(n[i]=function(e){const t={},r=Object.keys(e);let n;const o=r.length;let i;for(n=0;n<o;n++)i=r[n],t[i]=e[i];return t}(n[i])),!a)}if(yc.isFormData(e)&&yc.isFunction(e.entries)){const r={};return yc.forEachEntry(e,((e,n)=>{t(function(e){return yc.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null},Kc={transitional:Rc,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,o=yc.isObject(e);if(o&&yc.isHTMLForm(e)&&(e=new FormData(e)),yc.isFormData(e))return n?JSON.stringify(Jc(e)):e;if(yc.isArrayBuffer(e)||yc.isBuffer(e)||yc.isStream(e)||yc.isFile(e)||yc.isBlob(e)||yc.isReadableStream(e))return e;if(yc.isArrayBufferView(e))return e.buffer;if(yc.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return jc(e,new Yc.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return Yc.isNode&&yc.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=yc.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return jc(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||n?(t.setContentType("application/json",!1),function(e){if(yc.isString(e))try{return(0,JSON.parse)(e),yc.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Kc.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(yc.isResponse(e)||yc.isReadableStream(e))return e;if(e&&yc.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw _c.from(e,_c.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Yc.classes.FormData,Blob:Yc.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};yc.forEach(["delete","get","head","post","put","patch"],(e=>{Kc.headers[e]={}}));const Qc=Kc,Zc=yc.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Xc=Symbol("internals");function eu(e){return e&&String(e).trim().toLowerCase()}function tu(e){return!1===e||null==e?e:yc.isArray(e)?e.map(tu):String(e)}function ru(e,t,r,n,o){return yc.isFunction(n)?n.call(this,t,r):(o&&(t=r),yc.isString(t)?yc.isString(n)?-1!==t.indexOf(n):yc.isRegExp(n)?n.test(t):void 0:void 0)}class nu{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function o(e,t,r){const o=eu(t);if(!o)throw new Error("header name must be a non-empty string");const i=yc.findKey(n,o);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=tu(e))}const i=(e,t)=>yc.forEach(e,((e,r)=>o(e,r,t)));if(yc.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(yc.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let r,n,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),r=e.substring(0,o).trim().toLowerCase(),n=e.substring(o+1).trim(),!r||t[r]&&Zc[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e),t);else if(yc.isObject(e)&&yc.isIterable(e)){let r,n,o={};for(const t of e){if(!yc.isArray(t))throw TypeError("Object iterator must return a key-value pair");o[n=t[0]]=(r=o[n])?yc.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}i(o,t)}else null!=e&&o(t,e,r);return this}get(e,t){if(e=eu(e)){const r=yc.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(yc.isFunction(t))return t.call(this,e,r);if(yc.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=eu(e)){const r=yc.findKey(this,e);return!(!r||void 0===this[r]||t&&!ru(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function o(e){if(e=eu(e)){const o=yc.findKey(r,e);!o||t&&!ru(0,r[o],o,t)||(delete r[o],n=!0)}}return yc.isArray(e)?e.forEach(o):o(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const o=t[r];e&&!ru(0,this[o],o,e,!0)||(delete this[o],n=!0)}return n}normalize(e){const t=this,r={};return yc.forEach(this,((n,o)=>{const i=yc.findKey(r,o);if(i)return t[i]=tu(n),void delete t[o];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(o):String(o).trim();a!==o&&delete t[o],t[a]=tu(n),r[a]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return yc.forEach(this,((r,n)=>{null!=r&&!1!==r&&(t[n]=e&&yc.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach((e=>r.set(e))),r}static accessor(e){const t=(this[Xc]=this[Xc]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=eu(e);t[n]||(function(e,t){const r=yc.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,o){return this[n].call(this,t,e,r,o)},configurable:!0})}))}(r,e),t[n]=!0)}return yc.isArray(e)?e.forEach(n):n(e),this}}nu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),yc.reduceDescriptors(nu.prototype,(({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}})),yc.freezeMethods(nu);const ou=nu;function iu(e,t){const r=this||Qc,n=t||r,o=ou.from(n.headers);let i=n.data;return yc.forEach(e,(function(e){i=e.call(r,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function au(e){return!(!e||!e.__CANCEL__)}function su(e,t,r){_c.call(this,null==e?"canceled":e,_c.ERR_CANCELED,t,r),this.name="CanceledError"}yc.inherits(su,_c,{__CANCEL__:!0});const cu=su;function uu(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new _c("Request failed with status code "+r.status,[_c.ERR_BAD_REQUEST,_c.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}function lu(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var pu=o(6350),hu=o(8611),fu=o(5692),du=o(9023),mu=o(7124),vu=o(3106);const gu="1.9.0";function yu(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}const bu=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;var wu=o(2203);const xu=Symbol("internals");class _u extends wu.Transform{constructor(e){super({readableHighWaterMark:(e=yc.toFlatObject(e,{maxRate:0,chunkSize:65536,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,((e,t)=>!yc.isUndefined(t[e])))).chunkSize});const t=this[xu]={timeWindow:e.timeWindow,chunkSize:e.chunkSize,maxRate:e.maxRate,minChunkSize:e.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null};this.on("newListener",(e=>{"progress"===e&&(t.isCaptured||(t.isCaptured=!0))}))}_read(e){const t=this[xu];return t.onReadCallback&&t.onReadCallback(),super._read(e)}_transform(e,t,r){const n=this[xu],o=n.maxRate,i=this.readableHighWaterMark,a=n.timeWindow,s=o/(1e3/a),c=!1!==n.minChunkSize?Math.max(n.minChunkSize,.01*s):0,u=(e,t)=>{const r=Buffer.byteLength(e);n.bytesSeen+=r,n.bytes+=r,n.isCaptured&&this.emit("progress",n.bytesSeen),this.push(e)?process.nextTick(t):n.onReadCallback=()=>{n.onReadCallback=null,process.nextTick(t)}},l=(e,t)=>{const r=Buffer.byteLength(e);let l,p=null,h=i,f=0;if(o){const e=Date.now();(!n.ts||(f=e-n.ts)>=a)&&(n.ts=e,l=s-n.bytes,n.bytes=l<0?-l:0,f=0),l=s-n.bytes}if(o){if(l<=0)return setTimeout((()=>{t(null,e)}),a-f);l<h&&(h=l)}h&&r>h&&r-h>c&&(p=e.subarray(h),e=e.subarray(0,h)),u(e,p?()=>{process.nextTick(t,null,p)}:t)};l(e,(function e(t,n){if(t)return r(t);n?l(n,e):r(null)}))}}const ku=_u,{asyncIterator:Eu}=Symbol,Su=async function*(e){e.stream?yield*e.stream():e.arrayBuffer?yield await e.arrayBuffer():e[Eu]?yield*e[Eu]():yield e},Ou=Yc.ALPHABET.ALPHA_DIGIT+"-_",Tu="function"==typeof TextEncoder?new TextEncoder:new du.TextEncoder,ju="\r\n",Cu=Tu.encode(ju);class Pu{constructor(e,t){const{escapeName:r}=this.constructor,n=yc.isString(t);let o=`Content-Disposition: form-data; name="${r(e)}"${!n&&t.name?`; filename="${r(t.name)}"`:""}${ju}`;n?t=Tu.encode(String(t).replace(/\r?\n|\r\n?/g,ju)):o+=`Content-Type: ${t.type||"application/octet-stream"}${ju}`,this.headers=Tu.encode(o+ju),this.contentLength=n?t.byteLength:t.size,this.size=this.headers.byteLength+this.contentLength+2,this.name=e,this.value=t}async*encode(){yield this.headers;const{value:e}=this;yc.isTypedArray(e)?yield e:yield*Su(e),yield Cu}static escapeName(e){return String(e).replace(/[\r\n"]/g,(e=>({"\r":"%0D","\n":"%0A",'"':"%22"}[e])))}}class Au extends wu.Transform{__transform(e,t,r){this.push(e),r()}_transform(e,t,r){if(0!==e.length&&(this._transform=this.__transform,120!==e[0])){const e=Buffer.alloc(2);e[0]=120,e[1]=156,this.push(e,t)}this.__transform(e,t,r)}}const Iu=Au,Nu=(e,t)=>yc.isAsyncFn(e)?function(...r){const n=r.pop();e.apply(this,r).then((e=>{try{t?n(null,...t(e)):n(null,e)}catch(e){n(e)}}),n)}:e,Fu=(e,t,r=3)=>{let n=0;const o=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let o,i=0,a=0;return t=void 0!==t?t:1e3,function(s){const c=Date.now(),u=n[a];o||(o=c),r[i]=s,n[i]=c;let l=a,p=0;for(;l!==i;)p+=r[l++],l%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),c-o<t)return;const h=u&&c-u;return h?Math.round(1e3*p/h):void 0}}(50,250);return function(e,t){let r,n,o=0,i=1e3/t;const a=(t,i=Date.now())=>{o=i,r=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),s=t-o;s>=i?a(e,t):(r=e,n||(n=setTimeout((()=>{n=null,a(r)}),i-s)))},()=>r&&a(r)]}((r=>{const i=r.loaded,a=r.lengthComputable?r.total:void 0,s=i-n,c=o(s);n=i,e({loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&i<=a?(a-i)/c:void 0,event:r,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),r)},Du=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Ru=e=>(...t)=>yc.asap((()=>e(...t))),Lu={flush:vu.constants.Z_SYNC_FLUSH,finishFlush:vu.constants.Z_SYNC_FLUSH},Gu={flush:vu.constants.BROTLI_OPERATION_FLUSH,finishFlush:vu.constants.BROTLI_OPERATION_FLUSH},qu=yc.isFunction(vu.createBrotliDecompress),{http:Mu,https:Uu}=mu,Bu=/https:?/,zu=Yc.protocols.map((e=>e+":")),Wu=(e,[t,r])=>(e.on("end",r).on("error",r),t);function $u(e,t){e.beforeRedirects.proxy&&e.beforeRedirects.proxy(e),e.beforeRedirects.config&&e.beforeRedirects.config(e,t)}function Vu(e,t,r){let n=t;if(!n&&!1!==n){const e=pu.getProxyForUrl(r);e&&(n=new URL(e))}if(n){if(n.username&&(n.auth=(n.username||"")+":"+(n.password||"")),n.auth){(n.auth.username||n.auth.password)&&(n.auth=(n.auth.username||"")+":"+(n.auth.password||""));const t=Buffer.from(n.auth,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+t}e.headers.host=e.hostname+(e.port?":"+e.port:"");const t=n.hostname||n.host;e.hostname=t,e.host=t,e.port=n.port,e.path=r,n.protocol&&(e.protocol=n.protocol.includes(":")?n.protocol:`${n.protocol}:`)}e.beforeRedirects.proxy=function(e){Vu(e,t,e.href)}}const Hu="undefined"!=typeof process&&"process"===yc.kindOf(process),Yu=(e,t)=>(({address:e,family:t})=>{if(!yc.isString(e))throw TypeError("address must be a string");return{address:e,family:t||(e.indexOf(".")<0?6:4)}})(yc.isObject(e)?e:{address:e,family:t}),Ju=Hu&&function(e){return t=async function(t,r,n){let{data:o,lookup:i,family:a}=e;const{responseType:s,responseEncoding:c}=e,u=e.method.toUpperCase();let l,p,h=!1;if(i){const e=Nu(i,(e=>yc.isArray(e)?e:[e]));i=(t,r,n)=>{e(t,r,((e,t,o)=>{if(e)return n(e);const i=yc.isArray(t)?t.map((e=>Yu(e))):[Yu(t,o)];r.all?n(e,i):n(e,i[0].address,i[0].family)}))}}const f=new Ut.EventEmitter,d=()=>{e.cancelToken&&e.cancelToken.unsubscribe(m),e.signal&&e.signal.removeEventListener("abort",m),f.removeAllListeners()};function m(t){f.emit("abort",!t||t.type?new cu(null,e,p):t)}n(((e,t)=>{l=!0,t&&(h=!0,d())})),f.once("abort",r),(e.cancelToken||e.signal)&&(e.cancelToken&&e.cancelToken.subscribe(m),e.signal&&(e.signal.aborted?m():e.signal.addEventListener("abort",m)));const v=lu(e.baseURL,e.url,e.allowAbsoluteUrls),g=new URL(v,Yc.hasBrowserEnv?Yc.origin:void 0),y=g.protocol||zu[0];if("data:"===y){let n;if("GET"!==u)return uu(t,r,{status:405,statusText:"method not allowed",headers:{},config:e});try{n=function(e,t,r){const n=r&&r.Blob||Yc.classes.Blob,o=yu(e);if(void 0===t&&n&&(t=!0),"data"===o){e=o.length?e.slice(o.length+1):e;const r=bu.exec(e);if(!r)throw new _c("Invalid URL",_c.ERR_INVALID_URL);const i=r[1],a=r[2],s=r[3],c=Buffer.from(decodeURIComponent(s),a?"base64":"utf8");if(t){if(!n)throw new _c("Blob is not supported",_c.ERR_NOT_SUPPORT);return new n([c],{type:i})}return c}throw new _c("Unsupported protocol "+o,_c.ERR_NOT_SUPPORT)}(e.url,"blob"===s,{Blob:e.env&&e.env.Blob})}catch(t){throw _c.from(t,_c.ERR_BAD_REQUEST,e)}return"text"===s?(n=n.toString(c),c&&"utf8"!==c||(n=yc.stripBOM(n))):"stream"===s&&(n=wu.Readable.from(n)),uu(t,r,{data:n,status:200,statusText:"OK",headers:new ou,config:e})}if(-1===zu.indexOf(y))return r(new _c("Unsupported protocol "+y,_c.ERR_BAD_REQUEST,e));const b=ou.from(e.headers).normalize();b.set("User-Agent","axios/"+gu,!1);const{onUploadProgress:w,onDownloadProgress:x}=e,_=e.maxRate;let k,E;if(yc.isSpecCompliantForm(o)){const e=b.getContentType(/boundary=([-_\w\d]{10,70})/i);o=((e,t,r)=>{const{tag:n="form-data-boundary",size:o=25,boundary:i=n+"-"+Yc.generateString(o,Ou)}=r||{};if(!yc.isFormData(e))throw TypeError("FormData instance required");if(i.length<1||i.length>70)throw Error("boundary must be 10-70 characters long");const a=Tu.encode("--"+i+ju),s=Tu.encode("--"+i+"--"+ju);let c=s.byteLength;const u=Array.from(e.entries()).map((([e,t])=>{const r=new Pu(e,t);return c+=r.size,r}));c+=a.byteLength*u.length,c=yc.toFiniteNumber(c);const l={"Content-Type":`multipart/form-data; boundary=${i}`};return Number.isFinite(c)&&(l["Content-Length"]=c),t&&t(l),wu.Readable.from(async function*(){for(const e of u)yield a,yield*e.encode();yield s}())})(o,(e=>{b.set(e)}),{tag:`axios-${gu}-boundary`,boundary:e&&e[1]||void 0})}else if(yc.isFormData(o)&&yc.isFunction(o.getHeaders)){if(b.set(o.getHeaders()),!b.hasContentLength())try{const e=await du.promisify(o.getLength).call(o);Number.isFinite(e)&&e>=0&&b.setContentLength(e)}catch(e){}}else if(yc.isBlob(o)||yc.isFile(o))o.size&&b.setContentType(o.type||"application/octet-stream"),b.setContentLength(o.size||0),o=wu.Readable.from(Su(o));else if(o&&!yc.isStream(o)){if(Buffer.isBuffer(o));else if(yc.isArrayBuffer(o))o=Buffer.from(new Uint8Array(o));else{if(!yc.isString(o))return r(new _c("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",_c.ERR_BAD_REQUEST,e));o=Buffer.from(o,"utf-8")}if(b.setContentLength(o.length,!1),e.maxBodyLength>-1&&o.length>e.maxBodyLength)return r(new _c("Request body larger than maxBodyLength limit",_c.ERR_BAD_REQUEST,e))}const S=yc.toFiniteNumber(b.getContentLength());let O,T;yc.isArray(_)?(k=_[0],E=_[1]):k=E=_,o&&(w||k)&&(yc.isStream(o)||(o=wu.Readable.from(o,{objectMode:!1})),o=wu.pipeline([o,new ku({maxRate:yc.toFiniteNumber(k)})],yc.noop),w&&o.on("progress",Wu(o,Du(S,Fu(Ru(w),!1,3))))),e.auth&&(O=(e.auth.username||"")+":"+(e.auth.password||"")),!O&&g.username&&(O=g.username+":"+g.password),O&&b.delete("authorization");try{T=Fc(g.pathname+g.search,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(t){const n=new Error(t.message);return n.config=e,n.url=e.url,n.exists=!0,r(n)}b.set("Accept-Encoding","gzip, compress, deflate"+(qu?", br":""),!1);const j={path:T,method:u,headers:b.toJSON(),agents:{http:e.httpAgent,https:e.httpsAgent},auth:O,protocol:y,family:a,beforeRedirect:$u,beforeRedirects:{}};let C;!yc.isUndefined(i)&&(j.lookup=i),e.socketPath?j.socketPath=e.socketPath:(j.hostname=g.hostname.startsWith("[")?g.hostname.slice(1,-1):g.hostname,j.port=g.port,Vu(j,e.proxy,y+"//"+g.hostname+(g.port?":"+g.port:"")+j.path));const P=Bu.test(j.protocol);if(j.agent=P?e.httpsAgent:e.httpAgent,e.transport?C=e.transport:0===e.maxRedirects?C=P?fu:hu:(e.maxRedirects&&(j.maxRedirects=e.maxRedirects),e.beforeRedirect&&(j.beforeRedirects.config=e.beforeRedirect),C=P?Uu:Mu),e.maxBodyLength>-1?j.maxBodyLength=e.maxBodyLength:j.maxBodyLength=1/0,e.insecureHTTPParser&&(j.insecureHTTPParser=e.insecureHTTPParser),p=C.request(j,(function(n){if(p.destroyed)return;const o=[n],i=+n.headers["content-length"];if(x||E){const e=new ku({maxRate:yc.toFiniteNumber(E)});x&&e.on("progress",Wu(e,Du(i,Fu(Ru(x),!0,3)))),o.push(e)}let a=n;const l=n.req||p;if(!1!==e.decompress&&n.headers["content-encoding"])switch("HEAD"!==u&&204!==n.statusCode||delete n.headers["content-encoding"],(n.headers["content-encoding"]||"").toLowerCase()){case"gzip":case"x-gzip":case"compress":case"x-compress":o.push(vu.createUnzip(Lu)),delete n.headers["content-encoding"];break;case"deflate":o.push(new Iu),o.push(vu.createUnzip(Lu)),delete n.headers["content-encoding"];break;case"br":qu&&(o.push(vu.createBrotliDecompress(Gu)),delete n.headers["content-encoding"])}a=o.length>1?wu.pipeline(o,yc.noop):o[0];const m=wu.finished(a,(()=>{m(),d()})),v={status:n.statusCode,statusText:n.statusMessage,headers:new ou(n.headers),config:e,request:l};if("stream"===s)v.data=a,uu(t,r,v);else{const n=[];let o=0;a.on("data",(function(t){n.push(t),o+=t.length,e.maxContentLength>-1&&o>e.maxContentLength&&(h=!0,a.destroy(),r(new _c("maxContentLength size of "+e.maxContentLength+" exceeded",_c.ERR_BAD_RESPONSE,e,l)))})),a.on("aborted",(function(){if(h)return;const t=new _c("stream has been aborted",_c.ERR_BAD_RESPONSE,e,l);a.destroy(t),r(t)})),a.on("error",(function(t){p.destroyed||r(_c.from(t,null,e,l))})),a.on("end",(function(){try{let e=1===n.length?n[0]:Buffer.concat(n);"arraybuffer"!==s&&(e=e.toString(c),c&&"utf8"!==c||(e=yc.stripBOM(e))),v.data=e}catch(t){return r(_c.from(t,null,e,v.request,v))}uu(t,r,v)}))}f.once("abort",(e=>{a.destroyed||(a.emit("error",e),a.destroy())}))})),f.once("abort",(e=>{r(e),p.destroy(e)})),p.on("error",(function(t){r(_c.from(t,null,e,p))})),p.on("socket",(function(e){e.setKeepAlive(!0,6e4)})),e.timeout){const t=parseInt(e.timeout,10);if(Number.isNaN(t))return void r(new _c("error trying to parse `config.timeout` to int",_c.ERR_BAD_OPTION_VALUE,e,p));p.setTimeout(t,(function(){if(l)return;let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const n=e.transitional||Rc;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(new _c(t,n.clarifyTimeoutError?_c.ETIMEDOUT:_c.ECONNABORTED,e,p)),m()}))}if(yc.isStream(o)){let t=!1,r=!1;o.on("end",(()=>{t=!0})),o.once("error",(e=>{r=!0,p.destroy(e)})),o.on("close",(()=>{t||r||m(new cu("Request stream has been aborted",e,p))})),o.pipe(p)}else p.end(o)},new Promise(((e,r)=>{let n,o;const i=(e,t)=>{o||(o=!0,n&&n(e,t))},a=e=>{i(e,!0),r(e)};t((t=>{i(t),e(t)}),a,(e=>n=e)).catch(a)}));var t},Ku=Yc.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Yc.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Yc.origin),Yc.navigator&&/(msie|trident)/i.test(Yc.navigator.userAgent)):()=>!0,Qu=Yc.hasStandardBrowserEnv?{write(e,t,r,n,o,i){const a=[e+"="+encodeURIComponent(t)];yc.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),yc.isString(n)&&a.push("path="+n),yc.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}},Zu=e=>e instanceof ou?{...e}:e;function Xu(e,t){t=t||{};const r={};function n(e,t,r,n){return yc.isPlainObject(e)&&yc.isPlainObject(t)?yc.merge.call({caseless:n},e,t):yc.isPlainObject(t)?yc.merge({},t):yc.isArray(t)?t.slice():t}function o(e,t,r,o){return yc.isUndefined(t)?yc.isUndefined(e)?void 0:n(void 0,e,0,o):n(e,t,0,o)}function i(e,t){if(!yc.isUndefined(t))return n(void 0,t)}function a(e,t){return yc.isUndefined(t)?yc.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function s(r,o,i){return i in t?n(r,o):i in e?n(void 0,r):void 0}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t,r)=>o(Zu(e),Zu(t),0,!0)};return yc.forEach(Object.keys(Object.assign({},e,t)),(function(n){const i=c[n]||o,a=i(e[n],t[n],n);yc.isUndefined(a)&&i!==s||(r[n]=a)})),r}const el=e=>{const t=Xu({},e);let r,{data:n,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:c}=t;if(t.headers=s=ou.from(s),t.url=Fc(lu(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&s.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),yc.isFormData(n))if(Yc.hasStandardBrowserEnv||Yc.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(r=s.getContentType())){const[e,...t]=r?r.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(Yc.hasStandardBrowserEnv&&(o&&yc.isFunction(o)&&(o=o(t)),o||!1!==o&&Ku(t.url))){const e=i&&a&&Qu.read(a);e&&s.set(i,e)}return t},tl="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){const n=el(e);let o=n.data;const i=ou.from(n.headers).normalize();let a,s,c,u,l,{responseType:p,onUploadProgress:h,onDownloadProgress:f}=n;function d(){u&&u(),l&&l(),n.cancelToken&&n.cancelToken.unsubscribe(a),n.signal&&n.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function v(){if(!m)return;const n=ou.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());uu((function(e){t(e),d()}),(function(e){r(e),d()}),{data:p&&"text"!==p&&"json"!==p?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout,"onloadend"in m?m.onloadend=v:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(v)},m.onabort=function(){m&&(r(new _c("Request aborted",_c.ECONNABORTED,e,m)),m=null)},m.onerror=function(){r(new _c("Network Error",_c.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const o=n.transitional||Rc;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new _c(t,o.clarifyTimeoutError?_c.ETIMEDOUT:_c.ECONNABORTED,e,m)),m=null},void 0===o&&i.setContentType(null),"setRequestHeader"in m&&yc.forEach(i.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),yc.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),p&&"json"!==p&&(m.responseType=n.responseType),f&&([c,l]=Fu(f,!0),m.addEventListener("progress",c)),h&&m.upload&&([s,u]=Fu(h),m.upload.addEventListener("progress",s),m.upload.addEventListener("loadend",u)),(n.cancelToken||n.signal)&&(a=t=>{m&&(r(!t||t.type?new cu(null,e,m):t),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(a),n.signal&&(n.signal.aborted?a():n.signal.addEventListener("abort",a)));const g=yu(n.url);g&&-1===Yc.protocols.indexOf(g)?r(new _c("Unsupported protocol "+g+":",_c.ERR_BAD_REQUEST,e)):m.send(o||null)}))},rl=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const o=function(e){if(!r){r=!0,a();const t=e instanceof Error?e:this.reason;n.abort(t instanceof _c?t:new cu(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,o(new _c(`timeout ${t} of ms exceeded`,_c.ETIMEDOUT))}),t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:s}=n;return s.unsubscribe=()=>yc.asap(a),s}},nl=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,o=0;for(;o<r;)n=o+t,yield e.slice(o,n),o=n},ol=(e,t,r,n)=>{const o=async function*(e,t){for await(const r of async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}}(e))yield*nl(r,t)}(e,t);let i,a=0,s=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await o.next();if(t)return s(),void e.close();let i=n.byteLength;if(r){let e=a+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw s(e),e}},cancel:e=>(s(e),o.return())},{highWaterMark:2})},il="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,al=il&&"function"==typeof ReadableStream,sl=il&&("function"==typeof TextEncoder?(cl=new TextEncoder,e=>cl.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var cl;const ul=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},ll=al&&ul((()=>{let e=!1;const t=new Request(Yc.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),pl=al&&ul((()=>yc.isReadableStream(new Response("").body))),hl={stream:pl&&(e=>e.body)};var fl;il&&(fl=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!hl[e]&&(hl[e]=yc.isFunction(fl[e])?t=>t[e]():(t,r)=>{throw new _c(`Response type '${e}' is not supported`,_c.ERR_NOT_SUPPORT,r)})})));const dl={http:Ju,xhr:tl,fetch:il&&(async e=>{let{url:t,method:r,data:n,signal:o,cancelToken:i,timeout:a,onDownloadProgress:s,onUploadProgress:c,responseType:u,headers:l,withCredentials:p="same-origin",fetchOptions:h}=el(e);u=u?(u+"").toLowerCase():"text";let f,d=rl([o,i&&i.toAbortSignal()],a);const m=d&&d.unsubscribe&&(()=>{d.unsubscribe()});let v;try{if(c&&ll&&"get"!==r&&"head"!==r&&0!==(v=await(async(e,t)=>{const r=yc.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(yc.isBlob(e))return e.size;if(yc.isSpecCompliantForm(e)){const t=new Request(Yc.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return yc.isArrayBufferView(e)||yc.isArrayBuffer(e)?e.byteLength:(yc.isURLSearchParams(e)&&(e+=""),yc.isString(e)?(await sl(e)).byteLength:void 0)})(t):r})(l,n))){let e,r=new Request(t,{method:"POST",body:n,duplex:"half"});if(yc.isFormData(n)&&(e=r.headers.get("content-type"))&&l.setContentType(e),r.body){const[e,t]=Du(v,Fu(Ru(c)));n=ol(r.body,65536,e,t)}}yc.isString(p)||(p=p?"include":"omit");const o="credentials"in Request.prototype;f=new Request(t,{...h,signal:d,method:r.toUpperCase(),headers:l.normalize().toJSON(),body:n,duplex:"half",credentials:o?p:void 0});let i=await fetch(f);const a=pl&&("stream"===u||"response"===u);if(pl&&(s||a&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=yc.toFiniteNumber(i.headers.get("content-length")),[r,n]=s&&Du(t,Fu(Ru(s),!0))||[];i=new Response(ol(i.body,65536,r,(()=>{n&&n(),m&&m()})),e)}u=u||"text";let g=await hl[yc.findKey(hl,u)||"text"](i,e);return!a&&m&&m(),await new Promise(((t,r)=>{uu(t,r,{data:g,headers:ou.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:f})}))}catch(t){if(m&&m(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new _c("Network Error",_c.ERR_NETWORK,e,f),{cause:t.cause||t});throw _c.from(t,t&&t.code,e,f)}})};yc.forEach(dl,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const ml=e=>`- ${e}`,vl=e=>yc.isFunction(e)||null===e||!1===e,gl=e=>{e=yc.isArray(e)?e:[e];const{length:t}=e;let r,n;const o={};for(let i=0;i<t;i++){let t;if(r=e[i],n=r,!vl(r)&&(n=dl[(t=String(r)).toLowerCase()],void 0===n))throw new _c(`Unknown adapter '${t}'`);if(n)break;o[t||"#"+i]=n}if(!n){const e=Object.entries(o).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let r=t?e.length>1?"since :\n"+e.map(ml).join("\n"):" "+ml(e[0]):"as no adapter specified";throw new _c("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n};function yl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new cu(null,e)}function bl(e){return yl(e),e.headers=ou.from(e.headers),e.data=iu.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),gl(e.adapter||Qc.adapter)(e).then((function(t){return yl(e),t.data=iu.call(e,e.transformResponse,t),t.headers=ou.from(t.headers),t}),(function(t){return au(t)||(yl(e),t&&t.response&&(t.response.data=iu.call(e,e.transformResponse,t.response),t.response.headers=ou.from(t.response.headers))),Promise.reject(t)}))}const wl={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{wl[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const xl={};wl.transitional=function(e,t,r){function n(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,o,i)=>{if(!1===e)throw new _c(n(o," has been removed"+(t?" in "+t:"")),_c.ERR_DEPRECATED);return t&&!xl[o]&&(xl[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,i)}},wl.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};const _l={assertOptions:function(e,t,r){if("object"!=typeof e)throw new _c("options must be an object",_c.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const i=n[o],a=t[i];if(a){const t=e[i],r=void 0===t||a(t,i,e);if(!0!==r)throw new _c("option "+i+" must be "+r,_c.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new _c("Unknown option "+i,_c.ERR_BAD_OPTION)}},validators:wl},kl=_l.validators;class El{constructor(e){this.defaults=e||{},this.interceptors={request:new Dc,response:new Dc}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Xu(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:o}=t;void 0!==r&&_l.assertOptions(r,{silentJSONParsing:kl.transitional(kl.boolean),forcedJSONParsing:kl.transitional(kl.boolean),clarifyTimeoutError:kl.transitional(kl.boolean)},!1),null!=n&&(yc.isFunction(n)?t.paramsSerializer={serialize:n}:_l.assertOptions(n,{encode:kl.function,serialize:kl.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),_l.assertOptions(t,{baseUrl:kl.spelling("baseURL"),withXsrfToken:kl.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&yc.merge(o.common,o[t.method]);o&&yc.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=ou.concat(i,o);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const c=[];let u;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let l,p=0;if(!s){const e=[bl.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,c),l=e.length,u=Promise.resolve(t);p<l;)u=u.then(e[p++],e[p++]);return u}l=a.length;let h=t;for(p=0;p<l;){const e=a[p++],t=a[p++];try{h=e(h)}catch(e){t.call(this,e);break}}try{u=bl.call(this,h)}catch(e){return Promise.reject(e)}for(p=0,l=c.length;p<l;)u=u.then(c[p++],c[p++]);return u}getUri(e){return Fc(lu((e=Xu(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}yc.forEach(["delete","get","head","options"],(function(e){El.prototype[e]=function(t,r){return this.request(Xu(r||{},{method:e,url:t,data:(r||{}).data}))}})),yc.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,o){return this.request(Xu(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}El.prototype[e]=t(),El.prototype[e+"Form"]=t(!0)}));const Sl=El;class Ol{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,o){r.reason||(r.reason=new cu(e,n,o),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Ol((function(t){e=t})),cancel:e}}}const Tl=Ol,jl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jl).forEach((([e,t])=>{jl[t]=e}));const Cl=jl,Pl=function e(t){const r=new Sl(t),n=Cs(Sl.prototype.request,r);return yc.extend(n,Sl.prototype,r,{allOwnKeys:!0}),yc.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Xu(t,r))},n}(Qc);Pl.Axios=Sl,Pl.CanceledError=cu,Pl.CancelToken=Tl,Pl.isCancel=au,Pl.VERSION=gu,Pl.toFormData=jc,Pl.AxiosError=_c,Pl.Cancel=Pl.CanceledError,Pl.all=function(e){return Promise.all(e)},Pl.spread=function(e){return function(t){return e.apply(null,t)}},Pl.isAxiosError=function(e){return yc.isObject(e)&&!0===e.isAxiosError},Pl.mergeConfig=Xu,Pl.AxiosHeaders=ou,Pl.formToJSON=e=>Jc(yc.isHTMLForm(e)?new FormData(e):e),Pl.getAdapter=gl,Pl.HttpStatusCode=Cl,Pl.default=Pl;const Al=Pl;function Il(e){return Il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Il(e)}function Nl(){Nl=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Il(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Il(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Fl(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Dl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ll(n.key),n)}}function Rl(e,t,r){return(t=Ll(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ll(e){var t=function(e){if("object"!=Il(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Il(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Il(t)?t:t+""}var Gl=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Rl(this,"_fetched_providers",{})},t=[{key:"get_models",value:(r=Nl().mark((function e(t){var r,n,o,i,a,s;return Nl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._fetched_providers[t.base_url]){e.next=2;break}return e.abrupt("return",this._fetched_providers[t.base_url]);case 2:return e.prev=2,e.next=5,Al.get("".concat(t.base_url,"/models"),{headers:Rl(Rl({},"Content-Type","application/json"),"Authorization",t.api_key?"Bearer ".concat(t.api_key):"")});case 5:return r=e.sent,n=r.data.data.map((function(e){return t.base_url==Oi.Gemini.base_url?{id:e.id.split("/")[1],description:e.description}:{id:e.id,name:e.name,description:e.description}})).sort((function(e,t){return e.id.localeCompare(t.id)})),this._fetched_providers[t.base_url]=n,e.abrupt("return",n);case 11:if(e.prev=11,e.t0=e.catch(2),l.error({function_name:"get_models",message:"Failed to fetch models",data:e.t0}),!Al.isAxiosError(e.t0)){e.next=25;break}if(!(null!==(o=e.t0.response)&&void 0!==o&&o.status&&(null===(i=e.t0.response)||void 0===i?void 0:i.status)>=400&&(null===(a=e.t0.response)||void 0===a?void 0:a.status)<500)){e.next=19;break}throw new Error("Invalid API key");case 19:if(!(null!==(s=e.t0.response)&&void 0!==s&&s.status&&e.t0.response.status>=500)){e.next=23;break}throw new Error("Server error");case 23:if(!e.t0.request){e.next=25;break}throw new Error("Network error");case 25:throw e.t0;case 26:case"end":return e.stop()}}),e,this,[[2,11]])})),n=function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){Fl(i,n,o,a,s,"next",e)}function s(e){Fl(i,n,o,a,s,"throw",e)}a(void 0)}))},function(e){return n.apply(this,arguments)})}],t&&Dl(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n}();function ql(e){return ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ql(e)}function Ml(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ul(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ml(Object(r),!0).forEach((function(t){Bl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ml(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bl(e,t,r){return(t=function(e){var t=function(e){if("object"!=ql(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ql(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ql(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zl(){zl=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==ql(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ql(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Wl(e){return function(e){if(Array.isArray(e))return Vl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $l(e,t){if(e){if("string"==typeof e)return Vl(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vl(e,t):void 0}}function Vl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Hl(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Yl(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Hl(i,n,o,a,s,"next",e)}function s(e){Hl(i,n,o,a,s,"throw",e)}a(void 0)}))}}var Jl={"code-completions":.2,"file-refactoring":.2},Kl=function(){var e=Yl(zl().mark((function e(r){var n,o,i,a,s,c,u,p,h,f,d,m,v,g,y,b,w,x,_,k,E,S,O;return zl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O=function(){return(O=Yl(zl().mark((function e(r){var n;return zl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.window.showInputBox({title:"Set Temperature",prompt:"Enter a value between 0 and 1 (required)",value:r.toString(),placeHolder:"",validateInput:function(e){var t=Number(e);return isNaN(t)?"Please enter a valid number":t<0||t>1?"Temperature must be between 0 and 1":null}});case 2:if(void 0!==(n=e.sent)&&""!=n){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.abrupt("return",Number(n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},S=function(e){return O.apply(this,arguments)},E=function(){return(E=Yl(zl().mark((function e(r){var i,a,s,c,u,p;return zl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.get_provider(r.name);case 3:if(a=e.sent){e.next=6;break}throw new Error("Provider ".concat(r.name," not found"));case 6:if(s="built-in"==a.type?null===(i=Oi[a.name])||void 0===i?void 0:i.base_url:a.base_url){e.next=9;break}throw new Error("Base URL not found for provider ".concat(r.name));case 9:return e.next=11,o.get_models({base_url:s,api_key:a.api_key});case 11:if((c=e.sent).length){e.next=15;break}return t.window.showWarningMessage("No models found for ".concat(r.name,".")),e.abrupt("return",void 0);case 15:return u=c.map((function(e){return{label:e.name||e.id,description:e.name?e.id:void 0,detail:e.description}})),e.next=18,t.window.showQuickPick(u,{title:"Select Model",placeHolder:"Choose an AI model"});case 18:return p=e.sent,e.abrupt("return",(null==p?void 0:p.description)||(null==p?void 0:p.label));case 22:return e.prev=22,e.t0=e.catch(0),l.error({function_name:"select_model",message:"Failed to fetch models",data:e.t0}),t.window.showErrorMessage("Failed to fetch models: ".concat(e.t0 instanceof Error?e.t0.message:String(e.t0))),e.abrupt("return",void 0);case 27:case"end":return e.stop()}}),e,null,[[0,22]])})))).apply(this,arguments)},k=function(e){return E.apply(this,arguments)},_=function(){return(_=Yl(zl().mark((function e(){var r,o,i;return zl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get_providers();case 2:if(0!=(r=e.sent).length){e.next=6;break}return t.window.showErrorMessage("No API providers configured. Please configure an API provider first."),e.abrupt("return",void 0);case 6:return o=r.map((function(e){return{label:e.name,description:"built-in"==e.type?"Predefined":"Custom",provider:e}})),e.next=9,t.window.showQuickPick(o,{title:"Select API Provider",placeHolder:"Choose an API provider"});case 9:if(i=e.sent){e.next=12;break}return e.abrupt("return",void 0);case 12:return e.abrupt("return",{type:i.provider.type,name:i.provider.name});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)},x=function(){return _.apply(this,arguments)},w=function(){return(w=Yl(zl().mark((function e(r){var n,o,c,u,l;return zl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="$(arrow-left) Back",o="$(star) Set as default",c="$(star-full) Unset default",u=function(){var e=[{label:n},{label:"",kind:t.QuickPickItemKind.Separator},{label:"Provider",description:r.provider_name},{label:"Model",description:r.model},{label:"Temperature",description:r.temperature.toString()}];return s&&s.provider_type==r.provider_type&&s.provider_name==r.provider_name&&s.model==r.model?e.push({label:c}):e.push({label:o}),e},(l=t.window.createQuickPick()).items=u(),l.title="Edit Configuration: ".concat(r.provider_name," / ").concat(r.model),l.placeholder="Select what to update",e.abrupt("return",new Promise((function(e){l.onDidAccept(Yl(zl().mark((function p(){var h,f,d,m,v,g,y,w,_,E,O;return zl().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if((h=l.selectedItems[0])&&h.label!=n){p.next=5;break}return l.hide(),e(),p.abrupt("return");case 5:if(h.label!=o){p.next=11;break}return s=Ul({},r),p.next=9,i.set_default_config(s);case 9:return l.items=u(),p.abrupt("return");case 11:if(h.label!=c){p.next=17;break}return s=void 0,p.next=15,i.set_default_config(null);case 15:return l.items=u(),p.abrupt("return");case 17:if(l.hide(),f=Ul({},r),d=Ul({},r),m=!1,!h.label.startsWith("Provider")){p.next=51;break}return p.next=24,x();case 24:if(v=p.sent){p.next=30;break}return p.next=28,b(r);case 28:return e(),p.abrupt("return");case 30:return p.next=32,k(v);case 32:if(g=p.sent){p.next=38;break}return p.next=36,b(r);case 36:return e(),p.abrupt("return");case 38:if(v.type==r.provider_type&&v.name==r.provider_name&&g==r.model){p.next=45;break}d.provider_type=v.type,d.provider_name=v.name,d.model=g,m=!0,p.next=49;break;case 45:return p.next=47,b(r);case 47:return e(),p.abrupt("return");case 49:p.next=96;break;case 51:if(!h.label.startsWith("Model")){p.next=72;break}return y={type:r.provider_type,name:r.provider_name},p.next=55,k(y);case 55:if(w=p.sent){p.next=61;break}return p.next=59,b(r);case 59:return e(),p.abrupt("return");case 61:if(w==r.model){p.next=66;break}d.model=w,m=!0,p.next=70;break;case 66:return p.next=68,b(r);case 68:return e(),p.abrupt("return");case 70:p.next=96;break;case 72:if(!h.label.startsWith("Temperature")){p.next=92;break}return p.next=75,S(r.temperature);case 75:if(void 0!==(_=p.sent)){p.next=81;break}return p.next=79,b(r);case 79:return e(),p.abrupt("return");case 81:if(_==r.temperature){p.next=86;break}d.temperature=_,m=!0,p.next=90;break;case 86:return p.next=88,b(r);case 88:return e(),p.abrupt("return");case 90:p.next=96;break;case 92:return p.next=94,b(r);case 94:return e(),p.abrupt("return");case 96:if(!m){p.next=119;break}if(E=a.find((function(e){return e.provider_name==f.provider_name&&e.provider_type==f.provider_type&&e.model==f.model})),!a.some((function(e){return e!==E&&e.provider_type==d.provider_type&&e.provider_name==d.provider_name&&e.model==d.model}))){p.next=105;break}return t.window.showErrorMessage("A configuration for ".concat(d.model," provided by ").concat(d.provider_name," already exists.")),p.next=103,b(r);case 103:return e(),p.abrupt("return");case 105:if(-1==(O=a.findIndex((function(e){return e.provider_name==f.provider_name&&e.provider_type==f.provider_type&&e.model==f.model})))){p.next=116;break}return a[O]=d,p.next=110,i.save_configs(a);case 110:if(!s||s.provider_type!=f.provider_type||s.provider_name!=f.provider_name||s.model!=f.model){p.next=114;break}return s=d,p.next=114,i.set_default_config(d);case 114:p.next=119;break;case 116:return console.error("Could not find original config in array to update."),e(),p.abrupt("return");case 119:return p.next=121,b(d);case 121:e();case 122:case"end":return p.stop()}}),p)})))),l.onDidHide((function(){e()})),l.show()})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},b=function(e){return w.apply(this,arguments)},y=function(){return(y=Yl(zl().mark((function e(){var n,o,s;return zl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,k(n);case 7:if(o=e.sent){e.next=10;break}return e.abrupt("return");case 10:if(!a.some((function(e){return e.provider_type==n.type&&e.provider_name==n.name&&e.model==o}))){e.next=14;break}return t.window.showErrorMessage("A configuration for ".concat(o," (").concat(n.name,") already exists.")),e.abrupt("return");case 14:return s={provider_type:n.type,provider_name:n.name,model:o,temperature:Jl[r.tool]},a.push(s),e.next=18,i.save_configs(a);case 18:return e.next=20,b(s);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)},g=function(){return y.apply(this,arguments)},n=new Li(r.provider.context),o=new Gl,i=function(e){switch(e){case"code-completions":return{get_configs:function(){return n.get_code_completions_tool_configs()},save_configs:function(e){return n.save_code_completions_tool_configs(e)},get_default_config:function(){return n.get_default_code_completions_config()},set_default_config:function(e){return n.set_default_code_completions_config(e)},get_display_name:function(){return"Code Completions"}};case"file-refactoring":return{get_configs:function(){return n.get_file_refactoring_tool_configs()},save_configs:function(e){return n.save_file_refactoring_tool_configs(e)},get_default_config:function(){return n.get_default_file_refactoring_config()},set_default_config:function(e){return n.set_default_file_refactoring_config(e)},get_display_name:function(){return"File Refactoring"}};default:throw new Error("Unsupported tool: ".concat(e))}}(r.tool),e.next=16,i.get_configs();case 16:return a=e.sent,e.next=19,i.get_default_config();case 19:return s=e.sent,c={iconPath:new t.ThemeIcon("edit"),tooltip:"Edit configuration"},u={iconPath:new t.ThemeIcon("trash"),tooltip:"Delete configuration"},p={iconPath:new t.ThemeIcon("chevron-up"),tooltip:"Move up"},h={iconPath:new t.ThemeIcon("chevron-down"),tooltip:"Move down"},f={iconPath:new t.ThemeIcon("star"),tooltip:"Set as default"},d={iconPath:new t.ThemeIcon("star-full"),tooltip:"Unset default"},m=function(){var e=[{label:"$(add) Add another configuration..."}];return a.length>0&&(e.push({label:"",kind:t.QuickPickItemKind.Separator}),e.push.apply(e,Wl(a.map((function(e,t){var r=s&&s.provider_type==e.provider_type&&s.provider_name==e.provider_name&&s.model==e.model,n=[];if(a.length>1){var o=0==t,i=t==a.length-1,l=[];o||l.push(p),i||l.push(h),n=[].concat(l,r?[d,c,u]:[f,c,u])}else n=r?[d,c,u]:[f,c,u];return{label:e.model,description:"".concat(e.provider_name).concat(r?" • default configuration":""),buttons:n,config:e,index:t}}))))),e},v=function(){var e=Yl(zl().mark((function e(){var r;return zl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=a.length){e.next=6;break}return e.next=3,g();case 3:if(!(a.length>0)){e.next=5;break}return e.abrupt("return",v());case 5:return e.abrupt("return");case 6:return(r=t.window.createQuickPick()).items=m(),r.title="".concat(i.get_display_name()," Configurations"),r.placeholder="Select a configuration to edit or add another one",e.abrupt("return",new Promise((function(e){r.onDidAccept(Yl(zl().mark((function t(){var n;return zl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.selectedItems[0]){t.next=5;break}return r.hide(),e(),t.abrupt("return");case 5:if("$(add) Add another configuration..."!=n.label){t.next=13;break}return r.hide(),t.next=9,g();case 9:return t.next=11,v();case 11:t.next=19;break;case 13:if(!("config"in n)||!n.config){t.next=19;break}return r.hide(),t.next=17,b(n.config);case 17:return t.next=19,v();case 19:case"end":return t.stop()}}),t)})))),r.onDidTriggerItemButton(function(){var e=Yl(zl().mark((function e(n){var o,l,y,w,x,_,k,E,S;return zl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.item,n.button!==c){e.next=9;break}return r.hide(),e.next=5,b(o.config);case 5:return e.next=7,v();case 7:e.next=63;break;case 9:if(n.button!==u){e.next=34;break}return e.next=12,t.window.showWarningMessage("Are you sure you want to delete ".concat(o.config.model," (").concat(o.config.provider_name,")?"),{modal:!0},"Delete");case 12:if("Delete"!=e.sent){e.next=32;break}return a.splice(o.index,1),e.next=17,i.save_configs(a);case 17:if(!s||s.provider_type!=o.config.provider_type||s.provider_name!=o.config.provider_name||s.model!=o.config.model){e.next=21;break}return s=void 0,e.next=21,i.set_default_config(null);case 21:if(0!=a.length){e.next=30;break}return r.hide(),e.next=25,g();case 25:if(!(a.length>0)){e.next=28;break}return e.next=28,v();case 28:e.next=32;break;case 30:r.items=m(),r.show();case 32:e.next=63;break;case 34:if(n.button!==p&&n.button!==h){e.next=51;break}if(l=o.index,y=n.button===p,w=a.length-1,(x=y?Math.max(0,l-1):Math.min(w,l+1))!=l){e.next=42;break}return e.abrupt("return");case 42:return _=Wl(a),k=_.splice(l,1),T=1,E=function(e){if(Array.isArray(e))return e}(O=k)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(O,T)||$l(O,T)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),S=E[0],_.splice(x,0,S),a=_,e.next=48,i.save_configs(a);case 48:r.items=m(),e.next=63;break;case 51:if(n.button!==f){e.next=58;break}return s=Ul({},o.config),e.next=55,i.set_default_config(s);case 55:r.items=m(),e.next=63;break;case 58:if(n.button!==d){e.next=63;break}return s=void 0,e.next=62,i.set_default_config(null);case 62:r.items=m();case 63:case"end":return e.stop()}var O,T}),e)})));return function(t){return e.apply(this,arguments)}}()),r.onDidHide((function(){e()})),r.show()})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=30,v();case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ql(e){return Ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ql(e)}function Zl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zl(Object(r),!0).forEach((function(t){ep(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ep(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ql(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ql(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ql(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tp(){tp=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Ql(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Ql(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function rp(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function np(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){rp(i,n,o,a,s,"next",e)}function s(e){rp(i,n,o,a,s,"throw",e)}a(void 0)}))}}var op={"commit-messages":.3,"some-other-introduced-later":.3},ip=function(){var e=np(tp().mark((function e(r){var n,o,i,a,s,c,u,l,p,h,f,d,m;return tp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m=function(){return(m=np(tp().mark((function e(n){var o;return tp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.window.showInputBox({title:"Set Temperature",prompt:"Enter a value between 0 and 1 (required)",value:n.toString(),placeHolder:"",validateInput:function(e){var t=Number(e);return isNaN(t)?"Please enter a valid number":t<0||t>1?"Temperature must be between 0 and 1":null}});case 2:if(void 0!==(o=e.sent)&&""!=o){e.next=5;break}return e.abrupt("return",op[r.tool]);case 5:return e.abrupt("return",Number(o));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},d=function(e){return m.apply(this,arguments)},f=function(){return(f=np(tp().mark((function e(r){var i,a,s,c,u;return tp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.get_provider(r.name);case 3:if(i=e.sent){e.next=6;break}throw new Error("Provider ".concat(r.name," not found"));case 6:if(a="built-in"==i.type?Oi[i.name].base_url:i.base_url){e.next=9;break}throw new Error("Base URL not found for provider ".concat(r.name));case 9:return e.next=11,o.get_models({base_url:a,api_key:i.api_key});case 11:return(s=e.sent).length||t.window.showWarningMessage("No models found for ".concat(r.name,".")),c=s.map((function(e){return{label:e.name||e.id,description:e.name?e.id:void 0,detail:e.description}})),e.next=16,t.window.showQuickPick(c,{title:"Select Model",placeHolder:"Choose an AI model"});case 16:return u=e.sent,e.abrupt("return",null==u?void 0:u.label);case 20:e.prev=20,e.t0=e.catch(0),console.error("Error fetching models:",e.t0),t.window.showErrorMessage("Failed to fetch models: ".concat(e.t0 instanceof Error?e.t0.message:String(e.t0)));case 24:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)},h=function(e){return f.apply(this,arguments)},p=function(){return(p=np(tp().mark((function e(){var r,o,i;return tp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get_providers();case 2:if(0!=(r=e.sent).length){e.next=6;break}return t.window.showErrorMessage("No API providers configured. Please configure an API provider first."),e.abrupt("return",void 0);case 6:return o=r.map((function(e){return{label:e.name,description:"built-in"==e.type?"Built-in":"Custom",provider:e}})),e.next=9,t.window.showQuickPick(o,{title:"Select API Provider",placeHolder:"Choose an API provider"});case 9:if(i=e.sent){e.next=12;break}return e.abrupt("return",void 0);case 12:return e.abrupt("return",{type:i.provider.type,name:i.provider.name});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)},l=function(){return p.apply(this,arguments)},u=function(){return u=np(tp().mark((function e(o){var i,a,s,c,u;return tp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="API Provider",a="Model",s="Temperature",c="Instructions",u=function(){var e=np(tp().mark((function e(){var p,f,m,v,g,y,b,w,x;return tp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=[{label:i,description:o.provider_name},{label:a,description:o.model},{label:s,description:"".concat(o.temperature.toString()).concat(o.temperature==op[r.tool]?" (default)":"")}],"commit-messages"==r.tool&&(f=t.workspace.getConfiguration("codeWebChat").get("commitMessageInstructions",""),p.push({label:c,detail:f})),e.next=4,t.window.showQuickPick(p,{title:"Update Commit Messages Configuration",placeHolder:"Select setting to update"});case 4:if(m=e.sent){e.next=7;break}return e.abrupt("return");case 7:if(v=!1,m.label!=i){e.next=27;break}return e.next=11,l();case 11:if(g=e.sent){e.next=16;break}return e.next=15,u();case 15:case 22:case 35:case 48:case 56:return e.abrupt("return");case 16:return e.next=18,h(g);case 18:if(y=e.sent){e.next=23;break}return e.next=22,u();case 23:o=Xl(Xl({},o),{},{provider_type:g.type,provider_name:g.name,model:y,temperature:op[r.tool]}),v=!0,e.next=57;break;case 27:if(m.label!=a){e.next=41;break}return b={type:o.provider_type,name:o.provider_name},e.next=31,h(b);case 31:if(w=e.sent){e.next=36;break}return e.next=35,u();case 36:o.model=w,o.temperature=op[r.tool],v=!0,e.next=57;break;case 41:if(m.label!=s){e.next=53;break}return e.next=44,d(o.temperature);case 44:if(void 0!==(x=e.sent)){e.next=49;break}return e.next=48,u();case 49:o.temperature=x,v=!0,e.next=57;break;case 53:if(m.label!=c){e.next=57;break}return e.next=56,t.commands.executeCommand("workbench.action.openSettings","codeWebChat.commitMessageInstructions");case 57:if(!v){e.next=60;break}return e.next=60,n.save_commit_messages_tool_config(o);case 60:return e.next=62,u();case 62:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=7,u();case 7:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)},c=function(e){return u.apply(this,arguments)},s=function(){return(s=np(tp().mark((function e(){var o,i,a;return tp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:if(o=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,h(o);case 7:if(i=e.sent){e.next=10;break}return e.abrupt("return");case 10:return a={provider_type:o.type,provider_name:o.name,model:i,temperature:op[r.tool]},e.next=13,n.save_commit_messages_tool_config(a);case 13:t.window.showInformationMessage("Commit Messages tool configuration completed successfully.");case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)},a=function(){return s.apply(this,arguments)},n=new Li(r.provider.context),o=new Gl,e.next=14,n.get_commit_messages_tool_config();case 14:if(i=e.sent){e.next=20;break}return e.next=18,a();case 18:e.next=22;break;case 20:return e.next=22,c(i);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ap(e){return ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ap(e)}function sp(){sp=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==ap(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ap(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function cp(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var up=function(){var e,r=(e=sp().mark((function e(r){var n,o,i,a;return sp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Al.get("https://openrouter.ai/api/v1/models");case 3:return n=e.sent,o=n.data.data,i=o.map((function(e){return{label:e.name,description:e.id,detail:e.description}})),e.next=8,t.window.showQuickPick(i,{title:"Select Open Router Model",placeHolder:"Choose a model from Open Router"});case 8:(a=e.sent)&&r.send_message({command:"NEWLY_PICKED_OPEN_ROUTER_MODEL",model_id:a.description}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error fetching Open Router models:",e.t0),t.window.showErrorMessage("Failed to fetch Open Router models. Please check your connection.");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){cp(i,n,o,a,s,"next",e)}function s(e){cp(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();function lp(e){return lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lp(e)}function pp(){pp=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==lp(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(lp(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function hp(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function fp(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){hp(i,n,o,a,s,"next",e)}function s(e){hp(i,n,o,a,s,"throw",e)}a(void 0)}))}}function dp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gp(n.key),n)}}function vp(e,t,r){return(t=gp(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gp(e){var t=function(e){if("object"!=lp(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=lp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==lp(t)?t:t+""}var yp=function(){return e=function e(r,n,o,i,a,s){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),vp(this,"has_active_editor",!1),vp(this,"has_active_selection",!1),vp(this,"is_code_completions_mode",!1),vp(this,"caret_position",0),vp(this,"instructions",""),vp(this,"code_completion_suggestions",""),this.extension_uri=r,this.workspace_provider=n,this.open_editors_provider=o,this.websites_provider=i,this.context=a,this.websocket_server_instance=s,this.websocket_server_instance.on_connection_status_change((function(e){c._webview_view&&c.send_message({command:"CONNECTION_STATUS",connected:e})})),this.edit_format=this.context.workspaceState.get("editFormat","truncated"),this._config_listener=t.workspace.onDidChangeConfiguration((function(e){if(c._webview_view)if(e.affectsConfiguration("codeWebChat.presets"))c.send_presets_to_webview(c._webview_view.webview);else if(e.affectsConfiguration("codeWebChat.editFormatSelectorVisibility")){var r=t.workspace.getConfiguration("codeWebChat").get("editFormatSelectorVisibility");c.send_message({command:"EDIT_FORMAT_SELECTOR_VISIBILITY",visibility:r})}})),bi.on("token-count-updated",(function(){c._webview_view&&c.calculate_token_count()})),this.context.subscriptions.push(this._config_listener),this.instructions=this.context.workspaceState.get("instructions",""),this.code_completion_suggestions=this.context.workspaceState.get("code-completion-suggestions","");var u=function(){var e=!!t.window.activeTextEditor;e!=c.has_active_editor&&(c.has_active_editor=e,c._webview_view&&c.send_message({command:"EDITOR_STATE_CHANGED",has_active_editor:e}))};t.window.onDidChangeActiveTextEditor((function(){return setTimeout(u,100)})),u(),t.window.onDidChangeTextEditorSelection((function(e){var t=!e.textEditor.selection.isEmpty;t!=c.has_active_selection&&(c.has_active_selection=t,c._webview_view&&c.send_message({command:"EDITOR_SELECTION_CHANGED",has_selection:t})),t&&c.is_code_completions_mode&&(c.is_code_completions_mode=!1,c._webview_view&&c.send_message({command:"CODE_COMPLETIONS_MODE",enabled:!1}))}));var l=function(){var e=t.window.activeTextEditor,r=!!e&&!e.selection.isEmpty;c.has_active_selection=r,c._webview_view&&c.send_message({command:"EDITOR_SELECTION_CHANGED",has_selection:r})},p=function(){var e=t.window.activeTextEditor;if(e&&!e.selection.isEmpty){var r=e.document.getText(e.selection);c._webview_view&&c.send_message({command:"SELECTION_TEXT_UPDATED",text:r})}};t.window.onDidChangeActiveTextEditor((function(){return setTimeout(l,100)})),l(),t.window.onDidChangeTextEditorSelection((function(){return setTimeout(p,100)})),p(),t.window.onDidChangeActiveTextEditor((function(){c._update_active_file_info()})),t.workspace.onDidChangeTextDocument((function(e){t.window.activeTextEditor&&e.document===t.window.activeTextEditor.document&&(c._update_active_file_info(),c.is_code_completions_mode&&c._webview_view&&c.calculate_token_count())}))},r=[{key:"calculate_token_count",value:function(){var e=this,r=new B(this.workspace_provider,this.open_editors_provider,this.websites_provider),n=t.window.activeTextEditor,o=null==n?void 0:n.document.uri.fsPath,i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dp(Object(r),!0).forEach((function(t){vp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({disable_xml:!0},this.is_code_completions_mode&&o?{exclude_path:o}:{});r.collect_files(i).then((function(t){var r=Math.floor(t.length/4);if(n&&e.is_code_completions_mode){var o=n.document.getText();r+=Math.floor(o.length/4)}e.send_message({command:"TOKEN_COUNT_UPDATED",tokenCount:r})})).catch((function(t){console.error("Error calculating token count:",t),e.send_message({command:"TOKEN_COUNT_UPDATED",tokenCount:0})}))}},{key:"send_message",value:function(e){this._webview_view&&this._webview_view.webview.postMessage(e)}},{key:"resolveWebviewView",value:(n=fp(pp().mark((function e(r,n,o){var i,a,s=this;return pp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._webview_view=r,r.webview.options={enableScripts:!0,localResourceRoots:[this.extension_uri]},r.webview.html=this._get_html_for_webview(r.webview),r.webview.onDidReceiveMessage(function(){var e=fp(pp().mark((function e(n){return pp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"GET_HISTORY"!=n.command){e.next=5;break}void 0,i=(o=s).context.workspaceState.get("history",[]),o.send_message({command:"CHAT_HISTORY",messages:i}),e.next=177;break;case 5:if("GET_CODE_COMPLETIONS_HISTORY"!=n.command){e.next=9;break}ya(s),e.next=177;break;case 9:if("SAVE_HISTORY"!=n.command){e.next=14;break}return e.next=12,Ka(s,n);case 12:e.next=177;break;case 14:if("GET_INSTRUCTIONS"!=n.command){e.next=18;break}_a(s),e.next=177;break;case 18:if("SAVE_INSTRUCTIONS"!=n.command){e.next=23;break}return e.next=21,es(s,n);case 21:e.next=177;break;case 23:if("GET_CODE_COMPLETION_SUGGESTIONS"!=n.command){e.next=27;break}ga(s),e.next=177;break;case 27:if("SAVE_CODE_COMPLETION_SUGGESTIONS"!=n.command){e.next=32;break}return e.next=30,Fa(s,n);case 30:e.next=177;break;case 32:if("GET_CONNECTION_STATUS"!=n.command){e.next=36;break}wa(s),e.next=177;break;case 36:if("GET_PRESETS"!=n.command){e.next=40;break}s.send_presets_to_webview(r.webview),e.next=177;break;case 40:if("GET_SELECTED_PRESETS"!=n.command){e.next=44;break}Ea(s),e.next=177;break;case 44:if("SAVE_SELECTED_PRESETS"!=n.command){e.next=49;break}return e.next=47,s.context.globalState.update("selectedPresets",n.names);case 47:e.next=177;break;case 49:if("GET_SELECTED_CODE_COMPLETION_PRESETS"!=n.command){e.next=53;break}ka(s),e.next=177;break;case 53:if("SAVE_SELECTED_CODE_COMPLETION_PRESETS"!=n.command){e.next=58;break}return e.next=56,s.context.globalState.update("selectedCodeCompletionPresets",n.names);case 56:e.next=177;break;case 58:if("SEND_PROMPT"!=n.command){e.next=63;break}return e.next=61,ls(s,n.preset_names);case 61:e.next=177;break;case 63:if("PREVIEW_PRESET"!=n.command){e.next=68;break}return e.next=66,ja(s,n);case 66:e.next=177;break;case 68:if("COPY_PROMPT"!=n.command){e.next=73;break}return e.next=71,Si(s);case 71:e.next=177;break;case 73:if("SHOW_PRESET_PICKER"!=n.command){e.next=78;break}return e.next=76,vs(s,s.is_code_completions_mode);case 76:e.next=177;break;case 78:if("GET_CODE_COMPLETIONS_MODE"!=n.command){e.next=82;break}ba(s),e.next=177;break;case 82:if("SAVE_CODE_COMPLETIONS_MODE"!=n.command){e.next=87;break}return e.next=85,Ga(s,n);case 85:e.next=177;break;case 87:if("REQUEST_EDITOR_STATE"!=n.command){e.next=91;break}Pa(s),e.next=177;break;case 91:if("REQUEST_EDITOR_SELECTION_STATE"!=n.command){e.next=95;break}Ca(s),e.next=177;break;case 95:if("GET_CURRENT_TOKEN_COUNT"!=n.command){e.next=99;break}s.calculate_token_count(),e.next=177;break;case 99:if("SAVE_PRESETS_ORDER"!=n.command){e.next=104;break}return e.next=102,os(s,n);case 102:e.next=177;break;case 104:if("UPDATE_PRESET"!=n.command){e.next=109;break}return e.next=107,js(s,n,r);case 107:e.next=177;break;case 109:if("DELETE_PRESET"!=n.command){e.next=114;break}return e.next=112,ca(s,n,r);case 112:e.next=177;break;case 114:if("DUPLICATE_PRESET"!=n.command){e.next=119;break}return e.next=117,va(s,n,r);case 117:e.next=177;break;case 119:if("CREATE_PRESET"!=n.command){e.next=124;break}return e.next=122,na(s);case 122:e.next=177;break;case 124:if("EXECUTE_COMMAND"!=n.command){e.next=128;break}t.commands.executeCommand(n.command_id),e.next=177;break;case 128:if("SHOW_QUICK_PICK"!=n.command){e.next=133;break}return e.next=131,ws(n);case 131:e.next=177;break;case 133:if("GET_EDIT_FORMAT"!=n.command){e.next=137;break}s.send_message({command:"EDIT_FORMAT",edit_format:s.edit_format}),e.next=177;break;case 137:if("SAVE_EDIT_FORMAT"!=n.command){e.next=142;break}return e.next=140,Va(s,n.edit_format);case 140:e.next=177;break;case 142:if("GET_EDIT_FORMAT_SELECTOR_VISIBILITY"!=n.command){e.next=146;break}xa(s),e.next=177;break;case 146:if("SAVE_EDIT_FORMAT_SELECTOR_VISIBILITY"!=n.command){e.next=151;break}return e.next=149,Ba(s,n);case 149:e.next=177;break;case 151:if("CARET_POSITION_CHANGED"!=n.command){e.next=155;break}s.caret_position=n.caret_position,e.next=177;break;case 155:if("CONFIGURE_API_PROVIDERS"!=n.command){e.next=159;break}Ji(s),e.next=177;break;case 159:if("SETUP_API_TOOL_CODE_COMPLETIONS"!=n.command){e.next=164;break}return e.next=162,Kl({provider:s,tool:"code-completions"});case 162:e.next=177;break;case 164:if("SETUP_API_TOOL_FILE_REFACTORING"!=n.command){e.next=169;break}return e.next=167,Kl({provider:s,tool:"file-refactoring"});case 167:e.next=177;break;case 169:if("SETUP_API_TOOL_COMMIT_MESSAGES"!=n.command){e.next=174;break}return e.next=172,ip({provider:s,tool:"commit-messages"});case 172:e.next=177;break;case 174:if("PICK_OPEN_ROUTER_MODEL"!=n.command){e.next=177;break}return e.next=177,up(s);case 177:e.next=183;break;case 179:e.prev=179,e.t0=e.catch(0),console.error("Error handling message:",n,e.t0),t.window.showErrorMessage("Error handling message: ".concat(e.t0.message));case 183:case"end":return e.stop()}var o,i}),e,null,[[0,179]])})));return function(t){return e.apply(this,arguments)}}()),i=t.workspace.getConfiguration("codeWebChat"),a=i.get("editFormatSelectorVisibility","visible"),this.send_message({command:"EDIT_FORMAT_SELECTOR_VISIBILITY",visibility:a}),this._update_active_file_info(),this.send_presets_to_webview(r.webview);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"_update_active_file_info",value:function(){if(this._webview_view){var e=t.window.activeTextEditor;if(e){var r=e.document.getText().length;this.send_message({command:"ACTIVE_FILE_INFO_UPDATED",fileLength:r})}}}},{key:"send_presets_to_webview",value:function(e){var r=(t.workspace.getConfiguration("codeWebChat").get("presets",[])||[]).map((function(e){return Qi(e)}));this.send_message({command:"PRESETS",presets:r})}},{key:"_get_html_for_webview",value:function(e){var r=e.asWebviewUri(t.Uri.joinPath(this.extension_uri,"resources")),n=e.asWebviewUri(t.Uri.joinPath(this.extension_uri,"out","view.js")),o=e.asWebviewUri(t.Uri.joinPath(this.extension_uri,"out","view.css"));return'\n      <!DOCTYPE html>\n      <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <link rel="stylesheet" href="'.concat(o,'">\n        <script>\n          window.resources_uri = "').concat(r,'";\n        <\/script>\n        <style>\n          body {\n            overflow: hidden;\n          }\n        </style>\n      </head>\n      <body>\n        <div id="root"></div>\n        <script src="').concat(n,'"><\/script>\n      </body>\n      </html>\n    ')}},{key:"add_text_at_cursor_position",value:function(e){if(this.is_code_completions_mode){var t=this.code_completion_suggestions.slice(0,this.caret_position),r=this.code_completion_suggestions.slice(this.caret_position);this.code_completion_suggestions=t+e+r,this.caret_position+=e.length,this.context.workspaceState.update("code-completion-suggestions",this.code_completion_suggestions),this.send_message({command:"CODE_COMPLETION_SUGGESTIONS",value:this.code_completion_suggestions})}else{var n=this.instructions.slice(0,this.caret_position),o=this.instructions.slice(this.caret_position);this.instructions=n+e+o,this.caret_position+=e.length,this.context.workspaceState.update("instructions",this.instructions),this.send_message({command:"INSTRUCTIONS",value:this.instructions})}}}],r&&mp(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}(),bp=(o(3426),o(1339),o(8407),o(4827));o(543);const wp=require("child_process");var xp=o(9278);function _p(e){return _p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(e)}function kp(){kp=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==_p(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(_p(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Ep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Sp(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ep(i,n,o,a,s,"next",e)}function s(e){Ep(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Op(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jp(n.key),n)}}function Tp(e,t,r){return(t=jp(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jp(e){var t=function(e){if("object"!=_p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_p(t)?t:t+""}var Cp=function(){return e=function e(r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Tp(this,"port",55155),Tp(this,"security_token","gemini-coder-vscode"),Tp(this,"client",null),Tp(this,"_on_connection_status_change",new t.EventEmitter),Tp(this,"reconnect_timer",null),Tp(this,"has_connected_browsers",!1),Tp(this,"websites_provider",null),Tp(this,"client_id",null),Tp(this,"should_reconnect",!0),Tp(this,"on_connection_status_change",this._on_connection_status_change.event),this.context=r,this.websites_provider=n||null,this.current_extension_version=r.extension.packageJSON.version,this._initialize_server()},r=[{key:"set_websites_provider",value:function(e){this.websites_provider=e}},{key:"_is_port_in_use",value:(u=Sp(kp().mark((function e(t){return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=xp.createServer().once("error",(function(){e(!0)})).once("listening",(function(){r.close(),e(!1)})).listen(t)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"_initialize_server",value:(c=Sp(kp().mark((function e(){return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._is_port_in_use(this.port);case 3:if(e.sent){e.next=7;break}return e.next=7,this._start_server_process();case 7:this._connect_as_client(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),l.error({function_name:"initialize_server",message:"Error initializing WebSocket server",data:e.t0}),t.window.showErrorMessage("Failed to initialize WebSocket server: ".concat(e.t0));case 14:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return c.apply(this,arguments)})},{key:"_start_server_process",value:(s=Sp(kp().mark((function e(){var t,r;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.join(this.context.extensionPath,"out","websocket-server-process.js"),e.prev=1,(r=wp.fork(t,[],{detached:!0,stdio:"ignore"})).pid&&r.unref(),l.log({function_name:"_start_server_process",message:"Started WebSocket server process with PID: ".concat(r.pid)}),e.abrupt("return",new Promise((function(e){return setTimeout(e,1e3)})));case 8:throw e.prev=8,e.t0=e.catch(1),l.error({function_name:"_start_server_process",message:"Failed to start WebSocket server process",data:e.t0}),e.t0;case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return s.apply(this,arguments)})},{key:"_connect_as_client",value:(a=Sp(kp().mark((function e(){var r,n=this;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.client&&(this.client.close(),this.client=null),this.client_id=null,e.next=4,this._is_port_in_use(this.port);case 4:if(e.sent){e.next=16;break}return e.prev=6,e.next=9,this._start_server_process();case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(6),l.error({function_name:"_connect_as_client",message:"Failed to restart WebSocket server",data:e.t0}),this.should_reconnect&&this._schedule_reconnect(),e.abrupt("return");case 16:r="ws://localhost:".concat(this.port,"?token=").concat(this.security_token,"&vscode_extension_version=").concat(this.current_extension_version),this.client=new bp(r),this.client.on("open",(function(){l.log({function_name:"connect_to_server",message:"Connected to WebSocket server"})})),this.client.on("message",function(){var e=Sp(kp().mark((function e(r){var o,i,a;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{o=JSON.parse(r.toString()),l.log({function_name:"connect_to_server",message:"Incoming WS message",data:o}),"client-id-assignment"==o.action?n.client_id=o.client_id:"browser-connection-status"==o.action?(n.has_connected_browsers=o.has_connected_browsers,n._on_connection_status_change.fire(n.has_connected_browsers)):"update-saved-websites"==o.action?null===(i=n.websites_provider)||void 0===i||i.update_websites(o.websites):"apply-chat-response"==o.action?t.commands.executeCommand("codeWebChat.applyChatResponse"):"ping"==o.action&&o.vscode_extension_version&&n._is_version_newer(o.vscode_extension_version,n.current_extension_version)&&(n.should_reconnect=!1,null===(a=n.client)||void 0===a||a.close(),t.window.showErrorMessage("A newer version of the Code Web Chat (CWC) extension is running in some other window, please open command palette and run: Restart Extension Host."))}catch(e){l.error({function_name:"connect_to_server",message:"Error processing message",data:e})}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.client.on("error",(function(e){l.error({function_name:"connect_to_server",message:"WebSocket client error",data:e}),n.has_connected_browsers=!1,n._on_connection_status_change.fire(!1),n.should_reconnect&&n._schedule_reconnect()})),this.client.on("close",(function(){l.warn({function_name:"connect_to_server",message:"Disconnected from WebSocket server"}),n.has_connected_browsers=!1,n._on_connection_status_change.fire(!1),n.should_reconnect&&n._schedule_reconnect()}));case 22:case"end":return e.stop()}}),e,this,[[6,11]])}))),function(){return a.apply(this,arguments)})},{key:"_schedule_reconnect",value:function(){var e=this;this.reconnect_timer&&clearTimeout(this.reconnect_timer),this.reconnect_timer=setTimeout((function(){e._connect_as_client()}),3e3)}},{key:"_is_version_newer",value:function(e,t){for(var r=e.split(".").map(Number),n=t.split(".").map(Number),o=0;o<Math.max(r.length,n.length);o++){var i=r[o]||0,a=n[o]||0;if(i>a)return!0;if(i<a)return!1}return!1}},{key:"is_connected_with_browser",value:function(){return this.has_connected_browsers}},{key:"initialize_chats",value:(i=Sp(kp().mark((function e(r,n){var o,i,a,s,c;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.has_connected_browsers){e.next=2;break}throw new Error("Does not have connected browsers.");case 2:a=t.workspace.getConfiguration("codeWebChat"),s=null!==(o=a.get("presets"))&&void 0!==o?o:[],c={action:"initialize-chats",text:r,chats:n.map((function(e){var t=s.find((function(t){return t.name==e}));if(!t)return null;var r=Ki[t.chatbot];return{url:"Open WebUI"==t.chatbot?t.port?"http://localhost:".concat(t.port,"/"):"http://openwebui/":r.url,model:t.model,temperature:t.temperature,top_p:t.top_p,system_instructions:t.systemInstructions,options:t.options}})).filter((function(e){return null!==e})),client_id:this.client_id||0},l.log({function_name:"initialize_chats",message:"Sending initialize chats message",data:c}),null===(i=this.client)||void 0===i||i.send(JSON.stringify(c));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"preview_preset",value:(o=Sp(kp().mark((function e(t,r){var n,o,i,a;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.has_connected_browsers){e.next=2;break}throw new Error("Does not have connected browsers.");case 2:o=Ki[r.chatbot],i="Open WebUI"==r.chatbot?r.port?"http://localhost:".concat(r.port,"/"):"http://openwebui/":o.url,a={action:"initialize-chats",text:t,chats:[{url:i,model:r.model,temperature:r.temperature,top_p:r.top_p,system_instructions:r.system_instructions,options:r.options}],client_id:this.client_id||0},l.log({function_name:"preview_preset",message:"Sending preview preset message",data:a}),null===(n=this.client)||void 0===n||n.send(JSON.stringify(a));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})}],r&&Op(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,o,i,a,s,c,u}();function Pp(e){return Pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(e)}function Ap(){Ap=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Pp(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Pp(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Ip(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var Np="remove-copilot-presets-migration-090605";function Fp(e){return Dp.apply(this,arguments)}function Dp(){var e;return e=Ap().mark((function e(r){var n,o,i;return Ap().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r.globalState.get(Np)){e.next=4;break}return l.log({function_name:"migrate_remove_copilot_presets",message:"Remove Copilot presets migration already completed. Skipping."}),e.abrupt("return");case 4:if(n=t.workspace.getConfiguration("geminiCoder"),(o=n.get("presets"))&&0!==o.length){e.next=11;break}return l.log({function_name:"migrate_remove_copilot_presets",message:"No presets found. No migration needed."}),e.next=10,r.globalState.update(Np,!0);case 10:return e.abrupt("return");case 11:if(!((i=o.filter((function(e){return"GitHub Copilot"!=e.chatbot}))).length<o.length)){e.next=18;break}return e.next=15,n.update("presets",i,t.ConfigurationTarget.Global);case 15:l.log({function_name:"migrate_remove_copilot_presets",message:"Removed ".concat(o.length-i.length," presets with GitHub Copilot chatbot")}),e.next=19;break;case 18:l.log({function_name:"migrate_remove_copilot_presets",message:"No presets with GitHub Copilot chatbot found to remove."});case 19:return e.next=21,r.globalState.update(Np,!0);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),l.error({function_name:"migrate_remove_copilot_presets",message:"Error removing GitHub Copilot presets",data:e.t0});case 26:case"end":return e.stop()}}),e,null,[[0,23]])})),Dp=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ip(i,n,o,a,s,"next",e)}function s(e){Ip(i,n,o,a,s,"throw",e)}a(void 0)}))},Dp.apply(this,arguments)}function Rp(e){return Rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rp(e)}function Lp(){Lp=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Rp(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Rp(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Gp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function qp(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var Mp={codeCompletionsSettings:"apiToolCodeCompletionsSettings",fileRefactoringSettings:"apiToolFileRefactoringSettings",commitMessagesSettings:"apiToolCommitMessageSettings",applyChatResponseSettings:"apiToolFileRefactoringSettings"},Up="api-tool-settings-migration-090605";function Bp(e){return zp.apply(this,arguments)}function zp(){var e;return e=Lp().mark((function e(r){var n,o,i,a,s,c,u,p;return Lp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r.globalState.get(Up)){e.next=4;break}return l.log({function_name:"migrate_api_tool_settings",message:"API tool settings migration already completed. Skipping."}),e.abrupt("return");case 4:n=t.workspace.getConfiguration("geminiCoder"),o=0,i=0,a=Object.entries(Mp);case 7:if(!(i<a.length)){e.next=20;break}if(h=a[i],f=2,s=function(e){if(Array.isArray(e))return e}(h)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(h,f)||function(e,t){if(e){if("string"==typeof e)return Gp(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gp(e,t):void 0}}(h,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=s[0],u=s[1],void 0!==(p=n.get(c))){e.next=12;break}return e.abrupt("continue",17);case 12:return e.next=14,n.update(u,p,t.ConfigurationTarget.Global);case 14:return e.next=16,n.update(c,void 0,t.ConfigurationTarget.Global);case 16:o++;case 17:i++,e.next=7;break;case 20:return o>0?l.log({function_name:"migrate_api_tool_settings",message:"Successfully migrated ".concat(o," API tool settings")}):l.log({function_name:"migrate_api_tool_settings",message:"No API tool settings found to migrate."}),e.next=23,r.globalState.update(Up,!0);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),l.error({function_name:"migrate_api_tool_settings",message:"Error migrating API tool settings",data:e.t0});case 28:case"end":return e.stop()}var h,f}),e,null,[[0,25]])})),zp=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){qp(i,n,o,a,s,"next",e)}function s(e){qp(i,n,o,a,s,"throw",e)}a(void 0)}))},zp.apply(this,arguments)}function Wp(e){return Wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(e)}function $p(){$p=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Wp(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Wp(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Vp(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var Hp="file-refactoring-to-array-migration-20250522";function Yp(e){return Jp.apply(this,arguments)}function Jp(){var e;return e=$p().mark((function e(t){var r,n;return $p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.globalState.get(Hp)){e.next=4;break}return l.log({function_name:"migrate_file_refactoring_to_array",message:"File refactoring to array migration already completed. Skipping."}),e.abrupt("return");case 4:if(!(r=t.globalState.get(Uo))){e.next=12;break}return n=[r],e.next=9,t.globalState.update(Uo,n);case 9:l.log({function_name:"migrate_file_refactoring_to_array",message:"Successfully migrated file refactoring config from object to array"}),e.next=13;break;case 12:l.log({function_name:"migrate_file_refactoring_to_array",message:"No existing file refactoring config found to migrate."});case 13:return e.next=15,t.globalState.update(Hp,!0);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),l.error({function_name:"migrate_file_refactoring_to_array",message:"Error migrating file refactoring config to array",data:e.t0 instanceof Error?e.t0.message:String(e.t0)});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),Jp=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Vp(i,n,o,a,s,"next",e)}function s(e){Vp(i,n,o,a,s,"throw",e)}a(void 0)}))},Jp.apply(this,arguments)}function Kp(e){return Kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(e)}function Qp(){Qp=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Kp(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Kp(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Zp(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Xp(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xp(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Xp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eh(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var th="geminiCoder",rh="codeWebChat",nh="settings-prefix-migration-090525",oh=["commitMessagePrompt","ignoredExtensions","editFormat","editFormatSelectorVisibility","editFormatInstructionsTruncated","editFormatInstructionsWhole","editFormatInstructionsDiff","chatCodeCompletionInstructions","presets","apiToolCodeCompletionsSettings","apiToolFileRefactoringSettings","apiToolCommitMessageSettings"];function ih(e){return ah.apply(this,arguments)}function ah(){var e;return e=Qp().mark((function e(r){var n,o,i,a,s,c,u,p,h,f;return Qp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r.globalState.get(nh)){e.next=4;break}return l.log({function_name:"migrate_settings_prefix",message:"Settings prefix migration already completed. Skipping."}),e.abrupt("return");case 4:n=t.workspace.getConfiguration(th),o=t.workspace.getConfiguration(rh),i=0,a=[],s=Zp(oh),e.prev=9,s.s();case 11:if((c=s.n()).done){e.next=31;break}if(u=c.value,p=n.inspect(u),h=!1,f=[],!p){e.next=29;break}if(void 0===p.globalValue){e.next=22;break}return e.next=20,o.update(u,p.globalValue,t.ConfigurationTarget.Global);case 20:h=!0,f.push("Global");case 22:if(void 0===p.workspaceValue){e.next=27;break}return e.next=25,o.update(u,p.workspaceValue,t.ConfigurationTarget.Workspace);case 25:h=!0,f.push("Workspace");case 27:void 0!==p.workspaceFolderValue&&l.warn({function_name:"migrate_settings_prefix",message:"Setting '".concat(th,".").concat(u,"' found with a Workspace Folder specific value. Please manually migrate this to '").concat(rh,".").concat(u,"' in the respective .vscode/settings.json file.")}),h&&(i++,a.push({key:u,scopes:f}));case 29:e.next=11;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(9),s.e(e.t0);case 36:return e.prev=36,s.f(),e.finish(36);case 39:return i>0&&(l.log({function_name:"migrate_settings_prefix",message:"Successfully migrated ".concat(i," settings from '").concat(th,".*' to '").concat(rh,".*' prefix. Details: ").concat(JSON.stringify(a))}),t.window.showInformationMessage("Code Web Chat: ".concat(i," settings were migrated from the old 'geminiCoder' prefix to 'codeWebChat'. Your settings remain preserved."))),e.next=42,r.globalState.update(nh,!0);case 42:e.next=48;break;case 44:e.prev=44,e.t1=e.catch(0),l.error({function_name:"migrate_settings_prefix",message:"Error migrating settings from '".concat(th,"' to '").concat(rh,"' prefix"),data:e.t1 instanceof Error?e.t1.message:String(e.t1)}),t.window.showErrorMessage("Code Web Chat: An error occurred while migrating settings. Please check the logs. You may need to manually update settings from '".concat(th,".*' to '").concat(rh,".*'."));case 48:case"end":return e.stop()}}),e,null,[[0,44],[9,33,36,39]])})),ah=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){eh(i,n,o,a,s,"next",e)}function s(e){eh(i,n,o,a,s,"throw",e)}a(void 0)}))},ah.apply(this,arguments)}function sh(e){return sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sh(e)}function ch(){ch=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==sh(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(sh(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function uh(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return lh(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lh(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function lh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ph(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var hh="geminiCoder",fh="codeWebChat",dh="keybindings-migration-090525";function mh(e){return vh.apply(this,arguments)}function vh(){var e;return e=ch().mark((function e(o){var i,a,s,c,u,p,h,f;return ch().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!o.globalState.get(dh)){e.next=4;break}return l.log({function_name:"migrate_keybindings",message:"Keybindings migration already completed. Skipping."}),e.abrupt("return");case 4:if(i=n.join(process.env.APPDATA||process.env.HOME||"","darwin"===process.platform?"Library/Application Support/Code/User/keybindings.json":"win32"===process.platform?"Code/User/keybindings.json":".config/Code/User/keybindings.json"),r.existsSync(i)){e.next=10;break}return l.log({function_name:"migrate_keybindings",message:"No keybindings.json file found. No migration needed."}),e.next=9,o.globalState.update(dh,!0);case 9:return e.abrupt("return");case 10:a=r.readFileSync(i,"utf8"),e.prev=11,s=JSON.parse(a),e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(11),l.error({function_name:"migrate_keybindings",message:"Error parsing keybindings.json",data:e.t0 instanceof Error?e.t0.message:String(e.t0)}),e.abrupt("return");case 19:if(Array.isArray(s)){e.next=22;break}return l.error({function_name:"migrate_keybindings",message:"Invalid keybindings.json format. Expected an array."}),e.abrupt("return");case 22:c=0,u=uh(s);try{for(u.s();!(p=u.n()).done;)(h=p.value).command&&h.command.startsWith("".concat(hh,"."))&&(f=h.command,h.command=f.replace("".concat(hh,"."),"".concat(fh,".")),c++)}catch(e){u.e(e)}finally{u.f()}return c>0?(r.writeFileSync(i,JSON.stringify(s,null,2)),l.log({function_name:"migrate_keybindings",message:"Successfully migrated ".concat(c," keybindings from '").concat(hh,".*' to '").concat(fh,".*' prefix.")})):l.log({function_name:"migrate_keybindings",message:"No keybindings found with geminiCoder prefix. No migration needed."}),e.next=28,o.globalState.update(dh,!0);case 28:e.next=34;break;case 30:e.prev=30,e.t1=e.catch(0),l.error({function_name:"migrate_keybindings",message:"Error migrating keybindings",data:e.t1 instanceof Error?e.t1.message:String(e.t1)}),t.window.showErrorMessage("Code Web Chat: An error occurred while migrating keybindings. Please check the logs.");case 34:case"end":return e.stop()}}),e,null,[[0,30],[11,15]])})),vh=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ph(i,n,o,a,s,"next",e)}function s(e){ph(i,n,o,a,s,"throw",e)}a(void 0)}))},vh.apply(this,arguments)}function gh(e){return gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gh(e)}function yh(){yh=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==gh(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(gh(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function bh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function wh(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var xh="api-keys-to-providers-migration-1505251700",_h="savedApiProviders";function kh(e){return Eh.apply(this,arguments)}function Eh(){var e;return e=yh().mark((function e(t){var r,n,o,i,a;return yh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.globalState.get(xh)){e.next=4;break}return l.log({function_name:"migrate_create_providers_from_api_keys",message:"Create providers from API keys migration already completed. Skipping."}),e.abrupt("return");case 4:if(r=t.globalState.get("geminiApiKey"),n=t.globalState.get("openRouterApiKey"),o=t.globalState.get(_h,[]),i=!1,a=function(e){if(Array.isArray(e))return bh(e)}(s=o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return bh(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bh(e,t):void 0}}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r&&!o.some((function(e){return"Gemini"==e.name}))&&(a.push({type:"built-in",name:"Gemini",api_key:r}),i=!0,l.log({function_name:"migrate_create_providers_from_api_keys",message:"Added Gemini provider from saved API key"})),n&&!o.some((function(e){return"OpenRouter"==e.name}))&&(a.push({type:"built-in",name:"OpenRouter",api_key:n}),i=!0,l.log({function_name:"migrate_create_providers_from_api_keys",message:"Added OpenRouter provider from saved API key"})),!i){e.next=17;break}return e.next=14,t.globalState.update(_h,a);case 14:l.log({function_name:"migrate_create_providers_from_api_keys",message:"Updated providers list with new providers from API keys"}),e.next=18;break;case 17:l.log({function_name:"migrate_create_providers_from_api_keys",message:"No new providers to add from API keys"});case 18:return e.next=20,t.globalState.update(xh,!0);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),l.error({function_name:"migrate_create_providers_from_api_keys",message:"Error creating providers from API keys",data:e.t0 instanceof Error?e.t0.message:String(e.t0)});case 25:case"end":return e.stop()}var s}),e,null,[[0,22]])})),Eh=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){wh(i,n,o,a,s,"next",e)}function s(e){wh(i,n,o,a,s,"throw",e)}a(void 0)}))},Eh.apply(this,arguments)}function Sh(e){return Sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sh(e)}function Oh(){Oh=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Sh(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Sh(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Th(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var jh="api-tool-config-migration-170525";function Ch(e){return Ph.apply(this,arguments)}function Ph(){var e;return e=Oh().mark((function e(r){var n,o,i,a,s,c;return Oh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r.globalState.get(jh)){e.next=4;break}return l.log({function_name:"migrate_api_tool_config",message:"API tool config migration already completed. Skipping."}),e.abrupt("return");case 4:if(n=t.workspace.getConfiguration("codeWebChat"),o=new Li(r),i=n.get("apiToolCodeCompletionsSettings"),a=n.get("apiToolFileRefactoringSettings"),s=n.get("apiToolCommitMessageSettings"),null==i||!i.provider||!i.model){e.next=14;break}return c={provider_type:"built-in",provider_name:"Gemini API"==i.provider?"Gemini":"OpenRouter",model:i.model,temperature:i.temperature||.2},e.next=13,o.save_code_completions_tool_configs([c]);case 13:l.log({function_name:"migrate_api_tool_config",message:"Migrated code completions settings to use built-in ".concat(c.provider_name)});case 14:if(null==a||!a.provider||!a.model){e.next=18;break}return e.next=17,o.save_file_refactoring_tool_configs([{provider_type:"built-in",provider_name:"Gemini API"==a.provider?"Gemini":"OpenRouter",model:a.model,temperature:a.temperature||0}]);case 17:l.log({function_name:"migrate_api_tool_config",message:"Migrated file refactoring settings to use built-in ".concat("Gemini API"===a.provider?"Gemini":"OpenRouter")});case 18:if(null==s||!s.provider||!s.model){e.next=22;break}return e.next=21,o.save_commit_messages_tool_config({provider_type:"built-in",provider_name:"Gemini API"==s.provider?"Gemini":"OpenRouter",model:s.model,temperature:s.temperature||.3});case 21:l.log({function_name:"migrate_api_tool_config",message:"Migrated commit messages settings to use built-in ".concat("Gemini API"===s.provider?"Gemini":"OpenRouter")});case 22:return e.next=24,r.globalState.update(jh,!0);case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),l.error({function_name:"migrate_api_tool_config",message:"Error migrating API tool config",data:e.t0 instanceof Error?e.t0.message:String(e.t0)});case 29:case"end":return e.stop()}}),e,null,[[0,26]])})),Ph=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Th(i,n,o,a,s,"next",e)}function s(e){Th(i,n,o,a,s,"throw",e)}a(void 0)}))},Ph.apply(this,arguments)}function Ah(e){return Ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(e)}function Ih(){Ih=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Ah(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Ah(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Nh(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var Fh="api-providers-to-secret-storage-migration-20250525",Dh="savedApiProviders";function Rh(e){return Lh.apply(this,arguments)}function Lh(){var e;return e=Ih().mark((function e(t){var r;return Ih().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.globalState.get(Fh)){e.next=4;break}return l.log({function_name:"migrate_api_providers_to_secret_storage",message:"API providers to Secret Storage migration already completed. Skipping."}),e.abrupt("return");case 4:if(!((r=t.globalState.get(Dh,[])).length>0)){e.next=13;break}return e.next=8,t.secrets.store("api-providers",JSON.stringify(r));case 8:return e.next=10,t.globalState.update(Dh,void 0);case 10:l.log({function_name:"migrate_api_providers_to_secret_storage",message:"Successfully migrated ".concat(r.length," API providers to Secret Storage")}),e.next=14;break;case 13:l.log({function_name:"migrate_api_providers_to_secret_storage",message:"No API providers found to migrate."});case 14:return e.next=16,t.globalState.update(Fh,!0);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),l.error({function_name:"migrate_api_providers_to_secret_storage",message:"Error migrating API providers to Secret Storage",data:e.t0 instanceof Error?e.t0.message:String(e.t0)});case 21:case"end":return e.stop()}}),e,null,[[0,18]])})),Lh=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Nh(i,n,o,a,s,"next",e)}function s(e){Nh(i,n,o,a,s,"throw",e)}a(void 0)}))},Lh.apply(this,arguments)}function Gh(e){return Gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gh(e)}function qh(){qh=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Gh(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Gh(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Mh(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var Uh="commit-message-prompt-to-instructions-migration-20250522";function Bh(e){return zh.apply(this,arguments)}function zh(){var e;return e=qh().mark((function e(r){var n,o;return qh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r.globalState.get(Uh)){e.next=4;break}return l.log({function_name:"migrate_commit_message_prompt_to_instructions",message:"Commit message prompt to instructions migration already completed. Skipping."}),e.abrupt("return");case 4:if(n=t.workspace.getConfiguration(),void 0===(o=n.get("codeWebChat.commitMessagePrompt"))){e.next=12;break}return e.next=9,n.update("codeWebChat.commitMessageInstructions",o,t.ConfigurationTarget.Global);case 9:l.log({function_name:"migrate_commit_message_prompt_to_instructions",message:"Successfully migrated commitMessagePrompt to commitMessageInstructions"}),e.next=13;break;case 12:l.log({function_name:"migrate_commit_message_prompt_to_instructions",message:"No existing commitMessagePrompt setting found to migrate."});case 13:return e.next=15,r.globalState.update(Uh,!0);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),l.error({function_name:"migrate_commit_message_prompt_to_instructions",message:"Error migrating commitMessagePrompt to commitMessageInstructions",data:e.t0 instanceof Error?e.t0.message:String(e.t0)});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),zh=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Mh(i,n,o,a,s,"next",e)}function s(e){Mh(i,n,o,a,s,"throw",e)}a(void 0)}))},zh.apply(this,arguments)}function Wh(e){return Wh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wh(e)}function $h(){$h=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Wh(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Wh(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Vh(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var Hh="chat-code-completion-instructions-migration-20240625";function Yh(e){return Jh.apply(this,arguments)}function Jh(){var e;return e=$h().mark((function e(r){var n,o;return $h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r.globalState.get(Hh)){e.next=4;break}return l.log({function_name:"migrate_chat_code_completion_instructions",message:"Chat code completion instructions migration already completed. Skipping."}),e.abrupt("return");case 4:if(n=t.workspace.getConfiguration(),void 0===(o=n.get("codeWebChat.chatCodeCompletionInstructions"))){e.next=12;break}return e.next=9,n.update("codeWebChat.chatCodeCompletionsInstructions",o,t.ConfigurationTarget.Global);case 9:l.log({function_name:"migrate_chat_code_completion_instructions",message:"Successfully migrated chatCodeCompletionInstructions to chatCodeCompletionsInstructions"}),e.next=13;break;case 12:l.log({function_name:"migrate_chat_code_completion_instructions",message:"No existing chatCodeCompletionInstructions setting found to migrate."});case 13:return e.next=15,r.globalState.update(Hh,!0);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),l.error({function_name:"migrate_chat_code_completion_instructions",message:"Error migrating chatCodeCompletionInstructions to chatCodeCompletionsInstructions",data:e.t0 instanceof Error?e.t0.message:String(e.t0)});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),Jh=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Vh(i,n,o,a,s,"next",e)}function s(e){Vh(i,n,o,a,s,"throw",e)}a(void 0)}))},Jh.apply(this,arguments)}function Kh(e){try{var t=e.content,r=t.match(/^<think>([\s\S]*?)<\/think>/);r&&(t=t.substring(r[0].length).trim());for(var n=!0;n;){for(var o=t,i=0,a=[/^```[^\n]*\n/,/^<files[^>]*>\s*\n?/,/^<file[^>]*>\s*\n?/,/^<!\[CDATA\[\s*\n?/,/^<!DOCTYPE[^>]*>\s*\n?/];i<a.length;i++){var s=a[i],c=t.match(s);if(c&&0==c.index){t=t.substring(c[0].length);break}}for(var u=0,l=[/\s*```\s*$/,/\s*<\/files>\s*$/,/\s*<\/file>\s*$/,/\s*\]\]>\s*$/,/\s*\]\]\s*$/];u<l.length;u++){var p=l[u],h=t.match(p);if(h&&void 0!==h.index&&h.index+h[0].length==t.length){t=t.substring(0,h.index);break}}n=t!=o}return t.trim()}catch(t){return console.error("Error cleaning up API response:",t),e.content}}var Qh=function(e){var t=e.match(/<file\s+path=["']([^"']+)["']/);if(t)return t[1];if(!/^(\s*)(\/\/|#|--|\/\*|\*|<!--)/.test(e))return null;var r=e.trim().replace(/^(?:\/\/|#|--|\/\*|\*|<!--)\s*/,"").trim().match(/(?:^|\s)((?:\.|[.\/\\\w\-\[\]\(\)]+\.)[\w\-]{1,10})(?:\s|$)/);return r?r[1].replace(/\\/g,"/"):null};function Zh(e){return Zh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(e)}function Xh(){Xh=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Zh(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Zh(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function ef(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function tf(e){return rf.apply(this,arguments)}function rf(){var e;return e=Xh().mark((function e(r){return Xh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.commands.executeCommand("editor.action.formatDocument",r.uri);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),l.error({function_name:"format_document",message:"Error formatting document",data:{error:e.t0,file:r.uri.fsPath}});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})),rf=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ef(i,n,o,a,s,"next",e)}function s(e){ef(i,n,o,a,s,"throw",e)}a(void 0)}))},rf.apply(this,arguments)}function nf(e){var t=e.replace(/\.\.\//g,"").replace(/\.\.\\/g,"");return(t=t.replace(/^[/\\]+/,"")).replace(/\\/g,"/")}function of(e,t){var r=nf(t);if(!r)return null;var o=n.join(e,r);return o.startsWith(e)?o:null}function af(){af=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==pf(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(pf(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function sf(e){return function(e){if(Array.isArray(e))return uf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cf(e,t){if(e){if("string"==typeof e)return uf(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?uf(e,t):void 0}}function uf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function lf(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function pf(e){return pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(e)}function hf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ff(n.key),n)}}function ff(e){var t=function(e){if("object"!=pf(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=pf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pf(t)?t:t+""}var df=function(){return e=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.search_lines=t,this.replace_lines=r,this.search_block_start_index=n},(t=[{key:"get_start_index",value:function(){return this.search_block_start_index}},{key:"get_search_count",value:function(){return this.search_lines.length}}])&&hf(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function mf(e,t){return vf.apply(this,arguments)}function vf(){var e;return e=af().mark((function e(o,i){var a,s,c,u;return af().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.existsSync(o)){e.next=16;break}return e.prev=1,a=n.dirname(o),e.next=5,r.promises.mkdir(a,{recursive:!0});case 5:return e.next=7,r.promises.writeFile(o,"",{flag:"w"});case 7:return e.next=9,new Promise((function(e){return setTimeout(e,500)}));case 9:console.log("File created successfully at: ".concat(o)),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),console.error("Error creating file: ".concat(e.t0.message)),e.abrupt("return",!1);case 16:if(s=r.readFileSync(o,"utf8"),c=r.readFileSync(i,"utf8"),u="","error"!=(u=c.includes("--- /dev/null")?gf(c):yf(s,c))){e.next=22;break}return e.abrupt("return",!1);case 22:return e.prev=22,e.next=25,t.workspace.fs.writeFile(t.Uri.file(o),Buffer.from(u,"utf8"));case 25:return console.log("File saved successfully"),e.abrupt("return",!0);case 29:return e.prev=29,e.t1=e.catch(22),console.error("Error saving file:",e.t1),e.abrupt("return",!1);case 33:case"end":return e.stop()}}),e,null,[[1,12],[22,29]])})),vf=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){lf(i,n,o,a,s,"next",e)}function s(e){lf(i,n,o,a,s,"throw",e)}a(void 0)}))},vf.apply(this,arguments)}function gf(e){for(var t="",r=e.replace(/\r\n/g,"\n").split("\n"),n=0;n<r.length;n++){var o=r[n];o.startsWith("diff --git")||o.startsWith("index")||o.startsWith("new file mode")||o.startsWith("---")||o.startsWith("+++")||o.startsWith("@@")||(t+=o.replace(/^\+/,"")+"\n")}return t}function yf(e,t){try{var r=e.replace(/\r\n/g,"\n").split(/^/m),n=[],o=t.replace(/\r\n/g,"\n").split("\n"),i=[],a=[],s=function(e){for(var t=0,r=e.length-1;r>=0&&"\n"===e[r];r--)t++;return t}(e);s>0&&r.push("\n");for(var c=0,u=0;u<r.length;u++){var l=r[u];""===l.trim()&&(l="~nnn");var p=l.replace(/\r\n/g,"").replace(/\r/g,"").replace(/\n/g,"").replace(/\s+/g,"").toLowerCase();n.push({key:c,value:p}),c++}for(var h=0;h<o.length;h++){var f=o[h];if(!(f.startsWith("diff --git")||f.startsWith("index")||f.startsWith("---")||f.startsWith("+++"))){""===f.trim()?f="~nnn":"+"===f.trim()?f="+~nnn":"-"===f.trim()&&(f="-~nnn"),i.push(f.startsWith(" ")?f.substring(1,f.length):f);var d=f.replace(/\r\n/g,"").replace(/\r/g,"").replace(/\n/g,"");d.startsWith(" ")&&(d=d.replace(/^\s+/,"~"));var m=d.replace(/\s+/g,"").toLowerCase();a.push(m)}}for(var v=[],g=[],y=[],b=!1,w=0;w<a.length;w++){var x=a[w],_=i[w];x.startsWith("@@")&&(g=[],y=[],b=!1),x.startsWith("-")||x.startsWith("~")?(b&&(b=!1,(g.length>0||y.length>0)&&v.push(new df(g,y,-1)),g=[],y=[]),x.startsWith("--")?g.push(x.substring(1,x.length)):x.startsWith("~nnn")||x.startsWith("-~nnn")?g.push("~nnn"):g.push(x.replace(/^-/,"").replace(/^~/,"")),x.startsWith("~nnn")?y.push(_.replace(/^~nnn/,"")+"\n"):x.startsWith("~")&&y.push(_.replace(/^~/,"")+"\n")):x.startsWith("+")&&(b=!0,x.startsWith("++")?y.push(_.substring(1,x.length)+"\n"):x.startsWith("+~nnn")?y.push(_.replace(/^\+~nnn/,"")+"\n"):y.push(_.replace(/^\+/,"")+"\n"))}g.length>0&&v.push(new df(g,y,-1));for(var k=0,E=0;E<v.length;E++){for(var S=v[E],O=S.search_lines.join(""),T=!1,j=k;j<n.length;j++){var C=n.slice(j,j+S.search_lines.length),P=C.map((function(e){return e.value})).join("");if(P==O){if(k>=C[0].key)throw new Error("Found index is less than previous found index");S.search_block_start_index=C[0].key,T=!0,k=C[0].key;break}}if(!T)return console.log("Search block not found: "+O),S.search_block_start_index=-1,"error"}var A=v.filter((function(e){return-1!==e.get_start_index()}));A.sort((function(e,t){return t.get_start_index()-e.get_start_index()}));var I,N=sf(r),F=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=cf(e))){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(a)throw o}}}}(A);try{for(F.s();!(I=F.n()).done;){var D=I.value,R=D.get_start_index(),L=D.get_search_count(),G=D.replace_lines;if(R<0||R>N.length)console.error("Invalid start index ".concat(R," for block application. Max index: ").concat(N.length-1));else{var q=Math.min(L,N.length-R);N.splice.apply(N,[R,q].concat(sf(G)))}}}catch(e){F.e(e)}finally{F.f()}return N.join("")}catch(e){return console.error("Error during diff processing:",e),"error"}}function bf(e){return bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(e)}function wf(){wf=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==bf(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(bf(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function xf(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return _f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function kf(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Ef(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){kf(i,n,o,a,s,"next",e)}function s(e){kf(i,n,o,a,s,"throw",e)}a(void 0)}))}}var Sf=(0,du.promisify)(wp.exec);function Of(e){return Tf.apply(this,arguments)}function Tf(){return(Tf=Ef(wf().mark((function e(t){var r,n,o,i,a,s,c,u,p,h,f,d,m,v,g,y,b,w,x,_;return wf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],n=t.replace(/\r\n/g,"\n"),!t.startsWith("---")){e.next=27;break}o=n.split("\n"),a=xf(o),e.prev=5,a.s();case 7:if((s=a.n()).done){e.next=15;break}if(c=s.value,!(u=c.match(/^\+\+\+ b\/(.+)$/))){e.next=13;break}return i=u[1],e.abrupt("break",15);case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:return i?((p=n).endsWith("\n")||(p+="\n"),r.push({file_path:i,content:p})):l.log({function_name:"extract_diff_patches",message:"Direct patch detected but no file path found (+++ b/ line missing).",data:{clipboard_start:n.substring(0,100)}}),e.abrupt("return",r);case 27:h=n.split("\n"),f=!1,d=!1,m="",y=xf(h),e.prev=32,y.s();case 34:if((b=y.n()).done){e.next=52;break}if("```diff"!=(w=b.value)&&"```patch"!=w){e.next=42;break}return f=!0,m="",v=void 0,g=void 0,e.abrupt("continue",50);case 42:if(w.startsWith("---")&&(d=!0),d){e.next=45;break}return e.abrupt("continue",50);case 45:if(!f||"```"!=w){e.next=49;break}return m.startsWith("---")&&g&&((x=m).endsWith("\n")||(x+="\n"),r.push({file_path:g,content:x,workspace_name:v})),f=!1,e.abrupt("continue",50);case 49:f&&(g||(_=w.match(/^\+\+\+ b\/(.+)$/))&&(g=_[1]),m+=w+"\n");case 50:e.next=34;break;case 52:e.next=57;break;case 54:e.prev=54,e.t1=e.catch(32),y.e(e.t1);case 57:return e.prev=57,y.f(),e.finish(57);case 60:return e.abrupt("return",r);case 61:case"end":return e.stop()}}),e,null,[[5,17,20,23],[32,54,57,60]])})))).apply(this,arguments)}function jf(e){var t,r=[],n=xf(e.split("\n"));try{for(n.s();!(t=n.n()).done;){var o=t.value.match(/^\+\+\+ b\/(.+)$/);o&&o[1]&&r.push(o[1])}}catch(e){n.e(e)}finally{n.f()}return r}function Cf(e,t){return Pf.apply(this,arguments)}function Pf(){return(Pf=Ef(wf().mark((function e(t,o){var i,a,s,c,u,p,h;return wf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=jf(t),a=[],s=xf(i),e.prev=3,s.s();case 5:if((c=s.n()).done){e.next=14;break}if(u=c.value,p=of(o,u)){e.next=11;break}return l.error({function_name:"store_original_file_states",message:"Skipping file with unsafe path",data:{file_path:u}}),e.abrupt("continue",12);case 11:if(r.existsSync(p))try{h=r.readFileSync(p,"utf8"),a.push({file_path:u,content:h,is_new:!1,workspace_name:n.basename(o)})}catch(e){l.error({function_name:"store_original_file_states",message:"Failed to read file content",data:{file_path:u,error:e}})}else a.push({file_path:u,content:"",is_new:!0,workspace_name:n.basename(o)});case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),s.e(e.t0);case 19:return e.prev=19,s.f(),e.finish(19);case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,null,[[3,16,19,22]])})))).apply(this,arguments)}function Af(e,t){return If.apply(this,arguments)}function If(){return(If=Ef(wf().mark((function e(r,n){var o,i,a,s,c,u,l,p,h;return wf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[],i=xf(r),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=36;break}if(s=a.value,c=of(n,s)){e.next=9;break}return e.abrupt("continue",34);case 9:u=t.Uri.file(c),l=xf(t.window.visibleTextEditors),e.prev=11,l.s();case 13:if((p=l.n()).done){e.next=26;break}if((h=p.value).document.uri.fsPath!==u.fsPath){e.next=24;break}if(!h.document.isDirty){e.next=19;break}return e.next=19,h.document.save();case 19:return o.push(h.document.uri),e.next=22,t.window.showTextDocument(h.document,{preview:!0});case 22:return e.next=24,t.commands.executeCommand("workbench.action.closeActiveEditor");case 24:e.next=13;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(11),l.e(e.t0);case 31:return e.prev=31,l.f(),e.finish(31);case 34:e.next=4;break;case 36:e.next=41;break;case 38:e.prev=38,e.t1=e.catch(2),i.e(e.t1);case 41:return e.prev=41,i.f(),e.finish(41);case 44:return e.abrupt("return",o);case 45:case"end":return e.stop()}}),e,null,[[2,38,41,44],[11,28,31,34]])})))).apply(this,arguments)}function Nf(e){return Ff.apply(this,arguments)}function Ff(){return(Ff=Ef(wf().mark((function e(r){var n,o,i,a;return wf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=xf(r),e.prev=1,n.s();case 3:if((o=n.n()).done){e.next=18;break}return i=o.value,e.prev=5,e.next=8,t.workspace.openTextDocument(i);case 8:return a=e.sent,e.next=11,t.window.showTextDocument(a,{preview:!1});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),l.error({function_name:"reopen_closed_files",message:"Failed to reopen file",data:{file_path:i.fsPath,error:e.t0}});case 16:e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(1),n.e(e.t1);case 23:return e.prev=23,n.f(),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[1,20,23,26],[5,13]])})))).apply(this,arguments)}function Df(e,t){return Rf.apply(this,arguments)}function Rf(){return(Rf=Ef(wf().mark((function e(n,o){var i,a,s,c,u,p;return wf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=xf(n),e.prev=1,i.s();case 3:if((a=i.n()).done){e.next=32;break}if(s=a.value,c=of(o,s)){e.next=9;break}return l.error({function_name:"process_modified_files",message:"Skipping file with unsafe path",data:{file_path:s}}),e.abrupt("continue",30);case 9:if(!r.existsSync(c)){e.next=29;break}return e.prev=10,u=t.Uri.file(c),e.next=14,t.workspace.openTextDocument(u);case 14:return p=e.sent,e.next=17,t.window.showTextDocument(p);case 17:return e.next=19,tf(p);case 19:return e.next=21,p.save();case 21:l.log({function_name:"process_modified_files",message:"Successfully processed file",data:{file_path:s}}),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(10),l.error({function_name:"process_modified_files",message:"Error processing file",data:{file_path:s,error:e.t0}});case 27:e.next=30;break;case 29:l.log({function_name:"process_modified_files",message:"Skipping processing for non-existent file (likely deleted by patch)",data:{file_path:s}});case 30:e.next=3;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(1),i.e(e.t1);case 37:return e.prev=37,i.f(),e.finish(37);case 40:case"end":return e.stop()}}),e,null,[[1,34,37,40],[10,24]])})))).apply(this,arguments)}function Lf(e,t){return Gf.apply(this,arguments)}function Gf(){return(Gf=Ef(wf().mark((function e(r,o){var i,a,s,c,u,p;return wf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],e.prev=1,a=jf(r),e.next=5,Cf(r,o);case 5:return s=e.sent,e.next=8,Af(a,o);case 8:return i=e.sent,c=n.join(o,".tmp_patch"),e.next=12,t.workspace.fs.writeFile(t.Uri.file(c),Buffer.from(r));case 12:return e.prev=12,u=!1,e.prev=14,e.next=17,Sf("git apply --whitespace=fix --ignore-whitespace "+c,{cwd:o});case 17:e.next=30;break;case 19:if(e.prev=19,e.t0=e.catch(14),null!=(p=of(o,a[0]))){e.next=24;break}throw new Error("File path is null");case 24:return e.next=26,mf(p,c);case 26:if(e.t1=e.sent,0!=e.t1){e.next=29;break}throw new Error("Failed to apply diff patch for all methods");case 29:u=!0;case 30:return l.log({function_name:"apply_git_patch",message:"Patch applied successfully".concat(u?" using fallback":""),data:{workspace_path:o}}),e.next=33,Df(a,o);case 33:return e.next=35,t.workspace.fs.delete(t.Uri.file(c));case 35:return e.abrupt("return",{success:!0,original_states:s});case 38:return e.prev=38,e.t2=e.catch(12),e.next=42,Nf(i);case 42:if(!e.t2.message.includes(".rej")){e.next=46;break}return e.next=46,Df(a,o);case 46:return l.error({function_name:"apply_git_patch",message:"Error applying patch",data:{error:e.t2,workspace_path:o}}),e.next=49,t.workspace.fs.delete(t.Uri.file(c));case 49:return e.abrupt("return",{success:!1});case 50:e.next=60;break;case 52:if(e.prev=52,e.t3=e.catch(1),!(i.length>0)){e.next=57;break}return e.next=57,Nf(i);case 57:return l.error({function_name:"apply_git_patch",message:"Error handling patch file",data:{error:e.t3,workspace_path:o}}),t.window.showErrorMessage("Error handling patch: ".concat(e.t3.message||"Unknown error")),e.abrupt("return",{success:!1});case 60:case"end":return e.stop()}}),e,null,[[1,52],[12,38],[14,19]])})))).apply(this,arguments)}function qf(e){return qf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qf(e)}function Mf(){Mf=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==qf(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(qf(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Uf(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var Bf=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return{relative_path:e};if(!e.includes("/"))return{relative_path:e};var t=e.indexOf("/");return t>0?{workspace_name:e.substring(0,t),relative_path:e.substring(t+1)}:{relative_path:e}},zf=function(e){return e.split("\n").filter((function(e){var t=e.trim();return!(""==t||t.startsWith("// ...")||t.startsWith("# ...")||t.startsWith("/* ...")||t.startsWith("* ...")||t.startsWith("-- ...")||t.startsWith("\x3c!-- ..."))})).length>0},Wf=function(e){var t=e.match(/<file\s+path=["']([^"']+)["']/);return t?t[1]:null},$f=function(e){var t=Vf(e);if(t)return[t];for(var r=new Map,n="TEXT",o="",i="",a=!1,s=void 0,c=!1,u=!1,l=e.clipboard_text.split("\n"),p=0;p<l.length;p++){var h=l[p];if("TEXT"==n&&h.trim().startsWith("```"))n="CONTENT",s=void 0,o="",i="",a=!0,c=!1,u=!1;else if("CONTENT"==n)if("```"==h.trim()){n="TEXT";var f=Kh({content:i});if(o&&zf(f)){var d="".concat(s||"",":").concat(o);r.has(d)?r.get(d).content+="\n\n"+f:r.set(d,{file_path:o,content:f,workspace_name:s})}o="",i="",a=!1,s=void 0,c=!1,u=!1}else{if(a&&h.trim().startsWith("<file")){var m=Wf(h);if(m){var v=Bf(m,e.is_single_root_folder_workspace),g=v.workspace_name;o=v.relative_path,g&&(s=g),c=!0,a=!1;continue}}if(a&&!c&&(h.trim().startsWith("//")||h.trim().startsWith("#")||h.trim().startsWith("/*")||h.trim().startsWith("*")||h.trim().startsWith("--")||h.trim().startsWith("\x3c!--"))){var y=Qh(h);if(y){var b=Bf(y,e.is_single_root_folder_workspace),w=b.workspace_name;o=b.relative_path,w&&(s=w),a=!1;continue}}if(c&&h.trim().startsWith("<![CDATA[")){u=!0;continue}if(c&&u&&h.trim().includes("]]>")){u=!1;continue}if(c&&!u&&"</file>"==h.trim())continue;a=!1,i?i+="\n"+h:i=h}}if("CONTENT"==n&&o){var x=Kh({content:i});if(zf(x)){var _="".concat(s||"",":").concat(o);r.has(_)?r.get(_).content+="\n\n"+x:r.set(_,{file_path:o,content:x,workspace_name:s})}}return Array.from(r.values())},Vf=function(e){var t=e.clipboard_text.trim().split("\n");if(t.length<2)return null;var r=t[0].trim();if(!(r.startsWith("//")||r.startsWith("#")||r.startsWith("/*")||r.startsWith("*")||r.startsWith("--")||r.startsWith("\x3c!--")))return null;var n=Qh(r);if(!n)return null;var o=Bf(n,e.is_single_root_folder_workspace),i=o.workspace_name,a=o.relative_path,s=Kh({content:t.slice(1).join("\n")});return zf(s)?{file_path:a,content:s,workspace_name:i}:null},Hf=function(){var e,t=(e=Mf().mark((function e(t,r){var n,o;return Mf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.includes("```diff")||t.includes("```patch")||t.startsWith("--- "))){e.next=6;break}return e.next=3,Of(t);case 3:if(!((n=e.sent).length>0)){e.next=6;break}return e.abrupt("return",{type:"patches",patches:n});case 6:return o=$f({clipboard_text:t,is_single_root_folder_workspace:r}),e.abrupt("return",{type:"files",files:o});case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Uf(i,n,o,a,s,"next",e)}function s(e){Uf(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();function Yf(e){return Yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yf(e)}function Jf(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Kf(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Kf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Qf(){Qf=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Yf(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Yf(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Zf(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Xf(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Zf(i,n,o,a,s,"next",e)}function s(e){Zf(i,n,o,a,s,"throw",e)}a(void 0)}))}}function ed(e,t,r){return td.apply(this,arguments)}function td(){return(td=Xf(Qf().mark((function e(o,i,a){var s,c,u,p,h;return Qf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.log({function_name:"create_file_if_needed",message:"start",data:{filePath:o,workspace_name:a}}),t.workspace.workspaceFolders&&0!=t.workspace.workspaceFolders.length){e.next=5;break}return t.window.showErrorMessage("No workspace folder open."),l.warn({function_name:"create_file_if_needed",message:"No workspace folder open."}),e.abrupt("return",!1);case 5:if(a?(c=t.workspace.workspaceFolders.find((function(e){return e.name==a})))?s=c.uri.fsPath:(l.warn({function_name:"create_file_if_needed",message:'Workspace named "'.concat(a,'" not found. Falling back to the first workspace.'),data:o}),s=t.workspace.workspaceFolders[0].uri.fsPath):s=t.workspace.workspaceFolders[0].uri.fsPath,u=of(s,o)){e.next=11;break}return t.window.showErrorMessage("Invalid file path: ".concat(o,". Path may contain traversal attempts.")),l.error({function_name:"create_file_if_needed",message:"Invalid file path",data:o}),e.abrupt("return",!1);case 11:if(p=n.dirname(u),r.existsSync(p)){e.next=23;break}e.prev=13,r.mkdirSync(p,{recursive:!0}),l.log({function_name:"create_file_if_needed",message:"Directory created",data:p}),e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(13),l.error({function_name:"create_file_if_needed",message:"Failed to create directory",data:{directory:p,error:e.t0}}),t.window.showErrorMessage("Failed to create directory: ".concat(p)),e.abrupt("return",!1);case 23:e.prev=23,r.writeFileSync(u,i),l.log({function_name:"create_file_if_needed",message:"File created",data:u}),e.next=33;break;case 28:return e.prev=28,e.t1=e.catch(23),l.error({function_name:"create_file_if_needed",message:"Failed to write file",data:{safe_path:u,error:e.t1}}),t.window.showErrorMessage("Failed to write file: ".concat(u)),e.abrupt("return",!1);case 33:return e.prev=33,e.next=36,t.workspace.openTextDocument(u);case 36:return h=e.sent,e.next=39,t.window.showTextDocument(h);case 39:return e.next=41,tf(h);case 41:return e.next=43,h.save();case 43:return l.log({function_name:"create_file_if_needed",message:"File created, formatted and saved",data:u}),e.abrupt("return",!0);case 47:return e.prev=47,e.t2=e.catch(33),l.error({function_name:"create_file_if_needed",message:"Failed to open, format, or save file",data:{safe_path:u,error:e.t2}}),t.window.showErrorMessage("Failed to open, format, or save file: ".concat(u)),e.abrupt("return",!1);case 52:case"end":return e.stop()}}),e,null,[[13,18],[23,28],[33,47]])})))).apply(this,arguments)}function rd(e){return nd.apply(this,arguments)}function nd(){return nd=Xf(Qf().mark((function e(n){var o,i,a,s,c;return Qf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.log({function_name:"revert_files",message:"start",data:{original_states_count:n.length}}),e.prev=1,t.workspace.workspaceFolders&&0!==t.workspace.workspaceFolders.length){e.next=6;break}return t.window.showErrorMessage("No workspace folder open."),l.warn({function_name:"revert_files",message:"No workspace folder open."}),e.abrupt("return",!1);case 6:o=new Map,t.workspace.workspaceFolders.forEach((function(e){o.set(e.name,e.uri.fsPath)})),i=t.workspace.workspaceFolders[0].uri.fsPath,a=Jf(n),e.prev=10,c=Qf().mark((function e(){var n,a,c,u,p,h,f,d,m,v,g;return Qf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.value,a=i,n.workspace_name&&o.has(n.workspace_name)?a=o.get(n.workspace_name):n.workspace_name&&l.warn({function_name:"revert_files",message:"Workspace '".concat(n.workspace_name,"' not found for file '").concat(n.file_path,"'. Using default.")}),c=of(a,n.file_path)){e.next=8;break}return l.error({function_name:"revert_files",message:"Cannot revert file with unsafe path",data:n.file_path}),console.error("Cannot revert file with unsafe path: ".concat(n.file_path)),e.abrupt("return",1);case 8:if(!n.is_new){e.next=34;break}if(!r.existsSync(c)){e.next=32;break}u=t.Uri.file(c),p=t.window.visibleTextEditors.filter((function(e){return e.document.uri.toString()===u.toString()})),h=Jf(p),e.prev=13,h.s();case 15:if((f=h.n()).done){e.next=23;break}return d=f.value,e.next=19,t.window.showTextDocument(d.document,{preview:!1,preserveFocus:!1});case 19:return e.next=21,t.commands.executeCommand("workbench.action.closeActiveEditor");case 21:e.next=15;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(13),h.e(e.t0);case 28:return e.prev=28,h.f(),e.finish(28);case 31:try{r.unlinkSync(c),l.log({function_name:"revert_files",message:"New file deleted",data:c})}catch(e){l.error({function_name:"revert_files",message:"Error deleting new file",data:{error:e,file_path:n.file_path}}),t.window.showWarningMessage("Could not delete file: ".concat(n.file_path,"."))}case 32:e.next=54;break;case 34:return m=t.Uri.file(c),e.prev=35,e.next=38,t.workspace.openTextDocument(m);case 38:return v=e.sent,e.next=41,t.window.showTextDocument(v);case 41:return g=e.sent,e.next=44,g.edit((function(e){e.replace(new t.Range(v.positionAt(0),v.positionAt(v.getText().length)),n.content)}));case 44:return e.next=46,v.save();case 46:l.log({function_name:"revert_files",message:"Existing file reverted to original content",data:c}),e.next=54;break;case 49:e.prev=49,e.t1=e.catch(35),l.warn({function_name:"revert_files",message:"Error reverting file",data:{error:e.t1,file_path:n.file_path}}),console.error("Error reverting file ".concat(n.file_path,":"),e.t1),t.window.showWarningMessage("Could not revert file: ".concat(n.file_path,". It might have been closed or deleted."));case 54:case"end":return e.stop()}}),e,null,[[13,25,28,31],[35,49]])})),a.s();case 13:if((s=a.n()).done){e.next=19;break}return e.delegateYield(c(),"t0",15);case 15:if(!e.t0){e.next=17;break}return e.abrupt("continue",17);case 17:e.next=13;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(10),a.e(e.t1);case 24:return e.prev=24,a.f(),e.finish(24);case 27:return t.window.showInformationMessage("Changes successfully reverted."),l.log({function_name:"revert_files",message:"Changes successfully reverted."}),e.abrupt("return",!0);case 32:return e.prev=32,e.t2=e.catch(1),l.error({function_name:"revert_files",message:"Error during reversion",data:e.t2}),console.error("Error during reversion:",e.t2),t.window.showErrorMessage("Failed to revert changes: ".concat(e.t2.message||"Unknown error")),e.abrupt("return",!1);case 38:case"end":return e.stop()}}),e,null,[[1,32],[10,21,24,27]])}))),nd.apply(this,arguments)}function od(e){return od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},od(e)}function id(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ad(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?id(Object(r),!0).forEach((function(t){sd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):id(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sd(e,t,r){return(t=function(e){var t=function(e){if("object"!=od(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=od(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==od(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cd(){cd=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==od(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(od(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function ud(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ld(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ld(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function ld(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pd(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function hd(e){return fd.apply(this,arguments)}function fd(){var e;return e=cd().mark((function e(o){var i,a,s,c,u,p,h,f,d,m,v,g,y,b,w,x,_,k,E,S,O,T;return cd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.log({function_name:"handle_fast_replace",message:"start",data:{file_count:o.length}}),e.prev=1,i=[],a=[],s=[],c=[],t.workspace.workspaceFolders&&0!=t.workspace.workspaceFolders.length){e.next=10;break}return t.window.showErrorMessage("No workspace folder open."),l.warn({function_name:"handle_fast_replace",message:"No workspace folder open."}),e.abrupt("return",{success:!1});case 10:u=new Map,t.workspace.workspaceFolders.forEach((function(e){u.set(e.name,e.uri.fsPath)})),p=t.workspace.workspaceFolders[0].uri.fsPath,h=ud(o);try{for(h.s();!(f=h.n()).done;)d=f.value,m=p,d.workspace_name&&u.has(d.workspace_name)?m=u.get(d.workspace_name):d.workspace_name&&l.warn({function_name:"handle_fast_replace",message:"Workspace '".concat(d.workspace_name,"' not found for file '").concat(d.file_path,"'. Using default.")}),v=nf(d.file_path),of(m,v)?s.push(ad(ad({},d),{},{file_path:v})):(c.push(d.file_path),l.warn({function_name:"handle_fast_replace",message:"Unsafe file path detected",data:d.file_path}))}catch(e){h.e(e)}finally{h.f()}if(!(c.length>0)){e.next=21;break}if(g=c.join("\n"),t.window.showErrorMessage("Detected ".concat(c.length," unsafe file path(s) that may attempt directory traversal:\n").concat(g,"\n\nThese files will be skipped.")),l.warn({function_name:"handle_fast_replace",message:"Unsafe file paths detected and skipped",data:c}),0!=s.length){e.next=21;break}return e.abrupt("return",{success:!1});case 21:for(y=0,b=s;y<b.length;y++)w=b[y],x=p,w.workspace_name&&u.has(w.workspace_name)&&(x=u.get(w.workspace_name)),_=n.normalize(n.join(x,w.file_path)),r.existsSync(_)?a.push(w):i.push(w);if(!(i.length>0)){e.next=32;break}return k=i.map((function(e){return e.file_path})).join("\n"),e.next=26,t.window.showWarningMessage("This will create ".concat(i.length," new ").concat(1===i.length?"file":"files",":\n").concat(k,"\n\nDo you want to continue?"),{modal:!0},"Yes");case 26:if("Yes"==e.sent){e.next=31;break}return t.window.showInformationMessage("Operation cancelled. No files were modified."),l.log({function_name:"handle_fast_replace",message:"User cancelled new file creation."}),e.abrupt("return",{success:!1});case 31:l.log({function_name:"handle_fast_replace",message:"User confirmed new file creation."});case 32:E=[],S=cd().mark((function e(){var o,i,a,s,c,h,f,d,m;return cd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=T[O],i=p,o.workspace_name&&u.has(o.workspace_name)&&(i=u.get(o.workspace_name)),a=of(i,o.file_path)){e.next=8;break}return l.error({function_name:"handle_fast_replace",message:"Path validation failed",data:o.file_path}),console.error("Path validation failed for: ".concat(o.file_path)),e.abrupt("return",0);case 8:if(s=r.existsSync(a),e.prev=9,!s){e.next=28;break}return c=t.Uri.file(a),e.next=14,t.workspace.openTextDocument(c);case 14:return h=e.sent,E.push({file_path:o.file_path,content:h.getText(),is_new:!1,workspace_name:o.workspace_name}),e.next=18,t.window.showTextDocument(h);case 18:return f=e.sent,e.next=21,f.edit((function(e){e.replace(new t.Range(h.positionAt(0),h.positionAt(h.getText().length)),o.content)}));case 21:return e.next=23,tf(h);case 23:return e.next=25,h.save();case 25:l.log({function_name:"handle_fast_replace",message:"Existing file replaced and saved",data:a}),e.next=68;break;case 28:if(E.push({file_path:o.file_path,content:"",is_new:!0,workspace_name:o.workspace_name}),d=n.dirname(a),r.existsSync(d)){e.next=41;break}e.prev=31,r.mkdirSync(d,{recursive:!0}),l.log({function_name:"handle_fast_replace",message:"Directory created",data:d}),e.next=41;break;case 36:return e.prev=36,e.t0=e.catch(31),l.error({function_name:"handle_fast_replace",message:"Failed to create directory",data:{directory:d,error:e.t0,file_path:o.file_path}}),t.window.showErrorMessage("Failed to create directory for: ".concat(o.file_path)),e.abrupt("return",0);case 41:e.prev=41,r.writeFileSync(a,o.content),l.log({function_name:"handle_fast_replace",message:"New file created",data:a}),e.next=51;break;case 46:return e.prev=46,e.t1=e.catch(41),l.error({function_name:"handle_fast_replace",message:"Failed to write new file",data:{safe_path:a,error:e.t1,file_path:o.file_path}}),t.window.showErrorMessage("Failed to write file: ".concat(o.file_path)),e.abrupt("return",0);case 51:return e.prev=51,e.next=54,t.workspace.openTextDocument(a);case 54:return m=e.sent,e.next=57,t.window.showTextDocument(m);case 57:return e.next=59,tf(m);case 59:return e.next=61,m.save();case 61:l.log({function_name:"handle_fast_replace",message:"New file created, formatted and saved",data:a}),e.next=68;break;case 64:e.prev=64,e.t2=e.catch(51),l.error({function_name:"handle_fast_replace",message:"Failed to open/format/save new file",data:{safe_path:a,error:e.t2,file_path:o.file_path}}),t.window.showErrorMessage("Failed to open/format/save new file: ".concat(o.file_path));case 68:e.next=75;break;case 70:return e.prev=70,e.t3=e.catch(9),l.error({function_name:"handle_fast_replace",message:"Error processing file during replacement",data:{error:e.t3,file_path:o.file_path}}),t.window.showErrorMessage("Error processing file ".concat(o.file_path,": ").concat(e.t3.message||"Unknown error")),e.abrupt("return",0);case 75:case"end":return e.stop()}}),e,null,[[9,70],[31,36],[41,46],[51,64]])})),O=0,T=s;case 35:if(!(O<T.length)){e.next=43;break}return e.delegateYield(S(),"t0",37);case 37:if(0!==e.t0){e.next=40;break}return e.abrupt("continue",40);case 40:O++,e.next=35;break;case 43:return l.log({function_name:"handle_fast_replace",message:"Files replaced successfully",data:{file_count:s.length}}),e.abrupt("return",{success:!0,original_states:E});case 47:return e.prev=47,e.t1=e.catch(1),l.error({function_name:"handle_fast_replace",message:"Error during direct file replacement",data:e.t1}),console.error("Error during direct file replacement:",e.t1),t.window.showErrorMessage("An error occurred while replacing files: ".concat(e.t1.message||"Unknown error")),e.abrupt("return",{success:!1});case 53:case"end":return e.stop()}}),e,null,[[1,47]])})),fd=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){pd(i,n,o,a,s,"next",e)}function s(e){pd(i,n,o,a,s,"throw",e)}a(void 0)}))},fd.apply(this,arguments)}function dd(e){return dd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dd(e)}function md(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?md(Object(r),!0).forEach((function(t){gd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):md(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gd(e,t,r){return(t=function(e){var t=function(e){if("object"!=dd(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=dd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==dd(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yd(){yd=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==dd(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(dd(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function bd(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return wd(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function wd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function xd(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function _d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){xd(i,n,o,a,s,"next",e)}function s(e){xd(i,n,o,a,s,"throw",e)}a(void 0)}))}}var kd="data: ",Ed="[DONE]";function Sd(e,t,r,n,o){return Od.apply(this,arguments)}function Od(){return(Od=_d(yd().mark((function e(t,r,n,o,i){var a,s,c,u,p,h,f,d,m,v,g,y,b;return yd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r,s=n,c=o,e.prev=3,a+=t.toString(),u=a.split("\n"),a=u.pop()||"",p=bd(u),e.prev=8,p.s();case 10:if((h=p.n()).done){e.next=29;break}if(f=h.value,(d=f.trim())&&d!==Ed){e.next=15;break}return e.abrupt("continue",27);case 15:if(!d.startsWith(kd)){e.next=27;break}if(e.prev=16,(v=d.slice(6).trim())&&v!==Ed){e.next=20;break}return e.abrupt("continue",27);case 20:g=JSON.parse(v),null!==(m=g.choices)&&void 0!==m&&null!==(m=m[0])&&void 0!==m&&null!==(m=m.delta)&&void 0!==m&&m.content&&(y=g.choices[0].delta.content,s+=y,i&&i(y),(b=Date.now())-c>=1e3&&(l.log({function_name:"process_stream_chunk",message:"Streaming tokens:",data:s}),c=b)),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(16),l.warn({function_name:"process_stream_chunk",message:"Failed to parse JSON chunk",data:{trimmed_line:d,parse_error:e.t0}});case 27:e.next=10;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(8),p.e(e.t1);case 34:return e.prev=34,p.f(),e.finish(34);case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(3),l.error({function_name:"process_stream_chunk",message:"Error processing stream chunk",data:e.t2});case 42:return e.abrupt("return",{updated_buffer:a,updated_accumulated_content:s,updated_last_log_time:c});case 43:case"end":return e.stop()}}),e,null,[[3,39],[8,31,34,37],[16,24]])})))).apply(this,arguments)}function Td(e,t,r,n,o){return jd.apply(this,arguments)}function jd(){return jd=_d(yd().mark((function e(r,n,o,i,a){var s,c,u,p,h,f,d;return yd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=vd(vd({},o),{},{stream:!0}),c="",u=Date.now(),p="",e.next=7,Al.post(r+"/chat/completions",s,{headers:vd(gd(gd({},"Authorization","Bearer ".concat(n)),"Content-Type","application/json"),"https://openrouter.ai/api/v1"==r?{"HTTP-Referer":"https://codeweb.chat/","X-Title":"Code Web Chat (CWC)"}:{}),cancelToken:i,responseType:"stream"});case 7:return h=e.sent,e.abrupt("return",new Promise((function(e,t){h.data.on("data",function(){var e=_d(yd().mark((function e(t){var r;return yd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sd(t,p,c,u,a);case 2:r=e.sent,p=r.updated_buffer,c=r.updated_accumulated_content,u=r.updated_last_log_time;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h.data.on("end",(function(){if(p.trim())try{var t=p.trim();if(t.startsWith(kd)){var r=t.slice(6).trim();if(r&&r!==Ed){var n,o=JSON.parse(r);null!==(n=o.choices)&&void 0!==n&&null!==(n=n[0])&&void 0!==n&&null!==(n=n.delta)&&void 0!==n&&n.content&&(c+=o.choices[0].delta.content)}}}catch(e){l.warn({function_name:"make_api_request",message:"Failed to parse final buffer",data:e})}var i=c.trim(),a=i.match(/^```(\w+)?\n([\s\S]*?)\n```$/);a&&(i=a[2]),l.log({function_name:"make_api_request",message:"Combined code received:",data:i}),e(i)})),h.data.on("error",(function(e){l.error({function_name:"make_api_request",message:"Stream error",data:e}),t(e)}))})));case 11:if(e.prev=11,e.t0=e.catch(0),!Al.isCancel(e.t0)){e.next=18;break}return l.log({function_name:"make_api_request",message:"Request canceled",data:e.t0.message}),e.abrupt("return",null);case 18:Al.isAxiosError(e.t0)&&429==(null===(f=e.t0.response)||void 0===f?void 0:f.status)?t.window.showErrorMessage("API request failed. Rate limit exceeded."):Al.isAxiosError(e.t0)&&401==(null===(d=e.t0.response)||void 0===d?void 0:d.status)?t.window.showErrorMessage("API request failed. Invalid API key."):t.window.showErrorMessage("API request failed. Check console for details.");case 19:return l.error({function_name:"make_api_request",message:"API request failed",data:e.t0}),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,null,[[0,11]])}))),jd.apply(this,arguments)}var Cd=function(e){return"User requested refactor of a file".concat(e?" `".concat(e,"`"):"",". Please show me the full code of the updated <file>, without explanations or any other text. I have a disability which means I can't type and need to be able to copy and paste the full code.")};function Pd(e){return Pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pd(e)}function Ad(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Id(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ad(Object(r),!0).forEach((function(t){Nd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ad(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nd(e,t,r){return(t=function(e){var t=function(e){if("object"!=Pd(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Pd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pd(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fd(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Dd(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Dd(e,t){if(e){if("string"==typeof e)return Rd(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rd(e,t):void 0}}function Rd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ld(){Ld=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Pd(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Pd(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Gd(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function qd(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Gd(i,n,o,a,s,"next",e)}function s(e){Gd(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Md(e){return Ud.apply(this,arguments)}function Ud(){return(Ud=qd(Ld().mark((function e(r){var n,o,i,a,s,c,u,p,h;return Ld().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.log({function_name:"process_file",message:"start",data:{file_path:r.file_path}}),n="".concat(Cd()," ").concat(r.instruction),o='<file path="'.concat(r.file_path,'">\n<![CDATA[\n').concat(r.file_content,"\n]]>\n</file>\n"),i="".concat(o,"\n").concat(n),a={messages:[{role:"user",content:i}],model:r.model,temperature:0},l.log({function_name:"process_file",message:"API Request Body",data:a}),e.prev=7,c=r.file_content.length,u=0,e.next=12,Td(r.endpoint_url,r.api_key,a,r.cancel_token,(function(e){u+=e.length,r.on_progress&&r.on_progress(Math.min(u,c),c)}));case 12:if(p=e.sent,!Al.isCancel(null===(s=r.cancel_token)||void 0===s?void 0:s.reason)){e.next=16;break}return l.log({function_name:"process_file",message:"Request cancelled during API call",data:r.file_path}),e.abrupt("return",null);case 16:if(p){e.next=20;break}return t.window.showErrorMessage("Applying changes to ".concat(r.file_path," failed. Empty response from API.")),l.error({function_name:"process_file",message:"API request returned empty response",data:r.file_path}),e.abrupt("return",null);case 20:return h=Kh({content:p}),l.log({function_name:"process_file",message:"API response received and cleaned",data:{file_path:r.file_path,response_length:null==h?void 0:h.length}}),e.abrupt("return",h);case 25:if(e.prev=25,e.t0=e.catch(7),!Al.isCancel(e.t0)){e.next=30;break}return l.log({function_name:"process_file",message:"Request cancelled",data:r.file_path}),e.abrupt("return",null);case 30:return l.error({function_name:"process_file",message:"Refactoring error",data:{error:e.t0,file_path:r.file_path}}),console.error("Refactoring error for ".concat(r.file_path,":"),e.t0),t.window.showErrorMessage("An error occurred during refactoring ".concat(r.file_path,". See console for details.")),e.abrupt("return",null);case 34:case"end":return e.stop()}}),e,null,[[7,25]])})))).apply(this,arguments)}function Bd(e){return zd.apply(this,arguments)}function zd(){return zd=qd(Ld().mark((function e(o){var i,a,s,c,u,p,h,f,d,m,v,g,y,b,w,x,_,k,E,S,O,T,j;return Ld().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new Map,t.workspace.workspaceFolders&&t.workspace.workspaceFolders.forEach((function(e){a.set(e.name,e.uri.fsPath)})),s=null===(i=t.workspace.workspaceFolders)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.uri.fsPath){e.next=7;break}return t.window.showErrorMessage("Cannot process multiple files without an open workspace folder."),l.warn({function_name:"handle_intelligent_update",message:"No workspace folder open for multi-file update."}),e.abrupt("return",null);case 7:l.log({function_name:"handle_intelligent_update",message:"Processing multiple files"}),c=$f({clipboard_text:o.clipboard_text,is_single_root_folder_workspace:o.is_single_root_folder_workspace}),u=[],p=[],h=Fd(c);try{for(h.s();!(f=h.n()).done;)d=f.value,m=s,d.workspace_name&&a.has(d.workspace_name)?m=a.get(d.workspace_name):d.workspace_name&&l.warn({function_name:"handle_intelligent_update",message:"Workspace '".concat(d.workspace_name,"' not found for validation of '").concat(d.file_path,"'. Using default.")}),v=nf(d.file_path),of(m,v)?u.push(Id(Id({},d),{},{file_path:v})):(p.push(d.file_path),l.warn({function_name:"handle_intelligent_update",message:"Unsafe file path detected in multi-file mode",data:d.file_path}))}catch(e){h.e(e)}finally{h.f()}if(!(p.length>0)){e.next=20;break}if(g=p.join("\n"),t.window.showErrorMessage("Detected ".concat(p.length," unsafe file path(s) that may attempt directory traversal:\n").concat(g,"\n\nThese files will be skipped.")),l.warn({function_name:"handle_intelligent_update",message:"Unsafe file paths skipped in multi-file mode",data:p}),0!=u.length){e.next=20;break}return t.window.showInformationMessage("No safe file paths remaining. Operation cancelled."),e.abrupt("return",null);case 20:if(0!=u.length){e.next=24;break}return t.window.showErrorMessage("No valid file content found in clipboard."),l.warn({function_name:"handle_intelligent_update",message:"No valid file content found in clipboard for multi-file mode."}),e.abrupt("return",null);case 24:for(y=[],b=[],w=0,x=u;w<x.length;w++)_=x[w],k=s,_.workspace_name&&a.has(_.workspace_name)&&(k=a.get(_.workspace_name)),E=n.normalize(n.join(k,_.file_path)),r.existsSync(E)?b.push(_):y.push(_);if(!(y.length>0)){e.next=37;break}return S=y.map((function(e){return"".concat(e.workspace_name?"[".concat(e.workspace_name,"] "):"").concat(e.file_path)})).join("\n"),e.next=31,t.window.showWarningMessage("This will create ".concat(y.length," new ").concat(1==y.length?"file":"files",":\n").concat(S,"\n\nDo you want to continue?"),{modal:!0},"Yes");case 31:if("Yes"==e.sent){e.next=36;break}return t.window.showInformationMessage("Operation cancelled. No files were modified."),l.log({function_name:"handle_intelligent_update",message:"User cancelled new file creation in multi-file mode."}),e.abrupt("return",null);case 36:l.log({function_name:"handle_intelligent_update",message:"User confirmed new file creation in multi-file mode."});case 37:return"",O=b.length>0&&y.length>0?"Updating ".concat(b.length," file").concat(b.length>1?"s":""," and creating ").concat(y.length," new file").concat(y.length>1?"s":""):b.length>0?"Updating ".concat(b.length," file").concat(b.length>1?"s":"","..."):"Creating ".concat(y.length," new file").concat(y.length>1?"s":""),T=[],j=!1,e.next=43,t.window.withProgress({location:t.ProgressLocation.Notification,title:O,cancellable:!0},function(){var e=qd(Ld().mark((function e(n,i){var c,p,h,f,d,m,v,g,w,x,_,k,E,S,O,C,P,A,I,N,F,D,R,L;return Ld().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Al.CancelToken.source(),i.onCancellationRequested((function(){c.cancel("Cancelled by user.")})),p=[],h=null,f=0,d=0,e.prev=6,m=0,v=b;case 8:if(!(m<v.length)){e.next=33;break}if(g=v[m],w=s,g.workspace_name&&a.has(g.workspace_name)&&(w=a.get(g.workspace_name)),x=of(w,g.file_path)){e.next=16;break}return l.error({function_name:"handle_intelligent_update",message:"Path validation failed pre-scan",data:g.file_path}),e.abrupt("continue",30);case 16:return e.prev=16,_=t.Uri.file(x),e.next=20,t.workspace.openTextDocument(_);case 20:k=e.sent,E=k.getText(),S=E.length,T.push({file_path:g.file_path,content:E,is_new:!1,workspace_name:g.workspace_name}),(!h||S>h.size)&&(h={path:g.file_path,size:S,workspaceName:g.workspace_name}),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(16),l.warn({function_name:"handle_intelligent_update",message:"Error opening/reading existing file pre-scan",data:{error:e.t0,file_path:g.file_path}});case 30:m++,e.next=8;break;case 33:for(O=0,C=y;O<C.length;O++)P=C[O],T.push({file_path:P.file_path,content:"",is_new:!0,workspace_name:P.workspace_name});A=0;case 35:if(!(A<u.length)){e.next=48;break}if(!i.isCancellationRequested){e.next=39;break}throw l.log({function_name:"handle_intelligent_update",message:"Operation cancelled during batching.",data:{batch_start_index:A}}),new Error("Operation cancelled");case 39:return I=u.slice(A,A+20),N=I.map(function(){var e=qd(Ld().mark((function e(u){var p,m,v,g,y,b,w,x,_,k;return Ld().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=s,u.workspace_name&&a.has(u.workspace_name)&&(p=a.get(u.workspace_name)),m=of(p,u.file_path)){e.next=6;break}throw l.error({function_name:"handle_intelligent_update",message:"Path validation failed during batch processing",data:u.file_path}),new Error("Invalid file path: ".concat(u.file_path));case 6:if(r.existsSync(m)){e.next=9;break}return e.abrupt("return",{document:null,content:u.content,isNew:!0,filePath:u.file_path,workspaceName:u.workspace_name});case 9:return e.prev=9,v=t.Uri.file(m),e.next=13,t.workspace.openTextDocument(v);case 13:return g=e.sent,y=g.getText(),b=T.find((function(e){return e.file_path==u.file_path&&e.workspace_name==u.workspace_name&&!e.is_new})),w=b?b.content:y,e.next=19,Md({endpoint_url:o.endpoint_url,api_key:o.api_key,model:o.model,file_path:u.file_path,file_content:w,instruction:u.content,cancel_token:c.token,on_progress:function(e,t){if(h&&u.file_path==h.path&&u.workspace_name==h.workspaceName){d=f;var r=(f=Math.min(Math.round(e/t*100),100))-d;n.report({increment:r>0?r:0})}}});case 19:if(x=e.sent,!i.isCancellationRequested){e.next=22;break}throw new Error("Operation cancelled");case 22:if(x){e.next=24;break}throw new Error("Failed to apply changes to ".concat(u.file_path));case 24:return _=x,h&&u.file_path==h.path&&u.workspace_name==h.workspaceName&&f<100&&(k=100-f,f=100,n.report({increment:k>0?k:0})),e.abrupt("return",{document:g,content:_,isNew:!1,filePath:u.file_path,workspaceName:u.workspace_name});case 29:if(e.prev=29,e.t0=e.catch(9),!Al.isCancel(e.t0)&&"Operation cancelled"!=e.t0.message){e.next=33;break}throw new Error("Operation cancelled");case 33:throw l.error({function_name:"handle_intelligent_update",message:"Error processing existing file in batch",data:{error:e.t0,file_path:u.file_path}}),new Error("Error processing ".concat(u.file_path,": ").concat(e.t0.message||"Unknown error"));case 35:case"end":return e.stop()}}),e,null,[[9,29]])})));return function(t){return e.apply(this,arguments)}}()),e.next=43,Promise.all(N);case 43:F=e.sent,p.push.apply(p,function(e){if(Array.isArray(e))return Rd(e)}(G=F)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(G)||Dd(G)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());case 45:A+=20,e.next=35;break;case 48:n.report({message:"Applying changes..."}),D=Ld().mark((function e(){var r,n,o,c;return Ld().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=L[R],!i.isCancellationRequested){e.next=3;break}throw new Error("Operation cancelled");case 3:if(n=s,r.workspaceName&&a.has(r.workspaceName)&&(n=a.get(r.workspaceName)),of(n,r.filePath)){e.next=10;break}return l.error({function_name:"handle_intelligent_update",message:"Path validation failed during apply phase",data:r.filePath}),t.window.showWarningMessage("Skipping applying change to invalid path: ".concat(r.filePath)),e.abrupt("return",0);case 10:if(!r.isNew){e.next=17;break}return e.next=13,ed(r.filePath,r.content,r.workspaceName);case 13:e.sent||(l.error({function_name:"handle_intelligent_update",message:"Failed to create new file during apply phase",data:r.filePath}),t.window.showWarningMessage("Failed to create file: ".concat(r.filePath))),e.next=37;break;case 17:if(o=r.document){e.next=21;break}return l.warn({function_name:"handle_intelligent_update",message:"Document missing for existing file change",data:r.filePath}),e.abrupt("return",0);case 21:return e.prev=21,e.next=24,t.window.showTextDocument(o);case 24:return c=e.sent,e.next=27,c.edit((function(e){e.replace(new t.Range(o.positionAt(0),o.positionAt(o.getText().length)),r.content)}));case 27:return e.next=29,tf(o);case 29:return e.next=31,o.save();case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(21),l.error({function_name:"handle_intelligent_update",message:"Failed to apply changes to existing file",data:{error:e.t0,file_path:r.filePath}}),t.window.showWarningMessage("Failed to apply changes to file: ".concat(r.filePath));case 37:case"end":return e.stop()}}),e,null,[[21,33]])})),R=0,L=p;case 51:if(!(R<L.length)){e.next=59;break}return e.delegateYield(D(),"t1",53);case 53:if(0!==e.t1){e.next=56;break}return e.abrupt("continue",56);case 56:R++,e.next=51;break;case 59:j=!0,e.next=67;break;case 62:e.prev=62,e.t2=e.catch(6),c.cancel("Operation failed due to error."),l.error({function_name:"handle_intelligent_update",message:"Multi-file processing failed",data:e.t2}),"Operation cancelled"===e.t2.message||Al.isCancel(e.t2)||t.window.showErrorMessage("An error occurred during processing: ".concat(e.t2.message));case 67:case"end":return e.stop()}var G}),e,null,[[6,62],[16,27]])})));return function(t,r){return e.apply(this,arguments)}}());case 43:return e.abrupt("return",j?T:null);case 44:case"end":return e.stop()}}),e)}))),zd.apply(this,arguments)}function Wd(e){return Wd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wd(e)}function $d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Yd(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Vd(){Vd=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Wd(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Wd(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Hd(e){return function(e){if(Array.isArray(e))return Jd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Yd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yd(e,t){if(e){if("string"==typeof e)return Jd(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jd(e,t):void 0}}function Jd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Kd(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Qd(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Kd(i,n,o,a,s,"next",e)}function s(e){Kd(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Zd(e){return Xd.apply(this,arguments)}function Xd(){return(Xd=Qd(Vd().mark((function e(n){var o,i,a,s,c,u,l;return Vd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.workspace.workspaceFolders&&0!=t.workspace.workspaceFolders.length){e.next=2;break}return e.abrupt("return",!1);case 2:o=new Map,t.workspace.workspaceFolders.forEach((function(e){o.set(e.name,e.uri.fsPath)})),i=t.workspace.workspaceFolders[0].uri.fsPath,a=$d(n),e.prev=6,a.s();case 8:if((s=a.n()).done){e.next=17;break}if(c=s.value,u=i,c.workspace_name&&o.has(c.workspace_name)&&(u=o.get(c.workspace_name)),!(l=of(u,c.file_path))||!r.existsSync(l)){e.next=15;break}return e.abrupt("return",!1);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),a.e(e.t0);case 22:return e.prev=22,a.f(),e.finish(22);case 25:return e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e,null,[[6,19,22,25]])})))).apply(this,arguments)}function em(e){return tm.apply(this,arguments)}function tm(){return tm=Qd(Vd().mark((function e(r){var n,o,i,a,s,c,u,p,h,f,d,m,v,g=arguments;return Vd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.length>1&&void 0!==g[1]&&g[1],o=g.length>2?g[2]:void 0,e.next=4,r.get_file_refactoring_tool_configs();case 4:if(0!==(i=e.sent).length){e.next=9;break}return t.window.showErrorMessage("File Refactoring tool is not configured. Go to Code Web Chat panel -> Settings tab."),l.warn({function_name:"get_file_refactoring_config",message:"File Refactoring tool is not configured."}),e.abrupt("return");case 9:if(a=null,n){e.next=14;break}return e.next=13,r.get_default_file_refactoring_config();case 13:a=e.sent;case 14:if(a&&!n){e.next=30;break}return s={iconPath:new t.ThemeIcon("chevron-up"),tooltip:"Move up"},c={iconPath:new t.ThemeIcon("chevron-down"),tooltip:"Move down"},u={iconPath:new t.ThemeIcon("star"),tooltip:"Set as default"},p={iconPath:new t.ThemeIcon("star-full"),tooltip:"Unset default"},h=function(){var e=Qd(Vd().mark((function e(){var t;return Vd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get_default_file_refactoring_config();case 2:return t=e.sent,e.abrupt("return",i.map((function(e,r){var n=[],o=t&&t.provider_type==e.provider_type&&t.provider_name==e.provider_name&&t.model==e.model;return i.length>1&&(r>0&&n.push(s),r<i.length-1&&n.push(c)),o?n.push(p):n.push(u),{label:e.model,description:"".concat(e.provider_name).concat(o?" • default configuration":""),config:e,index:r,buttons:n}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=t.window.createQuickPick(),e.next=23,h();case 23:return d=e.sent,f.items=d,f.placeholder="Select file refactoring configuration",f.matchOnDescription=!0,(m=o.globalState.get(Vo,0))>=0&&m<d.length?f.activeItems=[d[m]]:d.length>0&&(f.activeItems=[d[0]]),e.abrupt("return",new Promise((function(e){f.onDidTriggerItemButton(function(){var e=Qd(Vd().mark((function e(t){var n,o,a,s,c;return Vd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.item,o=t.button,a=n.index,o!==u){e.next=11;break}return e.next=6,r.set_default_file_refactoring_config(i[a]);case 6:return e.next=8,h();case 8:f.items=e.sent,e.next=39;break;case 11:if(o!==p){e.next=19;break}return e.next=14,r.set_default_file_refactoring_config(null);case 14:return e.next=16,h();case 16:f.items=e.sent,e.next=39;break;case 19:if(!("Move up"==o.tooltip&&a>0)){e.next=30;break}return s=i[a],i[a]=i[a-1],i[a-1]=s,e.next=25,r.save_file_refactoring_tool_configs(i);case 25:return e.next=27,h();case 27:f.items=e.sent,e.next=39;break;case 30:if(!("Move down"==o.tooltip&&a<i.length-1)){e.next=39;break}return c=i[a],i[a]=i[a+1],i[a+1]=c,e.next=36,r.save_file_refactoring_tool_configs(i);case 36:return e.next=38,h();case 38:f.items=e.sent;case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f.onDidAccept(Qd(Vd().mark((function n(){var i,a;return Vd().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=f.selectedItems[0],f.hide(),i){n.next=5;break}return e(void 0),n.abrupt("return");case 5:return o.globalState.update(Vo,i.index),n.next=8,r.get_provider(i.config.provider_name);case 8:if(a=n.sent){n.next=14;break}return t.window.showErrorMessage("API provider not found for File Refactoring tool. Go to Code Web Chat panel -> Settings tab."),l.warn({function_name:"get_file_refactoring_config",message:"API provider not found for File Refactoring tool."}),e(void 0),n.abrupt("return");case 14:e({provider:a,config:i.config});case 15:case"end":return n.stop()}}),n)})))),f.onDidHide((function(){f.dispose(),e(void 0)})),f.show()})));case 30:return e.next=32,r.get_provider(a.provider_name);case 32:if(v=e.sent){e.next=37;break}return t.window.showErrorMessage("API provider not found for File Refactoring tool. Go to Code Web Chat panel -> Settings tab."),l.warn({function_name:"get_file_refactoring_config",message:"API provider not found for File Refactoring tool."}),e.abrupt("return");case 37:return e.abrupt("return",{provider:v,config:a});case 38:case"end":return e.stop()}}),e)}))),tm.apply(this,arguments)}function rm(e){return t.commands.registerCommand("codeWebChat.applyChatResponse",Qd(Vd().mark((function r(){var n,o,i,a,s,c,u,p,h,f,d,m,v,g,y,b,w,x,_,k,E,S,O,T,j,C,P,A,I,N,F,D,R,L,G,q,M,U,B,z,W,$,V,H,Y,J,K,Q,Z,X,ee,te,re,ne,oe,ie,ae,se,ce,ue,le,pe;return Vd().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.env.clipboard.readText();case 2:if(o=r.sent){r.next=7;break}return t.window.showErrorMessage("Clipboard is empty."),l.warn({function_name:"apply_chat_response_command",message:"Clipboard is empty."}),r.abrupt("return");case 7:return i=1==(null===(n=t.workspace.workspaceFolders)||void 0===n?void 0:n.length),r.next=10,Hf(o,i);case 10:if("patches"!=(a=r.sent).type||!a.patches){r.next=139;break}if(null!==(s=t.workspace.workspaceFolders)&&void 0!==s&&s.length){r.next=15;break}return t.window.showErrorMessage("No workspace folder open."),r.abrupt("return");case 15:c=new Map,t.workspace.workspaceFolders.forEach((function(e){c.set(e.name,e.uri.fsPath)})),u=t.workspace.workspaceFolders[0].uri.fsPath,p=0,h=0,f=[],d=[],m=a.patches.length,v=0;case 24:if(!(v<m)){r.next=35;break}return g=a.patches[v],y=u,g.workspace_name&&c.has(g.workspace_name)&&(y=c.get(g.workspace_name)),r.next=30,Lf(g.content,y);case 30:(b=r.sent).success?(p++,b.original_states&&(f=f.concat(b.original_states))):(h++,d.push(g));case 32:v++,r.next=24;break;case 35:if(f.length>0&&e.workspaceState.update(Do,f),!(h>0)){r.next=91;break}return r.next=39,(w=t.window).showWarningMessage.apply(w,[p>0?"Applied ".concat(p," patch").concat(1!=p?"es":""," successfully, but ").concat(h," patch").concat(1!=h?"es":""," failed."):"Failed to apply ".concat(h," patch").concat(1!=h?"es":"","."),"Use intelligent update"].concat(Hd(p>0?["Revert"]:[])));case 39:if(!("Revert"==(x=r.sent)&&f.length>0)){r.next=46;break}return r.next=43,rd(f);case 43:e.workspaceState.update(Do,null),r.next=89;break;case 46:if("Use intelligent update"!=x){r.next=89;break}return _=new Li(e),r.next=50,em(_,!1,e);case 50:if(k=r.sent){r.next=53;break}return r.abrupt("return");case 53:return E=k.provider,S=k.config,O="","built-in"==E.type?(T=Oi[E.name],O=T.base_url):O=E.base_url,j=d.map((function(e){return"// ".concat(e.file_path,"\n").concat(e.content)})).join("\n\n"),r.prev=57,r.next=60,Bd({endpoint_url:O,api_key:E.api_key,model:S.model,clipboard_text:j,context:e,is_single_root_folder_workspace:i});case 60:if(!(C=r.sent)){r.next=73;break}return P=[].concat(Hd(f),Hd(C)),e.workspaceState.update(Do,P),r.next=66,t.window.showInformationMessage("Successfully applied ".concat(d.length," failed patch").concat(1!=d.length?"es":"","."),"Revert");case 66:if("Revert"!=r.sent){r.next=71;break}return r.next=70,rd(P);case 70:e.workspaceState.update(Do,null);case 71:r.next=77;break;case 73:if(!(p>0&&f.length>0)){r.next=77;break}return r.next=76,rd(f);case 76:e.workspaceState.update(Do,null);case 77:r.next=89;break;case 79:return r.prev=79,r.t0=r.catch(57),l.error({function_name:"apply_chat_response_command",message:"Error during intelligent update of failed patches"}),r.next=84,t.window.showErrorMessage("Error during fix attempt with the refactoring tool. Would you like to revert the successfully applied patches?","Keep changes","Revert");case 84:if(!("Revert"==r.sent&&f.length>0)){r.next=89;break}return r.next=88,rd(f);case 88:e.workspaceState.update(Do,null);case 89:r.next=136;break;case 91:if(!(p>0)){r.next=136;break}return r.next=94,t.window.showInformationMessage("Successfully applied ".concat(p," patch").concat(1!=p?"es":"","."),"Revert","Looks off, use intelligent mode");case 94:if(!("Revert"==(A=r.sent)&&f.length>0)){r.next=101;break}return r.next=98,rd(f);case 98:e.workspaceState.update(Do,null),r.next=136;break;case 101:if("Looks off, use intelligent mode"!=A){r.next=136;break}return r.next=104,rd(f);case 104:return I=new Li(e),r.next=107,em(I,!1,e);case 107:if(N=r.sent){r.next=110;break}return r.abrupt("return");case 110:return F=N.provider,D=N.config,R="","built-in"==F.type?(L=Oi[F.name],R=L.base_url):R=F.base_url,G=a.patches.map((function(e){return"// ".concat(e.file_path,"\n").concat(e.content)})).join("\n\n"),r.prev=114,r.next=117,Bd({endpoint_url:R,api_key:F.api_key,model:D.model,clipboard_text:G,context:e,is_single_root_folder_workspace:i});case 117:if(!(q=r.sent)){r.next=129;break}return e.workspaceState.update(Do,q),r.next=122,t.window.showInformationMessage("Successfully applied patches using intelligent update.","Revert");case 122:if("Revert"!=r.sent){r.next=127;break}return r.next=126,rd(q);case 126:e.workspaceState.update(Do,null);case 127:r.next=130;break;case 129:t.window.showInformationMessage("Intelligent update was canceled. Original changes have been reverted.");case 130:r.next=136;break;case 132:r.prev=132,r.t1=r.catch(114),l.error({function_name:"apply_chat_response_command",message:"Error during intelligent update of all patches"}),t.window.showErrorMessage("Error during intelligent update. Original patches have been reverted.");case 136:return r.abrupt("return");case 139:if(a.files&&0!=a.files.length){r.next=142;break}return t.window.showErrorMessage("Clipboard content must contain properly formatted code blocks. Each code block should start with a file path comment or be a diff."),r.abrupt("return");case 142:return M=void 0,r.next=145,Zd(a.files);case 145:if(r.sent?(M="Fast replace",l.log({function_name:"apply_chat_response_command",message:"All files are new - automatically selecting Fast replace mode"})):a.files.some((function(e){var t=e.content;return/^\s*(\/\/|#|--)\s+\.\.\.|^\s*\/\*.*\.\.\..*\*\//m.test(t)}))?(M="Intelligent update",l.log({function_name:"apply_chat_response_command",message:"Auto-selecting Intelligent update mode due to detected truncated fragments or diff markers"})):(M="Fast replace",l.log({function_name:"apply_chat_response_command",message:"Defaulting to Fast replace mode"})),U=null,B=!1,"Fast replace"!=M){r.next=157;break}return r.next=152,hd(a.files);case 152:(z=r.sent).success&&z.original_states&&(U=z.original_states,B=!0),l.log({function_name:"apply_chat_response_command",message:"Fast replace handler finished.",data:{success:z.success}}),r.next=176;break;case 157:if("Intelligent update"!=M){r.next=174;break}return W=new Li(e),r.next=161,em(W,!1,e);case 161:if($=r.sent){r.next=164;break}return r.abrupt("return");case 164:return V=$.provider,H=$.config,Y="","built-in"==V.type?(J=Oi[V.name],Y=J.base_url):Y=V.base_url,r.next=169,Bd({endpoint_url:Y,api_key:V.api_key,model:H.model,clipboard_text:o,context:e,is_single_root_folder_workspace:i});case 169:(U=r.sent)&&(B=!0),l.log({function_name:"apply_chat_response_command",message:"Intelligent update handler finished.",data:{success:B}}),r.next=176;break;case 174:return l.error({function_name:"apply_chat_response_command",message:"No valid mode selected or determined."}),r.abrupt("return");case 176:if(!B||!U){r.next=229;break}if(e.workspaceState.update(Do,U),K=U.filter((function(e){return e.is_new})).length,Q=U.length-K,Z="Intelligent update"==M?"updated":"replaced",X="",X=K>0&&Q>0?"Successfully created ".concat(K," new ").concat(1==K?"file":"files"," and ").concat(Z," ").concat(Q," ").concat(1==Q?"file":"files","."):K>0?"Successfully created ".concat(K," new ").concat(1==K?"file":"files","."):Q>0?"Successfully ".concat(Z," ").concat(Q," ").concat(1==Q?"file":"files","."):"Operation completed successfully.","Fast replace"!=M){r.next=220;break}return te=["Revert"],Q>0&&te.push("Looks off, use intelligent mode"),r.next=188,(ee=t.window).showInformationMessage.apply(ee,[X].concat(te));case 188:if("Revert"!=(re=r.sent)){r.next=195;break}return r.next=192,rd(U);case 192:e.workspaceState.update(Do,null),r.next=218;break;case 195:if("Looks off, use intelligent mode"!=re){r.next=218;break}return r.next=198,rd(U);case 198:return ne=new Li(e),r.next=201,em(ne,!1,e);case 201:if(oe=r.sent){r.next=204;break}return r.abrupt("return");case 204:return ie=oe.provider,ae=oe.config,se="","built-in"==ie.type?(ce=Oi[ie.name],se=ce.base_url):se=ie.base_url,r.prev=207,r.next=210,Bd({endpoint_url:se,api_key:ie.api_key,model:ae.model,clipboard_text:o,context:e,is_single_root_folder_workspace:i});case 210:(U=r.sent)?(e.workspaceState.update(Do,U),ue=U.filter((function(e){return e.is_new})).length,le=U.length-ue,"",pe=ue>0&&le>0?"Successfully created ".concat(ue," new ").concat(1==ue?"file":"files"," and updated ").concat(le," ").concat(1==le?"file":"files"," using Intelligent Update."):ue>0?"Successfully created ".concat(ue," new ").concat(1==ue?"file":"files"," using Intelligent Update."):le>0?"Successfully updated ".concat(le," ").concat(1==le?"file":"files"," using Intelligent Update."):"Intelligent Update completed successfully.",t.window.showInformationMessage(pe,"Revert").then((function(t){"Revert"==t&&(rd(U),e.workspaceState.update(Do,null))}))):t.window.showInformationMessage("Intelligent update was canceled. Fast replace changes have been reverted."),r.next=218;break;case 214:r.prev=214,r.t2=r.catch(207),l.error({function_name:"apply_chat_response_command",message:"Error during second intelligent update attempt"}),t.window.showErrorMessage("Error during intelligent update. Fast replace changes have been reverted.");case 218:r.next=227;break;case 220:return r.next=222,t.window.showInformationMessage(X,"Revert");case 222:if("Revert"!=r.sent){r.next=227;break}return r.next=226,rd(U);case 226:e.workspaceState.update(Do,null);case 227:r.next=231;break;case 229:e.workspaceState.update(Do,null),l.log({function_name:"apply_chat_response_command",message:"Operation concluded without success."});case 231:l.log({function_name:"apply_chat_response_command",message:"end",data:{mode:M,success:B}});case 232:case"end":return r.stop()}}),r,null,[[57,79],[114,132],[207,214]])}))))}function nm(e){return nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nm(e)}function om(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function im(){im=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==nm(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(nm(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function am(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function sm(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){am(i,n,o,a,s,"next",e)}function s(e){am(i,n,o,a,s,"throw",e)}a(void 0)}))}}function cm(e,r,n){return t.commands.registerCommand("codeWebChat.chatToClipboard",sm(im().mark((function o(){var i,a,s,c,u,l,p,h,f,d,m,v,g;return im().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i=e.workspaceState.get("last-chat-prompt")||"",(a=t.window.createInputBox()).placeholder="Ask anything",a.value=i,a.onDidChangeValue(function(){var t=sm(im().mark((function t(r){return im().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.workspaceState.update("last-chat-prompt",r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),o.next=7,new Promise((function(e){a.onDidAccept((function(){e(a.value),a.hide()})),a.onDidHide((function(){return e(void 0)})),a.show()}));case 7:if(s=o.sent){o.next=10;break}return o.abrupt("return");case 10:return c=e.workspaceState.get("history",[]),u=[s].concat((y=c,function(e){if(Array.isArray(e))return om(e)}(y)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(y)||function(e,t){if(e){if("string"==typeof e)return om(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?om(e,t):void 0}}(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).slice(0,100),o.next=14,e.workspaceState.update("history",u);case 14:return l=new B(r,n),p="",o.prev=16,h=t.window.activeTextEditor,f=null==h?void 0:h.document.uri.fsPath,o.next=21,l.collect_files({active_path:f});case 21:p=o.sent,o.next=29;break;case 24:return o.prev=24,o.t0=o.catch(16),console.error("Error collecting files:",o.t0),t.window.showErrorMessage("Error collecting files: "+o.t0.message),o.abrupt("return");case 29:return s=xi(s),d=t.workspace.getConfiguration("codeWebChat"),m=d.get("editFormat"),(v=d.get("editFormatInstructions".concat(m.charAt(0).toUpperCase()+m.slice(1))))&&(s+="\n".concat(v)),g="".concat(p?"".concat(s,"\n<files>\n").concat(p,"</files>\n"):"").concat(s),o.next=37,t.env.clipboard.writeText(g);case 37:t.window.showInformationMessage("Chat prompt copied to clipboard!");case 38:case"end":return o.stop()}var y}),o,null,[[16,24]])}))))}function um(e){return um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um(e)}function lm(){lm=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==um(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(um(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function pm(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var hm=o(2664),fm=o.n(hm);function dm(e){return dm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dm(e)}function mm(){mm=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==dm(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(dm(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function vm(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function gm(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){vm(i,n,o,a,s,"next",e)}function s(e){vm(i,n,o,a,s,"throw",e)}a(void 0)}))}}function ym(e){return bm.apply(this,arguments)}function bm(){return(bm=gm(mm().mark((function e(r){var n,o,i,a,s,c,u;return mm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.document.uri.fsPath,o=r.document.getText(new t.Range(new t.Position(0,0),r.position)),i=r.document.getText(new t.Range(r.position,r.document.positionAt(r.document.getText().length))),a=new B(r.file_tree_provider,r.open_editors_provider),e.next=6,a.collect_files({exclude_path:n});case 6:return s=e.sent,c={before:"<files>\n".concat(s,'<file path="').concat(t.workspace.asRelativePath(r.document.uri),'">\n<![CDATA[\n').concat(o),after:"".concat(i,"\n]]>\n</file>\n</files>")},u="".concat('Find correct replacement for <missing text> symbol. Respond with replacement text in "replacement" XML tags, without explanations or any other text.').concat(r.suggestions?" Follow suggestions: ".concat(r.suggestions):""),e.abrupt("return","".concat(u,"\n").concat(c.before,"<missing text>").concat(c.after,"\n").concat(u));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wm(e){return xm.apply(this,arguments)}function xm(){return xm=gm(mm().mark((function e(r){var n,o,i;return mm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.editor.document,o=t.languages.registerInlineCompletionItemProvider({pattern:"**"},{provideInlineCompletionItems:function(){return[{insertText:r.completion_text,range:new t.Range(r.position,r.position)}]}}),i=t.workspace.onDidChangeTextDocument(function(){var e=gm(mm().mark((function e(r){return mm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.document!==n){e.next=4;break}return e.next=3,t.commands.executeCommand("editor.action.formatDocument",n.uri);case 3:i.dispose();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,t.commands.executeCommand("editor.action.inlineSuggest.trigger");case 5:setTimeout((function(){o.dispose(),i.dispose()}),1e4);case 6:case"end":return e.stop()}}),e)}))),xm.apply(this,arguments)}function _m(e){return km.apply(this,arguments)}function km(){return km=gm(mm().mark((function e(r){var n,o,i,a,s,c,u,p,h,f,d,m,v,g=arguments;return mm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.length>1&&void 0!==g[1]&&g[1],o=g.length>2?g[2]:void 0,e.next=4,r.get_code_completions_tool_configs();case 4:if(0!==(i=e.sent).length){e.next=9;break}return t.window.showErrorMessage("Code Completions tool is not configured. Go to Code Web Chat panel -> Settings tab."),l.warn({function_name:"get_code_completion_config",message:"Code Completions tool is not configured."}),e.abrupt("return");case 9:if(a=null,n){e.next=14;break}return e.next=13,r.get_default_code_completions_config();case 13:a=e.sent;case 14:if(a&&!n){e.next=30;break}return s={iconPath:new t.ThemeIcon("chevron-up"),tooltip:"Move up"},c={iconPath:new t.ThemeIcon("chevron-down"),tooltip:"Move down"},u={iconPath:new t.ThemeIcon("star"),tooltip:"Set as default"},p={iconPath:new t.ThemeIcon("star-full"),tooltip:"Unset default"},h=function(){var e=gm(mm().mark((function e(){var t;return mm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get_default_code_completions_config();case 2:return t=e.sent,e.abrupt("return",i.map((function(e,r){var n=[],o=t&&t.provider_type==e.provider_type&&t.provider_name==e.provider_name&&t.model==e.model;return i.length>1&&(r>0&&n.push(s),r<i.length-1&&n.push(c)),o?n.push(p):n.push(u),{label:e.model,description:"".concat(e.provider_name).concat(o?" • default configuration":""),config:e,index:r,buttons:n}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=t.window.createQuickPick(),e.next=23,h();case 23:return d=e.sent,f.items=d,f.placeholder="Select code completion configuration",f.matchOnDescription=!0,(m=o.globalState.get($o,0))>=0&&m<d.length?f.activeItems=[d[m]]:d.length>0&&(f.activeItems=[d[0]]),e.abrupt("return",new Promise((function(e){f.onDidTriggerItemButton(function(){var e=gm(mm().mark((function e(t){var n,o,a,s,c;return mm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.item,o=t.button,a=n.index,o!==u){e.next=11;break}return e.next=6,r.set_default_code_completions_config(i[a]);case 6:return e.next=8,h();case 8:f.items=e.sent,e.next=39;break;case 11:if(o!==p){e.next=19;break}return e.next=14,r.set_default_code_completions_config(null);case 14:return e.next=16,h();case 16:f.items=e.sent,e.next=39;break;case 19:if(!("Move up"==o.tooltip&&a>0)){e.next=30;break}return s=i[a],i[a]=i[a-1],i[a-1]=s,e.next=25,r.save_code_completions_tool_configs(i);case 25:return e.next=27,h();case 27:f.items=e.sent,e.next=39;break;case 30:if(!("Move down"==o.tooltip&&a<i.length-1)){e.next=39;break}return c=i[a],i[a]=i[a+1],i[a+1]=c,e.next=36,r.save_code_completions_tool_configs(i);case 36:return e.next=38,h();case 38:f.items=e.sent;case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f.onDidAccept(gm(mm().mark((function n(){var i,a;return mm().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=f.selectedItems[0],f.hide(),i){n.next=5;break}return e(void 0),n.abrupt("return");case 5:return o.globalState.update($o,i.index),n.next=8,r.get_provider(i.config.provider_name);case 8:if(a=n.sent){n.next=14;break}return t.window.showErrorMessage("API provider not found for Code Completions tool. Go to Code Web Chat panel -> Settings tab."),l.warn({function_name:"get_code_completion_config",message:"API provider not found for Code Completions tool."}),e(void 0),n.abrupt("return");case 14:e({provider:a,config:i.config});case 15:case"end":return n.stop()}}),n)})))),f.onDidHide((function(){f.dispose(),e(void 0)})),f.show()})));case 30:return e.next=32,r.get_provider(a.provider_name);case 32:if(v=e.sent){e.next=37;break}return t.window.showErrorMessage("API provider not found for Code Completions tool. Go to Code Web Chat panel -> Settings tab."),l.warn({function_name:"get_code_completion_config",message:"API provider not found for Code Completions tool."}),e.abrupt("return");case 37:return e.abrupt("return",{provider:v,config:a});case 38:case"end":return e.stop()}}),e)}))),km.apply(this,arguments)}function Em(e){return Sm.apply(this,arguments)}function Sm(){return Sm=gm(mm().mark((function e(r){var n,o,i,a,s,c,u,p,h,f,d,m,v,g;return mm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Li(r.context),!r.with_suggestions){e.next=7;break}return e.next=4,t.window.showInputBox({placeHolder:"Enter suggestions",prompt:"E.g. include explanatory comments"});case 4:if(void 0!==(o=e.sent)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,_m(n,r.show_quick_pick,r.context);case 9:if(i=e.sent){e.next=12;break}return e.abrupt("return");case 12:if(a=i.provider,(s=i.config).provider_name){e.next=19;break}return t.window.showErrorMessage("API provider is not specified for Code Completions tool. Go to Code Web Chat panel -> Settings tab."),l.warn({function_name:"perform_code_completion",message:"API provider is not specified for Code Completions tool."}),e.abrupt("return");case 19:if(s.model){e.next=23;break}return t.window.showErrorMessage("Model is not specified for Code Completions tool. Go to Code Web Chat panel -> Settings tab."),l.warn({function_name:"perform_code_completion",message:"Model is not specified for Code Completions tool."}),e.abrupt("return");case 23:if(c="","built-in"!=a.type){e.next=33;break}if(u=Oi[a.name]){e.next=30;break}return t.window.showErrorMessage('Built-in provider "'.concat(a.name,'" not found. Go to Code Web Chat panel -> Settings tab.')),l.warn({function_name:"perform_code_completion",message:'Built-in provider "'.concat(a.name,'" not found.')}),e.abrupt("return");case 30:c=u.base_url,e.next=34;break;case 33:c=a.base_url;case 34:if(a.api_key){e.next=37;break}return t.window.showErrorMessage("API key is missing. Please add it in the settings."),e.abrupt("return");case 37:if(!(p=t.window.activeTextEditor)){e.next=50;break}return h=Al.CancelToken.source(),f=p.document,d=p.selection.active,e.next=44,ym({document:f,position:d,file_tree_provider:r.file_tree_provider,open_editors_provider:r.open_editors_provider,suggestions:o});case 44:m=e.sent,v={messages:[{role:"user",content:m}],model:s.model,temperature:s.temperature},l.log({function_name:"perform_fim_completion",message:"Prompt:",data:m}),g=t.workspace.onDidChangeTextDocument((function(){h.cancel("User moved the cursor, cancelling request.")})),t.window.withProgress({location:t.ProgressLocation.Notification,title:"Waiting for code completion...",cancellable:!0},function(){var e=gm(mm().mark((function e(n,o){var i,s,u;return mm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.onCancellationRequested((function(){h.cancel("User cancelled the operation")})),e.prev=1,e.next=4,Td(c,a.api_key,v,h.token);case 4:if(!(i=e.sent)){e.next=18;break}if(!(s=i.match(/<replacement>([\s\S]*?)<\/replacement>/i))||!s[1]){e.next=18;break}if(u=fm().decode(s[1].trim()),!r.auto_accept){e.next=16;break}return e.next=12,p.edit((function(e){e.insert(d,u)}));case 12:return e.next=14,t.commands.executeCommand("editor.action.formatDocument",f.uri);case 14:e.next=18;break;case 16:return e.next=18,wm({editor:p,position:d,completion_text:u});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),l.error({function_name:"perform_fim_completion",message:"Completion error",data:e.t0});case 23:return e.prev=23,g.dispose(),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[1,20,23,26]])})));return function(t,r){return e.apply(this,arguments)}}());case 50:case"end":return e.stop()}}),e)}))),Sm.apply(this,arguments)}function Om(e,r,n){return[t.commands.registerCommand("codeWebChat.codeCompletion",gm(mm().mark((function t(){return mm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Em({file_tree_provider:e,open_editors_provider:r,context:n,with_suggestions:!1,auto_accept:!1,show_quick_pick:!1}));case 1:case"end":return t.stop()}}),t)})))),t.commands.registerCommand("codeWebChat.codeCompletionAutoAccept",gm(mm().mark((function t(){return mm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Em({file_tree_provider:e,open_editors_provider:r,context:n,with_suggestions:!1,auto_accept:!0,show_quick_pick:!1}));case 1:case"end":return t.stop()}}),t)})))),t.commands.registerCommand("codeWebChat.codeCompletionWithSuggestions",gm(mm().mark((function t(){return mm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Em({file_tree_provider:e,open_editors_provider:r,context:n,with_suggestions:!0,auto_accept:!1,show_quick_pick:!1}));case 1:case"end":return t.stop()}}),t)})))),t.commands.registerCommand("codeWebChat.codeCompletionWithSuggestionsAutoAccept",gm(mm().mark((function t(){return mm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Em({file_tree_provider:e,open_editors_provider:r,context:n,with_suggestions:!0,auto_accept:!0,show_quick_pick:!1}));case 1:case"end":return t.stop()}}),t)})))),t.commands.registerCommand("codeWebChat.codeCompletionUsing",gm(mm().mark((function t(){return mm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Em({file_tree_provider:e,open_editors_provider:r,context:n,with_suggestions:!1,auto_accept:!1,show_quick_pick:!0}));case 1:case"end":return t.stop()}}),t)})))),t.commands.registerCommand("codeWebChat.codeCompletionUsingAutoAccept",gm(mm().mark((function t(){return mm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Em({file_tree_provider:e,open_editors_provider:r,context:n,with_suggestions:!1,auto_accept:!0,show_quick_pick:!0}));case 1:case"end":return t.stop()}}),t)})))),t.commands.registerCommand("codeWebChat.codeCompletionWithSuggestionsUsingAutoAccept",gm(mm().mark((function t(){return mm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Em({file_tree_provider:e,open_editors_provider:r,context:n,with_suggestions:!0,auto_accept:!0,show_quick_pick:!0}));case 1:case"end":return t.stop()}}),t)})))),t.commands.registerCommand("codeWebChat.codeCompletionWithSuggestionsUsing",gm(mm().mark((function t(){return mm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Em({file_tree_provider:e,open_editors_provider:r,context:n,with_suggestions:!0,auto_accept:!1,show_quick_pick:!0}));case 1:case"end":return t.stop()}}),t)}))))]}function Tm(e){return Tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tm(e)}function jm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Cm(){Cm=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Tm(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Tm(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Pm(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Am(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Pm(i,n,o,a,s,"next",e)}function s(e){Pm(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Im(e,t,r,n,o){return Nm.apply(this,arguments)}function Nm(){return Nm=Am(Cm().mark((function e(r,n,o,i,a){var s,c,u,l,p,h,f,d,m,v,g,y,b,w,x,_,k,E,S;return Cm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.window.activeTextEditor){e.next=4;break}return t.window.showErrorMessage("No active text editor found. Please open a file to use this command."),e.abrupt("return");case 4:if(i.is_connected_with_browser()){e.next=7;break}return t.window.showInformationMessage("Could not connect to the web browser. Please check if it is running and if the connector extension is installed."),e.abrupt("return");case 7:return c=r.workspaceState.get("lastFimPrompt")||"",e.next=10,t.window.showInputBox({placeHolder:"Enter optional suggestions",prompt:'e.g., "Avoid writing comments"',value:c});case 10:if(void 0!==(u=e.sent)){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,r.workspaceState.update("lastFimPrompt",u||"");case 15:return l=new B(n,o),e.prev=16,h=s.document,f=s.selection.active,d=h.uri.fsPath,m=h.getText(new t.Range(new t.Position(0,0),f)),v=h.getText(new t.Range(f,h.positionAt(h.getText().length))),e.next=24,l.collect_files({exclude_path:d});case 24:if(g=e.sent,y=null===(p=t.workspace.workspaceFolders)||void 0===p?void 0:p[0].uri.fsPath,b=d.replace(y+"/",""),w=t.workspace.getConfiguration("codeWebChat"),x=w.get("chatCodeCompletionsInstructions"),_="".concat(x).concat(u?" Follow suggestions: ".concat(u):""),k="".concat(_,"\n<files>\n").concat(g,'<file path="').concat(b,'">\n<![CDATA[\n').concat(m,"<missing text>").concat(v,"\n]]>\n</file>\n</files>\n").concat(_),!u){e.next=36;break}return E=r.workspaceState.get("code-completions-history",[]),S=[u].concat((O=E,function(e){if(Array.isArray(e))return jm(e)}(O)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(O)||function(e,t){if(e){if("string"==typeof e)return jm(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jm(e,t):void 0}}(O)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).slice(0,100),e.next=36,r.workspaceState.update("code-completions-history",S);case 36:i.initialize_chats(k,a),e.next=43;break;case 39:e.prev=39,e.t0=e.catch(16),console.error("Error in FIM in Chat:",e.t0),t.window.showErrorMessage("Error in FIM in Chat: "+e.t0.message);case 43:case"end":return e.stop()}var O}),e,null,[[16,39]])}))),Nm.apply(this,arguments)}function Fm(e){return e.filter((function(e){return!(e.promptPrefix&&""!=e.promptPrefix.trim()||e.promptSuffix&&""!=e.promptSuffix.trim())}))}function Dm(e,r,n,o){return t.commands.registerCommand("codeWebChat.codeCompletionInChatWith",Am(Cm().mark((function i(){var a,s,c,u,l;return Cm().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=t.workspace.getConfiguration("codeWebChat"),s=a.get("presets",[]),0!=(c=Fm(s)).length){i.next=6;break}return t.window.showWarningMessage("No available presets without prefixes or suffixes. Please create a preset without affixes for FIM."),i.abrupt("return");case 6:return u=c.map((function(e){return{label:e.name,description:"".concat(e.chatbot).concat(e.model?" - ".concat(e.model):"")}})),i.next=9,t.window.showQuickPick(u,{placeHolder:"Choose preset"});case 9:if(l=i.sent){i.next=12;break}return i.abrupt("return");case 12:return i.next=14,Im(e,r,n,o,[l.label]);case 14:case"end":return i.stop()}}),i)}))))}function Rm(e,r,n,o){return t.commands.registerCommand("codeWebChat.codeCompletionInChat",Am(Cm().mark((function i(){var a,s,c,u,l,p,h;return Cm().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=t.workspace.getConfiguration("codeWebChat"),s=a.get("presets",[]),0!=(c=Fm(s)).length){i.next=6;break}return t.window.showWarningMessage("No available presets without prefixes or suffixes. Please create a preset without affixes for FIM."),i.abrupt("return");case 6:if(u=e.globalState.get("selectedPresets",[]),(l=u.filter((function(e){return c.some((function(t){return t.name==e}))}))).length){i.next=20;break}return p=c.map((function(e){return{label:e.name,description:"".concat(e.chatbot).concat(e.model?" - ".concat(e.model):""),picked:!1}})),i.next=12,t.window.showQuickPick(p,{placeHolder:"Select one or more chat presets for FIM",canPickMany:!0});case 12:if((h=i.sent)&&0!=h.length){i.next=15;break}return i.abrupt("return");case 15:return u=h.map((function(e){return e.label})),i.next=18,e.globalState.update("selectedPresets",u);case 18:i.next=24;break;case 20:if(u=l,l.length===u.length){i.next=24;break}return i.next=24,e.globalState.update("selectedPresets",l);case 24:return i.next=26,Im(e,r,n,o,u);case 26:case"end":return i.stop()}}),i)}))))}function Lm(e){return Lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lm(e)}function Gm(){Gm=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Lm(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Lm(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function qm(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Mm(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){qm(i,n,o,a,s,"next",e)}function s(e){qm(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Um(e,t){return Bm.apply(this,arguments)}function Bm(){return Bm=Mm(Gm().mark((function e(r,n){var o,i,a,s,c,u,l,p,h,f,d,m,v,g,y,b=arguments;return Gm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=b.length>2&&void 0!==b[2]&&b[2],i=t.window.activeTextEditor){e.next=5;break}return t.window.showErrorMessage("No active editor found."),e.abrupt("return");case 5:if(!o){e.next=11;break}return e.next=8,t.window.showInputBox({placeHolder:"Enter suggestions for code completion (optional)",prompt:"Provide guidance for the AI to follow when completing your code"});case 8:if(void 0!==(a=e.sent)){e.next=11;break}return e.abrupt("return");case 11:return s=i.document,c=s.uri.fsPath,u=i.selection.active,l=s.getText(new t.Range(new t.Position(0,0),u)),p=s.getText(new t.Range(u,s.positionAt(s.getText().length))),h=new B(r,n),e.prev=17,e.next=20,h.collect_files({exclude_path:c});case 20:return f=e.sent,d={before:"<files>".concat(f,'\n<file path="').concat(t.workspace.asRelativePath(s.uri),'">\n<![CDATA[\n').concat(l),after:"".concat(p,"\n]]>\n</file>\n</files>")},m=t.workspace.getConfiguration("codeWebChat"),v=m.get("chatCodeCompletionsInstructions"),g="".concat(v).concat(a?" Follow suggestions: ".concat(a):""),y="".concat(g,"\n").concat(d.before,"<missing text>").concat(d.after,"\n").concat(g),e.next=28,t.env.clipboard.writeText(y);case 28:t.window.showInformationMessage("Code completion prompt has been copied to clipboard."),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(17),t.window.showErrorMessage("Failed to collect files: ".concat(e.t0.message));case 34:case"end":return e.stop()}}),e,null,[[17,31]])}))),Bm.apply(this,arguments)}function zm(e,r){return t.commands.registerCommand("codeWebChat.codeCompletionToClipboard",Mm(Gm().mark((function t(){return Gm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Um(e,r,!1);case 2:case"end":return t.stop()}}),t)}))))}function Wm(e,r){return t.commands.registerCommand("codeWebChat.codeCompletionWithSuggestionsToClipboard",Mm(Gm().mark((function t(){return Gm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Um(e,r,!0);case 2:case"end":return t.stop()}}),t)}))))}function $m(e){return $m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$m(e)}function Vm(){Vm=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==$m(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError($m(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Hm(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Ym(e){return Ym="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ym(e)}function Jm(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Zm(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Km(){Km=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Ym(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Ym(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Qm(e){return function(e){if(Array.isArray(e))return Xm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Zm(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zm(e,t){if(e){if("string"==typeof e)return Xm(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xm(e,t):void 0}}function Xm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ev(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function tv(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ev(i,n,o,a,s,"next",e)}function s(e){ev(i,n,o,a,s,"throw",e)}a(void 0)}))}}function rv(e){return t.commands.registerCommand("codeWebChat.generateCommitMessage",function(){var r=tv(Km().mark((function r(n){var o,i,a,s,u,p,h,f,d,m,v,g,y,b,w,x,_,k;return Km().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.extensions.getExtension("vscode.git")){r.next=4;break}return t.window.showErrorMessage("Git extension not found."),r.abrupt("return");case 4:if(i=o.exports.getAPI(1),(a=i.repositories)&&0!=a.length){r.next=9;break}return t.window.showErrorMessage("No Git repository found."),r.abrupt("return");case 9:if(s=a.find((function(e){var t;return e.rootUri.toString()==(null===(t=n.rootUri)||void 0===t?void 0:t.toString())}))){r.next=13;break}return t.window.showErrorMessage("Repository not found."),r.abrupt("return");case 13:if(r.prev=13,0!=(s.state.indexChanges||[]).length){r.next=20;break}return r.next=18,s.add([]);case 18:return r.next=20,new Promise((function(e){return setTimeout(e,500)}));case 20:if((u=(0,wp.execSync)("git diff --staged",{cwd:s.rootUri.fsPath}).toString())&&0!=u.length){r.next=24;break}return t.window.showInformationMessage("No changes to commit."),r.abrupt("return");case 24:return p=t.workspace.getConfiguration("codeWebChat"),h=p.get("commitMessageInstructions"),f=new Set(p.get("ignoredExtensions",[]).map((function(e){return e.toLowerCase().replace(/^\./,"")}))),d=new Set([].concat(Qm(c),Qm(f))),m=new Li(e),r.next=31,m.get_commit_messages_tool_config();case 31:if(v=r.sent){r.next=36;break}return t.window.showErrorMessage("Commit Messages tool is not configured. Go to Code Web Chat panel -> Settings tab."),l.warn({function_name:"generate_commit_message_command",message:"Commit Messages tool is not configured."}),r.abrupt("return");case 36:return r.next=38,m.get_provider(v.provider_name);case 38:if(g=r.sent){r.next=43;break}return t.window.showErrorMessage("API provider not found for Commit Messages tool. Go to Code Web Chat panel -> Settings tab."),l.warn({function_name:"generate_commit_message_command",message:"API provider not found for Commit Messages tool."}),r.abrupt("return");case 43:if(g.api_key){r.next=46;break}return t.window.showErrorMessage("API key is missing for the selected provider. Please add it in the settings."),r.abrupt("return");case 46:return y="","built-in"==g.type?(b=Oi[g.name],y=b.base_url):y=g.base_url,r.next=50,nv(s,d);case 50:return w=r.sent,x="".concat(w,"\n").concat(h,"\n").concat(u),l.log({function_name:"generate_commit_message_command",message:"Getting commit message...",data:x}),_=Math.ceil(x.length/4),k=_>1e3?Math.ceil(_/1e3)+"K":_,r.next=57,t.window.withProgress({location:t.ProgressLocation.Notification,title:"Waiting for a commit message... (Sent ~".concat(k," tokens)"),cancellable:!0},function(){var e=tv(Km().mark((function e(r,n){var o,i,a,c;return Km().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={messages:[{role:"user",content:x}],model:v.model,temperature:v.temperature},i=Al.CancelToken.source(),n.onCancellationRequested((function(){i.cancel("Operation cancelled by user")})),e.prev=4,e.next=7,Td(y,g.api_key,o,i.token);case 7:(a=e.sent)?(p=void 0,p=a.trim(),r=c=1==(p.match(/\.\s/g)||[]).length?p:p.endsWith(".")?p.slice(0,-1):p,u=void 0,u=r.trim(),c=u.startsWith('"')&&u.endsWith('"')&&u.length>=2?u.slice(1,-1).trim():r,s.inputBox.value=c):t.window.showErrorMessage("Failed to generate commit message."),e.next=18;break;case 11:if(e.prev=11,e.t0=e.catch(4),!Al.isCancel(e.t0)){e.next=16;break}return t.window.showInformationMessage("Commit message generation cancelled."),e.abrupt("return");case 16:throw l.error({function_name:"generate_commit_message_command",message:"Error during API request",data:e.t0}),e.t0;case 18:case"end":return e.stop()}var r,u,p}),e,null,[[4,11]])})));return function(t,r){return e.apply(this,arguments)}}());case 57:r.next=63;break;case 59:r.prev=59,r.t0=r.catch(13),l.error({function_name:"generate_commit_message_command",message:"Error generating commit message",data:r.t0}),t.window.showErrorMessage("Error generating commit message. See console for details.");case 63:case"end":return r.stop()}}),r,null,[[13,59]])})));return function(e){return r.apply(this,arguments)}}())}function nv(e,t){return ov.apply(this,arguments)}function ov(){return ov=tv(Km().mark((function e(t,o){var i,a,s,c,p,h,f,d,m;return Km().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=t.rootUri.fsPath,(a=t.state.indexChanges||[]).length){e.next=5;break}return e.abrupt("return","");case 5:s="<files>\n",c=Jm(a),e.prev=7,c.s();case 9:if((p=c.n()).done){e.next=18;break}if(h=p.value,f=h.uri.fsPath,d=n.relative(i,f),!u(f,o)){e.next=15;break}return e.abrupt("continue",16);case 15:try{if(m="",6!=h.status)try{m=r.readFileSync(f,"utf8"),Math.ceil(m.length/4)>2e4&&(m="[Large file not included]\n")}catch(e){l.error({function_name:"collect_affected_files",message:"Error reading file ".concat(f),data:e})}s+='<file path="'.concat(d,'">\n<![CDATA[\n').concat(m,"\n]]>\n</file>\n")}catch(e){l.error({function_name:"collect_affected_files",message:"Error processing file ".concat(f),data:e})}case 16:e.next=9;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(7),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return s+="</files>",e.abrupt("return",s);case 30:return e.prev=30,e.t1=e.catch(0),l.error({function_name:"collect_affected_files",message:"Error collecting changed files",data:e.t1}),e.abrupt("return","");case 34:case"end":return e.stop()}}),e,null,[[0,30],[7,20,23,26]])}))),ov.apply(this,arguments)}function iv(e){return iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iv(e)}function av(){av=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==iv(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(iv(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function sv(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function cv(e){return cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cv(e)}function uv(){uv=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==cv(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(cv(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function lv(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function pv(e){return pv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pv(e)}function hv(){hv=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==pv(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(pv(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function fv(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function dv(e){return t.commands.registerCommand("codeWebChat.openFileFromWorkspace",function(){var r,n=(r=hv().mark((function r(n){return hv().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e&&e.mark_opened_from_workspace_view(n.fsPath),r.next=3,t.commands.executeCommand("vscode.open",n);case 3:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){fv(i,n,o,a,s,"next",e)}function s(e){fv(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}())}function mv(e){return t.commands.registerCommand(e.command,(function(){t.env.openExternal(t.Uri.parse(e.url)).then((function(e){e||t.window.showErrorMessage("Failed to open url in a web browser.")}))}))}function vv(e){return vv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vv(e)}function gv(){gv=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==vv(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(vv(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function yv(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function bv(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){yv(i,n,o,a,s,"next",e)}function s(e){yv(i,n,o,a,s,"throw",e)}a(void 0)}))}}function wv(e){return xv.apply(this,arguments)}function xv(){return xv=bv(gv().mark((function e(r){var n,o,i,a,s,c,u,p,h,f,d,m,v,g=arguments;return gv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.length>1&&void 0!==g[1]&&g[1],o=g.length>2?g[2]:void 0,e.next=4,r.get_file_refactoring_tool_configs();case 4:if(0!==(i=e.sent).length){e.next=9;break}return t.window.showErrorMessage("File Refactoring tool is not configured. Go to Code Web Chat panel -> Settings tab."),l.warn({function_name:"get_refactor_config",message:"File Refactoring tool is not configured."}),e.abrupt("return");case 9:if(a=null,n){e.next=14;break}return e.next=13,r.get_default_file_refactoring_config();case 13:a=e.sent;case 14:if(a&&!n){e.next=30;break}return s={iconPath:new t.ThemeIcon("chevron-up"),tooltip:"Move up"},c={iconPath:new t.ThemeIcon("chevron-down"),tooltip:"Move down"},u={iconPath:new t.ThemeIcon("star"),tooltip:"Set as default"},p={iconPath:new t.ThemeIcon("star-full"),tooltip:"Unset default"},h=function(){var e=bv(gv().mark((function e(){var t;return gv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get_default_file_refactoring_config();case 2:return t=e.sent,e.abrupt("return",i.map((function(e,r){var n=[],o=t&&t.provider_type==e.provider_type&&t.provider_name==e.provider_name&&t.model==e.model;return i.length>1&&(r>0&&n.push(s),r<i.length-1&&n.push(c)),o?n.push(p):n.push(u),{label:e.model,description:"".concat(e.provider_name).concat(o?" • default configuration":""),config:e,index:r,buttons:n}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=t.window.createQuickPick(),e.next=23,h();case 23:return d=e.sent,f.items=d,f.placeholder="Select file refactoring configuration",f.matchOnDescription=!0,(m=o.globalState.get(Vo,0))>=0&&m<d.length?f.activeItems=[d[m]]:d.length>0&&(f.activeItems=[d[0]]),e.abrupt("return",new Promise((function(e){f.onDidTriggerItemButton(function(){var e=bv(gv().mark((function e(t){var n,o,a,s,c;return gv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.item,o=t.button,a=n.index,o!==u){e.next=11;break}return e.next=6,r.set_default_file_refactoring_config(i[a]);case 6:return e.next=8,h();case 8:f.items=e.sent,e.next=39;break;case 11:if(o!==p){e.next=19;break}return e.next=14,r.set_default_file_refactoring_config(null);case 14:return e.next=16,h();case 16:f.items=e.sent,e.next=39;break;case 19:if(!("Move up"==o.tooltip&&a>0)){e.next=30;break}return s=i[a],i[a]=i[a-1],i[a-1]=s,e.next=25,r.save_file_refactoring_tool_configs(i);case 25:return e.next=27,h();case 27:f.items=e.sent,e.next=39;break;case 30:if(!("Move down"==o.tooltip&&a<i.length-1)){e.next=39;break}return c=i[a],i[a]=i[a+1],i[a+1]=c,e.next=36,r.save_file_refactoring_tool_configs(i);case 36:return e.next=38,h();case 38:f.items=e.sent;case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f.onDidAccept(bv(gv().mark((function n(){var i,a;return gv().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=f.selectedItems[0],f.hide(),i){n.next=5;break}return e(void 0),n.abrupt("return");case 5:return o.globalState.update(Vo,i.index),n.next=8,r.get_provider(i.config.provider_name);case 8:if(a=n.sent){n.next=14;break}return t.window.showErrorMessage("API provider not found for File Refactoring tool. Go to Code Web Chat panel -> Settings tab."),l.warn({function_name:"get_refactor_config",message:"API provider not found for File Refactoring tool."}),e(void 0),n.abrupt("return");case 14:e({provider:a,config:i.config});case 15:case"end":return n.stop()}}),n)})))),f.onDidHide((function(){f.dispose(),e(void 0)})),f.show()})));case 30:return e.next=32,r.get_provider(a.provider_name);case 32:if(v=e.sent){e.next=37;break}return t.window.showErrorMessage("API provider not found for File Refactoring tool. Go to Code Web Chat panel -> Settings tab."),l.warn({function_name:"get_refactor_config",message:"API provider not found for File Refactoring tool."}),e.abrupt("return");case 37:return e.abrupt("return",{provider:v,config:a});case 38:case"end":return e.stop()}}),e)}))),xv.apply(this,arguments)}function _v(e){return kv.apply(this,arguments)}function kv(){return kv=bv(gv().mark((function e(r){var n,o,i,a,s,c,u,p,h,f,d,m,v,g,y,b,w,x,_,k,E,S,O,T,j,C,P,A,I;return gv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Li(r.context),o=t.window.activeTextEditor){e.next=5;break}return t.window.showErrorMessage("No active editor found."),e.abrupt("return");case 5:if(i=r.context.workspaceState.get(Lo)){e.next=15;break}return a=r.context.globalState.get("lastRefactoringInstruction",""),e.next=10,t.window.showInputBox({prompt:"Enter refactoring instructions",placeHolder:'e.g., "Refactor this code to use async/await"',value:a,validateInput:function(e){return r.context.globalState.update("lastRefactoringInstruction",e),null}});case 10:if(i=e.sent){e.next=13;break}return e.abrupt("return");case 13:e.next=17;break;case 15:return e.next=17,r.context.workspaceState.update(Lo,void 0);case 17:return e.next=19,wv(n,r.show_quick_pick,r.context);case 19:if(s=e.sent){e.next=22;break}return e.abrupt("return");case 22:if(c=s.provider,(u=s.config).provider_name){e.next=29;break}return t.window.showErrorMessage("API provider is not specified for File Refactoring tool. Go to Code Web Chat panel -> Settings tab."),l.warn({function_name:"perform_refactor",message:"API provider is not specified for File Refactoring tool."}),e.abrupt("return");case 29:if(u.model){e.next=33;break}return t.window.showErrorMessage("Model is not specified for File Refactoring tool. Go to Code Web Chat panel -> Settings tab."),l.warn({function_name:"perform_refactor",message:"Model is not specified for File Refactoring tool."}),e.abrupt("return");case 33:if(c.api_key){e.next=36;break}return t.window.showErrorMessage("API key is missing. Please add it in the settings."),e.abrupt("return");case 36:if(p="","built-in"!=c.type){e.next=46;break}if(h=Oi[c.name]){e.next=43;break}return t.window.showErrorMessage('Built-in provider "'.concat(c.name,'" not found. Go to Code Web Chat panel -> Settings tab.')),l.warn({function_name:"perform_refactor",message:'Built-in provider "'.concat(c.name,'" not found.')}),e.abrupt("return");case 43:p=h.base_url,e.next=47;break;case 46:p=c.base_url;case 47:return f=o.document,d=f.uri.fsPath,m=f.getText(),v=m,g=t.workspace.asRelativePath(f.uri),y=void 0,t.workspace.workspaceFolders&&t.workspace.workspaceFolders.length>1&&(b=t.workspace.getWorkspaceFolder(f.uri))&&(y=b.name),w=new B(r.file_tree_provider,r.open_editors_provider),e.next=57,w.collect_files({exclude_path:d});case 57:return x=e.sent,_=t.workspace.asRelativePath(f.uri),k=o.selection,E=o.document.getText(k),S=Cd(g),S+=E?" Regarding the following snippet ```".concat(E,"``` ").concat(i):" ".concat(i),O="<files>".concat(x,'\n<file path="').concat(_,'"><![CDATA[').concat(m,"]]></file>\n</files>"),T="".concat(S,"\n").concat(O,"\n").concat(S),j={messages:[{role:"user",content:T}],model:u.model,temperature:u.temperature},l.log({function_name:"perform_refactor",message:"Refactor Prompt:",data:T}),C=Al.CancelToken.source(),P=m.length,A="",I=!1,e.next=74,t.window.withProgress({location:t.ProgressLocation.Notification,title:"Updating file...",cancellable:!0},function(){var e=bv(gv().mark((function e(r,n){var o;return gv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.onCancellationRequested((function(){C.cancel("Cancelled by user.")})),e.prev=1,e.next=4,Td(p,c.api_key,j,C.token,(function(e){r.report({increment:e.length/P*100})}));case 4:return(o=e.sent)&&(A=Kh({content:o})),I=!0,e.abrupt("return",!0);case 10:if(e.prev=10,e.t0=e.catch(1),!Al.isCancel(e.t0)){e.next=14;break}return e.abrupt("return",!1);case 14:return l.error({function_name:"perform_refactor",message:"Refactoring error",data:e.t0}),t.window.showErrorMessage("An error occurred during refactoring. See console for details."),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r){return e.apply(this,arguments)}}()).then(bv(gv().mark((function e(){var n;return gv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I||!A){e.next=21;break}return n=new t.Range(f.positionAt(0),f.positionAt(m.length)),e.next=4,o.edit((function(e){e.replace(n,A)}));case 4:return e.next=6,t.commands.executeCommand("editor.action.formatDocument",f.uri);case 6:return e.next=8,f.save();case 8:return e.next=10,r.context.workspaceState.update(Do,[{file_path:g,content:v,is_new:!1,workspace_name:y}]);case 10:return e.next=12,t.window.showInformationMessage("File has been refactored.","Revert");case 12:if("Revert"!=e.sent){e.next=21;break}return e.next=16,o.edit((function(e){var r=new t.Range(f.positionAt(0),f.positionAt(f.getText().length));e.replace(r,v)}));case 16:return e.next=18,f.save();case 18:return t.window.showInformationMessage("Refactoring has been reverted."),e.next=21,r.context.workspaceState.update(Do,null);case 21:case"end":return e.stop()}}),e)}))));case 74:case"end":return e.stop()}}),e)}))),kv.apply(this,arguments)}function Ev(e){return[t.commands.registerCommand("codeWebChat.refactor",bv(gv().mark((function t(){return gv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_v({context:e.context,file_tree_provider:e.workspace_provider,open_editors_provider:e.open_editors_provider,show_quick_pick:!1}));case 1:case"end":return t.stop()}}),t)})))),t.commands.registerCommand("codeWebChat.refactorUsing",bv(gv().mark((function t(){return gv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_v({context:e.context,file_tree_provider:e.workspace_provider,open_editors_provider:e.open_editors_provider,show_quick_pick:!0}));case 1:case"end":return t.stop()}}),t)}))))]}function Sv(e){return Sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv(e)}function Ov(){Ov=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Sv(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Sv(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Tv(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function jv(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Tv(i,n,o,a,s,"next",e)}function s(e){Tv(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Cv(e,r,n){return t.commands.registerCommand("codeWebChat.refactorToClipboard",jv(Ov().mark((function o(){var i,a,s,c,u,l,p,h,f,d,m,v,g;return Ov().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=t.window.activeTextEditor){o.next=4;break}return t.window.showErrorMessage("No active editor found."),o.abrupt("return");case 4:return a=i.document,s=a.uri.fsPath,c=a.getText(),u=e.globalState.get("lastRefactoringInstruction",""),o.next=10,t.window.showInputBox({prompt:"Enter refactoring instructions",placeHolder:'e.g., "Refactor this code to use async/await"',value:u,validateInput:function(t){return e.globalState.update("lastRefactoringInstruction",t),null}});case 10:if(l=o.sent){o.next=13;break}return o.abrupt("return");case 13:return p=t.workspace.asRelativePath(a.uri),h=i.selection,f=i.document.getText(h),d=Cd(p),d+=f?" Regarding the following snippet ```".concat(f,"``` ").concat(l):" ".concat(l),m=new B(r,n),o.next=21,m.collect_files({exclude_path:s});case 21:return v=o.sent,g="".concat(d,"\n<files>\n").concat(v,'\n<file path="').concat(p,'">\n<![CDATA[\n').concat(c,"\n]]>\n</file>\n</files>\n").concat(d),o.next=25,t.env.clipboard.writeText(g);case 25:t.window.showInformationMessage("Refactoring instruction prompt copied to clipboard!");case 26:case"end":return o.stop()}}),o)}))))}function Pv(e){return Pv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pv(e)}function Av(){Av=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Pv(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Pv(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Iv(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Nv(e,r){return t.commands.registerCommand("codeWebChat.referenceInChat",function(){var o,i=(o=Av().mark((function o(i){var a,s,c,u,l;return Av().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e&&r){o.next=2;break}return o.abrupt("return");case 2:if(a=i.resourceUri.fsPath,s=r.get_workspace_root_for_file(a)){o.next=7;break}return t.window.showWarningMessage("Cannot reference file outside of the workspace."),o.abrupt("return");case 7:if(ee.getInstance().get_checked_files().includes(a)){o.next=13;break}return c=new I(n.basename(a),i.resourceUri,t.TreeItemCollapsibleState.None,!1,t.TreeItemCheckboxState.Checked,!1,!1,!1),o.next=13,r.update_check_state(c,t.TreeItemCheckboxState.Checked);case 13:u=n.relative(s,a),l="`".concat(u,"`"),e.add_text_at_cursor_position(l);case 16:case"end":return o.stop()}}),o)})),function(){var e=this,t=arguments;return new Promise((function(r,n){var i=o.apply(e,t);function a(e){Iv(i,r,n,a,s,"next",e)}function s(e){Iv(i,r,n,a,s,"throw",e)}a(void 0)}))});return function(e){return i.apply(this,arguments)}}())}function Fv(e){return Fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(e)}function Dv(){Dv=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Fv(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Fv(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Rv(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Lv(e){return Lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lv(e)}function Gv(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return qv(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qv(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function qv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Mv(){Mv=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Lv(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Lv(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Uv(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Bv(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Uv(i,n,o,a,s,"next",e)}function s(e){Uv(i,n,o,a,s,"throw",e)}a(void 0)}))}}function zv(e){return Wv.apply(this,arguments)}function Wv(){return Wv=Bv(Mv().mark((function e(n){var o,i,a,s,c,u,l;return Mv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=n.workspaceState.get(Do))&&0!=o.length){e.next=4;break}return t.window.showInformationMessage("No recent changes found to revert or changes were already reverted."),e.abrupt("return",!1);case 4:if(e.prev=4,0!=(null===(i=t.workspace.workspaceFolders)||void 0===i?void 0:i.length)){e.next=8;break}return t.window.showErrorMessage("No workspace folder open."),e.abrupt("return",!1);case 8:a=new Map,t.workspace.workspaceFolders.forEach((function(e){a.set(e.name,e.uri.fsPath)})),s=t.workspace.workspaceFolders[0].uri.fsPath,c=Gv(o),e.prev=12,l=Mv().mark((function e(){var n,o,i,c,l,p,h,f,d,m,v;return Mv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.value,o=s,n.workspace_name&&(o=a.get(n.workspace_name)||s),i=of(o,n.file_path)){e.next=7;break}return console.error("Cannot revert file with unsafe path: ".concat(n.file_path)),e.abrupt("return",1);case 7:if(!n.is_new){e.next=33;break}if(!r.existsSync(i)){e.next=31;break}c=t.Uri.file(i),l=t.window.visibleTextEditors.filter((function(e){return e.document.uri.toString()===c.toString()})),p=Gv(l),e.prev=12,p.s();case 14:if((h=p.n()).done){e.next=22;break}return f=h.value,e.next=18,t.window.showTextDocument(f.document,{preview:!1,preserveFocus:!1});case 18:return e.next=20,t.commands.executeCommand("workbench.action.closeActiveEditor");case 20:e.next=14;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(12),p.e(e.t0);case 27:return e.prev=27,p.f(),e.finish(27);case 30:r.unlinkSync(i);case 31:e.next=51;break;case 33:return d=t.Uri.file(i),e.prev=34,e.next=37,t.workspace.openTextDocument(d);case 37:return m=e.sent,e.next=40,t.window.showTextDocument(m);case 40:return v=e.sent,e.next=43,v.edit((function(e){e.replace(new t.Range(m.positionAt(0),m.positionAt(m.getText().length)),n.content)}));case 43:return e.next=45,m.save();case 45:e.next=51;break;case 47:e.prev=47,e.t1=e.catch(34),console.error("Error reverting file ".concat(n.file_path,":"),e.t1),t.window.showWarningMessage("Could not revert file: ".concat(n.file_path,". It might have been closed or deleted."));case 51:case"end":return e.stop()}}),e,null,[[12,24,27,30],[34,47]])})),c.s();case 15:if((u=c.n()).done){e.next=21;break}return e.delegateYield(l(),"t0",17);case 17:if(!e.t0){e.next=19;break}return e.abrupt("continue",19);case 19:e.next=15;break;case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(12),c.e(e.t1);case 26:return e.prev=26,c.f(),e.finish(26);case 29:return n.workspaceState.update(Do,null),t.window.showInformationMessage("Changes successfully reverted."),e.abrupt("return",!0);case 34:return e.prev=34,e.t2=e.catch(4),console.error("Error during reversion:",e.t2),t.window.showErrorMessage("Failed to revert changes: ".concat(e.t2.message||"Unknown error")),e.abrupt("return",!1);case 39:case"end":return e.stop()}}),e,null,[[4,34],[12,23,26,29]])}))),Wv.apply(this,arguments)}function $v(e){return t.commands.registerCommand("codeWebChat.revert",Bv(Mv().mark((function t(){return Mv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zv(e);case 2:case"end":return t.stop()}}),t)}))))}function Vv(e){return Vv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vv(e)}function Hv(){Hv=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==Vv(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Vv(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function Yv(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Jv(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Yv(i,n,o,a,s,"next",e)}function s(e){Yv(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Kv(e){return function(e){if(Array.isArray(e))return Xv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Zv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qv(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Zv(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Zv(e,t){if(e){if("string"==typeof e)return Xv(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xv(e,t):void 0}}function Xv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eg(e,o,i){var a,s=e.map((function(e){return n.relative(o,e)})),l=new Set(s),p=new Map,h=Qv(s);try{for(h.s();!(a=h.n()).done;){var f=a.value,d=n.dirname(f);p.has(d)||p.set(d,[]),p.get(d).push(f)}}catch(e){h.e(e)}finally{h.f()}var m=t.workspace.getConfiguration("codeWebChat").get("ignoredExtensions",[]),v=new Set([].concat(Kv(c),Kv(m)));function g(e,t){try{if(l.has(e))return!0;var a=n.join(o,e);if(!r.existsSync(a)||!r.lstatSync(a).isDirectory())return!1;var s,c=Qv(r.readdirSync(a));try{for(c.s();!(s=c.n()).done;){var p=s.value,h=n.join(e,p),f=n.join(o,h),d=i.get_workspace_root_for_file(f)||o,m=n.relative(d,f);if(!i.is_excluded(m)&&(r.lstatSync(f).isDirectory()||!u(p,v)))if(r.lstatSync(f).isDirectory()){if(!t.has(h)&&!g(h,t))return!1}else if(!l.has(h))return!1}}catch(e){c.e(e)}finally{c.f()}return!0}catch(t){return console.error("Error checking directory ".concat(e,":"),t),!1}}var y=new Set(s),b=Array.from(p.keys());b.sort((function(e,t){return t.split(n.sep).length-e.split(n.sep).length}));for(var w=0,x=b;w<x.length;w++){var _=x[w];if("."!=_&&g(_,y)){var k,E=Qv(p.get(_));try{for(E.s();!(k=E.n()).done;){var S=k.value;y.delete(S)}}catch(e){E.e(e)}finally{E.f()}y.add(_);for(var O=0,T=Array.from(y);O<T.length;O++){var j=T[O];j!==_&&j.startsWith(_+n.sep)&&y.delete(j)}}}b.sort((function(e,t){return e.split(n.sep).length-t.split(n.sep).length}));for(var C=function(){var e=A[P];if("."==e)return 1;var t=n.dirname(e);if("."!=t){var a=r.readdirSync(n.join(o,t)).map((function(e){return n.join(t,e)})).filter((function(e){var t=n.join(o,e),a=i.get_workspace_root_for_file(t)||o,s=n.relative(a,t);return r.existsSync(t)&&r.lstatSync(t).isDirectory()&&!i.is_excluded(s)})),s=a.every((function(e){return y.has(e)}));if(s&&a.length>0){var c,u=Qv(a);try{for(u.s();!(c=u.n()).done;){var l=c.value;y.delete(l)}}catch(e){u.e(e)}finally{u.f()}y.add(t)}}},P=0,A=b;P<A.length;P++)C();return Array.from(y)}function tg(e,t){if(e.length!=t.length)return!1;var r=new Set(e);return t.every((function(e){return r.has(e)}))}function rg(e,r){var n=t.workspace.workspaceFolders||[],o=n.find((function(e){return e.uri.fsPath==r}));return!o||n.length<=1?e:e.map((function(e){return"".concat(o.name,":").concat(e)}))}function ng(e){var r=t.workspace.workspaceFolders||[],n=new Map;r.forEach((function(e){n.set(e.uri.fsPath,[])}));var o,i=Qv(e);try{var a=function(){var e=o.value,t=r.find((function(t){return e.startsWith(t.uri.fsPath)}));if(t){var i=n.get(t.uri.fsPath)||[];i.push(e),n.set(t.uri.fsPath,i)}};for(i.s();!(o=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}return n}function og(e,o){return t.commands.registerCommand("codeWebChat.saveContext",Jv(Hv().mark((function i(){var a,s,c,u,l,p,h,f,d,m,v,g,y,b,w,x,_,k,E,S,O,T,j,C,P,A,I,N,F,D,R;return Hv().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e){i.next=3;break}return t.window.showErrorMessage("Workspace provider is not available. Cannot save context."),i.abrupt("return");case 3:if(a=e.getWorkspaceRoot()){i.next=7;break}return t.window.showErrorMessage("No workspace folder found. Cannot save context."),i.abrupt("return");case 7:if(0!=(s=e.get_checked_files()).length){i.next=11;break}return t.window.showWarningMessage("There is nothing to save."),i.abrupt("return");case 11:return c=[],(t.workspace.workspaceFolders||[]).length<=1?(u=eg(s,a,e),c=rg(u,a)):ng(s).forEach((function(t,r){if(0!=t.length){var n=rg(eg(t,r,e),r);c=[].concat(Kv(c),Kv(n))}})),c.sort((function(e,r){var o=t.workspace.workspaceFolders,i=function(e){if(o&&o.length>1){var t,r=Qv(o);try{for(r.s();!(t=r.n()).done;){var n=t.value,i="".concat(n.name,":");if(e.startsWith(i)){if(e.length>i.length)return e.substring(i.length);if(e.length===i.length)return"."}}}catch(e){r.e(e)}finally{r.f()}}return e},a=i(e),s=i(r),c=a.includes(n.sep),u=s.includes(n.sep);return c&&!u?-1:!c&&u?1:e.localeCompare(r)})),l=n.join(a,".vscode","contexts.json"),p=o.workspaceState.get(Go,"internal"),h=[{label:"Workspace State",description:"Save in the editor's internal storage",value:"internal"},{label:"JSON File",description:"Save in .vscode/contexts.json",value:"file"}],"file"==p&&(h=h.reverse()),i.next=21,t.window.showQuickPick(h,{placeHolder:"Where do you want to save this context?"});case 21:if(f=i.sent){i.next=24;break}return i.abrupt("return");case 24:return d=f.value,i.next=27,o.workspaceState.update(Go,d);case 27:if("file"!=d){i.next=97;break}if(i.prev=28,m=n.join(a,".vscode"),r.existsSync(m)||r.mkdirSync(m,{recursive:!0}),v=[],r.existsSync(l))try{(g=r.readFileSync(l,"utf8")).trim().length>0&&(v=JSON.parse(g),Array.isArray(v)||(t.window.showWarningMessage("Contexts file is not a valid array. Starting with empty contexts list."),v=[]))}catch(e){t.window.showWarningMessage("Error reading contexts file. Starting with empty contexts list."+"Details: ".concat(e)),v=[]}if(!(v.length>0)){i.next=52;break}y=Qv(v),i.prev=35,y.s();case 37:if((b=y.n()).done){i.next=44;break}if(!tg((w=b.value).paths,c)){i.next=42;break}return t.window.showInformationMessage('A context with identical paths already exists in the file: "'.concat(w.name,'"')),i.abrupt("return");case 42:i.next=37;break;case 44:i.next=49;break;case 46:i.prev=46,i.t0=i.catch(35),y.e(i.t0);case 49:return i.prev=49,y.f(),i.finish(49);case 52:if(0!=v.length){i.next=60;break}return i.next=55,t.window.showInputBox({prompt:"Enter a name for this context",placeHolder:"e.g., Backend API Context",validateInput:function(e){return e.trim().length>0?null:"Context name cannot be empty."}});case 55:if(x=i.sent){i.next=58;break}return i.abrupt("return");case 58:i.next=82;break;case 60:return _=[{label:"$(add) Create new..."}].concat(Kv(v.map((function(e){return{label:e.name,description:"".concat(e.paths.length," ").concat(e.paths.length>1?"paths":"path")}})))),i.next=63,t.window.showQuickPick(_,{placeHolder:"Select existing context to overwrite or create a new one"});case 63:if(k=i.sent){i.next=66;break}return i.abrupt("return");case 66:if("$(add) Create new..."!=k.label){i.next=81;break}return i.next=69,t.window.showInputBox({prompt:"Enter a name for this context",placeHolder:"e.g., Backend API Context",validateInput:function(e){return e.trim().length>0?null:"Context name cannot be empty."}});case 69:if(x=i.sent){i.next=72;break}return i.abrupt("return");case 72:if(!v.map((function(e){return e.name})).includes(x)){i.next=79;break}return i.next=76,t.window.showWarningMessage('A context named "'.concat(x,'" already exists in the file. Overwrite?'),{modal:!0},"Overwrite");case 76:if("Overwrite"==i.sent){i.next=79;break}return i.abrupt("return");case 79:i.next=82;break;case 81:x=k.label;case 82:if(x){i.next=85;break}return t.window.showErrorMessage("Context name was not provided."),i.abrupt("return");case 85:E={name:x,paths:c},-1!=(S=v.findIndex((function(e){return e.name==x})))?v[S]=E:v.push(E),v.sort((function(e,t){return e.name.localeCompare(t.name)})),r.writeFileSync(l,JSON.stringify(v,null,2),"utf8"),t.window.showInformationMessage('Context "'.concat(x,'" saved to .vscode/contexts.json successfully.')),i.next=96;break;case 93:i.prev=93,i.t1=i.catch(28),t.window.showErrorMessage("Error saving context to file: ".concat(i.t1.message));case 96:return i.abrupt("return");case 97:if(!((O=o.workspaceState.get(Ro,[])).length>0)){i.next=117;break}T=Qv(O),i.prev=100,T.s();case 102:if((j=T.n()).done){i.next=109;break}if(!tg((C=j.value).paths,c)){i.next=107;break}return t.window.showInformationMessage('A context with identical paths already exists in Workspace State: "'.concat(C.name,'"')),i.abrupt("return");case 107:i.next=102;break;case 109:i.next=114;break;case 111:i.prev=111,i.t2=i.catch(100),T.e(i.t2);case 114:return i.prev=114,T.f(),i.finish(114);case 117:if(0!=O.length){i.next=125;break}return i.next=120,t.window.showInputBox({prompt:"Enter a name for this context",placeHolder:"e.g., Backend API Context",validateInput:function(e){return e.trim().length>0?null:"Context name cannot be empty."}});case 120:if(P=i.sent){i.next=123;break}return i.abrupt("return");case 123:i.next=147;break;case 125:return A=O.map((function(e){return e.name})),I=[{label:"$(add) Create new..."}].concat(Kv(O.map((function(e){return{label:e.name,description:"".concat(e.paths.length," ").concat(e.paths.length>1?"paths":"path")}})))),i.next=129,t.window.showQuickPick(I,{placeHolder:"Select existing context to overwrite or create a new one"});case 129:if(N=i.sent){i.next=132;break}return i.abrupt("return");case 132:if("$(add) Create new..."!=N.label){i.next=146;break}return i.next=135,t.window.showInputBox({prompt:"Enter a name for this context",placeHolder:"e.g., Backend API Context",validateInput:function(e){return e.trim().length>0?null:"Context name cannot be empty."}});case 135:if(P=i.sent){i.next=138;break}return i.abrupt("return");case 138:if(!A.includes(P)){i.next=144;break}return i.next=141,t.window.showWarningMessage('A context named "'.concat(P,'" already exists in Workspace State. Overwrite?'),{modal:!0},"Overwrite");case 141:if("Overwrite"==i.sent){i.next=144;break}return i.abrupt("return");case 144:i.next=147;break;case 146:P=N.label;case 147:if(P){i.next=150;break}return t.window.showErrorMessage("Context name was not provided."),i.abrupt("return");case 150:return F={name:P,paths:c},D=O.findIndex((function(e){return e.name==P})),R=Kv(O),-1!=D?R[D]=F:R.push(F),R.sort((function(e,t){return e.name.localeCompare(t.name)})),i.prev=155,i.next=158,o.workspaceState.update(Ro,R);case 158:t.window.showInformationMessage('Context "'.concat(P,'" saved to Workspace State successfully.')),i.next=164;break;case 161:i.prev=161,i.t3=i.catch(155),t.window.showErrorMessage("Error saving context to Workspace State: ".concat(i.t3.message));case 164:case"end":return i.stop()}}),i,null,[[28,93],[35,46,49,52],[100,111,114,117],[155,161]])}))))}function ig(e){return ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(e)}function ag(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function sg(){sg=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==ig(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ig(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function cg(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function ug(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){cg(i,n,o,a,s,"next",e)}function s(e){cg(i,n,o,a,s,"throw",e)}a(void 0)}))}}function lg(e,t,r,n,o){return pg.apply(this,arguments)}function pg(){return pg=ug(sg().mark((function e(r,n,o,i,a){var s,c,u,l,p,h,f,d,m,v,g,y,b;return sg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.workspaceState.get("last-chat-prompt")||"",(c=t.window.createInputBox()).placeholder="Ask anything",c.value=s,c.onDidChangeValue(function(){var e=ug(sg().mark((function e(t){return sg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.workspaceState.update("last-chat-prompt",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7,new Promise((function(e){c.onDidAccept((function(){e(c.value),c.hide()})),c.onDidHide((function(){return e(void 0)})),c.show()}));case 7:if(u=e.sent){e.next=10;break}return e.abrupt("return");case 10:return l=r.workspaceState.get("history",[]),p=[u].concat((w=l,function(e){if(Array.isArray(e))return ag(e)}(w)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(w)||function(e,t){if(e){if("string"==typeof e)return ag(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ag(e,t):void 0}}(w)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).slice(0,100),e.next=14,r.workspaceState.update("history",p);case 14:return h=new B(n,o),f="",e.prev=16,d=t.window.activeTextEditor,m=null==d?void 0:d.document.uri.fsPath,e.next=21,h.collect_files({active_path:m});case 21:f=e.sent,e.next=29;break;case 24:return e.prev=24,e.t0=e.catch(16),console.error("Error collecting files:",e.t0),t.window.showErrorMessage("Error collecting files: "+e.t0.message),e.abrupt("return");case 29:u=is(u=xi(u),a),v=t.workspace.getConfiguration("codeWebChat"),g=v.get("editFormat"),(y=v.get("editFormatInstructions".concat(g.charAt(0).toUpperCase()+g.slice(1))))&&(u+="\n".concat(y)),b="".concat(f?"".concat(u,"\n<files>\n").concat(f,"</files>\n"):"").concat(u),i.initialize_chats(b,a);case 37:case"end":return e.stop()}var w}),e,null,[[16,24]])}))),pg.apply(this,arguments)}function hg(e,r,n,o){return t.commands.registerCommand("codeWebChat.webChatWith",ug(sg().mark((function i(){var a,s,c,u;return sg().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o.is_connected_with_browser()){i.next=3;break}return t.window.showInformationMessage("Could not connect to the web browser. Please check if it is running and if the connector extension is installed."),i.abrupt("return");case 3:return a=t.workspace.getConfiguration("codeWebChat"),s=a.get("presets",[]),c=s.map((function(e){return{label:e.name,description:"".concat(e.chatbot).concat(e.model?" - ".concat(e.model):"")}})),i.next=8,t.window.showQuickPick(c,{placeHolder:"Select a chat preset"});case 8:if(u=i.sent){i.next=11;break}return i.abrupt("return");case 11:return i.next=13,lg(e,r,n,o,[u.label]);case 13:case"end":return i.stop()}}),i)}))))}function fg(e,r,n,o){return t.commands.registerCommand("codeWebChat.webChat",ug(sg().mark((function i(){var a,s,c,u,l;return sg().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o.is_connected_with_browser()){i.next=3;break}return t.window.showInformationMessage("Could not connect to the web browser. Please check if it is running and if the connector extension is installed."),i.abrupt("return");case 3:if(a=t.workspace.getConfiguration("codeWebChat"),s=a.get("presets",[]),(c=e.globalState.get("selectedPresets",[])).length){i.next=16;break}return u=s.map((function(e){return{label:e.name,description:"".concat(e.chatbot).concat(e.model?" - ".concat(e.model):""),picked:!1}})),i.next=10,t.window.showQuickPick(u,{placeHolder:"Select one or more chat presets",canPickMany:!0});case 10:if((l=i.sent)&&0!=l.length){i.next=13;break}return i.abrupt("return");case 13:return c=l.map((function(e){return e.label})),i.next=16,e.globalState.update("selectedPresets",c);case 16:return i.next=18,lg(e,r,n,o,c);case 18:case"end":return i.stop()}}),i)}))))}function dg(e){return dg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(e)}function mg(e){return function(e){if(Array.isArray(e))return vg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return vg(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vg(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gg(){gg=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return c(a,"_invoke",function(t,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?4:2,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=4,n.method="throw",n.arg=u.arg)}}}(t,n,new E(o||[])),!0),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(S([])));g&&g!==r&&n.call(g,i)&&(m=g);var y=d.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==dg(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;c(this,"_invoke",(function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(t,r){var n=r.method,o=t.i[n];if(o===e)return r.delegate=null,"throw"===n&&t.i.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=l(o,t.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[t.r]=a.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(e){this.tryEntries.push(e)}function k(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function E(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function S(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(dg(t)+" is not iterable")}return f.prototype=d,c(y,"constructor",d),c(d,"constructor",f),f.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e){a.type="throw",a.arg=t,r.next=e}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],s=this.prev,c=i[1],u=i[2];if(-1===i[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=s){if(s<c)return this.method="next",this.arg=e,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={i:S(t),r,n},"next"===this.method&&(this.arg=e),p}},t}function yg(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function bg(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){yg(i,n,o,a,s,"next",e)}function s(e){yg(i,n,o,a,s,"throw",e)}a(void 0)}))}}var wg=null;function xg(e){return _g.apply(this,arguments)}function _g(){return _g=bg(gg().mark((function e(o){var i,a,s,c,u,l,p;return gg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=wi(o),s=a.workspace_provider,c=a.open_editors_provider,u=a.websites_provider,s&&c&&u){e.next=3;break}return e.abrupt("return");case 3:return wg=new Cp(o,u),l=function(){var e=bg(gg().mark((function e(){return gg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fp(o);case 2:return e.next=4,Bp(o);case 4:return e.next=6,ih(o);case 6:return e.next=8,mh(o);case 8:return e.next=10,kh(o);case 10:return e.next=12,Ch(o);case 12:return e.next=14,Rh(o);case 14:return e.next=16,Yp(o);case 16:return e.next=18,Bh(o);case 18:return e.next=20,Yh(o);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=7,l();case 7:s&&c&&u&&(p=new yp(o.extensionUri,s,c,u,o,wg),o.subscriptions.push(t.window.registerWebviewViewProvider("codeWebChatView",p,{webviewOptions:{retainContextWhenHidden:!0}}),Nv(p,s))),o.subscriptions.push(dv(c)),(i=o.subscriptions).push.apply(i,[rm(o)].concat(mg(Ev({context:o,workspace_provider:s,open_editors_provider:c})),[Cv(o,s,c)],mg(Om(s,c,o)),[zm(s,c),Wm(s,c),Rm(o,s,c,wg),Dm(o,s,c,wg),fg(o,s,c,wg),hg(o,s,c,wg),cm(o,s,c),t.commands.registerCommand("codeWebChat.closeEditor",function(){var e,r=(e=lm().mark((function e(r){var n;return lm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!r.resourceUri){e.next=5;break}if(!((n=t.window.tabGroups.all.flatMap((function(e){return e.tabs.filter((function(e){return e.input instanceof t.TabInputText&&e.input.uri.toString()==r.resourceUri.toString()}))}))).length>0)){e.next=5;break}return e.next=5,t.window.tabGroups.close(n);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){pm(i,n,o,a,s,"next",e)}function s(e){pm(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}()),t.commands.registerCommand("codeWebChat.closeAllEditors",(function(){return t.commands.executeCommand("workbench.action.closeAllEditors")})),t.commands.registerCommand("codeWebChat.saveAll",(function(){return t.commands.executeCommand("workbench.action.files.saveAll")})),t.commands.registerCommand("codeWebChat.newFile",function(){var e,o=(e=av().mark((function e(o){var i,a,s,c,u;return av().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=9;break}if(!(t.workspace.workspaceFolders&&t.workspace.workspaceFolders.length>0)){e.next=5;break}i=t.workspace.workspaceFolders[0].uri.fsPath,e.next=7;break;case 5:return t.window.showErrorMessage("No workspace folder is open"),e.abrupt("return");case 7:e.next=10;break;case 9:o instanceof t.Uri?i=o.fsPath:o.resourceUri&&(i=o.resourceUri.fsPath);case 10:if(i){e.next=13;break}return t.window.showErrorMessage("Could not determine location to create file"),e.abrupt("return");case 13:try{r.statSync(i).isDirectory()||(i=n.dirname(i))}catch(e){}return e.next=16,t.window.showInputBox({prompt:"Enter file name",placeHolder:""});case 16:if(a=e.sent){e.next=19;break}return e.abrupt("return");case 19:if(e.prev=19,s=of(i,a)){e.next=24;break}return t.window.showErrorMessage("Invalid file name: '".concat(a,"'")),e.abrupt("return");case 24:return e.prev=24,e.next=27,t.workspace.fs.stat(t.Uri.file(s));case 27:return t.window.showErrorMessage("File '".concat(n.basename(s),"' already exists.")),e.abrupt("return");case 31:e.prev=31,e.t0=e.catch(24);case 33:return c=n.dirname(s),e.next=36,t.workspace.fs.createDirectory(t.Uri.file(c));case 36:return e.next=38,t.workspace.fs.writeFile(t.Uri.file(s),new Uint8Array);case 38:return e.next=40,t.workspace.openTextDocument(s);case 40:return u=e.sent,e.next=43,t.window.showTextDocument(u);case 43:e.next=48;break;case 45:e.prev=45,e.t1=e.catch(19),t.window.showErrorMessage("Failed to create file: ".concat(e.t1.message));case 48:case"end":return e.stop()}}),e,null,[[19,45],[24,31]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){sv(i,n,o,a,s,"next",e)}function s(e){sv(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return o.apply(this,arguments)}}()),t.commands.registerCommand("codeWebChat.newFolder",function(){var e,o=(e=uv().mark((function e(o){var i,a,s;return uv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=9;break}if(!(t.workspace.workspaceFolders&&t.workspace.workspaceFolders.length>0)){e.next=5;break}i=t.workspace.workspaceFolders[0].uri.fsPath,e.next=7;break;case 5:return t.window.showErrorMessage("No workspace folder is open"),e.abrupt("return");case 7:e.next=10;break;case 9:o instanceof t.Uri?i=o.fsPath:o.resourceUri&&(i=o.resourceUri.fsPath);case 10:if(i){e.next=13;break}return t.window.showErrorMessage("Could not determine location to create folder"),e.abrupt("return");case 13:try{r.statSync(i).isDirectory()||(i=n.dirname(i))}catch(e){}return e.next=16,t.window.showInputBox({prompt:"Enter folder name",placeHolder:""});case 16:if(a=e.sent){e.next=19;break}return e.abrupt("return");case 19:if(e.prev=19,s=of(i,a)){e.next=24;break}return t.window.showErrorMessage("Invalid folder name: '".concat(a,"'")),e.abrupt("return");case 24:return e.prev=24,e.next=27,t.workspace.fs.stat(t.Uri.file(s));case 27:return t.window.showErrorMessage("Folder '".concat(n.basename(s),"' already exists.")),e.abrupt("return");case 31:e.prev=31,e.t0=e.catch(24);case 33:return e.next=35,t.workspace.fs.createDirectory(t.Uri.file(s));case 35:e.next=40;break;case 37:e.prev=37,e.t1=e.catch(19),t.window.showErrorMessage("Failed to create folder: ".concat(e.t1.message));case 40:case"end":return e.stop()}}),e,null,[[19,37],[24,31]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){lv(i,n,o,a,s,"next",e)}function s(e){lv(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return o.apply(this,arguments)}}()),t.commands.registerCommand("codeWebChat.rename",function(){var e,r=(e=Dv().mark((function e(r){var o,i,a,s,c;return Dv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r&&r.resourceUri){e.next=2;break}return e.abrupt("return");case 2:return o=r.resourceUri.fsPath,i=n.dirname(o),a=n.basename(o),e.next=7,t.window.showInputBox({prompt:"Enter new name",placeHolder:"",value:a});case 7:if((s=e.sent)&&s!=a){e.next=10;break}return e.abrupt("return");case 10:if(e.prev=10,c=of(i,s)){e.next=15;break}return t.window.showErrorMessage("Invalid name: '".concat(s,"'")),e.abrupt("return");case 15:return e.prev=15,e.next=18,t.workspace.fs.stat(t.Uri.file(c));case 18:return t.window.showErrorMessage("A file or folder named '".concat(n.basename(c),"' already exists.")),e.abrupt("return");case 22:e.prev=22,e.t0=e.catch(15);case 24:return e.next=26,t.workspace.fs.rename(t.Uri.file(o),t.Uri.file(c),{overwrite:!1});case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(10),t.window.showErrorMessage("Failed to rename: ".concat(e.t1.message));case 31:case"end":return e.stop()}}),e,null,[[10,28],[15,22]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Rv(i,n,o,a,s,"next",e)}function s(e){Rv(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}()),t.commands.registerCommand("codeWebChat.delete",function(){var e,r=(e=Vm().mark((function e(r){var n,o,i,a;return Vm().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r&&r.resourceUri){e.next=2;break}return e.abrupt("return");case 2:return n=r.resourceUri.fsPath,o=t.Uri.file(n),e.next=6,t.window.showWarningMessage("Are you sure you want to delete this item?",{modal:!0},"Delete");case 6:if("Delete"==e.sent){e.next=9;break}return e.abrupt("return");case 9:if(e.prev=9,i=t.workspace.textDocuments,!(a=i.find((function(e){return e.uri.fsPath==n})))){e.next=17;break}return e.next=15,t.window.showTextDocument(a.uri,{preview:!1});case 15:return e.next=17,t.commands.executeCommand("workbench.action.closeActiveEditor");case 17:return e.next=19,t.workspace.fs.delete(o,{recursive:!0});case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),t.window.showErrorMessage("Failed to delete: ".concat(e.t0.message));case 24:case"end":return e.stop()}}),e,null,[[9,21]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Hm(i,n,o,a,s,"next",e)}function s(e){Hm(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}()),og(s,o),$v(o),rv(o),mv({command:"codeWebChat.openDocumentation",url:"https://codeweb.chat/"}),mv({command:"codeWebChat.openRepository",url:"https://github.com/robertpiosik/CodeWebChat"}),mv({command:"codeWebChat.openX",url:"https://x.com/robertpiosik"}),mv({command:"codeWebChat.openReddit",url:"https://www.reddit.com/r/CodeWebChat/"}),mv({command:"codeWebChat.rateExtension",url:"https://marketplace.visualstudio.com/items?itemName=robertpiosik.gemini-coder&ssr=false#review-details"}),t.commands.registerCommand("codeWebChat.openSettings",(function(){t.commands.executeCommand("workbench.action.openSettings","@ext:robertpiosik.gemini-coder")}))]));case 10:case"end":return e.stop()}}),e)}))),_g.apply(this,arguments)}})(),module.exports=i})();
//# sourceMappingURL=extension.js.map